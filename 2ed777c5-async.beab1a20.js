(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2ed777c5"],{f0e8d3d2:function(e,t,r){r.d(t,"__esModule",{value:!0}),r.e(t,{default:function(){return tV;}});var l=r("777fffbe"),n=r("852bbaa9"),a=r("1a7c85b4"),i=r("13dfe186"),o=l._(i),s=r("85d53cee"),d=l._(s),c=r("47ffc2fb"),u=r("1ee4d6ad"),h=l._(u),f=r("07d5c3d6"),x=l._(f),g=r("d2d0b3b6"),m=l._(g),p=r("d322be42"),y=n._(p),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},w=r("85c4e0d9"),b=l._(w),j=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:v}));}),C=r("f6ee8121"),S=l._(C),k=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:S.default}));}),M=r("70bd2056"),R=l._(M),I=r("b2a1469e"),z=l._(I),L=r("e9bcd22d"),D=l._(L),E=r("2aa4d12e"),A=l._(E),T=r("ea21718c"),B=l._(T),N=r("6caefff4"),H=l._(N),_=r("92be0fc5"),P=l._(_),$=r("e23084de"),W=l._($),U=r("d4a32650"),F=l._(U),V=r("6effc0fd"),G=l._(V),O=r("34f06567"),X=l._(O),Y=r("c9d8dc0b"),K=l._(Y),q=r("a1e53af5"),Z=l._(q),J=r("dfa4ac87"),Q=l._(J);function ee(e,t){let r=document.createElement("canvas");return r.width=e,r.height=t,r;}function et(e,t,r){let l=e.width,n=e.height,a=e.data,i=new Uint8ClampedArray(a.length),o=Math.floor(r/2);for(let e=0;e<n;e++)for(let s=0;s<l;s++){let d=0,c=0,u=0,h=0;for(let i=0;i<r;i++)for(let f=0;f<r;f++){let x=s+f-o,g=e+i-o;if(x<0||x>=l||g<0||g>=n)continue;let m=(g*l+x)*4,p=t[i*r+f];d+=a[m]*p,c+=a[m+1]*p,u+=a[m+2]*p,h+=a[m+3]*p;}let f=(e*l+s)*4;i[f]=Math.min(255,Math.max(0,d)),i[f+1]=Math.min(255,Math.max(0,c)),i[f+2]=Math.min(255,Math.max(0,u)),i[f+3]=Math.min(255,Math.max(0,h||a[f+3]));}return e.data.set(i),e;}let er={sharpen:[0,-1,0,-1,5,-1,0,-1,0],blur3:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],gaussian5:[1/273,4/273,7/273,4/273,1/273,4/273,16/273,26/273,16/273,4/273,7/273,26/273,41/273,26/273,7/273,4/273,16/273,26/273,16/273,4/273,1/273,4/273,7/273,4/273,1/273],generateBoxBlurKernel(e){let t=0|e,r=t*t;return Array(r).fill(1/r);},generateGaussianKernel(e){let t=0|e,r=t/2,l=2*r*r,n=[],a=0;for(let e=-t;e<=t;e++)for(let r=-t;r<=t;r++){let t=Math.exp(-(r*r+e*e)/l);n.push(t),a+=t;}return n.map(e=>e/a);}},el=(e,t=0,r=255)=>Math.min(r,Math.max(t,e)),en=e=>Math.min(1,Math.max(0,e)),ea=(e,t,r)=>{let l=Math.max(e/=255,t/=255,r/=255),n=Math.min(e,t,r),a=0,i=0,o=(l+n)/2;if(l!==n){let s=l-n;switch(i=o>.5?s/(2-l-n):s/(l+n),l){case e:a=(t-r)/s+(t<r?6:0);break;case t:a=(r-e)/s+2;break;case r:a=(e-t)/s+4;}a/=6;}return[a,i,o];},ei=(e,t,r)=>{let l,n,a;if(0===t)l=n=a=r;else{let i=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e,o=r<.5?r*(1+t):r+t-r*t,s=2*r-o;l=i(s,o,e+1/3),n=i(s,o,e),a=i(s,o,e-1/3);}return[Math.round(255*l),Math.round(255*n),Math.round(255*a)];},eo=(e,{highlights:t=0,shadows:r=0,whites:l=0,blacks:n=0,vibrance:a=0,saturation:i=0,clarity:o=0,dehaze:s=0})=>{let d=e.data,c=0!==o?new Uint8ClampedArray(d):null;for(let e=0;e<d.length;e+=4){let u=d[e],h=d[e+1],f=d[e+2],x=.299*u+.587*h+.114*f;if(x>192&&0!==t){let e=(x-192)/63;u=el(u+t*e),h=el(h+t*e),f=el(f+t*e);}if(x<64&&0!==r){let e=1-x/64;u=el(u+r*e),h=el(h+r*e),f=el(f+r*e);}if(u=el(u+l-n),h=el(h+l-n),f=el(f+l-n),0!==s&&(u=el(u*(1+s/100)),h=el(h*(1-s/200)),f=el(f*(1-s/200))),0!==a||0!==i){let e=[u,h,f];ed(e,0,{vibrance:a,saturation:i}),[u,h,f]=e;}if(0!==o&&c){let t=o/100*(x-(.299*c[e]+.587*c[e+1]+.114*c[e+2]));u=el(u+t),h=el(h+t),f=el(f+t);}d[e]=u,d[e+1]=h,d[e+2]=f;}return e;},es=(e,t,r)=>{let[l,n,a]=ea(e[t],e[t+1],e[t+2]);a=en(a*(1+r/100));let[i,o,s]=ei(l,n=en(n*(1-Math.abs(r)/300)),a);e[t]=i,e[t+1]=o,e[t+2]=s;},ed=(e,t,{vibrance:r=0,saturation:l=0})=>{let[n,a,i]=ea(e[t],e[t+1],e[t+2]);0!==l&&(a=en(a*(1+l/100))),0!==r&&(a=en(a+r/100*(1-a)*(1-a)));let[o,s,d]=ei(n,a,i);e[t]=o,e[t+1]=s,e[t+2]=d;},ec=[{name:"red",range:[345,15]},{name:"orange",range:[15,45]},{name:"yellow",range:[45,75]},{name:"green",range:[75,165]},{name:"aqua",range:[165,195]},{name:"blue",range:[195,255]},{name:"purple",range:[255,285]},{name:"magenta",range:[285,345]}],eu=(e,t)=>{let r=e.data;for(let e=0;e<r.length;e+=4){let[l,n,a]=[r[e],r[e+1],r[e+2]],[i,o,s]=ea(l,n,a),d=(360*i+360)%360,c=ec.find(({range:e})=>{let[t,r]=e;return t<=r?d>=t&&d<=r:d>=t||d<=r;});if(!c){[r[e],r[e+1],r[e+2]]=ei(i,o,s);continue;}let u=t[c.name];if(!u){[r[e],r[e+1],r[e+2]]=ei(i,o,s);continue;}let[h,f]=c.range,x=f;h>x&&(x+=360);let g=d;if(g<h&&(g+=360),"number"==typeof u.h&&0!==u.h){let e=g+u.h;e<h&&(e=h),e>x&&(e=x),i=(d=(e%360+360)%360)/360;}"number"==typeof u.s&&0!==u.s&&(o=en(o*(1+(1>=Math.abs(u.s)?100*u.s:u.s)/100))),"number"==typeof u.l&&0!==u.l&&(s=en(s*(1+(1>=Math.abs(u.l)?100*u.l:u.l)/100))),[r[e],r[e+1],r[e+2]]=ei(i,o,s);}return e;},eh=(e,t,r,l)=>{if(!t.current)return;let n=t.current,a=ee(n.width,n.height);a.getContext("2d").drawImage(n,0,0);let i=ee(n.height,n.width),o=i.getContext("2d");o.translate(i.width/2,i.height/2),o.rotate(e*Math.PI/180),o.drawImage(a,-a.width/2,-a.height/2),t.current.width=i.width,t.current.height=i.height,r.current.width=i.width,r.current.height=i.height;let s=t.current.getContext("2d");s.clearRect(0,0,i.width,i.height),s.drawImage(i,0,0),l.push(t.current.toDataURL(),`Rotate ${e}`);},ef=async e=>{if(e.current)try{let t=await function(e,t="image/png",r=.92){return new Promise(l=>e.toBlob(e=>l(e),t,r));}(e.current,"image/png");await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),K.default.success("Image copied to clipboard");}catch(e){console.warn("clipboard failed",e),K.default.error("Copy failed (browser may not support)");}},ex=(e,t)=>{if(!e.current)return;let r=e.current.getContext("2d"),l=ee(e.current.width,e.current.height);l.getContext("2d").drawImage(e.current,0,0),r.save(),r.clearRect(0,0,e.current.width,e.current.height),r.scale(-1,1),r.drawImage(l,-e.current.width,0),r.restore(),t.push(e.current.toDataURL(),"Flip horizontal");},eg=(e,t)=>{if(!e.current)return;let r=e.current.getContext("2d"),l=ee(e.current.width,e.current.height);l.getContext("2d").drawImage(e.current,0,0),r.save(),r.clearRect(0,0,e.current.width,e.current.height),r.scale(1,-1),r.drawImage(l,0,-e.current.height),r.restore(),t.push(e.current.toDataURL(),"Flip vertical");},em=(e,t,r,l,n)=>{if(!e.current||!r)return;let a=ee(Math.max(1,Math.round(r.w)),Math.max(1,Math.round(r.h)));a.getContext("2d").drawImage(e.current,r.x,r.y,r.w,r.h,0,0,r.w,r.h),e.current.width=a.width,e.current.height=a.height,t.current.width=a.width,t.current.height=a.height;let i=e.current.getContext("2d");i.clearRect(0,0,a.width,a.height),i.drawImage(a,0,0),l(null),n.push(e.current.toDataURL(),"Cropped");},ep=(e,t,r)=>{let l=t.current;if(!l)return null;let n=l.getBoundingClientRect(),a=Math.floor((e.clientX-n.left)/r),i=Math.floor((e.clientY-n.top)/r);if(a<0||i<0||a>=l.width||i>=l.height)return null;let o=l.getContext("2d",{willReadFrequently:!0});if(!o)return null;let s=o.getImageData(a,i,1,1).data;return`#${[s[0],s[1],s[2]].map(e=>e.toString(16).padStart(2,"0")).join("")}`;},ey={blur:0,gaussian:0,sharpen:0,texture:0,clarity:0,bgThreshold:0,bgThresholdBlack:0,brightness:0,contrast:0,highlights:0,shadows:0,whites:0,blacks:0,vibrance:0,saturation:0,dehaze:0,hslAdjustments:{}},ev=null,ew=(e,t,{blur:r=0,gaussian:l=0,sharpen:n=0,bgThreshold:a=0,bgThresholdBlack:i=0,brightness:o=0,contrast:s=0,texture:d=0,clarity:c=0,highlights:u=0,shadows:h=0,whites:f=0,blacks:x=0,vibrance:g=0,saturation:m=0,dehaze:p=0,hslAdjustments:y={}},v,w)=>{if(!e.current||!t)return;let b=e.current.getContext("2d"),j=t.getContext("2d");if(ev||(ev=j.getImageData(0,0,t.width,t.height)),!ev)return;let C=function(e){let t=new ImageData(e.width,e.height);return t.data.set(new Uint8ClampedArray(e.data)),t;}(ev);if(0===r&&0===l&&0===n&&0===d&&0===c&&0===a&&0===i&&0===o&&0===s&&0===u&&0===h&&0===f&&0===x&&0===g&&0===m&&0===p&&0===Object.keys(y).length){b.putImageData(C,0,0),e.current&&w(eb(e.current));return;}if(r>0){let e=r%2==0?r+1:r;et(C,er.generateBoxBlurKernel(e),e);}if(l>0&&et(C,er.generateGaussianKernel(l),2*l+1),n>0&&et(C,er.sharpen.map(e=>5===e?1+4*n:-1===e?-n:e),3),0!==d&&et(C,[0,-1,0,-1,5+.05*d,-1,0,-1,0],3),0!==c&&et(C,[0,-1,0,-1,5+.08*c,-1,0,-1,0],3),a>0&&function(e,t=0){t=255-t;let r=e.data;for(let e=0;e<r.length;e+=4)r[e]>t&&r[e+1]>t&&r[e+2]>t&&(r[e+3]=0);}(C,a),i>0&&function(e,t=0){let r=e.data;for(let e=0;e<r.length;e+=4)r[e]<t&&r[e+1]<t&&r[e+2]<t&&(r[e+3]=0);}(C,i),(0!==o||0!==s)&&function(e,t=0,r=0){let l=e.data,n=r/100+1,a=128*(1-n);for(let e=0;e<l.length;e+=4)l[e]=Math.min(255,Math.max(0,l[e]*n+a+t)),l[e+1]=Math.min(255,Math.max(0,l[e+1]*n+a+t)),l[e+2]=Math.min(255,Math.max(0,l[e+2]*n+a+t));}(C,o,s),0!==u||0!==h||0!==f||0!==x||0!==g||0!==m||0!==p){let e=C.data;for(let t=0;t<e.length;t+=4)p&&es(e,t,p),(g||m)&&ed(e,t,{vibrance:g,saturation:m});eo(C,{highlights:u,shadows:h,whites:f,blacks:x,vibrance:g,saturation:m,clarity:c,dehaze:p});}Object.keys(y).length>0&&eu(C,y),b.putImageData(C,0,0);let S=Object.entries({blur:r,gaussian:l,sharpen:n,texture:d,clarity:c,bgThreshold:a,bgThresholdBlack:i,brightness:o,contrast:s,highlights:u,shadows:h,whites:f,blacks:x,vibrance:g,saturation:m,dehaze:p,hslAdjustments:y}).filter(([e,t])=>ey[e]!==t);if(S.length>0){let t=S.map(([e,t])=>`${e}=${JSON.stringify(t)}`).join(", ");v.push(e.current.toDataURL(),`${t}`),ey={blur:r,gaussian:l,sharpen:n,texture:d,clarity:c,bgThreshold:a,bgThresholdBlack:i,brightness:o,contrast:s,highlights:u,shadows:h,whites:f,blacks:x,vibrance:g,saturation:m,dehaze:p,hslAdjustments:y};}e.current&&w(eb(e.current));},eb=e=>{if(!e)return{red:Array(256).fill(0),green:Array(256).fill(0),blue:Array(256).fill(0)};let t=e.getContext("2d");if(!t)return{red:Array(256).fill(0),green:Array(256).fill(0),blue:Array(256).fill(0)};let{width:r,height:l}=e,{data:n}=t.getImageData(0,0,r,l),a=Array(256).fill(0),i=Array(256).fill(0),o=Array(256).fill(0);for(let e=0;e<n.length;e+=4)a[n[e]]++,i[n[e+1]]++,o[n[e+2]]++;return{red:a,green:i,blue:o};},ej=(e,t,r,l,n,a,i)=>{let o=new Image;o.onload=()=>{var e,i;let s=(null===(e=t.current)||void 0===e?void 0:e.width)||o.naturalWidth,d=(null===(i=t.current)||void 0===i?void 0:i.height)||o.naturalHeight,c=o.naturalWidth,u=o.naturalHeight,h=Math.min(1,Math.min(s/(1.2*c),d/(1.2*u))),f=Math.round((s-(c=Math.round(c*h)))/2),x=Math.round((d-(u=Math.round(u*h)))/2),g=`${Date.now()}_${Math.round(1e4*Math.random())}`,m={id:g,type:"image",img:o,rect:{x:f,y:x,w:c,h:u},opacity:1,blend:"source-over"};r(e=>[...e,m]),l(g),n(!0),a(),K.default.success("Overlay image added");},o.onerror=()=>K.default.error("Failed to load overlay image"),o.src=URL.createObjectURL(e),i("move");},eC=async(e,t,r,l)=>{if(!t.current)return;let n=t.current,a=ee(n.width,n.height),i=a.getContext("2d");for(let e of(i.clearRect(0,0,a.width,a.height),i.drawImage(n,0,0),r))try{if(i.globalAlpha=e.opacity,i.globalCompositeOperation=e.blend||"source-over","image"===e.type&&e.img)i.drawImage(e.img,e.rect.x,e.rect.y,e.rect.w,e.rect.h);else if("text"===e.type){let t=e.fontItalic?"italic":"normal",r=e.fontWeight||"normal",l=e.fontSize||16;i.font=`${t} ${r} ${l}px ${e.font||"Arial"}`,i.fillStyle=e.textColor||"#000000",i.textAlign=e.textAlign||"left",i.textBaseline="top";let n=(e.text||"").split("\n"),a=1.2*l,o=e.rect.y;for(let t of n){let r=e.rect.x;if("center"===e.textAlign?r+=e.rect.w/2:"right"===e.textAlign&&(r+=e.rect.w),i.fillText(t,r,o),"underline"===e.textDecoration){let n=i.measureText(t);i.strokeStyle=e.textColor||"#000000",i.lineWidth=1,i.beginPath(),i.moveTo(r,o+l),i.lineTo(r+n.width,o+l),i.stroke();}else if("line-through"===e.textDecoration){let n=i.measureText(t);i.strokeStyle=e.textColor||"#000000",i.lineWidth=1,i.beginPath(),i.moveTo(r,o+l/2),i.lineTo(r+n.width,o+l/2),i.stroke();}o+=a;}}}catch(e){}i.globalAlpha=1,i.globalCompositeOperation="source-over";let o=await new Promise(t=>a.toBlob(e=>t(e),e?"image/jpeg":"image/png",.92));if(o){l&&l(o);let t=URL.createObjectURL(o),r=document.createElement("a");r.href=t,r.download=e?"edited.jpg":"edited.png",r.click(),URL.revokeObjectURL(t),K.default.success("Exported image (with overlays)");}},eS=(e,t,r,l,n)=>{if(!e.current)return;let a=n?t.filter(e=>e.id===n):t.slice();if(0===a.length)return;let i=e.current.getContext("2d");for(let e of a)try{if(i.save(),i.globalAlpha=e.opacity,i.globalCompositeOperation=e.blend||"source-over","image"===e.type&&e.img)i.drawImage(e.img,e.rect.x,e.rect.y,e.rect.w,e.rect.h);else if("text"===e.type){let t=e.fontItalic?"italic":"normal",r=e.fontWeight||"normal",l=e.fontSize||16;i.font=`${t} ${r} ${l}px ${e.font||"Arial"}`,i.fillStyle=e.textColor||"#000000",i.textAlign=e.textAlign||"left",i.textBaseline="top";let n=(e.text||"").split("\n"),a=1.2*l,o=e.rect.y;for(let t of n){let r=e.rect.x;if("center"===e.textAlign?r+=e.rect.w/2:"right"===e.textAlign&&(r+=e.rect.w),i.fillText(t,r,o),"underline"===e.textDecoration){let n=i.measureText(t);i.strokeStyle=e.textColor||"#000000",i.lineWidth=1,i.beginPath(),i.moveTo(r,o+l),i.lineTo(r+n.width,o+l),i.stroke();}else if("line-through"===e.textDecoration){let n=i.measureText(t);i.strokeStyle=e.textColor||"#000000",i.lineWidth=1,i.beginPath(),i.moveTo(r,o+l/2),i.lineTo(r+n.width,o+l/2),i.stroke();}o+=a;}}i.restore();}catch(e){}r(e=>e.filter(e=>!a.find(t=>t.id===e.id))),l.push(e.current.toDataURL(),n?"Merge layer":"Merge layers"),K.default.success("Layer(s) merged into base");},ek=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,opacity:r}:e)),eM=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,blend:r}:e)),eR=(e,t)=>e(e=>{let r=e.findIndex(e=>e.id===t);if(-1===r||r===e.length-1)return e;let l=e.slice(),n=l[r+1];return l[r+1]=l[r],l[r]=n,l;}),eI=(e,t)=>e(e=>{let r=e.findIndex(e=>e.id===t);if(r<=0)return e;let l=e.slice(),n=l[r-1];return l[r-1]=l[r],l[r]=n,l;}),ez=(e,t,r)=>e(e=>{let l=e.filter(e=>e.id!==t);return r&&r(l.length?l[l.length-1].id:null),l;}),eL=(e,t)=>{e(t);},eD=(e,t,r,l,n,a,i)=>{var o,s;if(!a.text.trim()){K.default.warning("Please enter text first");return;}let d=(null===(o=e.current)||void 0===o?void 0:o.width)||400,c=(null===(s=e.current)||void 0===s?void 0:s.height)||300,u=i?Math.round(i.x):Math.round(d/4),h=i?Math.round(i.y):Math.round(c/4),f=`text_${Date.now()}_${Math.round(1e4*Math.random())}`,x={id:f,type:"text",rect:{x:u,y:h,w:Math.min(300,d/2),h:a.fontSize+20},opacity:1,blend:"source-over",text:a.text,font:a.font,fontSize:a.fontSize,fontWeight:a.fontWeight,fontItalic:a.fontItalic,textDecoration:a.textDecoration,textColor:a.textColor,textAlign:a.textAlign};t(e=>[...e,x]),r(f),l(!0),n(),K.default.success("Text layer added");},eE=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,text:r}:e)),eA=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,font:r}:e)),eT=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,fontSize:r}:e)),eB=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,fontWeight:r}:e)),eN=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,fontItalic:r}:e)),eH=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,textDecoration:r}:e)),e_=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,textColor:r}:e)),eP=(e,t,r)=>e(e=>e.map(e=>e.id===t?{...e,textAlign:r}:e)),e$=(e,t,r)=>{if(!e.current||!t.current)return;let{zoom:l,cropRect:n,rulerPoints:a,perspectivePoints:i,hoverColor:o,tool:s,drawColor:d,drawLineWidth:c,layers:u,overlaySelected:h,activeLayerId:f}=r,x=e.current.getContext("2d");if(x.clearRect(0,0,e.current.width,e.current.height),n&&(x.save(),x.strokeStyle="#00aaff",x.lineWidth=2,x.setLineDash([6,4]),x.strokeRect(n.x,n.y,n.w,n.h),x.restore()),a&&(x.save(),x.strokeStyle="#ffcc00",x.lineWidth=2,x.beginPath(),x.moveTo(a.x1,a.y1),x.lineTo(a.x2,a.y2),x.stroke(),x.restore()),i){x.save();let e=[];for(let t=0;t<8;t+=2){let r=i[t],l=i[t+1];isNaN(r)||isNaN(l)||e.push({x:r,y:l});}if(e.length>=2){x.strokeStyle="rgba(0,255,0,0.9)",x.lineWidth=2,x.setLineDash([4,4]),x.beginPath(),x.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)x.lineTo(e[t].x,e[t].y);4===e.length&&x.closePath(),x.stroke();}x.fillStyle="rgba(0,255,0,0.9)";for(let e=0;e<8;e+=2){let t=i[e],r=i[e+1];isNaN(t)||isNaN(r)||x.fillRect(t-5,r-5,10,10);}x.restore();}if(o&&"color"===s){let e=t.current.getBoundingClientRect(),r=(o.x-e.left)/l,n=(o.y-e.top)/l;x.save(),x.strokeStyle=o.color,x.lineWidth=2/l,x.beginPath(),x.arc(r,n,8/l,0,2*Math.PI),x.stroke(),x.restore();}for(let e of u)try{if(x.save(),x.globalAlpha=e.opacity,x.globalCompositeOperation=e.blend||"source-over","image"===e.type&&e.img)x.drawImage(e.img,e.rect.x,e.rect.y,e.rect.w,e.rect.h);else if("text"===e.type){let t=e.fontItalic?"italic":"normal",r=e.fontWeight||"normal",l=e.fontSize||16;x.font=`${t} ${r} ${l}px ${e.font||"Arial"}`,x.fillStyle=e.textColor||"#000000",x.textAlign=e.textAlign||"left",x.textBaseline="top";let n=(e.text||"").split("\n"),a=1.2*l,i=e.rect.y;for(let t of n){let r=e.rect.x;if("center"===e.textAlign?r+=e.rect.w/2:"right"===e.textAlign&&(r+=e.rect.w),x.fillText(t,r,i),"underline"===e.textDecoration){let n=x.measureText(t);x.strokeStyle=e.textColor||"#000000",x.lineWidth=1,x.beginPath(),x.moveTo(r,i+l),x.lineTo(r+n.width,i+l),x.stroke();}else if("line-through"===e.textDecoration){let n=x.measureText(t);x.strokeStyle=e.textColor||"#000000",x.lineWidth=1,x.beginPath(),x.moveTo(r,i+l/2),x.lineTo(r+n.width,i+l/2),x.stroke();}i+=a;}}x.restore();}catch(e){}if(h&&f){let e=u.find(e=>e.id===f);if(e){let t=e.rect;x.save(),x.globalAlpha=1,x.globalCompositeOperation="source-over",x.strokeStyle="rgba(255,165,0,0.95)",x.lineWidth=2,x.setLineDash([6,3]),x.strokeRect(t.x,t.y,t.w,t.h),x.setLineDash([]),x.fillStyle="rgba(255,165,0,0.95)";let r=Math.max(6/Math.max(1,l),6),n=r/2;[[t.x,t.y],[t.x+t.w,t.y],[t.x,t.y+t.h],[t.x+t.w,t.y+t.h]].forEach(([e,t])=>x.fillRect(e-n,t-n,r,r)),x.restore();}}if(o&&"draw"===s){let e=t.current.getBoundingClientRect(),r=(o.x-e.left)/l,n=(o.y-e.top)/l;x.save(),x.strokeStyle=d,x.lineWidth=2/l,x.beginPath(),x.arc(r,n,c/2,0,2*Math.PI),x.stroke(),x.restore();}},eW=async(e,t,r,l,n,a)=>{if(!e.current||!r.current){K.default.warning("No perspective points defined.");return;}let i=r.current,o=[];for(let e=0;e<8;e+=2){let t=i[e],r=i[e+1];isNaN(t)||isNaN(r)||o.push([t,r]);}if(4!==o.length){K.default.error("Please select 4 corner points before applying perspective correction.");return;}try{let i=(e=>{let t=e.reduce((e,t)=>e+t[0],0)/e.length,r=e.reduce((e,t)=>e+t[1],0)/e.length,l=e.map(e=>({pt:e,angle:Math.atan2(e[1]-r,e[0]-t)})).sort((e,t)=>e.angle-t.angle).map(e=>e.pt),n=0;for(let e=0;e<l.length;e++){let[t,r]=l[e],[a,i]=l[(e+1)%l.length];n+=t*i-a*r;}n>0&&l.reverse();let a=0;for(let e=1;e<l.length;e++)(l[e][1]<l[a][1]||l[e][1]===l[a][1]&&l[e][0]<l[a][0])&&(a=e);return Array.from({length:l.length},(e,t)=>l[(a+t)%l.length]);})(o),s=[Math.round(i[0][0]),Math.round(i[0][1]),Math.round(i[1][0]),Math.round(i[1][1]),Math.round(i[2][0]),Math.round(i[2][1]),Math.round(i[3][0]),Math.round(i[3][1])],d=function(e,t,r,l){let n=ee(r,l),a=n.getContext("2d"),i=e.getContext("2d").getImageData(0,0,e.width,e.height),o=a.createImageData(r,l),s=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]],[t[6],t[7]]],d=function(e,t){if(4!==e.length||4!==t.length)throw Error("computeHomography requires exactly 4 points for src and dst");let r=[];for(let l=0;l<4;l++){let[n,a]=e[l],[i,o]=t[l];r.push([-n,-a,-1,0,0,0,n*i,a*i,i]),r.push([0,0,0,-n,-a,-1,n*o,a*o,o]);}let l=[],n=[];for(let e=0;e<8;e++)l.push(r[e].slice(0,8)),n.push(-r[e][8]);let a=[...function(e,t){let r=t.length,l=e.map((e,r)=>[...e,t[r]]);for(let e=0;e<r;e++){let t=e;for(let n=e+1;n<r;n++)Math.abs(l[n][e])>Math.abs(l[t][e])&&(t=n);[l[e],l[t]]=[l[t],l[e]];for(let t=e+1;t<r;t++){let n=l[t][e]/l[e][e];for(let a=e;a<=r;a++)l[t][a]-=n*l[e][a];}}let n=Array(r).fill(0);for(let e=r-1;e>=0;e--){let t=l[e][r];for(let a=e+1;a<r;a++)t-=l[e][a]*n[a];n[e]=t/l[e][e];}return n;}(l,n),1];return[[a[0],a[1],a[2]],[a[3],a[4],a[5]],[a[6],a[7],a[8]]];}(s,[[0,0],[r,0],[r,l],[0,l]]);for(let t=0;t<l;t++)for(let l=0;l<r;l++){let[n,a]=function(e,t,r){let[[l,n,a],[i,o,s],[d,c,u]]=e,h=l*(o*u-s*c)-n*(i*u-s*d)+a*(i*c-o*d);if(1e-10>Math.abs(h))return[0,0];let f=[[(o*u-s*c)/h,(a*c-n*u)/h,(n*s-a*o)/h],[(s*d-i*u)/h,(l*u-a*d)/h,(a*i-l*s)/h],[(i*c-o*d)/h,(n*d-l*c)/h,(l*o-n*i)/h]],x=f[0][0]*t+f[0][1]*r+f[0][2],g=f[1][0]*t+f[1][1]*r+f[1][2],m=f[2][0]*t+f[2][1]*r+f[2][2];return[x/m,g/m];}(d,l,t);if(n>=0&&n<e.width&&a>=0&&a<e.height){let s=Math.floor(n),d=(Math.floor(a)*e.width+s)*4,c=(t*r+l)*4;o.data[c]=i.data[d],o.data[c+1]=i.data[d+1],o.data[c+2]=i.data[d+2],o.data[c+3]=i.data[d+3];}}return a.putImageData(o,0,0),n;}(e.current,s,e.current.width,e.current.height);e.current.width=d.width,e.current.height=d.height,t.current.width=d.width,t.current.height=d.height;let c=e.current.getContext("2d");c.clearRect(0,0,d.width,d.height),c.drawImage(d,0,0),l.push(e.current.toDataURL(),"Perspective corrected"),r.current=null,n(!1),a(),K.default.success("Perspective correction applied.");}catch(e){console.error("Perspective transform failed",e),K.default.error("Failed to apply perspective correction.");}},eU=e=>{let{canvasX:t,canvasY:r,canvasRect:l,containerRef:n,inlineEditorRef:a,zoom:i,initial:o="",layerId:s,layer:d,textColor:c="#000",textFont:u="Arial",textFontSize:h=16,textWeight:f="normal",textItalic:x=!1,onCommit:g,onCancel:m}=e;a.current&&(a.current.remove(),a.current=null);let p=n.current,y=p?p.getBoundingClientRect():{left:0,top:0},v=l.left+t*i,w=l.top+r*i,b=v-y.left,j=w-y.top,C=document.createElement("textarea");C.value=o,C.style.position="absolute",C.style.left=`${b}px`,C.style.top=`${j}px`,C.style.zIndex="10000",C.style.minWidth="60px",C.style.minHeight="24px",C.style.background="transparent",C.style.border="1px dashed rgba(0,0,0,0.4)",C.style.color=d&&d.textColor||c||"#000",C.style.fontFamily=d&&d.font||u||"Arial";let S=d&&d.fontSize||h||16;C.style.fontSize=`${S*i}px`,C.style.fontWeight=String(d&&d.fontWeight||f||"normal"),C.style.fontStyle=d&&d.fontItalic||x?"italic":"normal",C.style.resize="both",C.style.outline="none",C.style.padding="4px",C.placeholder="Type text and press Enter";let k=()=>{g(C.value||""),C.remove(),a.current=null;},M=()=>{C.remove(),a.current=null,m&&m();};C.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),M()):(e.preventDefault(),k());}),C.addEventListener("blur",()=>{k();});let R=()=>{C.style.position="fixed",C.style.left=`${v}px`,C.style.top=`${w}px`,C.style.zIndex="200000",document.body.appendChild(C),a.current=C,C.focus(),C.selectionStart=C.selectionEnd=C.value.length,console.log("[DEBUG] appended editor to document.body at",{fixedLeft:v,fixedTop:w});};p?(()=>{try{if(p)p.appendChild(C);else throw Error("no container");}catch(e){console.warn("[DEBUG] append to container failed, will fallback to body",e),R();return;}a.current=C,C.focus(),C.selectionStart=C.selectionEnd=C.value.length,requestAnimationFrame(()=>{try{let e=C.getBoundingClientRect();0===e.width&&0===e.height&&(console.warn("[DEBUG] appended editor has zero size; falling back to body"),C.remove(),R());}catch(e){}});})():R();},eF=({canvasRef:e,overlayRef:t,containerRef:r,offset:l,zoom:n,tool:i,currentCursor:o,hoverColor:s,onMouseDown:d,onMouseMove:c,onMouseUp:u,onAddImage:h})=>{let f=y.default.useRef(null);return(0,a.jsxs)("div",{ref:r,onMouseDown:d,onMouseMove:c,onMouseUp:u,style:{width:"100%",height:"100vh",overflow:"hidden",border:"1px solid #eee",position:"relative",background:"#fafafa",cursor:o},children:[(0,a.jsx)("input",{ref:f,type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{let t=e.target.files&&e.target.files[0];t&&h&&h(t),f.current&&(f.current.value="");}}),(0,a.jsx)("div",{style:{position:"absolute",left:8,top:8,zIndex:9999},children:(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(R.default,{}),onClick:()=>f.current&&f.current.click(),children:"Add Image"})}),(0,a.jsx)("canvas",{ref:e,style:{transform:`translate(${l.x}px, ${l.y}px) scale(${n})`,transformOrigin:"top left",display:"block"}}),(0,a.jsx)("canvas",{ref:t,style:{position:"absolute",left:0,top:0,pointerEvents:"none",transform:`translate(${l.x}px, ${l.y}px) scale(${n})`,transformOrigin:"top left"}}),s&&"color"===i&&(0,a.jsxs)("div",{style:{position:"fixed",left:s.x+12,top:s.y+12,background:"#fff",padding:"4px 8px",borderRadius:4,boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:12,zIndex:999999,pointerEvents:"none",display:"flex",alignItems:"center",gap:6},children:[(0,a.jsx)("span",{style:{display:"inline-block",width:12,height:12,background:s.color,border:"1px solid #ccc"}}),s.color]})]});};var eV=r("764a8673"),eG=l._(eV),eO=r("34f8e1c9"),eX=l._(eO),eY=r("076b2e3c"),eK=l._(eY),eq=r("047b2dca"),eZ=l._(eq),eJ=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:eZ.default}));}),eQ=r("3dfab21c"),e0=l._(eQ),e1=r("376b0022"),e2=l._(e1),e4={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"},e8=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:e4}));}),e6={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},e5=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:e6}));}),e3=r("5af7999d"),e7=l._(e3),e9=r("f2806aec"),te=l._(e9),tt=r("f4444da2"),tr=l._(tt),tl=r("8e6ac0a6"),tn=l._(tl);let ta=({label:e,value:t,min:r,max:l,gradient:n,onChange:i,onChangeComplete:o})=>(0,a.jsxs)("div",{className:"custom-slider-container",children:[(0,a.jsxs)("div",{style:{width:"100%"},children:[(0,a.jsx)("span",{className:"custom-label",children:e}),(0,a.jsx)(A.default,{min:r,max:l,value:t,onChange:e=>i(Number(e)),onBlur:()=>null==o?void 0:o(),className:"custom-number",size:"small"})]}),(0,a.jsx)(tn.default,{min:r,max:l,value:t,onChange:i,onChangeComplete:o,className:"custom-slider",style:{"--custom-slider-gradient":n},handleStyle:{opacity:1}})]});var ti=r("10314b7a"),to=l._(ti),ts=r("027e0896"),td=l._(ts);let tc=({canvasRef:e,redData:t,greenData:r,blueData:l})=>{let n=(0,y.useMemo)(()=>({chart:{backgroundColor:"#2b2b2b",height:120,spacing:[5,5,5,5]},title:{text:""},xAxis:{title:{text:"",style:{color:"#fff"}},labels:{style:{color:"#fff",fontSize:"5px"}},gridLineColor:"rgba(255,255,255,0.1)"},yAxis:{title:{text:"",style:{color:"#fff"}},labels:{style:{color:"#fff",fontSize:"5px"}},gridLineColor:"rgba(255,255,255,0.1)"},legend:{enabled:!1},plotOptions:{histogram:{binWidth:4},series:{animation:!1,marker:{enabled:!1}}},series:[{name:"Red",data:t,color:"#ff4444",zIndex:3,lineWidth:1,marker:{radius:1}},{name:"Green",data:r,color:"#44ff44",zIndex:2,lineWidth:1,marker:{radius:1}},{name:"Blue",data:l,color:"#4444ff",zIndex:1,lineWidth:1,marker:{radius:1}}],credits:{enabled:!1},tooltip:{enabled:!1}}),[t,r,l]);return(0,a.jsx)(td.default,{highcharts:to.default,options:n});},{Panel:tu}=eG.default,th=({canvasRef:e,baseCanvas:t,history:r,setTool:l,brightness:n,setBrightness:i,contrast:o,setContrast:s,blur:d,setBlur:c,gaussian:u,setGaussian:f,sharpen:x,setSharpen:g,bgThreshold:m,setBgThreshold:p,bgThresholdBlack:v,setBgThresholdBlack:w,setShowPerspectiveModal:b,dpiMeasured:j,setDpiMeasured:C,exportImage:S,onExport:k,overlayRef:M,texture:R,setTexture:I,clarity:L,setClarity:D,highlights:E,setHighlights:A,shadows:T,setShadows:N,whites:H,setWhites:_,blacks:P,setBlacks:$,vibrance:W,setVibrance:U,saturation:V,setSaturation:G,dehaze:O,setDehaze:X,hslAdjustments:Y,setHslAdjustments:q})=>{let[Z,J]=(0,y.useState)("red"),[Q,ee]=(0,y.useState)({red:[],green:[],blue:[]});(0,y.useEffect)(()=>{e.current&&ee(eb(e.current));},[e.current]);let et=[{name:"red",color:"#ff4d4d"},{name:"orange",color:"#ffa500"},{name:"yellow",color:"#ffd700"},{name:"green",color:"#00c853"},{name:"aqua",color:"#00e5ff"},{name:"blue",color:"#2979ff"},{name:"purple",color:"#9c27b0"},{name:"magenta",color:"#ff00aa"}],er=(e,t)=>{var r,l,n;let a=(null===(r=et.find(t=>t.name===e))||void 0===r?void 0:r.color)||"#ffffff",i=et.findIndex(t=>t.name===e);if(-1===i)return"#555";let o=et[i].color,s=(null===(l=et[i-1])||void 0===l?void 0:l.color)||o,d=(null===(n=et[i+1])||void 0===n?void 0:n.color)||o;switch(t){case"h":return`linear-gradient(90deg, ${s}, ${o}, ${d})`;case"s":return`linear-gradient(90deg, gray, ${a})`;case"l":return`linear-gradient(90deg, black, ${a}, white)`;default:return"#555";}},el=[{key:"texture",label:"Texture",value:R,setter:I},{key:"clarity",label:"Clarity",value:L,setter:D},{key:"highlights",label:"Highlights",value:E,setter:A},{key:"shadows",label:"Shadows",value:T,setter:N},{key:"whites",label:"Whites",value:H,setter:_},{key:"blacks",label:"Blacks",value:P,setter:$}],en=[{key:"blur",label:"Box Blur",min:0,max:25,value:d,setter:c},{key:"gaussian",label:"Gaussian",min:0,max:20,value:u,setter:f},{key:"sharpen",label:"Sharpen",min:0,max:5,value:x,setter:g},{key:"bgThreshold",label:"Remove White",min:0,max:255,value:m,setter:p},{key:"bgThresholdBlack",label:"Remove Black",min:0,max:255,value:v,setter:w}],ea=()=>ew(e,t,{blur:d,gaussian:u,sharpen:x,texture:R,clarity:L,bgThreshold:m,bgThresholdBlack:v,brightness:n,contrast:o,highlights:E,shadows:T,whites:H,blacks:P,vibrance:W,saturation:V,dehaze:O,hslAdjustments:Y},r,ee);return(0,a.jsx)("div",{style:{width:260},children:(0,a.jsxs)(eG.default,{defaultActiveKey:["histogram","basic","lights","effects"],ghost:!0,expandIconPosition:"end",children:[(0,a.jsx)(tu,{header:"Histogram",children:(0,a.jsx)(tc,{canvasRef:e,redData:Q.red,greenData:Q.green,blueData:Q.blue})},"histogram"),(0,a.jsx)(tu,{header:"\u{1F6E0} Basic",children:(0,a.jsxs)(B.default,{wrap:!0,children:[(0,a.jsx)(F.default,{title:"Undo (Ctrl+Z)",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(eX.default,{}),onClick:r.undo})}),(0,a.jsx)(F.default,{title:"Redo (Ctrl+Shift+Z)",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(eK.default,{}),onClick:r.redo})}),(0,a.jsx)(F.default,{title:"Rotate left",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(eJ,{}),onClick:()=>eh(-90,e,M,r)})}),(0,a.jsx)(F.default,{title:"Rotate right",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(e0.default,{}),onClick:()=>eh(90,e,M,r)})}),(0,a.jsx)(F.default,{title:"Flip horizontal",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(e2.default,{}),onClick:()=>ex(e,r)})}),(0,a.jsx)(F.default,{title:"Flip vertical",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(e2.default,{rotate:90}),onClick:()=>eg(e,r)})}),(0,a.jsx)(F.default,{title:"Brush",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(e7.default,{}),onClick:()=>l("draw")})}),(0,a.jsx)(F.default,{title:"Text",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(tr.default,{}),onClick:()=>l("text")})}),(0,a.jsx)(F.default,{title:"Move",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(te.default,{}),onClick:()=>l("move")})})]})},"basic"),(0,a.jsxs)(tu,{header:"\u{1F506} Light",children:[(0,a.jsx)(ta,{label:"Brightness",value:n,min:-150,max:150,onChange:i,onChangeComplete:ea},"brightness"),(0,a.jsx)(ta,{label:"Contrast",value:o,min:-100,max:100,onChange:s,onChangeComplete:ea},"contrast")]},"lights"),(0,a.jsxs)(tu,{header:"\u{1F3A8} Color",children:[(0,a.jsx)(ta,{label:"Vibrance",value:W,min:-100,max:100,onChange:U,onChangeComplete:ea},"vibrance"),(0,a.jsx)(ta,{label:"Saturation",value:V,min:-100,max:100,onChange:G,onChangeComplete:ea},"saturation"),(0,a.jsx)(ta,{label:"Dehaze",value:O,min:-100,max:100,onChange:X,onChangeComplete:ea},"dehaze"),(0,a.jsx)("div",{style:{marginTop:10},children:"HSL Mixer"}),(0,a.jsx)("div",{style:{display:"flex",gap:8,marginBottom:10},children:et.map(({name:e,color:t})=>(0,a.jsx)(F.default,{title:e.toUpperCase(),children:(0,a.jsx)("div",{onClick:()=>J(e),style:{width:20,height:20,borderRadius:"50%",background:t,border:Z===e?"2px solid white":"1px solid #555",boxShadow:Z===e?"0 0 6px rgba(255,255,255,0.8)":"",cursor:"pointer"}},e)}))}),["Hue","Saturation","Luminance"].map(e=>{var t;let r=e[0].toLowerCase();return(0,a.jsx)(ta,{label:e,value:(null===(t=Y[Z])||void 0===t?void 0:t[r])??0,min:"Hue"===e?-180:-100,max:"Hue"===e?180:100,onChange:e=>q(Z,{[r]:e}),onChangeComplete:ea,gradient:er(Z,r)},e);}),(0,a.jsx)(z.default,{size:"small",onClick:()=>q(Z,{h:0,s:0,l:0}),children:"Reset"})]},"color"),(0,a.jsx)(tu,{header:"\u2728 Effects",children:el.map(({key:e,label:t,value:r,setter:l})=>(0,a.jsx)(ta,{label:t,value:r,min:-100,max:100,onChange:l,onChangeComplete:ea},e))},"effects"),(0,a.jsx)(tu,{header:"\u{1F3AD} Filters",children:en.map(({key:e,label:t,min:r,max:l,value:n,setter:i})=>(0,a.jsx)(ta,{label:t,value:n,min:r,max:l,onChange:i,onChangeComplete:ea},e))},"filters"),(0,a.jsxs)(tu,{header:"\u{1F4D0} Crop & Ruler",children:[(0,a.jsxs)(B.default,{children:[(0,a.jsx)(z.default,{icon:(0,a.jsx)(e8,{}),onClick:()=>l("crop"),children:"Crop"}),(0,a.jsx)(z.default,{onClick:()=>{b(!0),l("perspective");},children:"Perspective"})]}),(0,a.jsx)("div",{style:{marginTop:10},children:"Ruler"}),(0,a.jsxs)(B.default,{children:[(0,a.jsx)(z.default,{onClick:()=>l("ruler"),children:"\u{1F4CF} Ruler"}),(0,a.jsx)(z.default,{onClick:()=>{null==C||C(null),K.default.info("Ruler cleared");},children:"Clear"})]}),j&&(0,a.jsxs)("div",{children:["Estimated DPI: ",j]})]},"crop"),(0,a.jsx)(tu,{header:"\u{1F4E4} Export",children:(0,a.jsxs)(B.default,{children:[(0,a.jsx)(z.default,{icon:(0,a.jsx)(e5,{}),onClick:()=>S(!1,e,k),children:"PNG"}),(0,a.jsx)(z.default,{onClick:()=>S(!0,e,k),children:"JPG"}),(0,a.jsx)(z.default,{icon:(0,a.jsx)(h.default,{}),onClick:()=>ef(e),children:"Copy"})]})},"export")]})});};var tf=r("3eb6f542"),tx=l._(tf),tg=r("97125d22"),tm=l._(tg),tp=r("452a6b49"),ty=l._(tp),tv=r("54c1db7a"),tw=l._(tv),tb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"},tj=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tb}));}),tC=r("e9a76e87"),tS=l._(tC),tk=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tS.default}));}),tM=r("a0108fc4"),tR=l._(tM),tI=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tR.default}));}),tz=r("84cd549f"),tL=l._(tz),tD={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"italic",theme:"outlined"},tE=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tD}));}),tA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-left",theme:"outlined"},tT=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tA}));}),tB={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm496 424c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zm144 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-center",theme:"outlined"},tN=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tB}));}),tH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 424H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 212H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"align-right",theme:"outlined"},t_=y.forwardRef(function(e,t){return y.createElement(b.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:tH}));});let{Option:tP}=tx.default,t$=({history:e,setZoom:t,tool:r,setTool:l,brushType:n,setBrushType:i,drawColor:o,setDrawColor:s,drawLineWidth:d,setDrawLineWidth:c,brushOpacity:u,setBrushOpacity:h,brushFlow:f,setBrushFlow:x,layers:g,activeLayerId:m,setLayerOpacity:p,setLayerBlend:v,moveLayerUp:w,moveLayerDown:b,deleteLayer:j,selectLayer:C,mergeLayer:S,textContent:k,setTextContent:M,textFont:R,setTextFont:I,textFontSize:L,setTextFontSize:D,textColor:E,setTextColor:T,textWeight:N,setTextWeight:H,textItalic:_,setTextItalic:P,textDecoration:$,setTextDecoration:W,textAlign:U,setTextAlign:V,onAddTextLayer:G,isAddingText:O,setIsAddingText:X})=>{let Y=(0,y.useRef)(!1),K=(0,y.useRef)(null),q=(0,y.useRef)(u),Z=(0,y.useRef)(!1),J=(0,y.useRef)(null),Q=(0,y.useRef)(f),ee=e=>{if(0!==e.button)return;e.preventDefault(),Y.current=!0,K.current=e.clientX;let t=document.body.style.userSelect;document.body.style.userSelect="none";let l=e=>{let t=Number(e.toFixed(2));if("draw"===r){h(t);return;}if("move"===r&&g){let e=g.find(e=>e.id===m);e&&p&&p(e.id,t);}};q.current=(()=>{if("draw"===r)return u;if("move"===r&&g){let e=g.find(e=>e.id===m);return(null==e?void 0:e.opacity)??u;}return u;})();let n=e=>{if(!Y.current||null===K.current)return;let t=e.clientX-K.current;l(Math.min(1,Math.max(0,q.current+.005*t)));},a=()=>{Y.current=!1,K.current=null,document.body.style.userSelect=t,window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",a);};window.addEventListener("mousemove",n),window.addEventListener("mouseup",a);};return(0,a.jsx)("div",{style:{marginBottom:8},children:(0,a.jsxs)(B.default,{children:[(0,a.jsx)(tx.default,{style:{width:150},placeholder:"History",value:e.index,onChange:t=>e.applyHistory(t),optionLabelProp:"label",children:e.history.map((e,t)=>(0,a.jsx)(tx.default.Option,{value:t,label:e.label||`Step ${t+1}`,children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("img",{src:e.url,alt:"",style:{width:40,height:30,objectFit:"contain",border:"1px solid #ddd"}}),(0,a.jsx)("span",{children:e.label||`Step ${t+1}`})]})},t))}),(0,a.jsx)(F.default,{title:"Zoom In",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(ty.default,{}),onClick:()=>t(e=>Math.min(1.2*e,8))})}),(0,a.jsx)(F.default,{title:"Zoom Out",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(tw.default,{}),onClick:()=>t(e=>Math.max(e/1.2,.1))})}),(0,a.jsxs)(tx.default,{value:r,onChange:e=>l(e),style:{width:140},children:[(0,a.jsx)(tP,{value:"pan",children:"Pan"}),(0,a.jsx)(tP,{value:"move",children:"Move"}),(0,a.jsx)(tP,{value:"color",children:"Color Picker"}),(0,a.jsx)(tP,{value:"crop",children:"Crop"}),(0,a.jsx)(tP,{value:"ruler",children:"Ruler"}),(0,a.jsx)(tP,{value:"perspective",children:"Perspective"}),(0,a.jsx)(tP,{value:"draw",children:"Brush"}),(0,a.jsx)(tP,{value:"text",children:"Text"})]}),(0,a.jsxs)(B.default,{style:{width:"100%"},wrap:!0,children:["color"===r?(0,a.jsx)(tm.default,{value:o,onChange:e=>s(e.toHexString())}):null,"draw"===r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tx.default,{value:n,onChange:e=>i(e),style:{width:80},children:[(0,a.jsx)(tP,{value:"hard",children:"Hard"}),(0,a.jsx)(tP,{value:"soft",children:"Soft"})]}),(0,a.jsx)(tm.default,{value:o,onChange:e=>s(e.toHexString())}),(0,a.jsx)(A.default,{style:{width:100},min:1,max:500,value:d,onChange:e=>c(e||1),addonAfter:"px"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{onMouseDown:ee,style:{cursor:"ew-resize",userSelect:"none"},title:"Drag left/right to change opacity",children:"Opacity:"}),(0,a.jsx)(A.default,{min:0,max:1,step:.01,style:{width:60},value:u,onChange:e=>h(e||0)})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{onMouseDown:e=>{if(0!==e.button)return;e.preventDefault(),Z.current=!0,J.current=e.clientX,Q.current=f;let t=document.body.style.userSelect;document.body.style.userSelect="none";let r=e=>{if(!Z.current||null===J.current)return;let t=e.clientX-J.current,r=Q.current+.005*t;x(Number((r=Math.max(0,Math.min(1,r))).toFixed(2)));},l=()=>{Z.current=!1,J.current=null,Q.current=f,document.body.style.userSelect=t,window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",l);};window.addEventListener("mousemove",r),window.addEventListener("mouseup",l);},style:{cursor:"ew-resize",userSelect:"none"},title:"Drag left/right to change flow",children:"Flow:"}),(0,a.jsx)(A.default,{min:0,max:1,step:.01,style:{width:60},value:f,onChange:e=>x(e||0)})]})]}):null,"text"===r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tx.default,{value:R||"Arial",onChange:e=>I&&I(e),style:{width:100},children:[(0,a.jsx)(tP,{value:"Arial",children:"Arial"}),(0,a.jsx)(tP,{value:"Helvetica",children:"Helvetica"}),(0,a.jsx)(tP,{value:"Times New Roman",children:"Times New Roman"}),(0,a.jsx)(tP,{value:"Courier New",children:"Courier New"}),(0,a.jsx)(tP,{value:"Georgia",children:"Georgia"}),(0,a.jsx)(tP,{value:"Verdana",children:"Verdana"})]}),(0,a.jsx)(A.default,{min:8,max:200,value:L||32,onChange:e=>D&&D(e||32),addonAfter:"px",style:{width:90}}),(0,a.jsx)(tm.default,{value:E||"#000000",onChange:e=>T&&T(e.toHexString())}),(0,a.jsxs)(tx.default,{value:N||"normal",onChange:e=>H&&H(e),style:{width:80},children:[(0,a.jsx)(tP,{value:"lighter",children:"Lighter"}),(0,a.jsx)(tP,{value:"normal",children:"Normal"}),(0,a.jsx)(tP,{value:"bold",children:"Bold"}),(0,a.jsx)(tP,{value:"900",children:"900"})]}),(0,a.jsx)(F.default,{title:"Italic",children:(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tE,{}),type:_?"primary":"default",onClick:()=>P&&P(!_)})}),(0,a.jsxs)(tx.default,{value:$||"none",onChange:e=>W&&W(e),style:{width:100},children:[(0,a.jsx)(tP,{value:"none",children:"No decoration"}),(0,a.jsx)(tP,{value:"underline",children:"Underline"}),(0,a.jsx)(tP,{value:"line-through",children:"Strike"})]}),(0,a.jsx)(F.default,{title:"Align",children:(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tT,{}),type:"left"===U?"primary":"default",onClick:()=>V&&V("left")}),(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tN,{}),type:"center"===U?"primary":"default",onClick:()=>V&&V("center")}),(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(t_,{}),type:"right"===U?"primary":"default",onClick:()=>V&&V("right")})]})})]}):null,"move"===r?(0,a.jsx)(a.Fragment,{children:g&&g.length>0&&(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{style:{fontSize:12,fontWeight:600},children:"Layers"}),(0,a.jsx)(tx.default,{value:m||void 0,placeholder:"Select layer",onChange:e=>C&&C(e),style:{width:180},showSearch:!0,children:g.slice().reverse().map(e=>{var t;return(0,a.jsx)(tP,{value:e.id,label:`Layer ${e.id}`,children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("img",{src:null===(t=e.img)||void 0===t?void 0:t.src,alt:"",style:{width:40,height:28,objectFit:"cover"}}),(0,a.jsx)("span",{style:{fontSize:12},children:e.id})]})},e.id);})})]}),(0,a.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tj,{}),onClick:()=>S&&S(),children:"Merge All"})}),m&&(()=>{let e=g.find(e=>e.id===m);return e?(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tj,{}),onClick:()=>S&&S(e.id),children:"Merge"}),(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tk,{}),onClick:()=>w&&w(e.id)}),(0,a.jsx)(z.default,{size:"small",icon:(0,a.jsx)(tI,{}),onClick:()=>b&&b(e.id)}),(0,a.jsx)(z.default,{size:"small",danger:!0,icon:(0,a.jsx)(tL.default,{}),onClick:()=>j&&j(e.id)}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:8},children:[(0,a.jsx)("span",{onMouseDown:ee,style:{cursor:"ew-resize",userSelect:"none"},title:"Drag left/right to change opacity",children:"Opacity:"}),(0,a.jsx)(A.default,{min:0,max:1,step:.01,style:{width:80},value:Number(e.opacity.toFixed(2)),onChange:t=>p&&p(e.id,Number(t||0))})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{style:{userSelect:"none"},children:"Blend:"}),(0,a.jsxs)(tx.default,{value:e.blend||"source-over",onChange:t=>v&&v(e.id,t),style:{width:140},children:[(0,a.jsx)(tP,{value:"source-over",children:"Normal"}),(0,a.jsx)(tP,{value:"multiply",children:"Multiply"}),(0,a.jsx)(tP,{value:"screen",children:"Screen"}),(0,a.jsx)(tP,{value:"overlay",children:"Overlay"}),(0,a.jsx)(tP,{value:"lighter",children:"Lighten"}),(0,a.jsx)(tP,{value:"darken",children:"Darken"})]})]})]}):null;})()]})}):null]})]})});},tW=({imageUrl:e,onExport:t})=>{let r=(0,y.useRef)(null),{canvasRef:l,overlayRef:n,baseCanvas:i}=function(e,t){let r=(0,y.useRef)(null),l=(0,y.useRef)(null),[n,a]=(0,y.useState)(null);(0,y.useEffect)(()=>{(async()=>{try{let l=await new Promise((t,r)=>{let l=new Image;l.crossOrigin="anonymous",l.onload=()=>{let e=ee(l.naturalWidth,l.naturalHeight);e.getContext("2d").drawImage(l,0,0),t(e);},l.onerror=r,l.src=e;});a(l);let n=ee(l.width,l.height);if(n.getContext("2d").drawImage(l,0,0),r.current){r.current.width=n.width,r.current.height=n.height;let e=r.current.getContext("2d");e.clearRect(0,0,n.width,n.height),e.drawImage(n,0,0);}t&&t(i(n));}catch(e){console.error("Failed to load image",e),K.default.error("Failed to load image");}})();},[e]),(0,y.useEffect)(()=>{o();},[n]);let i=e=>e.toDataURL("image/png"),o=()=>{if(!r.current||!n)return;r.current.width=n.width,r.current.height=n.height,l.current.width=n.width,l.current.height=n.height;let e=r.current.getContext("2d");e.clearRect(0,0,r.current.width,r.current.height),e.drawImage(n,0,0);};return{canvasRef:r,overlayRef:l,baseCanvas:n,syncCanvasSize:o};}(e,e=>o.push(e,"Initial load")),o=function(e,t){let[r,l]=(0,y.useState)([]),[n,a]=(0,y.useState)(-1),i=r[n],o=l=>{let n=r[l];if(!n)return;let i=new Image;i.onload=()=>{let r=e.current.getContext("2d");e.current.width=i.naturalWidth,e.current.height=i.naturalHeight,t.current.width=i.naturalWidth,t.current.height=i.naturalHeight,r.clearRect(0,0,e.current.width,e.current.height),r.drawImage(i,0,0),a(l);},i.src=n.url;};return{history:r,index:n,current:i,push:(e,t="")=>{let i=r.slice(0,n+1);i.push({url:e,label:t}),l(i),a(i.length-1);},undo:()=>{n<=0||o(n-1);},redo:()=>{n>=r.length-1||o(n+1);},applyHistory:o};}(l,n),[s,d]=(0,y.useState)(1),[c,u]=(0,y.useState)({x:0,y:0}),[h,f]=(0,y.useState)(!1),x=(0,y.useRef)(null),[g,m]=(0,y.useState)("pan"),[p,v]=(0,y.useState)(0),[w,b]=(0,y.useState)(0),[j,C]=(0,y.useState)(0),[S,k]=(0,y.useState)(0),[M,R]=(0,y.useState)(0),[I,z]=(0,y.useState)(0),[L,D]=(0,y.useState)(0),[E,A]=(0,y.useState)(0),[T,B]=(0,y.useState)(0),[N,H]=(0,y.useState)(null),_=(0,y.useRef)(null),[P,$]=(0,y.useState)(!1),W=(0,y.useRef)(null),U=()=>{W.current||(W.current=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN]);},F=(e,t,r=12)=>{if(!W.current)return -1;let l=W.current;for(let n=0;n<8;n+=2){let a=l[n],i=l[n+1];if(!isNaN(a)&&!isNaN(i)){let l=a-e,o=i-t;if(Math.sqrt(l*l+o*o)<=r)return n;}}return -1;},[V,G]=(0,y.useState)(null),[O,X]=(0,y.useState)(!1),[Y,q]=(0,y.useState)(!1),[Z,J]=(0,y.useState)(null),[et,er]=(0,y.useState)(null),el=(0,y.useRef)(null),[en,ea]=(0,y.useState)(null),[ei,eo]=(0,y.useState)([]),[es,ed]=(0,y.useState)(null),[ec,eu]=(0,y.useState)(!1),[ef,ex]=(0,y.useState)(""),[eg,ey]=(0,y.useState)("Arial"),[ev,ew]=(0,y.useState)(32),[eb,eV]=(0,y.useState)("#000000"),[eG,eO]=(0,y.useState)("normal"),[eX,eY]=(0,y.useState)(!1),[eK,eq]=(0,y.useState)("none"),[eZ,eJ]=(0,y.useState)("left"),[eQ,e0]=(0,y.useState)(!1),e1=(0,y.useRef)(null),e2=(0,y.useRef)(null),e4=(0,y.useRef)(null),e8=async(e,t,r)=>eC(e,t,ei,r),e6=(e,t)=>eE(eo,e,t),e5=(e,t)=>eA(eo,e,t),e3=(e,t)=>eT(eo,e,t),e7=(e,t)=>eB(eo,e,t),e9=(e,t)=>eN(eo,e,t),te=(e,t)=>eH(eo,e,t),tt=(e,t)=>e_(eo,e,t),tr=(e,t)=>eP(eo,e,t),[tl,tn]=(0,y.useState)("#ff0000"),[ta,ti]=(0,y.useState)(2),[to,ts]=(0,y.useState)("hard"),[td,tc]=(0,y.useState)(1),[tu,tf]=(0,y.useState)(1),[tx,tg]=(0,y.useState)(!1),tm=(0,y.useRef)([]),tp=(0,y.useRef)(!1),ty=(0,y.useRef)(null),tv=(0,y.useRef)(ta),[tw,tb]=(0,y.useState)(0),[tj,tC]=(0,y.useState)(0),[tS,tk]=(0,y.useState)(0),[tM,tR]=(0,y.useState)(0),[tI,tz]=(0,y.useState)(0),[tL,tD]=(0,y.useState)(0),[tE,tA]=(0,y.useState)(0),[tT,tB]=(0,y.useState)({});(0,y.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("contextmenu",t),()=>e.removeEventListener("contextmenu",t);},[]),(0,y.useEffect)(()=>{let e=r.current,t=l.current;if(!e||!t)return;let n=e=>{if(!e.ctrlKey)return;e.preventDefault();let r=t.getBoundingClientRect(),l=e.clientX-r.left,n=e.clientY-r.top;d(t=>{let r=Math.min(Math.max(t*(e.deltaY<0?1.1:.9),.1),12),a=r/t;return u(e=>({x:l-(l-e.x)*a,y:n-(n-e.y)*a})),r;});};return e.addEventListener("wheel",n,{passive:!1}),()=>e.removeEventListener("wheel",n);},[]);let tN=()=>{e$(n,l,{zoom:s,cropRect:N,rulerPoints:el.current,perspectivePoints:W.current,hoverColor:Z,tool:g,drawColor:tl,drawLineWidth:ta,layers:ei,overlaySelected:ec,activeLayerId:es});};(0,y.useEffect)(()=>{let e=l.current;if(!e)return;let t=e=>{if("color"===g){let t=ep(e,l,s);J(t?{x:e.clientX,y:e.clientY,color:t}:null),tN();}else"draw"===g&&(J(tl?{x:e.clientX,y:e.clientY,color:tl}:null),tN());},r=e=>{if("color"===g){let t=ep(e,l,s);t&&(er(t),tn(t),navigator.clipboard.writeText(t).catch(()=>{}),K.default.success(`Picked color ${t}`));}},n=()=>{"color"===g&&J(null);};return e.addEventListener("mousemove",t),e.addEventListener("click",r),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mousemove",t),e.removeEventListener("click",r),e.removeEventListener("mouseleave",n);};},[g,s,c]),(0,y.useEffect)(()=>{let e=e=>{e2.current&&document.activeElement===e2.current||(e.ctrlKey&&"z"===e.key&&o.undo(),e.ctrlKey&&e.shiftKey&&"Z"===e.key&&o.redo(),"c"===e.key&&m("crop"),"h"===e.key&&m("pan"),"v"===e.key&&m("move"),"t"===e.key&&m("text"),"r"===e.key&&eh(90,l,n,o.history),"p"===e.key&&m("color"),"b"===e.key&&m("draw"));};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e);},[o.index,o.history]),(0,y.useEffect)(()=>{let e=e=>{let t=(t,r,l=!0)=>e.code===t&&!!l&&(e.preventDefault(),G(e=>e??g),m(r),!0);t("Space","pan")?X(!0):t("AltLeft","color","draw"===g)&&q(!0);},t=e=>{let t=(t,r)=>{e.code===t&&(r(!1),G(e=>(e&&m(e),null)));};t("Space",X),t("AltLeft",q);};return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t);};},[g]);let tH=async()=>{await eW(l,n,W,o,$,tN);},t_=(0,y.useMemo)(()=>{if(("pan"===g||"select"===g)&&h)return"grabbing";switch(g){case"pan":return"grab";case"move":return"move";case"crop":case"ruler":case"perspective":return"crosshair";case"color":return"copy";case"draw":return"pointer";default:return"default";}},[g,h]);return(0,a.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,a.jsx)(th,{canvasRef:l,overlayRef:n,baseCanvas:i,history:o,setTool:m,brightness:p,setBrightness:v,contrast:w,setContrast:b,highlights:j,setHighlights:C,shadows:S,setShadows:k,whites:M,setWhites:R,blacks:I,setBlacks:z,vibrance:L,setVibrance:D,saturation:E,setSaturation:A,dehaze:T,setDehaze:B,blur:tw,setBlur:tb,gaussian:tj,setGaussian:tC,sharpen:tS,setSharpen:tk,texture:tM,setTexture:tR,clarity:tI,setClarity:tz,bgThreshold:tL,setBgThreshold:tD,bgThresholdBlack:tE,setBgThresholdBlack:tA,hslAdjustments:tT,setHslAdjustments:(e,t)=>{tB(r=>({...r,[e]:{...r[e]||{},...t}}));},setShowPerspectiveModal:$,dpiMeasured:en,setDpiMeasured:ea,exportImage:e8,onExport:t}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)(t$,{history:o,setZoom:d,tool:g,setTool:m,brushType:to,setBrushType:ts,drawColor:tl,setDrawColor:tn,drawLineWidth:ta,setDrawLineWidth:ti,brushOpacity:td,setBrushOpacity:tc,brushFlow:tu,setBrushFlow:tf,layers:ei,activeLayerId:es,setLayerOpacity:(e,t)=>ek(eo,e,t),setLayerBlend:(e,t)=>eM(eo,e,t),moveLayerUp:e=>eR(eo,e),moveLayerDown:e=>eI(eo,e),deleteLayer:e=>ez(eo,e,ed),selectLayer:e=>{eL(ed,e),eu(!0);let t=ei.find(t=>t.id===e);t&&"text"===t.type&&(ex(t.text||""),ey(t.font||"Arial"),ew(t.fontSize||32),eV(t.textColor||"#000000"),eO(t.fontWeight||"normal"),eY(!!t.fontItalic),eq(t.textDecoration||"none"),eJ(t.textAlign||"left"));},mergeLayer:e=>eS(l,ei,eo,o,e),textContent:ef,setTextContent:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?e6(t.id,e):ex(e);},textFont:eg,setTextFont:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?e5(t.id,e):ey(e);},textFontSize:ev,setTextFontSize:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?e3(t.id,e):ew(e);},textColor:eb,setTextColor:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?tt(t.id,e):eV(e);},textWeight:eG,setTextWeight:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?e7(t.id,e):eO(e);},textItalic:eX,setTextItalic:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?e9(t.id,e):eY(e);},textDecoration:eK,setTextDecoration:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?te(t.id,e):eq(e);},textAlign:eZ,setTextAlign:e=>{let t=ei.find(e=>e.id===es);t&&"text"===t.type?tr(t.id,e):eJ(e);},onAddTextLayer:()=>{e0(!0),K.default.info("Click on the image to place the text");},isAddingText:eQ,setIsAddingText:e0}),(0,a.jsx)(eF,{canvasRef:l,overlayRef:n,containerRef:r,offset:c,zoom:s,tool:g,currentCursor:t_,hoverColor:Z,onMouseDown:e=>{let t=l.current.getBoundingClientRect(),n=(e.clientX-t.left)/s,a=(e.clientY-t.top)/s,i=(e,n,a="",i)=>{eU({canvasX:e,canvasY:n,canvasRect:t,containerRef:r,inlineEditorRef:e2,zoom:s,initial:a,layerId:null==i?void 0:i.layerId,layer:null==i?void 0:i.layer,textColor:eb,textFont:eg,textFontSize:ev,textWeight:eG,textItalic:eX,onCommit:t=>{i&&i.layerId?(eE(eo,i.layerId,t),tN()):eD(l,eo,ed,eu,tN,{text:t,font:eg,fontSize:ev,fontWeight:eG,fontItalic:eX,textDecoration:eK,textColor:eb,textAlign:eZ},{x:e,y:n}),e0(!1);},onCancel:()=>{e0(!1);}});};if(ei.length>0){for(let t=ei.length-1;t>=0;t--){let r=ei[t],l=r.rect;if(!(n>=l.x&&a>=l.y&&n<=l.x+l.w&&a<=l.y+l.h))continue;let o=8/Math.max(1,s),d=(e,t)=>Math.abs(n-e)<=o&&Math.abs(a-t)<=o,c=d(l.x,l.y),u=d(l.x+l.w,l.y),h=d(l.x,l.y+l.h),f=d(l.x+l.w,l.y+l.h);if("text"===g&&"text"===r.type&&2===e.detail){ed(r.id),eu(!0),i(n,a,r.text||"",{layerId:r.id,layer:r});return;}if("move"===g||"text"===g&&"text"===r.type){if(ed(r.id),eu(!0),c||u||h||f){let e=c?"tl":u?"tr":h?"bl":"br";e4.current={layerId:r.id,handle:e,startX:n,startY:a,orig:{...l}};return;}e1.current={layerId:r.id,startX:n,startY:a,origX:l.x,origY:l.y};return;}break;}eu(!1);}if("color"===g&&e.altKey&&2===e.button&&m("draw"),("draw"===g||"color"===g)&&e.altKey&&2===e.button){e.preventDefault(),tp.current=!0,ty.current=e.clientX,tv.current=ta;return;}if("pan"===g||"select"===g)f(!0),x.current={x:e.clientX-c.x,y:e.clientY-c.y};else if("crop"===g)_.current={x:n,y:a},H({x:n,y:a,w:1,h:1});else if("ruler"===g){if(el.current){el.current.x2=n,el.current.y2=a;let e=n-el.current.x1,t=a-el.current.y1,r=Math.sqrt(e*e+t*t),i=Math.round(r/(l.current.width/(window.devicePixelRatio||1))*96);ea(i),K.default.info(`Distance: ${Math.round(r)} px, estimated DPI: ${i}`),el.current=null;}else el.current={x1:n,y1:a,x2:n,y2:a};}else if("perspective"===g){U();let e=F(n,a);if(e>=0){W.current[e]=n,W.current[e+1]=a,tN();return;}let t=W.current,r=!1;for(let e=0;e<8;e+=2)if(isNaN(t[e])||isNaN(t[e+1])){t[e]=n,t[e+1]=a,r=!0;break;}if(!r){let e=F(n,a,200);e>=0?(W.current[e]=n,W.current[e+1]=a):(W.current[0]=n,W.current[1]=a);}tN();}else if("draw"===g)tg(!0),tm.current=[{x:n,y:a}];else if("text"===g){i(n,a,ef||"");return;}},onMouseMove:e=>{if(tp.current&&null!==ty.current){let t=e.clientX-ty.current;ti(Math.max(1,Math.round(10*Math.min(500,tv.current+t/2))/10)),tN();return;}if(("pan"===g||"select"===g)&&h&&x.current){u({x:e.clientX-x.current.x,y:e.clientY-x.current.y});return;}try{let t=l.current.getBoundingClientRect(),n=(e.clientX-t.left)/s,a=(e.clientY-t.top)/s,i=null;for(let e=ei.length-1;e>=0;e--){let t=ei[e].rect,r=n>=t.x&&a>=t.y&&n<=t.x+t.w&&a<=t.y+t.h,l=8/Math.max(1,s),o=(e,t)=>Math.abs(n-e)<=l&&Math.abs(a-t)<=l;if(o(t.x,t.y)){i="tl";break;}if(o(t.x+t.w,t.y)){i="tr";break;}if(o(t.x,t.y+t.h)){i="bl";break;}if(o(t.x+t.w,t.y+t.h)){i="br";break;}if(r){i="move";break;}}r.current&&(i?"move"===i?r.current.style.cursor="move":"tl"===i||"br"===i?r.current.style.cursor="nwse-resize":r.current.style.cursor="nesw-resize":r.current.style.cursor=t_);}catch(e){}let t=e1.current;if(t){let r=l.current.getBoundingClientRect(),n=(e.clientX-r.left)/s,a=(e.clientY-r.top)/s,i=n-t.startX,o=a-t.startY;eo(e=>e.map(e=>e.id===t.layerId?{...e,rect:{x:t.origX+i,y:t.origY+o,w:e.rect.w,h:e.rect.h}}:e)),tN();return;}if("crop"===g&&_.current){let t=l.current.getBoundingClientRect(),r={x:(e.clientX-t.left)/s,y:(e.clientY-t.top)/s};H({x:Math.min(_.current.x,r.x),y:Math.min(_.current.y,r.y),w:Math.abs(r.x-_.current.x),h:Math.abs(r.y-_.current.y)}),tN();}else if("draw"===g&&tx&&l.current){let t=l.current.getBoundingClientRect(),r=(e.clientX-t.left)/s,n=(e.clientY-t.top)/s;tm.current.push({x:r,y:n});let a=l.current.getContext("2d");a.save(),a.globalAlpha=td*tu,"soft"===to?(a.shadowColor=tl,a.shadowBlur=.5*ta,a.lineWidth=.5*ta):(a.shadowBlur=0,a.lineWidth=ta),a.strokeStyle=tl,a.lineCap="round",a.lineJoin="round",a.beginPath();let i=tm.current;a.moveTo(i[i.length-2].x,i[i.length-2].y),a.lineTo(i[i.length-1].x,i[i.length-1].y),a.stroke(),a.restore(),tN();}else{let t=e4.current;if(t){let r=l.current.getBoundingClientRect(),n=(e.clientX-r.left)/s,a=(e.clientY-r.top)/s,{layerId:i,handle:o,startX:d,startY:c,orig:u}=t,h=u.x,f=u.y,x=u.w,g=u.h;if("tl"===o?(h=n,f=a,x=u.w+(u.x-h),g=u.h+(u.y-f)):"tr"===o?(f=a,x=n-u.x,g=u.h+(u.y-f)):"bl"===o?(h=n,x=u.w+(u.x-h),g=a-u.y):"br"===o&&(x=n-u.x,g=a-u.y),e.shiftKey){let e=u.w/Math.max(1,u.h);if("tl"===o||"tr"===o||"bl"===o||"br"===o){let t=x<0?-1:1,r=g<0?-1:1,l=Math.abs(x),n=Math.abs(g);l/Math.max(1,n)>e?g=l/e*r:x=n*e*t,"tl"===o?(h=u.x+(u.w-x),f=u.y+(u.h-g)):"tr"===o?f=u.y+(u.h-g):"bl"===o&&(h=u.x+(u.w-x));}}x=Math.max(4/s,x),g=Math.max(4/s,g),eo(e=>e.map(e=>{if(e.id!==i)return e;if("text"===e.type){let t=Math.max(8,Math.round(Math.max(1,g)-10));return{...e,rect:{x:h,y:f,w:x,h:g},fontSize:t};}return{...e,rect:{x:h,y:f,w:x,h:g}};})),tN();return;}tN();}},onMouseUp:()=>{if(tp.current){tp.current=!1,ty.current=null,tv.current=ta;return;}if(e1.current||e4.current){e1.current=null,e4.current=null,tN();return;}f(!1),x.current=null,"crop"===g&&N&&em(l,n,N,H,o),"draw"===g&&tx&&(tg(!1),o.push(l.current.toDataURL(),"Draw"));},onAddImage:e=>ej(e,l,eo,ed,eu,tN,m)})]}),(0,a.jsxs)(Q.default,{title:"Perspective correction",open:P,onOk:()=>tH(),onCancel:()=>$(!1),okText:"Apply",children:[(0,a.jsx)("p",{children:"Click four points on the image (clockwise) to define the corners, then Apply."}),(0,a.jsx)("p",{style:{marginTop:8},children:"Tip: click a corner again to move it (or click near a point to reposition)."})]})]});},{Title:tU}=G.default,{TabPane:tF}=P.default,tV=()=>{let[e,t]=(0,y.useState)(null),[r,l]=(0,y.useState)(null),[n,i]=(0,y.useState)(null),[s,u]=(0,y.useState)(!1),[f,g]=(0,y.useState)(!1),m=(0,y.useRef)(0),[p,v]=(0,y.useState)(1),[w,b]=(0,y.useState)(1),[C,S]=(0,y.useState)(1),[M,I]=(0,y.useState)(8),[L,E]=(0,y.useState)(2),[T,N]=(0,y.useState)(1);(0,y.useEffect)(()=>{let e=e=>{var t;let r=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(!r)return;let l=Array.from(r).find(e=>e.type.includes("image"));if(l){let t=l.getAsFile();t&&(_(t),K.default.success("Image pasted from clipboard!"),e.preventDefault());}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e);},[]);let _=e=>{t(e);let r=new FileReader;return r.onload=e=>{var t;return l(null===(t=e.target)||void 0===t?void 0:t.result);},r.readAsDataURL(e),u(!1),m.current=0,!1;},$=(e,t)=>{let r=new Blob([e],{type:"image/svg+xml"}),l=document.createElement("a");l.href=URL.createObjectURL(r),l.download=t,l.click();},U=n?btoa(unescape(encodeURIComponent(n))):"",V=n?`data:image/svg+xml;base64,${U}`:"";return(0,a.jsx)(o.default,{setDragging:u,dragCounter:m,handleUpload:_,children:(0,a.jsx)(D.default,{title:(0,a.jsxs)(a.Fragment,{children:["\u{1F5BC}\uFE0F PNG / JPEG Viewer ",(0,a.jsx)(W.default,{color:"cyan",children:"Beta"})]}),variant:"borderless",children:(0,a.jsxs)(B.default,{direction:"vertical",style:{width:"100%"},size:"large",children:[!s&&(0,a.jsx)(X.default,{beforeUpload:_,showUploadList:!1,accept:".png,.jpg,.jpeg",children:(0,a.jsx)(z.default,{icon:(0,a.jsx)(R.default,{}),children:"Upload Image (PNG/JPG)"})}),s&&(0,a.jsx)(d.default,{}),r&&(0,a.jsxs)("div",{children:[(0,a.jsx)(tU,{level:5,children:"Preview & Editor:"}),(0,a.jsx)(tW,{imageUrl:r,onExport:e=>{console.log("exported blob",e);}})]}),f&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.7)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:(0,a.jsx)(H.default,{indicator:(0,a.jsx)(k,{style:{fontSize:48,color:"#1890ff"},spin:!0}),tip:"Converting image to SVG...",size:"large"})}),(0,a.jsx)(D.default,{size:"small",title:"Tracing Options (Adjust before converting)",children:(0,a.jsxs)(B.default,{wrap:!0,size:"large",children:[(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Scale factor for the SVG output. Higher = larger SVG.",children:(0,a.jsxs)("label",{children:["Scale ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:.1,step:.1,value:p,onChange:e=>v(e||1)})]}),(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Error threshold for line detection. Lower = more precise lines.",children:(0,a.jsxs)("label",{children:["ltres ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:0,value:w,onChange:e=>b(e||1)})]}),(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Error threshold for curve detection. Lower = more precise curves.",children:(0,a.jsxs)("label",{children:["qtres ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:0,value:C,onChange:e=>S(e||1)})]}),(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Minimum path length to keep. Higher = simpler SVG with fewer tiny paths.",children:(0,a.jsxs)("label",{children:["Pathomit ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:0,value:M,onChange:e=>I(e||0)})]}),(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Pixel sampling interval for colors. 1 = every pixel, higher = faster but less accurate colors.",children:(0,a.jsxs)("label",{children:["ColorSampling ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:1,value:L,onChange:e=>E(e||1)})]}),(0,a.jsxs)(B.default,{size:"small",children:[(0,a.jsx)(F.default,{title:"Stroke width in the output SVG.",children:(0,a.jsxs)("label",{children:["StrokeWidth ",(0,a.jsx)(j,{style:{marginLeft:4}})]})}),(0,a.jsx)(A.default,{min:0,value:T,onChange:e=>N(e||1)})]})]})}),(0,a.jsxs)(B.default,{children:[(0,a.jsx)(z.default,{type:"primary",onClick:()=>{if(!r){K.default.error("Please upload an image first.");return;}g(!0);try{Z.default.imageToSVG(r,e=>{i(e),g(!1),K.default.success("Image converted to SVG successfully!");},{scale:p,ltres:w,qtres:C,pathomit:M,colorsampling:L,strokewidth:T});}catch(e){console.error(e),g(!1),K.default.error("Error converting image to SVG.");}},disabled:!e,children:"Convert to SVG"}),(0,a.jsx)(z.default,{onClick:()=>{t(null),l(null),i(null),K.default.info("Image and SVG cleared.");},danger:!0,disabled:!e&&!n,children:"Clear Image"})]}),n&&(0,a.jsxs)(P.default,{defaultActiveKey:"svg",type:"card",style:{marginTop:16},children:[(0,a.jsxs)(tF,{tab:"SVG",children:[(0,a.jsxs)(B.default,{style:{marginBottom:8},children:[(0,a.jsx)(z.default,{onClick:()=>$(n,"image.svg"),icon:(0,a.jsx)(x.default,{}),children:"Download"}),(0,a.jsx)(z.default,{onClick:()=>(0,c.handleCopy)(n,"SVG copied!"),icon:(0,a.jsx)(h.default,{}),children:"Copy"})]}),(0,a.jsx)("div",{style:{border:"1px solid #eee",borderRadius:6,padding:12,overflow:"auto"},children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})})]},"svg"),(0,a.jsxs)(tF,{tab:"Base64",children:[(0,a.jsxs)(B.default,{style:{marginBottom:8},children:[(0,a.jsx)(z.default,{onClick:()=>(0,c.handleCopy)(U,"Base64 copied!"),icon:(0,a.jsx)(h.default,{}),children:"Copy Base64"}),(0,a.jsx)(z.default,{onClick:()=>$(U,"image-base64.txt"),icon:(0,a.jsx)(x.default,{}),children:"Download Base64"})]}),(0,a.jsx)("pre",{style:{background:"#f7f7f7",padding:12,borderRadius:6,whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:300,overflow:"auto"},children:U})]},"base64"),(0,a.jsxs)(tF,{tab:"Data URI",children:[(0,a.jsxs)(B.default,{style:{marginBottom:8},children:[(0,a.jsx)(z.default,{onClick:()=>(0,c.handleCopy)(V,"Data URI copied!"),icon:(0,a.jsx)(h.default,{}),children:"Copy Data URI"}),(0,a.jsx)(z.default,{onClick:()=>$(V,"image-datauri.txt"),icon:(0,a.jsx)(x.default,{}),children:"Download Data URI"})]}),(0,a.jsx)("pre",{style:{background:"#f7f7f7",padding:12,borderRadius:6,whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:300,overflow:"auto"},children:V})]},"datauri")]})]})})});};}}]);
//# sourceMappingURL=2ed777c5-async.beab1a20.js.map