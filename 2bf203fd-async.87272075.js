(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2bf203fd"],{dda864f3:function(e,a,t){t.d(a,"__esModule",{value:!0}),t.e(a,{default:function(){return eN;}});var l=t("777fffbe"),s=t("852bbaa9"),n=t("95bd365d"),c=t("4b8271a6"),i=l._(c),d=t("4f4539af"),r=l._(d),o=t("30963339"),u=l._(o),f=t("1d2482ba"),h=l._(f),m=t("b6114613"),g=l._(m),x=t("ccbc78ac"),p=l._(x),j=t("ec32258a"),b=l._(j),v=t("2ac36d38"),y=l._(v),_=t("314fd1a3"),w=s._(_),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"scan",theme:"outlined"},S=t("8fb0e3f9"),E=l._(S),R=w.forwardRef(function(e,a){return w.createElement(E.default,(0,y.default)((0,y.default)({},e),{},{ref:a,icon:N}));}),U=t("532621ad"),L=l._(U),C=t("0ec3d373"),k=l._(C),z=t("bb4b9fac"),M=l._(z),T=t("c213ceab"),I=l._(T),D=t("94e78bcf"),O=l._(D),P=t("ce686c15"),A=l._(P),B=t("68091597"),H=l._(B),V=t("ebcabb49"),F=l._(V),J=t("e015c964"),G=l._(J),X=t("4f331305"),$=l._(X),q=t("5a83e636"),K=l._(q),Q=t("339facb1"),W=l._(Q),Y=t("0c5bfc2e"),Z=l._(Y),ee=t("cb204712"),ea=l._(ee),et=t("522a0302"),el=l._(et),es=t("e0fc3175"),en=l._(es),ec=t("0ed998a9"),ei=l._(ec),ed=t("a4f51854"),er=l._(ed),eo=t("d6f53458"),eu=l._(eo);async function ef(e,a){let{maxWidth:t=2e3,maxHeight:l=2e3,contrastBoost:s=1.2,threshold:n=150}=a||{},c=[],i=new Image;i.src=URL.createObjectURL(e),await new Promise((e,a)=>{i.onload=()=>e(),i.onerror=e=>a(e);});let d=i.width,r=i.height,o=Math.min(1,t/d,l/r);d=Math.round(d*o),r=Math.round(r*o);let u=document.createElement("canvas");u.width=d,u.height=r;let f=u.getContext("2d");f.drawImage(i,0,0,d,r),c.push(u.toDataURL("image/png")),c.push(u.toDataURL("image/png"));let h=f.getImageData(0,0,d,r),m=h.data;for(let e=0;e<m.length;e+=4){let a=.299*m[e]+.587*m[e+1]+.114*m[e+2],t=(a=Math.min(255,a*s))<n?0:255;m[e]=m[e+1]=m[e+2]=t;}f.putImageData(h,0,0),c.push(u.toDataURL("image/png"));let g=f.getImageData(0,0,d,r),x=g.data,p=d,j=r,b=new Uint8ClampedArray(x);for(let e=1;e<j-1;e++)for(let a=1;a<p-1;a++)for(let t=0;t<3;t++){let l=(e*p+a)*4+t,s=5*b[l]-b[l-4]-b[l+4]-b[l-4*p]-b[l+4*p];x[l]=Math.min(255,Math.max(0,s));}return f.putImageData(g,0,0),c.push(u.toDataURL("image/png")),{steps:c,finalBlob:await new Promise((e,a)=>{u.toBlob(t=>{t?e(t):a(Error("Failed to convert canvas to blob"));},"image/png",1);})};}var eh=t("30287c43"),em=l._(eh);let eg="image_to_text_settings",ex={language:["eng","vie"],upscaleMode:"manual",textEnhancement:!0},ep=e=>{localStorage.setItem(eg,JSON.stringify(e));},ej=()=>{try{let e=localStorage.getItem(eg);return e?{...ex,...JSON.parse(e)}:ex;}catch{return ex;}},eb=e=>{let a=new Blob([e||""],{type:"text/plain"}),t=URL.createObjectURL(a),l=document.createElement("a");l.download="extracted-text.txt",l.href=t,l.click();},ev=async(e,a,t,l,s)=>{if(!e)return ei.default.warning("Please upload an image first."),null;t(!0);try{let t;let n=ej(),c=[];if(n.textEnhancement){let a=await ef(e);c=a.steps,t=a.finalBlob,s(c);}else t=e,s([URL.createObjectURL(e)]);let i=await em.default.recognize(t,l.join("+"),{logger:e=>console.log(e)});return a(i.data.text),i.data;}catch(e){throw console.error(e),ei.default.error("Failed to extract text"),e;}finally{t(!1);}},{Title:ey,Text:e_}=el.default,{Dragger:ew}=en.default,eN=()=>{let[e,a]=(0,w.useState)(!1),t=(0,w.useRef)(0),[l,s]=(0,w.useState)(null),[c,d]=(0,w.useState)(""),[o,f]=(0,w.useState)(""),[m,x]=(0,w.useState)(!1),[j,v]=(0,w.useState)(null),[y,_]=(0,w.useState)([]),[N,S]=(0,w.useState)(["eng"]),[E,U]=(0,w.useState)(!0);(0,w.useEffect)(()=>{let e=ej();S(e.language||["eng"]),U(e.textEnhancement??!0);},[]),(0,w.useEffect)(()=>{ep({...ej(),language:N,textEnhancement:E});},[N,E]),(0,w.useEffect)(()=>()=>{c&&URL.revokeObjectURL(c),y.forEach(e=>URL.revokeObjectURL(e));},[c,y]);let C=e=>(s(e),f(""),v(null),_([]),d(URL.createObjectURL(e)),!1),z=async()=>{if(l){x(!0),v(null);try{let e=ej();ep({...e,language:N,textEnhancement:E});let a=await ev(l,f,x,N,_);a&&a.confidence&&(v(a.confidence),ei.default.success(`Text extracted with ${Math.round(a.confidence)}% confidence!`));}catch(e){}}};return(0,n.jsxs)(er.default,{setDragging:a,dragCounter:t,handleUpload:C,children:[(0,n.jsx)("div",{className:"ocr-container",children:(0,n.jsxs)(M.default,{className:"ocr-card",bordered:!1,children:[(0,n.jsxs)("div",{className:"header-section",children:[(0,n.jsxs)(ey,{level:2,style:{margin:0},children:[(0,n.jsx)(R,{})," Image to Text (OCR)"]}),(0,n.jsx)(e_,{type:"secondary",children:"Extract text from images with high accuracy using advanced OCR."})]}),(0,n.jsxs)(G.default,{gutter:[32,32],className:"main-content",children:[(0,n.jsx)(I.default,{xs:24,lg:12,className:"input-column",children:(0,n.jsxs)(M.default,{title:(0,n.jsxs)(K.default,{children:[(0,n.jsx)(g.default,{})," Source Image"]}),bordered:!1,className:"inner-card",children:[c?(0,n.jsxs)("div",{className:"image-preview-wrapper",children:[(0,n.jsx)(H.default,{src:c,alt:"preview",className:"preview-image"}),(0,n.jsx)("div",{className:"image-actions",children:(0,n.jsx)(k.default,{danger:!0,icon:(0,n.jsx)(u.default,{}),onClick:()=>{s(null),d(""),f(""),v(null),_([]);},size:"small",children:"Remove"})})]}):(0,n.jsxs)(ew,{accept:"image/*",showUploadList:!1,beforeUpload:C,className:"custom-dragger",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(i.default,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single upload. Strictly prohibit from uploading company data or other band files"})]}),(0,n.jsx)(O.default,{orientation:"left",children:"Settings"}),(0,n.jsxs)(K.default,{direction:"vertical",style:{width:"100%"},size:"middle",children:[(0,n.jsxs)("div",{className:"setting-row",children:[(0,n.jsxs)(K.default,{children:[(0,n.jsx)(b.default,{}),(0,n.jsx)(e_,{children:"Language"})]}),(0,n.jsx)($.default,{mode:"multiple",value:N,onChange:S,style:{width:200},options:[{label:"English",value:"eng"},{label:"Vietnamese",value:"vie"},{label:"Spanish",value:"spa"},{label:"French",value:"fra"},{label:"German",value:"deu"},{label:"Chinese (Simplified)",value:"chi_sim"},{label:"Japanese",value:"jpn"}]})]}),(0,n.jsxs)("div",{className:"setting-row",children:[(0,n.jsxs)(K.default,{children:[(0,n.jsx)(L.default,{}),(0,n.jsx)(e_,{children:"Auto Enhancement"}),(0,n.jsx)(ea.default,{title:"Automatically improves contrast and sharpness for better accuracy",children:(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"(?)"})})]}),(0,n.jsx)(Z.default,{checked:E,onChange:U})]}),(0,n.jsx)(k.default,{type:"primary",size:"large",icon:(0,n.jsx)(R,{}),block:!0,onClick:z,loading:m,disabled:!l,className:"process-btn",children:m?"Processing...":"Extract Text"})]})]})}),(0,n.jsxs)(I.default,{xs:24,lg:12,className:"output-column",children:[(0,n.jsx)(M.default,{title:(0,n.jsxs)(K.default,{children:[(0,n.jsx)(p.default,{})," Extracted Text"]}),bordered:!1,className:"inner-card",extra:o&&(0,n.jsxs)(K.default,{children:[(0,n.jsx)(k.default,{type:"text",icon:(0,n.jsx)(r.default,{}),onClick:()=>{o&&(navigator.clipboard.writeText(o),ei.default.success("Copied to clipboard!"));},children:"Copy"}),(0,n.jsx)(k.default,{type:"text",icon:(0,n.jsx)(h.default,{}),onClick:()=>eb(o),children:"Download"})]}),children:m?(0,n.jsxs)("div",{className:"loading-state",children:[(0,n.jsx)(W.default,{size:"large",tip:"Analyzing image..."}),(0,n.jsx)(e_,{type:"secondary",style:{marginTop:16},children:"This might take a few seconds depending on image complexity..."})]}):o?(0,n.jsxs)("div",{className:"result-container",children:[null!==j&&(0,n.jsxs)("div",{className:"confidence-meter",children:[(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"Confidence Score"}),(0,n.jsx)(F.default,{percent:Math.round(j),size:"small",status:j>80?"success":j>50?"normal":"exception"})]}),(0,n.jsx)("div",{className:"text-content",children:o})]}):(0,n.jsx)(A.default,{image:A.default.PRESENTED_IMAGE_SIMPLE,description:"No text extracted yet"})}),y.length>1&&(0,n.jsxs)("div",{style:{marginTop:24},children:[(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"Processed Image Debug:"}),(0,n.jsx)("div",{style:{display:"flex",gap:8,marginTop:8,overflowX:"auto"},children:y.map((e,a)=>(0,n.jsx)(H.default,{src:e,width:80,height:80,style:{objectFit:"cover",borderRadius:4}},a))})]})]})]})]})}),e&&(0,n.jsx)(eu.default,{})]});};}}]);
//# sourceMappingURL=2bf203fd-async.87272075.js.map