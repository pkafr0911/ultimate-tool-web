{"version":3,"sources":["node_modules/@ant-design/icons-svg/es/asn/GlobalOutlined.js","node_modules/@ant-design/icons/es/icons/GlobalOutlined.js","node_modules/@ant-design/icons-svg/es/asn/ScanOutlined.js","node_modules/@ant-design/icons/es/icons/ScanOutlined.js","src/pages/ImageToText/utils/textEnhancement.ts","src/pages/ImageToText/constants.ts","src/pages/ImageToText/utils/helpers.tsx","src/pages/ImageToText/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar GlobalOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z\" } }] }, \"name\": \"global\", \"theme\": \"outlined\" };\nexport default GlobalOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport GlobalOutlinedSvg from \"@ant-design/icons-svg/es/asn/GlobalOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar GlobalOutlined = function GlobalOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: GlobalOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(GlobalOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'GlobalOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ScanOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"scan\", \"theme\": \"outlined\" };\nexport default ScanOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ScanOutlinedSvg from \"@ant-design/icons-svg/es/asn/ScanOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ScanOutlined = function ScanOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ScanOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ScanOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ScanOutlined';\n}\nexport default RefIcon;","export async function textEnhancement(\r\n  file: File,\r\n  options?: { maxWidth?: number; maxHeight?: number; contrastBoost?: number; threshold?: number },\r\n): Promise<{ steps: string[]; finalBlob: Blob }> {\r\n  const { maxWidth = 2000, maxHeight = 2000, contrastBoost = 1.2, threshold = 150 } = options || {};\r\n  const steps: string[] = [];\r\n\r\n  const img = new Image();\r\n  img.src = URL.createObjectURL(file);\r\n\r\n  await new Promise<void>((resolve, reject) => {\r\n    img.onload = () => resolve();\r\n    img.onerror = (err) => reject(err);\r\n  });\r\n\r\n  let width = img.width;\r\n  let height = img.height;\r\n  const scale = Math.min(1, maxWidth / width, maxHeight / height);\r\n  width = Math.round(width * scale);\r\n  height = Math.round(height * scale);\r\n\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  const ctx = canvas.getContext('2d')!;\r\n\r\n  // Step 1: Original image\r\n  ctx.drawImage(img, 0, 0, width, height);\r\n  steps.push(canvas.toDataURL('image/png'));\r\n\r\n  // Step 2: Resize already applied, so we can directly store resized image\r\n  steps.push(canvas.toDataURL('image/png'));\r\n\r\n  // Step 3: Grayscale + contrast + threshold\r\n  const imgData = ctx.getImageData(0, 0, width, height);\r\n  const data = imgData.data;\r\n\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    // Each pixel consists of 4 values in the data array: [R, G, B, A]\r\n    // i = red channel index, i+1 = green, i+2 = blue, i+3 = alpha (opacity)\r\n\r\n    // Convert RGB to grayscale using the luminosity method:\r\n    // Human eyes perceive green more strongly, blue less strongly\r\n    let gray =\r\n      0.299 * data[i] + // Red channel weight\r\n      0.587 * data[i + 1] + // Green channel weight\r\n      0.114 * data[i + 2]; // Blue channel weight\r\n\r\n    // Boost contrast slightly; ensure it does not exceed 255 (max for a channel)\r\n    gray = Math.min(255, gray * contrastBoost);\r\n\r\n    // Convert grayscale to binary (black or white) using a threshold\r\n    // If pixel brightness < threshold → black (0), else → white (255)\r\n    const value = gray < threshold ? 0 : 255;\r\n\r\n    // Apply the binary value to all RGB channels\r\n    // This makes the pixel pure black or pure white\r\n    data[i] = data[i + 1] = data[i + 2] = value;\r\n\r\n    // Alpha channel (data[i + 3]) remains unchanged\r\n  }\r\n  ctx.putImageData(imgData, 0, 0);\r\n  steps.push(canvas.toDataURL('image/png')); // Step after B&W conversion\r\n\r\n  // Step 4: Sharpening (text enhancement)\r\n  const imgData2 = ctx.getImageData(0, 0, width, height);\r\n  const data2 = imgData2.data;\r\n\r\n  // Simple sharpening kernel\r\n  const w = width;\r\n  const h = height;\r\n\r\n  const copy = new Uint8ClampedArray(data2); // make a copy to read original\r\n\r\n  for (let y = 1; y < h - 1; y++) {\r\n    // loop over each row, skip first & last (edges)\r\n    for (let x = 1; x < w - 1; x++) {\r\n      // loop over each column, skip first & last (edges)\r\n      for (let c = 0; c < 3; c++) {\r\n        // loop over RGB channels (0=R,1=G,2=B)\r\n        const idx = (y * w + x) * 4 + c; // calculate index in the 1D data array\r\n\r\n        const val =\r\n          5 * copy[idx] - // center pixel * 5\r\n          copy[idx - 4] - // subtract left neighbor\r\n          copy[idx + 4] - // subtract right neighbor\r\n          copy[idx - w * 4] - // subtract top neighbor\r\n          copy[idx + w * 4]; // subtract bottom neighbor\r\n        // This applies a simple 3x3 sharpening kernel:\r\n        // [ 0  -1  0 ]\r\n        // [-1   5 -1]\r\n        // [ 0  -1  0 ]\r\n        // It enhances edges by boosting center pixel relative to neighbors\r\n\r\n        data2[idx] = Math.min(255, Math.max(0, val)); // clamp result to [0,255] to avoid overflow\r\n      }\r\n    }\r\n  }\r\n\r\n  ctx.putImageData(imgData2, 0, 0);\r\n  steps.push(canvas.toDataURL('image/png')); // after sharpening\r\n\r\n  // Final blob\r\n  const finalBlob = await new Promise<Blob>((resolve, reject) => {\r\n    canvas.toBlob(\r\n      (blob) => {\r\n        if (blob) resolve(blob);\r\n        else reject(new Error('Failed to convert canvas to blob'));\r\n      },\r\n      'image/png',\r\n      1,\r\n    );\r\n  });\r\n\r\n  return { steps, finalBlob };\r\n}\r\n","// --- Helpers for LocalStorage ---\r\nexport const SETTINGS_KEY = 'image_to_text_settings';\r\n\r\nexport type OCRSettings = {\r\n  language: string[]; // e.g. ['eng', 'vie']\r\n  upscaleMode: 'auto' | 'manual' | 'none';\r\n  textEnhancement: boolean;\r\n};\r\n\r\nexport const defaultSettings: OCRSettings = {\r\n  language: ['eng', 'vie'], // e.g. ['eng', 'vie']\r\n  upscaleMode: 'manual',\r\n  textEnhancement: true,\r\n};\r\n\r\nexport const languageOptions = [\r\n  { label: 'English', value: 'eng' },\r\n  { label: 'Vietnamese', value: 'vie' },\r\n  { label: 'French', value: 'fra' },\r\n  { label: 'Spanish', value: 'spa' },\r\n  { label: 'German', value: 'deu' },\r\n  { label: 'Italian', value: 'ita' },\r\n  { label: 'Portuguese', value: 'por' },\r\n  { label: 'Russian', value: 'rus' },\r\n  { label: 'Simplified Chinese', value: 'chi_sim' },\r\n  { label: 'Traditional Chinese', value: 'chi_tra' },\r\n  { label: 'Japanese', value: 'jpn' },\r\n  { label: 'Korean', value: 'kor' },\r\n  { label: 'Arabic', value: 'ara' },\r\n  { label: 'Hindi', value: 'hin' },\r\n];\r\n","import { message } from 'antd';\r\nimport { textEnhancement } from './textEnhancement';\r\nimport Tesseract from 'tesseract.js';\r\nimport { defaultSettings, OCRSettings, SETTINGS_KEY } from '../constants';\r\n\r\n// --- Helpers for LocalStorage ---\r\nexport const saveSettings = (settings: OCRSettings) => {\r\n  localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\r\n};\r\n\r\nexport const loadSettings = (): OCRSettings => {\r\n  try {\r\n    const saved = localStorage.getItem(SETTINGS_KEY);\r\n    return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;\r\n  } catch {\r\n    return defaultSettings;\r\n  }\r\n};\r\n\r\nexport const downloadText = (text: string) => {\r\n  const blob = new Blob([text || ''], { type: 'text/plain' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.download = 'extracted-text.txt';\r\n  a.href = url;\r\n  a.click();\r\n};\r\n\r\n// --- OCR extraction ---\r\nexport const handleOCR = async (\r\n  imageFile: File | null,\r\n  setExtractedText: (text: string) => void,\r\n  setLoading: (loading: boolean) => void,\r\n  language: string[],\r\n  setStepImages: (steps: string[]) => void,\r\n) => {\r\n  if (!imageFile) {\r\n    message.warning('Please upload an image first.');\r\n    return null;\r\n  }\r\n\r\n  setLoading(true);\r\n\r\n  try {\r\n    const settings = loadSettings();\r\n\r\n    let finalBlob: Blob;\r\n    let steps: string[] = [];\r\n\r\n    if (settings.textEnhancement) {\r\n      // Use text enhance enhance if enabled\r\n      const enhanceResult = await textEnhancement(imageFile);\r\n      steps = enhanceResult.steps;\r\n      finalBlob = enhanceResult.finalBlob;\r\n\r\n      // Show preprocessing steps in UI\r\n      setStepImages(steps);\r\n    } else {\r\n      // Skip preprocessing, use original image\r\n      finalBlob = imageFile;\r\n      setStepImages([URL.createObjectURL(imageFile)]); // just show original image\r\n    }\r\n\r\n    // OCR\r\n    const result = await Tesseract.recognize(finalBlob, language.join('+'), {\r\n      logger: (m) => console.log(m),\r\n    });\r\n\r\n    setExtractedText(result.data.text);\r\n    return result.data;\r\n  } catch (error) {\r\n    console.error(error);\r\n    message.error('Failed to extract text');\r\n    throw error;\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n","import {\r\n  CloudUploadOutlined,\r\n  CopyOutlined,\r\n  DeleteOutlined,\r\n  DownloadOutlined,\r\n  FileImageOutlined,\r\n  FileTextOutlined,\r\n  GlobalOutlined,\r\n  ScanOutlined,\r\n  SettingOutlined,\r\n} from '@ant-design/icons';\r\nimport {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Divider,\r\n  Empty,\r\n  Image,\r\n  Progress,\r\n  Row,\r\n  Select,\r\n  Space,\r\n  Spin,\r\n  Switch,\r\n  Tooltip,\r\n  Typography,\r\n  Upload,\r\n  message,\r\n} from 'antd';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport DragDropWrapper from '@/components/DragDropWrapper';\r\nimport DragOverlay from '@/components/DragOverlay';\r\nimport { downloadText, handleOCR, loadSettings, saveSettings } from './utils/helpers';\r\nimport './styles.less';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Dragger } = Upload;\r\n\r\nconst ImageToText: React.FC = () => {\r\n  const [dragging, setDragging] = useState(false);\r\n  const dragCounter = useRef(0);\r\n\r\n  const [imageFile, setImageFile] = useState<File | null>(null);\r\n  const [imageUrl, setImageUrl] = useState<string>('');\r\n  const [extractedText, setExtractedText] = useState<string>('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [confidence, setConfidence] = useState<number | null>(null);\r\n  const [stepImages, setStepImages] = useState<string[]>([]);\r\n\r\n  // Settings\r\n  const [language, setLanguage] = useState<string[]>(['eng']);\r\n  const [enhance, setEnhance] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const settings = loadSettings();\r\n    setLanguage(settings.language || ['eng']);\r\n    setEnhance(settings.textEnhancement ?? true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Save settings when changed\r\n    const currentSettings = loadSettings();\r\n    saveSettings({\r\n      ...currentSettings,\r\n      language,\r\n      textEnhancement: enhance,\r\n    });\r\n  }, [language, enhance]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imageUrl) URL.revokeObjectURL(imageUrl);\r\n      stepImages.forEach((url) => URL.revokeObjectURL(url));\r\n    };\r\n  }, [imageUrl, stepImages]);\r\n\r\n  const handleUpload = (file: File) => {\r\n    setImageFile(file);\r\n    setExtractedText('');\r\n    setConfidence(null);\r\n    setStepImages([]);\r\n    const url = URL.createObjectURL(file);\r\n    setImageUrl(url);\r\n    return false; // Prevent auto upload\r\n  };\r\n\r\n  const onProcess = async () => {\r\n    if (!imageFile) return;\r\n\r\n    setLoading(true);\r\n    setConfidence(null);\r\n\r\n    try {\r\n      // We need to temporarily save settings to ensure helper uses current state\r\n      const currentSettings = loadSettings();\r\n      saveSettings({\r\n        ...currentSettings,\r\n        language,\r\n        textEnhancement: enhance,\r\n      });\r\n\r\n      const result = await handleOCR(\r\n        imageFile,\r\n        setExtractedText,\r\n        setLoading,\r\n        language,\r\n        setStepImages,\r\n      );\r\n\r\n      if (result && result.confidence) {\r\n        setConfidence(result.confidence);\r\n        message.success(`Text extracted with ${Math.round(result.confidence)}% confidence!`);\r\n      }\r\n    } catch (error) {\r\n      // Error handled in helper\r\n    }\r\n  };\r\n\r\n  const handleCopy = () => {\r\n    if (!extractedText) return;\r\n    navigator.clipboard.writeText(extractedText);\r\n    message.success('Copied to clipboard!');\r\n  };\r\n\r\n  const handleClear = () => {\r\n    setImageFile(null);\r\n    setImageUrl('');\r\n    setExtractedText('');\r\n    setConfidence(null);\r\n    setStepImages([]);\r\n  };\r\n\r\n  return (\r\n    <DragDropWrapper\r\n      setDragging={setDragging}\r\n      dragCounter={dragCounter}\r\n      handleUpload={handleUpload}\r\n    >\r\n      <div className=\"ocr-container\">\r\n        <Card className=\"ocr-card\" bordered={false}>\r\n          <div className=\"header-section\">\r\n            <Title level={2} style={{ margin: 0 }}>\r\n              <ScanOutlined /> Image to Text (OCR)\r\n            </Title>\r\n            <Text type=\"secondary\">\r\n              Extract text from images with high accuracy using advanced OCR.\r\n            </Text>\r\n          </div>\r\n\r\n          <Row gutter={[32, 32]} className=\"main-content\">\r\n            {/* Left Column: Input */}\r\n            <Col xs={24} lg={12} className=\"input-column\">\r\n              <Card\r\n                title={\r\n                  <Space>\r\n                    <FileImageOutlined /> Source Image\r\n                  </Space>\r\n                }\r\n                bordered={false}\r\n                className=\"inner-card\"\r\n              >\r\n                {!imageUrl ? (\r\n                  <Dragger\r\n                    accept=\"image/*\"\r\n                    showUploadList={false}\r\n                    beforeUpload={handleUpload}\r\n                    className=\"custom-dragger\"\r\n                  >\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                      <CloudUploadOutlined />\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">Click or drag image to this area to upload</p>\r\n                    <p className=\"ant-upload-hint\">\r\n                      Support for a single upload. Strictly prohibit from uploading company data or\r\n                      other band files\r\n                    </p>\r\n                  </Dragger>\r\n                ) : (\r\n                  <div className=\"image-preview-wrapper\">\r\n                    <Image src={imageUrl} alt=\"preview\" className=\"preview-image\" />\r\n                    <div className=\"image-actions\">\r\n                      <Button danger icon={<DeleteOutlined />} onClick={handleClear} size=\"small\">\r\n                        Remove\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <Divider orientation=\"left\">Settings</Divider>\r\n\r\n                <Space direction=\"vertical\" style={{ width: '100%' }} size=\"middle\">\r\n                  <div className=\"setting-row\">\r\n                    <Space>\r\n                      <GlobalOutlined />\r\n                      <Text>Language</Text>\r\n                    </Space>\r\n                    <Select\r\n                      mode=\"multiple\"\r\n                      value={language}\r\n                      onChange={setLanguage}\r\n                      style={{ width: 200 }}\r\n                      options={[\r\n                        { label: 'English', value: 'eng' },\r\n                        { label: 'Vietnamese', value: 'vie' },\r\n                        { label: 'Spanish', value: 'spa' },\r\n                        { label: 'French', value: 'fra' },\r\n                        { label: 'German', value: 'deu' },\r\n                        { label: 'Chinese (Simplified)', value: 'chi_sim' },\r\n                        { label: 'Japanese', value: 'jpn' },\r\n                      ]}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"setting-row\">\r\n                    <Space>\r\n                      <SettingOutlined />\r\n                      <Text>Auto Enhancement</Text>\r\n                      <Tooltip title=\"Automatically improves contrast and sharpness for better accuracy\">\r\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                          (?)\r\n                        </Text>\r\n                      </Tooltip>\r\n                    </Space>\r\n                    <Switch checked={enhance} onChange={setEnhance} />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"primary\"\r\n                    size=\"large\"\r\n                    icon={<ScanOutlined />}\r\n                    block\r\n                    onClick={onProcess}\r\n                    loading={loading}\r\n                    disabled={!imageFile}\r\n                    className=\"process-btn\"\r\n                  >\r\n                    {loading ? 'Processing...' : 'Extract Text'}\r\n                  </Button>\r\n                </Space>\r\n              </Card>\r\n            </Col>\r\n\r\n            {/* Right Column: Output */}\r\n            <Col xs={24} lg={12} className=\"output-column\">\r\n              <Card\r\n                title={\r\n                  <Space>\r\n                    <FileTextOutlined /> Extracted Text\r\n                  </Space>\r\n                }\r\n                bordered={false}\r\n                className=\"inner-card\"\r\n                extra={\r\n                  extractedText && (\r\n                    <Space>\r\n                      <Button type=\"text\" icon={<CopyOutlined />} onClick={handleCopy}>\r\n                        Copy\r\n                      </Button>\r\n                      <Button\r\n                        type=\"text\"\r\n                        icon={<DownloadOutlined />}\r\n                        onClick={() => downloadText(extractedText)}\r\n                      >\r\n                        Download\r\n                      </Button>\r\n                    </Space>\r\n                  )\r\n                }\r\n              >\r\n                {loading ? (\r\n                  <div className=\"loading-state\">\r\n                    <Spin size=\"large\" tip=\"Analyzing image...\" />\r\n                    <Text type=\"secondary\" style={{ marginTop: 16 }}>\r\n                      This might take a few seconds depending on image complexity...\r\n                    </Text>\r\n                  </div>\r\n                ) : extractedText ? (\r\n                  <div className=\"result-container\">\r\n                    {confidence !== null && (\r\n                      <div className=\"confidence-meter\">\r\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                          Confidence Score\r\n                        </Text>\r\n                        <Progress\r\n                          percent={Math.round(confidence)}\r\n                          size=\"small\"\r\n                          status={\r\n                            confidence > 80 ? 'success' : confidence > 50 ? 'normal' : 'exception'\r\n                          }\r\n                        />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-content\">{extractedText}</div>\r\n                  </div>\r\n                ) : (\r\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"No text extracted yet\" />\r\n                )}\r\n              </Card>\r\n\r\n              {stepImages.length > 1 && (\r\n                <div style={{ marginTop: 24 }}>\r\n                  <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                    Processed Image Debug:\r\n                  </Text>\r\n                  <div style={{ display: 'flex', gap: 8, marginTop: 8, overflowX: 'auto' }}>\r\n                    {stepImages.map((src, idx) => (\r\n                      <Image\r\n                        key={idx}\r\n                        src={src}\r\n                        width={80}\r\n                        height={80}\r\n                        style={{ objectFit: 'cover', borderRadius: 4 }}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </Col>\r\n          </Row>\r\n        </Card>\r\n      </div>\r\n      {dragging && <DragOverlay />}\r\n    </DragDropWrapper>\r\n  );\r\n};\r\n\r\nexport default ImageToText;\r\n"],"names":[],"mappings":"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"}