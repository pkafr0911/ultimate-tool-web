(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2bf203fd"],{d1a0134f:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return er;}});var a=l("777fffbe"),n=l("852bbaa9"),i=l("1a7c85b4"),d=l("d322be42"),s=n._(d),r=l("e9bcd22d"),o=a._(r),c=l("b2a1469e"),u=a._(c),f=l("6effc0fd"),x=a._(f),h=l("88b618ad"),g=a._(h),m=l("ea21718c"),j=a._(m),b=l("c9d8dc0b"),p=a._(b),v=l("d43df923"),y=l("d14fd15c"),w=a._(y),_=l("34f06567"),C=a._(_),L=l("70bd2056"),k=a._(L);let S=({handleOCR:e,loading:t})=>(0,i.jsx)(C.default,{accept:"image/*",showUploadList:!1,beforeUpload:t=>(e(t),!1),children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(k.default,{}),loading:t,block:!0,children:"Upload Image"})});var M=l("d4a32650"),R=a._(M),U=l("dfa4ac87"),D=a._(U),E=l("3eb6f542"),I=a._(E),T=l("452a6b49"),O=a._(T),P=l("d2d0b3b6"),z=a._(P),B=l("2d25b959"),F=a._(B),N=l("85c4e0d9"),Y=a._(N),A=s.forwardRef(function(e,t){return s.createElement(Y.default,(0,z.default)((0,z.default)({},e),{},{ref:t,icon:F.default}));}),X=l("076b2e3c"),Z=a._(X),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},H=s.forwardRef(function(e,t){return s.createElement(Y.default,(0,z.default)((0,z.default)({},e),{},{ref:t,icon:$}));}),W=l("376b0022"),K=a._(W),Q=l("adbfb03b"),V=a._(Q);let q=({imageUrl:e,extractedText:t=""})=>{let[l,a]=(0,s.useState)(e),[n,d]=(0,s.useState)(1),[r,o]=(0,s.useState)({x:0,y:0}),[c,f]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[g,m]=(0,s.useState)(!1),[b,v]=(0,s.useState)("en"),[y,w]=(0,s.useState)("manual"),_=(0,s.useRef)(null),C=(0,s.useRef)(null),L=async()=>{if(!e)return;let t=new Image;t.src=e;try{await t.decode();}catch{p.default.error("Failed to load image for DPI detection.");return;}let l=Math.round(t.naturalWidth/t.width*96);if(console.log("Detected DPI:",l),l<150&&"none"!==y){let e=300/l,n=document.createElement("canvas");n.width=t.naturalWidth*e,n.height=t.naturalHeight*e;let i=n.getContext("2d");i&&(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(t,0,0,n.width,n.height),a(n.toDataURL("image/png")),p.default.success("Image upscaled to ~300 DPI"));}else a(e),"auto"===y&&p.default.info("Image DPI is sufficient; no upscaling needed");},k=()=>{h(!1),f(null);};return(0,s.useEffect)(()=>{let e=_.current,t=C.current;if(!e||!t)return;let l=e=>{if(!e.ctrlKey)return;e.preventDefault();let l=t.getBoundingClientRect(),a=e.clientX-l.left,n=e.clientY-l.top;d(t=>{let l=Math.min(Math.max(t*(e.deltaY<0?1.1:.9),.2),8),i=l/t;return o(e=>({x:a-(a-e.x)*i,y:n-(n-e.y)*i})),l;});};return e.addEventListener("wheel",l,{passive:!1}),()=>e.removeEventListener("wheel",l);},[]),(0,s.useEffect)(()=>{a(e),"auto"===y&&L();},[e,y]),(0,s.useEffect)(()=>{d(1),o({x:0,y:0});},[l]),(0,i.jsxs)("div",{children:[(0,i.jsxs)(j.default,{style:{marginBottom:10},children:[(0,i.jsx)(R.default,{title:"Zoom In",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(O.default,{}),onClick:()=>d(e=>Math.min(1.5*e,8))})}),(0,i.jsx)(R.default,{title:"Zoom Out",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(A,{}),onClick:()=>d(e=>Math.max(.67*e,.2))})}),(0,i.jsx)(R.default,{title:"Reset Zoom",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(Z.default,{}),onClick:()=>{d(1),o({x:0,y:0});}})}),(0,i.jsx)(R.default,{title:"Fit Screen",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(H,{}),onClick:()=>d(.8)})}),"manual"===y&&(0,i.jsx)(R.default,{title:"Detect & Upscale DPI",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(K.default,{}),onClick:L,children:"Upscale"})}),(0,i.jsx)(R.default,{title:"Settings",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(V.default,{}),onClick:()=>m(!0)})}),(0,i.jsxs)("span",{children:[Math.round(100*n),"%"]})]}),(0,i.jsx)("div",{ref:_,style:{width:"100%",height:500,border:"1px solid #eee",overflow:"hidden",position:"relative",cursor:x?"grabbing":"grab",background:"#fafafa"},onMouseDown:e=>{e.preventDefault(),h(!0),f({x:e.clientX-r.x,y:e.clientY-r.y});},onMouseMove:e=>{x&&c&&o({x:e.clientX-c.x,y:e.clientY-c.y});},onMouseUp:k,onMouseLeave:k,onDoubleClick:()=>{d(e=>Math.min(1.5*e,8));},children:(0,i.jsx)("img",{ref:C,src:l,style:{transform:`translate(${r.x}px, ${r.y}px) scale(${n})`,transformOrigin:"top left",display:"block",userSelect:"none",pointerEvents:"auto"},draggable:!1})}),(0,i.jsxs)(D.default,{title:"Settings",open:g,onCancel:()=>m(!1),onOk:()=>m(!1),footer:(0,i.jsx)(i.Fragment,{}),children:[(0,i.jsxs)("div",{style:{marginBottom:10},children:[(0,i.jsx)("label",{children:"Language:"}),(0,i.jsx)(I.default,{style:{width:"100%",marginTop:5},value:b,onChange:e=>v(e),options:[{label:"English",value:"en"},{label:"Vietnamese",value:"vi"},{label:"French",value:"fr"}]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Upscale Mode:"}),(0,i.jsx)(I.default,{style:{width:"100%",marginTop:5},value:y,onChange:e=>w(e),options:[{label:"Auto",value:"auto"},{label:"Manual",value:"manual"},{label:"None",value:"none"}]})]})]})]});};var G=l("cec50f65"),J=a._(G);let ee=({text:e,setText:t})=>{let l=async()=>{await navigator.clipboard.writeText(e||""),p.default.success("Copied!");};return(0,i.jsxs)("div",{style:{height:"100%"},children:[(0,i.jsxs)(j.default,{style:{marginBottom:10},children:[(0,i.jsx)(u.default,{onClick:l,children:"Copy"}),(0,i.jsx)(u.default,{onClick:()=>{let t=new Blob([e||""],{type:"text/plain"}),l=URL.createObjectURL(t),a=document.createElement("a");a.download="extracted-text.txt",a.href=l,a.click();},children:"Download"})]}),(0,i.jsx)(J.default.TextArea,{rows:20,value:e,onChange:e=>t(e.target.value),placeholder:"Extracted text will show here..."})]});};var et=l("13dfe186"),el=a._(et),ea=l("85d53cee"),en=a._(ea);let{Title:ei,Paragraph:ed,Text:es}=x.default,er=()=>{let e=(0,v.useIsMobile)(),[t,l]=(0,s.useState)(!1),a=(0,s.useRef)(0),[n,d]=(0,s.useState)(null),[r,c]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[h,m]=(0,s.useState)(!1),b=e=>{d(e),c(URL.createObjectURL(e)),x("");},y=async()=>{if(!n)return p.default.warning("Please upload an image first.");m(!0);try{let e=await w.default.recognize(n,"eng+vie",{logger:e=>console.log(e)});x(e.data.text),p.default.success("Text extracted successfully!");}catch(e){console.error(e),p.default.error("Failed to extract text");}finally{m(!1);}};return(0,i.jsxs)(el.default,{setDragging:l,dragCounter:a,handleUpload:b,children:[(0,i.jsxs)(o.default,{className:"container-yy9Ow_tH",variant:"borderless",title:(0,i.jsx)(j.default,{children:"\u{1F5BC}\uFE0F Image \u2192 Text (OCR)"}),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(ei,{level:4,children:"\u{1F4D8} About Image to Text Converter"}),(0,i.jsxs)(ed,{children:["Upload an image containing ",(0,i.jsx)(es,{strong:!0,children:"text"}),", and this tool will use",(0,i.jsx)(es,{strong:!0,children:" OCR (Optical Character Recognition)"})," to extract the text."]})]}),(0,i.jsxs)(j.default,{children:[(0,i.jsx)(S,{handleOCR:b,loading:!1}),n&&(0,i.jsx)("div",{style:{margin:"10px 0"},children:(0,i.jsx)(u.default,{type:"primary",onClick:y,loading:h,children:"Extract Text"})})]}),(0,i.jsx)("div",{className:"content-Nx9s1mNj",children:(0,i.jsxs)(g.default,{layout:e?"vertical":"horizontal",style:e?{height:1500}:{},children:[(0,i.jsx)(g.default.Panel,{min:"30%",max:"60%",children:(0,i.jsx)(q,{imageUrl:r,extractedText:f})}),(0,i.jsx)(g.default.Panel,{children:(0,i.jsx)(ee,{text:f,setText:x})})]})})]}),t&&(0,i.jsx)(en.default,{})]});};}}]);
//# sourceMappingURL=2bf203fd-async.466b9c82.js.map