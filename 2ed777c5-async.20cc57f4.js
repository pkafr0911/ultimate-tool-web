(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2ed777c5"],{"0426e8b0":function(e,t,r){r.d(t,"__esModule",{value:!0}),r.e(t,{default:function(){return e8;}});var a=r("777fffbe"),n=r("852bbaa9"),l=r("95bd365d"),i=r("a4f51854"),s=a._(i),o=r("d6f53458"),d=a._(o),u=r("434db6d0"),c=r("4f4539af"),h=a._(c),f=r("1d2482ba"),g=a._(f),x=r("2ac36d38"),m=a._(x),p=r("314fd1a3"),j=n._(p),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},w=r("8fb0e3f9"),C=a._(w),y=j.forwardRef(function(e,t){return j.createElement(C.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:v}));}),b=r("d4f20bc1"),S=a._(b),k=j.forwardRef(function(e,t){return j.createElement(C.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:S.default}));}),R=r("5f92d263"),M=a._(R),L=r("0ec3d373"),I=a._(L),B=r("bb4b9fac"),E=a._(B),D=r("a9a67fa4"),_=a._(D),z=r("5a83e636"),P=a._(z),U=r("339facb1"),T=a._(U),G=r("05c9ca64"),H=a._(G),V=r("2206dff1"),A=a._(V),$=r("cb204712"),W=a._($),O=r("522a0302"),K=a._(O),N=r("e0fc3175"),F=a._(N),X=r("0ed998a9"),Y=a._(X),q=r("f9cbb0db"),Z=a._(q),J=r("90c13dc1"),Q=a._(J),ee=r("4f331305"),et=a._(ee),er=r("5e015b19"),ea=a._(er),en=r("a408d8c9"),el=a._(en);function ei(e,t){let r=document.createElement("canvas");return r.width=e,r.height=t,r;}function es(e,t,r){let a=e.width,n=e.height,l=e.data,i=new Uint8ClampedArray(l.length),s=Math.floor(r/2);for(let e=0;e<n;e++)for(let o=0;o<a;o++){let d=0,u=0,c=0,h=0;for(let i=0;i<r;i++)for(let f=0;f<r;f++){let g=o+f-s,x=e+i-s;if(g<0||g>=a||x<0||x>=n)continue;let m=(x*a+g)*4,p=t[i*r+f];d+=l[m]*p,u+=l[m+1]*p,c+=l[m+2]*p,h+=l[m+3]*p;}let f=(e*a+o)*4;i[f]=Math.min(255,Math.max(0,d)),i[f+1]=Math.min(255,Math.max(0,u)),i[f+2]=Math.min(255,Math.max(0,c)),i[f+3]=Math.min(255,Math.max(0,h||l[f+3]));}return e.data.set(i),e;}let eo={sharpen:[0,-1,0,-1,5,-1,0,-1,0],blur3:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],gaussian5:[1/273,4/273,7/273,4/273,1/273,4/273,16/273,26/273,16/273,4/273,7/273,26/273,41/273,26/273,7/273,4/273,16/273,26/273,16/273,4/273,1/273,4/273,7/273,4/273,1/273],generateBoxBlurKernel(e){let t=0|e,r=t*t;return Array(r).fill(1/r);},generateGaussianKernel(e){let t=0|e,r=t/2,a=2*r*r,n=[],l=0;for(let e=-t;e<=t;e++)for(let r=-t;r<=t;r++){let t=Math.exp(-(r*r+e*e)/a);n.push(t),l+=t;}return n.map(e=>e/l);}};function ed(e,t="image/png",r=.92){return new Promise(a=>e.toBlob(e=>a(e),t,r));}let eu=(e,t=0,r=255)=>Math.min(r,Math.max(t,e)),ec=e=>Math.min(1,Math.max(0,e)),eh=(e,t,r)=>{let a=Math.max(e/=255,t/=255,r/=255),n=Math.min(e,t,r),l=0,i=0,s=(a+n)/2;if(a!==n){let o=a-n;switch(i=s>.5?o/(2-a-n):o/(a+n),a){case e:l=(t-r)/o+(t<r?6:0);break;case t:l=(r-e)/o+2;break;case r:l=(e-t)/o+4;}l/=6;}return[l,i,s];},ef=(e,t,r)=>{let a,n,l;if(0===t)a=n=l=r;else{let i=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e,s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;a=i(o,s,e+1/3),n=i(o,s,e),l=i(o,s,e-1/3);}return[Math.round(255*a),Math.round(255*n),Math.round(255*l)];},eg=(e,{highlights:t=0,shadows:r=0,whites:a=0,blacks:n=0,vibrance:l=0,saturation:i=0,clarity:s=0,dehaze:o=0})=>{let d=e.data;for(let e=0;e<d.length;e+=4){let[s,o,u]=[d[e],d[e+1],d[e+2]],c=.299*s+.587*o+.114*u;c>192&&(s=o=u=Math.min(255,s+t,o+t,u+t)),c<64&&(s=o=u=Math.min(255,s+r,o+r,u+r));let h=((s=eu(s+a-n))+(o=eu(o+a-n))+(u=eu(u+a-n)))/3;if(i&&(s=eu(s+(s-h)*i),o=eu(o+(o-h)*i),u=eu(u+(u-h)*i)),l){let e=Math.max(s,o,u)-h;s=eu(s+(s-h)/e*l),o=eu(o+(o-h)/e*l),u=eu(u+(u-h)/e*l);}d[e]=s,d[e+1]=o,d[e+2]=u;}return e;},ex=(e,t,r)=>{e[t]=eu(e[t]*(1+r/100)),e[t+1]=eu(e[t+1]*(1-r/200)),e[t+2]=eu(e[t+2]*(1-r/200));},em=(e,t,{vibrance:r,saturation:a})=>{let n=e[t],l=e[t+1],i=e[t+2],s=Math.max(n,l,i),o=(n+l+i)/3,d=1+a/100,u=1+(s-o)/255*r/100;n=o+(n-o)*u*d,l=o+(l-o)*u*d,i=o+(i-o)*u*d,e[t]=eu(n),e[t+1]=eu(l),e[t+2]=eu(i);},ep=[{name:"red",range:[345,15]},{name:"orange",range:[15,45]},{name:"yellow",range:[45,75]},{name:"green",range:[75,165]},{name:"aqua",range:[165,195]},{name:"blue",range:[195,255]},{name:"purple",range:[255,285]},{name:"magenta",range:[285,345]}],ej=(e,t)=>{let r=e.data;for(let e=0;e<r.length;e+=4){let[a,n,l]=[r[e],r[e+1],r[e+2]],[i,s,o]=eh(a,n,l);for(let{name:e,range:r}of(i*=360,ep)){let[a,n]=r;if(!(a>n?i>=a||i<=n:i>=a&&i<=n))continue;let l=t[e];l&&(l.h&&(i=(i+l.h)%360),l.s&&(s=ec(s+l.s)),l.l&&(o=ec(o+l.l)));}[r[e],r[e+1],r[e+2]]=ef(i/360,s,o);}return e;},ev=(e,t,r,a)=>{if(!t.current)return;let n=t.current,l=ei(n.width,n.height);l.getContext("2d").drawImage(n,0,0);let i=ei(n.height,n.width),s=i.getContext("2d");s.translate(i.width/2,i.height/2),s.rotate(e*Math.PI/180),s.drawImage(l,-l.width/2,-l.height/2),t.current.width=i.width,t.current.height=i.height,r.current.width=i.width,r.current.height=i.height;let o=t.current.getContext("2d");o.clearRect(0,0,i.width,i.height),o.drawImage(i,0,0),a.push(t.current.toDataURL(),`Rotate ${e}`);},ew=async(e=!1,t,r)=>{if(!t.current)return;let a=await ed(t.current,e?"image/jpeg":"image/png",.92);r&&r(a);let n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=e?"edited.jpg":"edited.png",l.click(),URL.revokeObjectURL(n),Y.default.success("Exported image");},eC=async e=>{if(e.current)try{let t=await ed(e.current,"image/png");await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),Y.default.success("Image copied to clipboard");}catch(e){console.warn("clipboard failed",e),Y.default.error("Copy failed (browser may not support)");}},ey=(e,t)=>{if(!e.current)return;let r=e.current.getContext("2d"),a=ei(e.current.width,e.current.height);a.getContext("2d").drawImage(e.current,0,0),r.save(),r.clearRect(0,0,e.current.width,e.current.height),r.scale(-1,1),r.drawImage(a,-e.current.width,0),r.restore(),t.push(e.current.toDataURL(),"Flip horizontal");},eb=(e,t)=>{if(!e.current)return;let r=e.current.getContext("2d"),a=ei(e.current.width,e.current.height);a.getContext("2d").drawImage(e.current,0,0),r.save(),r.clearRect(0,0,e.current.width,e.current.height),r.scale(1,-1),r.drawImage(a,0,-e.current.height),r.restore(),t.push(e.current.toDataURL(),"Flip vertical");},eS=(e,t,r,a,n)=>{if(!e.current||!r)return;let l=ei(Math.max(1,Math.round(r.w)),Math.max(1,Math.round(r.h)));l.getContext("2d").drawImage(e.current,r.x,r.y,r.w,r.h,0,0,r.w,r.h),e.current.width=l.width,e.current.height=l.height,t.current.width=l.width,t.current.height=l.height;let i=e.current.getContext("2d");i.clearRect(0,0,l.width,l.height),i.drawImage(l,0,0),a(null),n.push(e.current.toDataURL(),"Cropped");},ek=(e,t,r)=>{let a=t.current;if(!a)return null;let n=a.getBoundingClientRect(),l=Math.floor((e.clientX-n.left)/r),i=Math.floor((e.clientY-n.top)/r);if(l<0||i<0||l>=a.width||i>=a.height)return null;let s=a.getContext("2d",{willReadFrequently:!0});if(!s)return null;let o=s.getImageData(l,i,1,1).data;return`#${[o[0],o[1],o[2]].map(e=>e.toString(16).padStart(2,"0")).join("")}`;},eR={blur:0,gaussian:0,sharpen:0,texture:0,clarity:0,bgThreshold:0,bgThresholdBlack:0,brightness:0,contrast:0,highlights:0,shadows:0,whites:0,blacks:0,vibrance:0,saturation:0,dehaze:0,hslAdjustments:{}},eM=null,eL=(e,t,{blur:r=0,gaussian:a=0,sharpen:n=0,bgThreshold:l=0,bgThresholdBlack:i=0,brightness:s=0,contrast:o=0,texture:d=0,clarity:u=0,highlights:c=0,shadows:h=0,whites:f=0,blacks:g=0,vibrance:x=0,saturation:m=0,dehaze:p=0,hslAdjustments:j={}},v)=>{if(!e.current||!t)return;let w=e.current.getContext("2d"),C=t.getContext("2d");if(eM||(eM=C.getImageData(0,0,t.width,t.height)),!eM)return;let y=function(e){let t=new ImageData(e.width,e.height);return t.data.set(new Uint8ClampedArray(e.data)),t;}(eM);if(0===r&&0===a&&0===n&&0===d&&0===u&&0===l&&0===i&&0===s&&0===o&&0===c&&0===h&&0===f&&0===g&&0===x&&0===m&&0===p&&0===Object.keys(j).length){w.putImageData(y,0,0);return;}if(r>0){let e=r%2==0?r+1:r;es(y,eo.generateBoxBlurKernel(e),e);}if(a>0&&es(y,eo.generateGaussianKernel(a),2*a+1),n>0&&es(y,eo.sharpen.map(e=>5===e?1+4*n:-1===e?-n:e),3),0!==d&&es(y,[0,-1,0,-1,5+.05*d,-1,0,-1,0],3),0!==u&&es(y,[0,-1,0,-1,5+.08*u,-1,0,-1,0],3),l<255&&function(e,t=255){let r=e.data;for(let e=0;e<r.length;e+=4)r[e]>t&&r[e+1]>t&&r[e+2]>t&&(r[e+3]=0);}(y,l),i>0&&function(e,t=0){let r=e.data;for(let e=0;e<r.length;e+=4)r[e]<t&&r[e+1]<t&&r[e+2]<t&&(r[e+3]=0);}(y,i),(0!==s||0!==o)&&function(e,t=0,r=0){let a=e.data,n=r/100+1,l=128*(1-n);for(let e=0;e<a.length;e+=4)a[e]=Math.min(255,Math.max(0,a[e]*n+l+t)),a[e+1]=Math.min(255,Math.max(0,a[e+1]*n+l+t)),a[e+2]=Math.min(255,Math.max(0,a[e+2]*n+l+t));}(y,s,o),0!==c||0!==h||0!==f||0!==g||0!==x||0!==m||0!==p){let e=y.data;for(let t=0;t<e.length;t+=4)p&&ex(e,t,p),(x||m)&&em(e,t,{vibrance:x,saturation:m});eg(y,{highlights:c,shadows:h,whites:f,blacks:g,vibrance:x,saturation:m,clarity:u,dehaze:p});}Object.keys(j).length>0&&ej(y,j),w.putImageData(y,0,0);let b=Object.entries({blur:r,gaussian:a,sharpen:n,texture:d,clarity:u,bgThreshold:l,bgThresholdBlack:i,brightness:s,contrast:o,highlights:c,shadows:h,whites:f,blacks:g,vibrance:x,saturation:m,dehaze:p,hslAdjustments:j}).filter(([e,t])=>eR[e]!==t);if(b.length>0){let t=b.map(([e,t])=>`${e}=${JSON.stringify(t)}`).join(", ");v.push(e.current.toDataURL(),`Effects: ${t}`),eR={blur:r,gaussian:a,sharpen:n,texture:d,clarity:u,bgThreshold:l,bgThresholdBlack:i,brightness:s,contrast:o,highlights:c,shadows:h,whites:f,blacks:g,vibrance:x,saturation:m,dehaze:p,hslAdjustments:j};}},eI=({canvasRef:e,overlayRef:t,containerRef:r,offset:a,zoom:n,tool:i,currentCursor:s,hoverColor:o,onMouseDown:d,onMouseMove:u,onMouseUp:c})=>(0,l.jsxs)("div",{ref:r,onMouseDown:d,onMouseMove:u,onMouseUp:c,style:{width:"100%",height:"100vh",overflow:"hidden",border:"1px solid #eee",position:"relative",background:"#fafafa",cursor:s},children:[(0,l.jsx)("canvas",{ref:e,style:{transform:`translate(${a.x}px, ${a.y}px) scale(${n})`,transformOrigin:"top left",display:"block"}}),(0,l.jsx)("canvas",{ref:t,style:{position:"absolute",left:0,top:0,pointerEvents:"none",transform:`translate(${a.x}px, ${a.y}px) scale(${n})`,transformOrigin:"top left"}}),o&&"color"===i&&(0,l.jsxs)("div",{style:{position:"fixed",left:o.x+12,top:o.y+12,background:"#fff",padding:"4px 8px",borderRadius:4,boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:12,zIndex:999999,pointerEvents:"none",display:"flex",alignItems:"center",gap:6},children:[(0,l.jsx)("span",{style:{display:"inline-block",width:12,height:12,background:o.color,border:"1px solid #ccc"}}),o.color]})]});var eB=r("649689e8"),eE=a._(eB),eD=r("d62d811b"),e_=a._(eD),ez=r("00798b85"),eP=a._(ez),eU=r("d90c6c6d"),eT=a._(eU),eG=r("13afdc7a"),eH=a._(eG),eV=r("a41070f7"),eA=a._(eV),e$=j.forwardRef(function(e,t){return j.createElement(C.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:eA.default}));}),eW=r("a12e4141"),eO=a._(eW),eK=r("65094f81"),eN=a._(eK),eF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"},eX=j.forwardRef(function(e,t){return j.createElement(C.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:eF}));}),eY={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},eq=j.forwardRef(function(e,t){return j.createElement(C.default,(0,m.default)((0,m.default)({},e),{},{ref:t,icon:eY}));}),eZ=r("5b30eb7f"),eJ=a._(eZ);let{Panel:eQ}=eP.default,e0=({canvasRef:e,baseCanvas:t,history:r,drawColor:a,setDrawColor:n,drawLineWidth:i,setDrawLineWidth:s,setTool:o,brightness:d,setBrightness:u,contrast:c,setContrast:f,blur:g,setBlur:x,gaussian:m,setGaussian:p,sharpen:v,setSharpen:w,bgThreshold:C,setBgThreshold:y,bgThresholdBlack:b,setBgThresholdBlack:S,setShowPerspectiveModal:k,dpiMeasured:R,setDpiMeasured:M,exportImage:L,onExport:B,overlayRef:E,texture:D,setTexture:z,clarity:U,setClarity:T,highlights:G,setHighlights:H,shadows:V,setShadows:A,whites:$,setWhites:O,blacks:K,setBlacks:N,vibrance:F,setVibrance:X,saturation:q,setSaturation:Z,dehaze:J,setDehaze:Q,hslAdjustments:ee,setHslAdjustments:et})=>{let[er,ea]=(0,j.useState)("red"),en=()=>eL(e,t,{blur:g,gaussian:m,sharpen:v,texture:D,clarity:U,bgThreshold:C,bgThresholdBlack:b,brightness:d,contrast:c,highlights:G,shadows:V,whites:$,blacks:K,vibrance:F,saturation:q,dehaze:J,hslAdjustments:ee},r);return(0,l.jsx)("div",{style:{width:260},children:(0,l.jsxs)(eP.default,{defaultActiveKey:["basic","lights","effects"],ghost:!0,expandIconPosition:"end",children:[(0,l.jsx)(eQ,{header:"\u{1F6E0} Basic",children:(0,l.jsxs)(P.default,{wrap:!0,children:[(0,l.jsx)(W.default,{title:"Undo (Ctrl+Z)",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(eT.default,{}),onClick:r.undo})}),(0,l.jsx)(W.default,{title:"Redo (Ctrl+Shift+Z)",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(eH.default,{}),onClick:r.redo})}),(0,l.jsx)(W.default,{title:"Rotate left",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(e$,{}),onClick:()=>ev(-90,e,E,r)})}),(0,l.jsx)(W.default,{title:"Rotate right",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(eO.default,{}),onClick:()=>ev(90,e,E,r)})}),(0,l.jsx)(W.default,{title:"Flip horizontal",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(eN.default,{}),onClick:()=>ey(e,r)})}),(0,l.jsx)(W.default,{title:"Flip vertical",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(eN.default,{rotate:90}),onClick:()=>eb(e,r)})})]})},"basic"),(0,l.jsx)(eQ,{header:"\u{1F58A} Brush",children:(0,l.jsxs)(P.default,{children:[(0,l.jsx)(e_.default,{value:a,onChange:e=>n(e.toHexString())}),(0,l.jsx)(_.default,{min:1,max:50,value:i,onChange:e=>s(e||1)}),(0,l.jsx)(I.default,{size:"small",onClick:()=>o("draw"),children:(0,l.jsx)(eJ.default,{})})]})},"brush"),(0,l.jsxs)(eQ,{header:"\u{1F506} Light",children:[(0,l.jsx)("div",{children:"Brightness"}),(0,l.jsx)(eE.default,{min:-150,max:150,value:d,onChange:u,onChangeComplete:en}),(0,l.jsx)("div",{children:"Contrast"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:c,onChange:f,onChangeComplete:en})]},"lights"),(0,l.jsxs)(eQ,{header:"\u{1F3A8} Color",children:[(0,l.jsx)("div",{style:{marginBottom:8},children:"Vibrance"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:F,onChange:X,onChangeComplete:en}),(0,l.jsx)("div",{style:{marginBottom:8},children:"Saturation"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:q,onChange:Z,onChangeComplete:en}),(0,l.jsx)("div",{style:{marginBottom:8},children:"Dehaze"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:J,onChange:Q,onChangeComplete:en}),(0,l.jsx)("div",{style:{marginTop:10},children:"HSL Mixer"}),(0,l.jsx)("div",{style:{display:"flex",gap:8,marginBottom:10},children:[{name:"red",color:"#ff4d4d"},{name:"orange",color:"#ffa500"},{name:"yellow",color:"#ffd700"},{name:"green",color:"#00c853"},{name:"aqua",color:"#00e5ff"},{name:"blue",color:"#2979ff"},{name:"purple",color:"#9c27b0"},{name:"magenta",color:"#ff00aa"}].map(({name:e,color:t})=>(0,l.jsx)("div",{onClick:()=>ea(e),style:{width:20,height:20,borderRadius:"50%",background:t,border:er===e?"2px solid white":"1px solid #555",boxShadow:er===e?"0 0 6px rgba(255,255,255,0.8)":"",cursor:"pointer"}},e))}),(0,l.jsx)("div",{children:er.toUpperCase()}),["Hue","Saturation","Luminance"].map(e=>{var t;return(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[(0,l.jsx)("span",{style:{width:80},children:e}),(0,l.jsx)(eE.default,{min:"Hue"===e?-180:-100,max:"Hue"===e?180:100,value:(null===(t=ee[er])||void 0===t?void 0:t[e[0].toLowerCase()])??0,onChange:t=>et(er,{[e[0].toLowerCase()]:t}),onChangeComplete:en,style:{flex:1}})]},e);}),(0,l.jsx)(I.default,{size:"small",onClick:()=>et(er,{h:0,s:0,l:0}),children:"Reset"})]},"color"),(0,l.jsxs)(eQ,{header:"\u2728 Effects",children:[(0,l.jsx)("div",{children:"Texture"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:D,onChange:z,onChangeComplete:en}),(0,l.jsx)("div",{children:"Clarity"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:U,onChange:T,onChangeComplete:en}),(0,l.jsx)("div",{children:"Highlights"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:G,onChange:H,onChangeComplete:en}),(0,l.jsx)("div",{children:"Shadows"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:V,onChange:A,onChangeComplete:en}),(0,l.jsx)("div",{children:"Whites"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:$,onChange:O,onChangeComplete:en}),(0,l.jsx)("div",{children:"Blacks"}),(0,l.jsx)(eE.default,{min:-100,max:100,value:K,onChange:N,onChangeComplete:en})]},"effects"),(0,l.jsxs)(eQ,{header:"\u{1F3AD} Filters",children:[(0,l.jsx)("div",{children:"Box Blur"}),(0,l.jsx)(eE.default,{min:0,max:25,value:g,onChange:x,onChangeComplete:en}),(0,l.jsx)("div",{children:"Gaussian"}),(0,l.jsx)(eE.default,{min:0,max:20,value:m,onChange:p,onChangeComplete:en}),(0,l.jsx)("div",{children:"Sharpen"}),(0,l.jsx)(eE.default,{min:0,max:5,value:v,onChange:w,onChangeComplete:en}),(0,l.jsx)("div",{children:"Remove White"}),(0,l.jsx)(eE.default,{min:0,max:255,value:C,onChange:y,onChangeComplete:en}),(0,l.jsx)("div",{children:"Remove Black"}),(0,l.jsx)(eE.default,{min:0,max:255,value:b,onChange:S,onChangeComplete:en})]},"filters"),(0,l.jsxs)(eQ,{header:"\u{1F4D0} Crop & Ruler",children:[(0,l.jsxs)(P.default,{children:[(0,l.jsx)(I.default,{icon:(0,l.jsx)(eX,{}),onClick:()=>o("crop"),children:"Crop"}),(0,l.jsx)(I.default,{onClick:()=>{k(!0),o("perspective");},children:"Perspective"})]}),(0,l.jsx)("div",{style:{marginTop:10},children:"Ruler"}),(0,l.jsxs)(P.default,{children:[(0,l.jsx)(I.default,{onClick:()=>o("ruler"),children:"\u{1F4CF} Ruler"}),(0,l.jsx)(I.default,{onClick:()=>{null==M||M(null),Y.default.info("Ruler cleared");},children:"Clear"})]}),R&&(0,l.jsxs)("div",{children:["Estimated DPI: ",R]})]},"crop"),(0,l.jsx)(eQ,{header:"\u{1F4E4} Export",children:(0,l.jsxs)(P.default,{children:[(0,l.jsx)(I.default,{icon:(0,l.jsx)(eq,{}),onClick:()=>L(!1,e,B),children:"PNG"}),(0,l.jsx)(I.default,{onClick:()=>L(!0,e,B),children:"JPG"}),(0,l.jsx)(I.default,{icon:(0,l.jsx)(h.default,{}),onClick:()=>eC(e),children:"Copy"})]})},"export")]})});},{Option:e1}=et.default,e2=({imageUrl:e,onExport:t})=>{let r=(0,j.useRef)(null),{canvasRef:a,overlayRef:n,baseCanvas:i}=function(e,t){let r=(0,j.useRef)(null),a=(0,j.useRef)(null),[n,l]=(0,j.useState)(null);(0,j.useEffect)(()=>{(async()=>{try{let a=await new Promise((t,r)=>{let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let e=ei(a.naturalWidth,a.naturalHeight);e.getContext("2d").drawImage(a,0,0),t(e);},a.onerror=r,a.src=e;});l(a);let n=ei(a.width,a.height);if(n.getContext("2d").drawImage(a,0,0),r.current){r.current.width=n.width,r.current.height=n.height;let e=r.current.getContext("2d");e.clearRect(0,0,n.width,n.height),e.drawImage(n,0,0);}t&&t(i(n));}catch(e){console.error("Failed to load image",e),Y.default.error("Failed to load image");}})();},[e]),(0,j.useEffect)(()=>{s();},[n]);let i=e=>e.toDataURL("image/png"),s=()=>{if(!r.current||!n)return;r.current.width=n.width,r.current.height=n.height,a.current.width=n.width,a.current.height=n.height;let e=r.current.getContext("2d");e.clearRect(0,0,r.current.width,r.current.height),e.drawImage(n,0,0);};return{canvasRef:r,overlayRef:a,baseCanvas:n,syncCanvasSize:s};}(e,e=>{s.push(e,"Initial load");}),s=function(e,t){let[r,a]=(0,j.useState)([]),[n,l]=(0,j.useState)(-1),i=r[n],s=a=>{let n=r[a];if(!n)return;let i=new Image;i.onload=()=>{let r=e.current.getContext("2d");e.current.width=i.naturalWidth,e.current.height=i.naturalHeight,t.current.width=i.naturalWidth,t.current.height=i.naturalHeight,r.clearRect(0,0,e.current.width,e.current.height),r.drawImage(i,0,0),l(a);},i.src=n.url;};return{history:r,index:n,current:i,push:(e,t="")=>{let i=r.slice(0,n+1);i.push({url:e,label:t}),a(i),l(i.length-1);},undo:()=>{n<=0||s(n-1);},redo:()=>{n>=r.length-1||s(n+1);}};}(a,n),[o,d]=(0,j.useState)(1),[u,c]=(0,j.useState)({x:0,y:0}),[h,f]=(0,j.useState)(!1),g=(0,j.useRef)(null),[x,m]=(0,j.useState)("pan"),[p,v]=(0,j.useState)(0),[w,C]=(0,j.useState)(0),[y,b]=(0,j.useState)(null),S=(0,j.useRef)(null),[k,R]=(0,j.useState)(!1),M=(0,j.useRef)(null),[L,B]=(0,j.useState)(null),[E,D]=(0,j.useState)(!1),[_,z]=(0,j.useState)(!1),[U,T]=(0,j.useState)(null),[G,H]=(0,j.useState)(null),[V]=(0,j.useState)(!1),A=(0,j.useRef)(null),[$,O]=(0,j.useState)(null),[K,N]=(0,j.useState)("#ff0000"),[F,X]=(0,j.useState)(2),[q,Z]=(0,j.useState)(!1),J=(0,j.useRef)([]),[ee,er]=(0,j.useState)(0),[en,es]=(0,j.useState)(0),[eo,ed]=(0,j.useState)(0),[eu,ec]=(0,j.useState)(0),[eh,ef]=(0,j.useState)(0),[eg,ex]=(0,j.useState)(255),[em,ep]=(0,j.useState)(0),[ej,eC]=(0,j.useState)(0),[ey,eb]=(0,j.useState)(0),[eR,eM]=(0,j.useState)(0),[eL,eB]=(0,j.useState)(0),[eE,eD]=(0,j.useState)(0),[e_,ez]=(0,j.useState)(0),[eP,eU]=(0,j.useState)(0),[eT,eG]=(0,j.useState)({}),eH=(0,j.useRef)(!1),eV=(0,j.useRef)(null),eA=(0,j.useRef)(F);(0,j.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>e.preventDefault();return e.addEventListener("contextmenu",t),()=>e.removeEventListener("contextmenu",t);},[]),(0,j.useEffect)(()=>{let e=r.current,t=a.current;if(!e||!t)return;let n=e=>{if(!e.ctrlKey)return;e.preventDefault();let r=t.getBoundingClientRect(),a=e.clientX-r.left,n=e.clientY-r.top;d(t=>{let r=Math.min(Math.max(t*(e.deltaY<0?1.1:.9),.1),12),l=r/t;return c(e=>({x:a-(a-e.x)*l,y:n-(n-e.y)*l})),r;});};return e.addEventListener("wheel",n,{passive:!1}),()=>e.removeEventListener("wheel",n);},[]);let e$=()=>{if(!n.current||!a.current)return;let e=n.current.getContext("2d");if(e.clearRect(0,0,n.current.width,n.current.height),y&&(e.save(),e.strokeStyle="#00aaff",e.lineWidth=2,e.setLineDash([6,4]),e.strokeRect(y.x,y.y,y.w,y.h),e.restore()),A.current&&(e.save(),e.strokeStyle="#ffcc00",e.lineWidth=2,e.beginPath(),e.moveTo(A.current.x1,A.current.y1),e.lineTo(A.current.x2,A.current.y2),e.stroke(),e.restore()),M.current){e.save(),e.fillStyle="rgba(0,255,0,0.8)";for(let t=0;t<8;t+=2){let r=M.current[t],a=M.current[t+1];isNaN(r)||isNaN(a)||e.fillRect(r-4,a-4,8,8);}e.restore();}if(U&&"color"===x){let t=a.current.getBoundingClientRect(),r=(U.x-t.left)/o,n=(U.y-t.top)/o;e.save(),e.strokeStyle=U.color,e.lineWidth=2/o,e.beginPath(),e.arc(r,n,8/o,0,2*Math.PI),e.stroke(),e.restore();}if(U&&"draw"===x){let t=a.current.getBoundingClientRect(),r=(U.x-t.left)/o,n=(U.y-t.top)/o;e.save(),e.strokeStyle=K,e.lineWidth=2/o,e.beginPath(),e.arc(r,n,F/2,0,2*Math.PI),e.stroke(),e.restore();}};(0,j.useEffect)(()=>{let e=a.current;if(!e)return;let t=e=>{if("color"===x){let t=ek(e,a,o);T(t?{x:e.clientX,y:e.clientY,color:t}:null),e$();}else"draw"===x&&(T(K?{x:e.clientX,y:e.clientY,color:K}:null),e$());},r=e=>{if("color"===x){let t=ek(e,a,o);t&&(H(t),N(t),navigator.clipboard.writeText(t).catch(()=>{}),Y.default.success(`Picked color ${t}`));}},n=()=>{"color"===x&&T(null);};return e.addEventListener("mousemove",t),e.addEventListener("click",r),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mousemove",t),e.removeEventListener("click",r),e.removeEventListener("mouseleave",n);};},[x,o,u]),(0,j.useEffect)(()=>{let e=e=>{e.ctrlKey&&"z"===e.key&&s.undo(),e.ctrlKey&&e.shiftKey&&"Z"===e.key&&s.redo(),"c"===e.key&&m("crop"),"h"===e.key&&m("pan"),"r"===e.key&&ev(90,a,n,s.history),"p"===e.key&&m("color"),"b"===e.key&&m("draw");};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e);},[s.index,s.history]),(0,j.useEffect)(()=>{let e=e=>{"Space"===e.code?(e.preventDefault(),D(e=>(e||(B(e=>null===e?x:e),m("pan")),!0))):"AltLeft"===e.code&&"draw"===x&&(e.preventDefault(),z(e=>(e||(B(e=>null===e?x:e),m("color")),!0)));},t=e=>{"Space"===e.code?(D(!1),B(e=>(e&&m(e),null))):"AltLeft"===e.code&&"draw"===L&&(z(!1),B(e=>(e&&m(e),null)));};return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t);};},[x]);let eW=async()=>{if(!a.current||!M.current)return;let e=a.current,t=e.width,r=e.height,l=function(e,t,r,a){let n=ei(r,a),l=n.getContext("2d");function i(t,n){let[i,s,o,d,u,c]=t,[h,f,g,x,m,p]=n;1e-6>Math.abs(h*(x-p)+g*(p-f)+m*(f-x))||(l.save(),l.beginPath(),l.moveTo(h,f),l.lineTo(g,x),l.lineTo(m,p),l.closePath(),l.clip(),l.drawImage(e,0,0,r,a),l.restore());}e.getContext("2d").getImageData(0,0,e.width,e.height);let[s,o,d,u,c,h,f,g]=t;return i([s,o,d,u,c,h],[0,0,r,0,0,a]),i([c,h,f,g,s,o],[r,a,0,a,r,0]),n;}(e,M.current,t,r);a.current.width=l.width,a.current.height=l.height,n.current.width=l.width,n.current.height=l.height,a.current.getContext("2d").clearRect(0,0,l.width,l.height),a.current.getContext("2d").drawImage(l,0,0),s.push(a.current.toDataURL(),"Perspective corrected"),R(!1);},eO=(0,j.useMemo)(()=>{if(("pan"===x||"select"===x)&&h)return"grabbing";switch(x){case"pan":return"grab";case"crop":case"ruler":case"perspective":return"crosshair";case"color":return"copy";case"draw":return"pointer";default:return"default";}},[x,h]);return(0,l.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,l.jsx)(e0,{canvasRef:a,overlayRef:n,baseCanvas:i,history:s,drawColor:K,setDrawColor:N,drawLineWidth:F,setDrawLineWidth:X,setTool:m,brightness:p,setBrightness:v,contrast:w,setContrast:C,highlights:ej,setHighlights:eC,shadows:ey,setShadows:eb,whites:eR,setWhites:eM,blacks:eL,setBlacks:eB,vibrance:eE,setVibrance:eD,saturation:e_,setSaturation:ez,dehaze:eP,setDehaze:eU,blur:ee,setBlur:er,gaussian:en,setGaussian:es,sharpen:eo,setSharpen:ed,texture:eu,setTexture:ec,clarity:eh,setClarity:ef,bgThreshold:eg,setBgThreshold:ex,bgThresholdBlack:em,setBgThresholdBlack:ep,hslAdjustments:eT,setHslAdjustments:(e,t)=>{eG(r=>({...r,[e]:{...r[e]||{},...t}}));},setShowPerspectiveModal:R,dpiMeasured:$,setDpiMeasured:O,exportImage:ew,onExport:t}),(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsx)("div",{style:{marginBottom:8},children:(0,l.jsxs)(P.default,{children:[(0,l.jsx)(W.default,{title:"Zoom In",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(ea.default,{}),onClick:()=>d(e=>Math.min(1.2*e,8))})}),(0,l.jsx)(W.default,{title:"Zoom Out",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(el.default,{}),onClick:()=>d(e=>Math.max(e/1.2,.1))})}),(0,l.jsxs)(et.default,{value:x,onChange:e=>m(e),style:{width:140},children:[(0,l.jsx)(e1,{value:"pan",children:"Pan"}),(0,l.jsx)(e1,{value:"color",children:"Color Picker"}),(0,l.jsx)(e1,{value:"crop",children:"Crop"}),(0,l.jsx)(e1,{value:"ruler",children:"Ruler"}),(0,l.jsx)(e1,{value:"perspective",children:"Perspective"}),(0,l.jsx)(e1,{value:"draw",children:"Brush"})]})]})}),(0,l.jsx)(eI,{canvasRef:a,overlayRef:n,containerRef:r,offset:u,zoom:o,tool:x,currentCursor:eO,hoverColor:U,onMouseDown:e=>{let t=a.current.getBoundingClientRect(),r=(e.clientX-t.left)/o,n=(e.clientY-t.top)/o;if("color"===x&&e.altKey&&2===e.button&&m("draw"),("draw"===x||"color"===x)&&e.altKey&&2===e.button){e.preventDefault(),eH.current=!0,eV.current=e.clientX,eA.current=F;return;}if("pan"===x||"select"===x)f(!0),g.current={x:e.clientX-u.x,y:e.clientY-u.y};else if("crop"===x)S.current={x:r,y:n},b({x:r,y:n,w:1,h:1});else if("ruler"===x){if(A.current){A.current.x2=r,A.current.y2=n;let e=r-A.current.x1,t=n-A.current.y1,l=Math.sqrt(e*e+t*t),i=Math.round(l/(a.current.width/(window.devicePixelRatio||1))*96);O(i),Y.default.info(`Distance: ${Math.round(l)} px, estimated DPI: ${i}`),A.current=null;}else A.current={x1:r,y1:n,x2:r,y2:n};}else if("perspective"===x){M.current||(M.current=[r,n,r,n,r,n,r,n]);let e=M.current;for(let t=0;t<8;t+=2)if(isNaN(e[t])||isNaN(e[t+1])||0===e[t]&&0===e[t+1]){e[t]=r,e[t+1]=n;break;}}else"draw"===x&&(Z(!0),J.current=[{x:r,y:n}]);},onMouseMove:e=>{if(eH.current&&null!==eV.current){let t=e.clientX-eV.current;X(Math.max(1,Math.min(50,eA.current+t/5)));return;}if(("pan"===x||"select"===x)&&h&&g.current)c({x:e.clientX-g.current.x,y:e.clientY-g.current.y});else if("crop"===x&&S.current){let t=a.current.getBoundingClientRect(),r={x:(e.clientX-t.left)/o,y:(e.clientY-t.top)/o};b({x:Math.min(S.current.x,r.x),y:Math.min(S.current.y,r.y),w:Math.abs(r.x-S.current.x),h:Math.abs(r.y-S.current.y)}),e$();}else if("draw"===x&&q&&a.current){let t=a.current.getBoundingClientRect(),r=(e.clientX-t.left)/o,n=(e.clientY-t.top)/o;J.current.push({x:r,y:n});let l=a.current.getContext("2d");l.save(),l.strokeStyle=K,l.lineWidth=F,l.lineCap="round",l.beginPath();let i=J.current;l.moveTo(i[i.length-2].x,i[i.length-2].y),l.lineTo(i[i.length-1].x,i[i.length-1].y),l.stroke(),l.restore();}else e$();},onMouseUp:()=>{if(eH.current){eH.current=!1,eV.current=null,eA.current=F;return;}f(!1),g.current=null,"crop"===x&&y&&eS(a,n,y,b,s),"draw"===x&&q&&(Z(!1),s.push(a.current.toDataURL(),"Draw"));}})]}),(0,l.jsx)(Q.default,{title:"Perspective correction",open:k,onOk:()=>eW(),onCancel:()=>R(!1),okText:"Apply",children:(0,l.jsx)("p",{children:"Click four points on the image (clockwise) to define the corners, then Apply."})})]});},{Title:e5}=K.default,{TabPane:e4}=H.default,e8=()=>{let[e,t]=(0,j.useState)(null),[r,a]=(0,j.useState)(null),[n,i]=(0,j.useState)(null),[o,c]=(0,j.useState)(!1),[f,x]=(0,j.useState)(!1),m=(0,j.useRef)(0),[p,v]=(0,j.useState)(1),[w,C]=(0,j.useState)(1),[b,S]=(0,j.useState)(1),[R,L]=(0,j.useState)(8),[B,D]=(0,j.useState)(2),[z,U]=(0,j.useState)(1);(0,j.useEffect)(()=>{let e=e=>{var t;let r=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(!r)return;let a=Array.from(r).find(e=>e.type.includes("image"));if(a){let t=a.getAsFile();t&&(G(t),Y.default.success("Image pasted from clipboard!"),e.preventDefault());}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e);},[]);let G=e=>{t(e);let r=new FileReader;return r.onload=e=>{var t;return a(null===(t=e.target)||void 0===t?void 0:t.result);},r.readAsDataURL(e),c(!1),m.current=0,!1;},V=(e,t)=>{let r=new Blob([e],{type:"image/svg+xml"}),a=document.createElement("a");a.href=URL.createObjectURL(r),a.download=t,a.click();},$=n?btoa(unescape(encodeURIComponent(n))):"",O=n?`data:image/svg+xml;base64,${$}`:"";return(0,l.jsx)(s.default,{setDragging:c,dragCounter:m,handleUpload:G,children:(0,l.jsx)(E.default,{title:(0,l.jsxs)(l.Fragment,{children:["\u{1F5BC}\uFE0F PNG / JPEG Viewer ",(0,l.jsx)(A.default,{color:"cyan",children:"Beta"})]}),variant:"borderless",children:(0,l.jsxs)(P.default,{direction:"vertical",style:{width:"100%"},size:"large",children:[!o&&(0,l.jsx)(F.default,{beforeUpload:G,showUploadList:!1,accept:".png,.jpg,.jpeg",children:(0,l.jsx)(I.default,{icon:(0,l.jsx)(M.default,{}),children:"Upload Image (PNG/JPG)"})}),o&&(0,l.jsx)(d.default,{}),r&&(0,l.jsxs)("div",{children:[(0,l.jsx)(e5,{level:5,children:"Preview & Editor:"}),(0,l.jsx)(e2,{imageUrl:r,onExport:e=>{console.log("exported blob",e);}})]}),f&&(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.7)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:(0,l.jsx)(T.default,{indicator:(0,l.jsx)(k,{style:{fontSize:48,color:"#1890ff"},spin:!0}),tip:"Converting image to SVG...",size:"large"})}),(0,l.jsx)(E.default,{size:"small",title:"Tracing Options (Adjust before converting)",children:(0,l.jsxs)(P.default,{wrap:!0,size:"large",children:[(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Scale factor for the SVG output. Higher = larger SVG.",children:(0,l.jsxs)("label",{children:["Scale ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:.1,step:.1,value:p,onChange:e=>v(e||1)})]}),(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Error threshold for line detection. Lower = more precise lines.",children:(0,l.jsxs)("label",{children:["ltres ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:0,value:w,onChange:e=>C(e||1)})]}),(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Error threshold for curve detection. Lower = more precise curves.",children:(0,l.jsxs)("label",{children:["qtres ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:0,value:b,onChange:e=>S(e||1)})]}),(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Minimum path length to keep. Higher = simpler SVG with fewer tiny paths.",children:(0,l.jsxs)("label",{children:["Pathomit ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:0,value:R,onChange:e=>L(e||0)})]}),(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Pixel sampling interval for colors. 1 = every pixel, higher = faster but less accurate colors.",children:(0,l.jsxs)("label",{children:["ColorSampling ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:1,value:B,onChange:e=>D(e||1)})]}),(0,l.jsxs)(P.default,{size:"small",children:[(0,l.jsx)(W.default,{title:"Stroke width in the output SVG.",children:(0,l.jsxs)("label",{children:["StrokeWidth ",(0,l.jsx)(y,{style:{marginLeft:4}})]})}),(0,l.jsx)(_.default,{min:0,value:z,onChange:e=>U(e||1)})]})]})}),(0,l.jsxs)(P.default,{children:[(0,l.jsx)(I.default,{type:"primary",onClick:()=>{if(!r){Y.default.error("Please upload an image first.");return;}x(!0);try{Z.default.imageToSVG(r,e=>{i(e),x(!1),Y.default.success("Image converted to SVG successfully!");},{scale:p,ltres:w,qtres:b,pathomit:R,colorsampling:B,strokewidth:z});}catch(e){console.error(e),x(!1),Y.default.error("Error converting image to SVG.");}},disabled:!e,children:"Convert to SVG"}),(0,l.jsx)(I.default,{onClick:()=>{t(null),a(null),i(null),Y.default.info("Image and SVG cleared.");},danger:!0,disabled:!e&&!n,children:"Clear Image"})]}),n&&(0,l.jsxs)(H.default,{defaultActiveKey:"svg",type:"card",style:{marginTop:16},children:[(0,l.jsxs)(e4,{tab:"SVG",children:[(0,l.jsxs)(P.default,{style:{marginBottom:8},children:[(0,l.jsx)(I.default,{onClick:()=>V(n,"image.svg"),icon:(0,l.jsx)(g.default,{}),children:"Download"}),(0,l.jsx)(I.default,{onClick:()=>(0,u.handleCopy)(n,"SVG copied!"),icon:(0,l.jsx)(h.default,{}),children:"Copy"})]}),(0,l.jsx)("div",{style:{border:"1px solid #eee",borderRadius:6,padding:12,overflow:"auto"},children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})})]},"svg"),(0,l.jsxs)(e4,{tab:"Base64",children:[(0,l.jsxs)(P.default,{style:{marginBottom:8},children:[(0,l.jsx)(I.default,{onClick:()=>(0,u.handleCopy)($,"Base64 copied!"),icon:(0,l.jsx)(h.default,{}),children:"Copy Base64"}),(0,l.jsx)(I.default,{onClick:()=>V($,"image-base64.txt"),icon:(0,l.jsx)(g.default,{}),children:"Download Base64"})]}),(0,l.jsx)("pre",{style:{background:"#f7f7f7",padding:12,borderRadius:6,whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:300,overflow:"auto"},children:$})]},"base64"),(0,l.jsxs)(e4,{tab:"Data URI",children:[(0,l.jsxs)(P.default,{style:{marginBottom:8},children:[(0,l.jsx)(I.default,{onClick:()=>(0,u.handleCopy)(O,"Data URI copied!"),icon:(0,l.jsx)(h.default,{}),children:"Copy Data URI"}),(0,l.jsx)(I.default,{onClick:()=>V(O,"image-datauri.txt"),icon:(0,l.jsx)(g.default,{}),children:"Download Data URI"})]}),(0,l.jsx)("pre",{style:{background:"#f7f7f7",padding:12,borderRadius:6,whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:300,overflow:"auto"},children:O})]},"datauri")]})]})})});};}}]);
//# sourceMappingURL=2ed777c5-async.20cc57f4.js.map