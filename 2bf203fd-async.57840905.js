(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2bf203fd"],{"29bce7d8":function(e,t,a){"use strict";a.d(t,"__esModule",{value:!0}),a.e(t,{SETTINGS_KEY:function(){return l;},defaultSettings:function(){return n;},languageOptions:function(){return i;}});let l="image_to_text_settings",n={language:["eng","vie"],upscaleMode:"manual",textEnhancement:!0},i=[{label:"English",value:"eng"},{label:"Vietnamese",value:"vie"},{label:"French",value:"fra"},{label:"Spanish",value:"spa"},{label:"German",value:"deu"},{label:"Italian",value:"ita"},{label:"Portuguese",value:"por"},{label:"Russian",value:"rus"},{label:"Simplified Chinese",value:"chi_sim"},{label:"Traditional Chinese",value:"chi_tra"},{label:"Japanese",value:"jpn"},{label:"Korean",value:"kor"},{label:"Arabic",value:"ara"},{label:"Hindi",value:"hin"}];},"9a21ebcc":function(e,t,a){a.d(t,"__esModule",{value:!0}),a.e(t,{downloadText:function(){return f;},handleOCR:function(){return h;},loadSettings:function(){return u;},saveSettings:function(){return c;}});var l=a("777fffbe"),n=a("0ed998a9"),i=l._(n);async function s(e,t){let{maxWidth:a=2e3,maxHeight:l=2e3,contrastBoost:n=1.2,threshold:i=150}=t||{},s=[],r=new Image;r.src=URL.createObjectURL(e),await new Promise((e,t)=>{r.onload=()=>e(),r.onerror=e=>t(e);});let o=r.width,d=r.height,c=Math.min(1,a/o,l/d);o=Math.round(o*c),d=Math.round(d*c);let u=document.createElement("canvas");u.width=o,u.height=d;let f=u.getContext("2d");f.drawImage(r,0,0,o,d),s.push(u.toDataURL("image/png")),s.push(u.toDataURL("image/png"));let h=f.getImageData(0,0,o,d),g=h.data;for(let e=0;e<g.length;e+=4){let t=.299*g[e]+.587*g[e+1]+.114*g[e+2],a=(t=Math.min(255,t*n))<i?0:255;g[e]=g[e+1]=g[e+2]=a;}f.putImageData(h,0,0),s.push(u.toDataURL("image/png"));let x=f.getImageData(0,0,o,d),m=x.data,p=o,j=d,v=new Uint8ClampedArray(m);for(let e=1;e<j-1;e++)for(let t=1;t<p-1;t++)for(let a=0;a<3;a++){let l=(e*p+t)*4+a,n=5*v[l]-v[l-4]-v[l+4]-v[l-4*p]-v[l+4*p];m[l]=Math.min(255,Math.max(0,n));}return f.putImageData(x,0,0),s.push(u.toDataURL("image/png")),{steps:s,finalBlob:await new Promise((e,t)=>{u.toBlob(a=>{a?e(a):t(Error("Failed to convert canvas to blob"));},"image/png",1);})};}var r=a("30287c43"),o=l._(r),d=a("29bce7d8");let c=e=>{localStorage.setItem(d.SETTINGS_KEY,JSON.stringify(e));},u=()=>{try{let e=localStorage.getItem(d.SETTINGS_KEY);return e?{...d.defaultSettings,...JSON.parse(e)}:d.defaultSettings;}catch{return d.defaultSettings;}},f=e=>{let t=new Blob([e||""],{type:"text/plain"}),a=URL.createObjectURL(t),l=document.createElement("a");l.download="extracted-text.txt",l.href=a,l.click();},h=async(e,t,a,l,n)=>{if(!e)return i.default.warning("Please upload an image first.");a(!0);try{let a;let r=u(),d=[];if(r.textEnhancement){let t=await s(e);d=t.steps,a=t.finalBlob,n(d);}else a=e,n([URL.createObjectURL(e)]);let c=await o.default.recognize(a,l.join("+"),{logger:e=>console.log(e)});t(c.data.text),i.default.success("Text extracted successfully!");}catch(e){console.error(e),i.default.error("Failed to extract text");}finally{a(!1);}};},dda864f3:function(e,t,a){a.d(t,"__esModule",{value:!0}),a.e(t,{default:function(){return eO;}});var l=a("777fffbe"),n=a("852bbaa9"),i=a("95bd365d"),s=a("314fd1a3"),r=n._(s),o=a("bb4b9fac"),d=l._(o),c=a("0ec3d373"),u=l._(c),f=a("522a0302"),h=l._(f),g=a("49402d9c"),x=l._(g),m=a("5a83e636"),p=l._(m),j=a("0ed998a9"),v=l._(j),b=a("339facb1"),y=l._(b),w=a("cb204712"),C=l._(w),S=a("68091597"),_=l._(S),R=a("20c112ff"),L={stepImage:"stepImage-TxIRW12R",stepsPreview:"stepsPreview-7Tb0mUQ1",stepCaption:"stepCaption-bHvIeRSy","image-to-text-guide":"image-to-text-guide-h5392FIi",container:"container-0dn29Tr-",content:"content-xpWx1sWe",stepImageWrapper:"stepImageWrapper-0CqWZvgf"},I=a("e0fc3175"),T=l._(I),E=a("5f92d263"),M=l._(E);let k=({handleOCR:e,loading:t})=>(0,i.jsx)(T.default,{accept:"image/*",showUploadList:!1,beforeUpload:t=>(e(t),!1),children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(M.default,{}),loading:t,block:!0,children:"Upload Image"})});var U=a("5e015b19"),D=l._(U),O=a("a408d8c9"),z=l._(O),P=a("13afdc7a"),N=l._(P),F=a("2ac36d38"),W=l._(F),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},B=a("8fb0e3f9"),H=l._(B),Y=r.forwardRef(function(e,t){return r.createElement(H.default,(0,W.default)((0,W.default)({},e),{},{ref:t,icon:A}));}),G=a("65094f81"),K=l._(G);let V=({imageUrl:e,extractedText:t="",upscaleMode:a})=>{let[l,n]=(0,r.useState)(e),[s,o]=(0,r.useState)(1),[d,c]=(0,r.useState)({x:0,y:0}),[f,h]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),m=(0,r.useRef)(null),j=(0,r.useRef)(null),b=async()=>{if(!e)return;let t=new Image;t.src=e;try{await t.decode();}catch{v.default.error("Failed to load image for DPI detection.");return;}let l=Math.round(t.naturalWidth/t.width*96);if(console.log("Detected DPI:",l),l<150&&"none"!==a){let e=300/l,a=document.createElement("canvas");a.width=t.naturalWidth*e,a.height=t.naturalHeight*e;let i=a.getContext("2d");i&&(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(t,0,0,a.width,a.height),n(a.toDataURL("image/png")),v.default.success("Image upscaled to ~300 DPI"));}else n(e),"auto"===a&&v.default.info("Image DPI is sufficient; no upscaling needed");},y=()=>{x(!1),h(null);};return(0,r.useEffect)(()=>{let e=m.current,t=j.current;if(!e||!t)return;let a=e=>{if(!e.ctrlKey)return;e.preventDefault();let a=t.getBoundingClientRect(),l=e.clientX-a.left,n=e.clientY-a.top;o(t=>{let a=Math.min(Math.max(t*(e.deltaY<0?1.1:.9),.2),8),i=a/t;return c(e=>({x:l-(l-e.x)*i,y:n-(n-e.y)*i})),a;});};return e.addEventListener("wheel",a,{passive:!1}),()=>e.removeEventListener("wheel",a);},[]),(0,r.useEffect)(()=>{n(e),"auto"===a&&b();},[e,a]),(0,r.useEffect)(()=>{o(1),c({x:0,y:0});},[l]),(0,i.jsxs)("div",{children:[(0,i.jsxs)(p.default,{style:{marginBottom:10},children:[(0,i.jsx)(C.default,{title:"Zoom In (CTRL+Wheel)",children:(0,i.jsx)(u.default,{size:"small",icon:(0,i.jsx)(D.default,{}),onClick:()=>o(e=>Math.min(1.5*e,8))})}),(0,i.jsx)(C.default,{title:"Zoom Out (CTRL+Wheel)",children:(0,i.jsx)(u.default,{size:"small",icon:(0,i.jsx)(z.default,{}),onClick:()=>o(e=>Math.max(.67*e,.2))})}),(0,i.jsx)(C.default,{title:"Reset Zoom",children:(0,i.jsx)(u.default,{size:"small",icon:(0,i.jsx)(N.default,{}),onClick:()=>{o(1),c({x:0,y:0});}})}),(0,i.jsx)(C.default,{title:"Fit Screen",children:(0,i.jsx)(u.default,{size:"small",icon:(0,i.jsx)(Y,{}),onClick:()=>o(.8)})}),"manual"===a&&(0,i.jsx)(C.default,{title:"Detect & Upscale DPI",children:(0,i.jsx)(u.default,{size:"small",icon:(0,i.jsx)(K.default,{}),onClick:b,children:"Upscale"})}),(0,i.jsxs)("span",{children:[Math.round(100*s),"%"]})]}),(0,i.jsx)("div",{ref:m,style:{width:"100%",height:500,border:"1px solid #eee",overflow:"hidden",position:"relative",cursor:g?"grabbing":"grab",background:"#fafafa"},onMouseDown:e=>{e.preventDefault(),x(!0),h({x:e.clientX-d.x,y:e.clientY-d.y});},onMouseMove:e=>{g&&f&&c({x:e.clientX-f.x,y:e.clientY-f.y});},onMouseUp:y,onMouseLeave:y,onDoubleClick:()=>{o(e=>Math.min(1.5*e,8));},children:(0,i.jsx)("img",{ref:j,src:l,style:{transform:`translate(${d.x}px, ${d.y}px) scale(${s})`,transformOrigin:"top left",display:"block",userSelect:"none",pointerEvents:"auto"},draggable:!1})})]});};var q=a("d977ab6b"),Z=l._(q),$=a("434db6d0"),J=a("9a21ebcc");let X=({text:e,setText:t})=>(0,i.jsxs)("div",{style:{height:"100%"},children:[(0,i.jsxs)(p.default,{style:{marginBottom:10},children:[(0,i.jsx)(u.default,{size:"small",onClick:()=>(0,$.handleCopy)(e,"Copied!"),children:"Copy"}),(0,i.jsx)(u.default,{size:"small",onClick:()=>(0,J.downloadText)(e),children:"Download"})]}),(0,i.jsx)(Z.default.TextArea,{rows:22,value:e,onChange:e=>t(e.target.value),placeholder:"Extracted text will show here..."})]});var Q=a("a4f51854"),ee=l._(Q),et=a("d6f53458"),ea=l._(et),el=a("217c632f"),en=l._(el),ei=a("532621ad"),es=l._(ei),er=a("94e78bcf"),eo=l._(er),ed=a("ccbc78ac"),ec=l._(ed),eu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},ef=r.forwardRef(function(e,t){return r.createElement(H.default,(0,W.default)((0,W.default)({},e),{},{ref:t,icon:eu}));}),eh=a("4f4539af"),eg=l._(eh),ex=a("1d2482ba"),em=l._(ex);let{Title:ep,Paragraph:ej,Text:ev}=h.default,eb=[{icon:(0,i.jsx)(M.default,{}),text:'Upload an image containing text via drag-and-drop or by clicking the "Upload Image" button.'},{icon:(0,i.jsx)(ef,{}),text:"You can also paste an image directly from your clipboard (Ctrl+V or Cmd+V)."},{icon:(0,i.jsx)(ec.default,{}),text:'Click "Extract Text" to use OCR and extract text from the uploaded image.'},{icon:(0,i.jsx)(es.default,{}),text:(0,i.jsxs)(i.Fragment,{children:["Adjust OCR ",(0,i.jsx)(ev,{strong:!0,children:"Language"})," or ",(0,i.jsx)(ev,{strong:!0,children:"Upscale Mode"})," from the Settings panel to improve recognition accuracy."]})},{icon:(0,i.jsx)(eg.default,{}),text:'Copy the extracted text to your clipboard with the "Copy" button.'},{icon:(0,i.jsx)(em.default,{}),text:'Download the extracted text as a file using the "Download" button.'},{icon:(0,i.jsx)(en.default,{}),text:(0,i.jsxs)(i.Fragment,{children:["Always ",(0,i.jsx)(ev,{strong:!0,children:"verify extracted text"})," to ensure OCR accuracy, especially for small or low-quality images."]})}],ey=({callback:e})=>(0,i.jsxs)("div",{className:L["image-to-text-guide"],children:[(0,i.jsx)(ep,{level:5,children:"\u{1F9ED} How to Use Image \u2192 Text (OCR) Tool"}),(0,i.jsxs)("ul",{className:L["guide-list"],children:[eb.map((e,t)=>(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{className:L["guide-icon"],children:e.icon}),(0,i.jsx)("span",{children:e.text})]},t)),e&&(0,i.jsxs)("li",{children:["Click here to open advanced ",(0,i.jsx)("a",{onClick:()=>e("openSettings"),children:"Settings"})]},"more")]}),(0,i.jsx)(eo.default,{style:{margin:"12px 0"}}),(0,i.jsxs)(ej,{type:"secondary",children:[(0,i.jsx)(en.default,{style:{marginRight:8,color:"#faad14"}}),"Recommended: Use high-quality images for better OCR accuracy. Small fonts or blurry images may reduce recognition quality."]})]});var ew=a("90c13dc1"),eC=l._(ew),eS=a("4f331305"),e_=l._(eS),eR=a("0c5bfc2e"),eL=l._(eR),eI=a("29bce7d8");let eT=()=>{let[e,t]=(0,r.useState)((0,J.loadSettings)());return(0,r.useEffect)(()=>{(0,J.saveSettings)(e);},[e]),{settings:e,setSettings:t};},{Text:eE}=h.default,eM=({open:e,onClose:t})=>{let{settings:a,setSettings:l}=eT();return(0,i.jsx)(eC.default,{title:"\u2699\uFE0F Settings",open:e,onCancel:t,onOk:t,footer:(0,i.jsx)(i.Fragment,{}),children:(0,i.jsxs)(p.default,{direction:"vertical",style:{width:"100%"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(eE,{children:"Language:"}),(0,i.jsx)(e_.default,{mode:"multiple",style:{width:"100%",marginTop:5},value:a.language,onChange:e=>l({...a,language:e}),options:eI.languageOptions})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(eE,{children:"Upscale Mode:"}),(0,i.jsx)(e_.default,{style:{width:"100%",marginTop:5},value:a.upscaleMode,onChange:e=>l({...a,upscaleMode:e}),options:[{label:"Auto",value:"auto"},{label:"Manual",value:"manual"},{label:"None",value:"none"}]})]}),(0,i.jsxs)(p.default,{direction:"vertical",children:[(0,i.jsxs)(eE,{children:["Text Enhancemente:"," ",(0,i.jsx)(C.default,{title:"Recommended: Turn this on if the image has color. Turn it off if the image is only black and white.",children:(0,i.jsx)(en.default,{})})]}),(0,i.jsx)(eL.default,{style:{margin:5},checked:a.textEnhancement,onChange:e=>l({...a,textEnhancement:e})})]})]})});},{Title:ek,Paragraph:eU,Text:eD}=h.default,eO=()=>{let e=(0,R.useIsMobile)(),[t,a]=(0,r.useState)(!1),l=(0,r.useRef)(0),[n,s]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[g,m]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),w=(0,J.loadSettings)(),[S,I]=(0,r.useState)([]);(0,r.useEffect)(()=>()=>{o&&URL.revokeObjectURL(o);},[o]),(0,r.useEffect)(()=>{let e=e=>{var t;let a=null===(t=e.clipboardData)||void 0===t?void 0:t.items;if(!a)return;let l=Array.from(a).find(e=>e.type.includes("image"));if(l){let t=l.getAsFile();t&&(T(t),v.default.success("Image pasted from clipboard!"),e.preventDefault());}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e);},[]);let T=e=>{s(e),h(""),c(URL.createObjectURL(e));};return(0,i.jsxs)(ee.default,{setDragging:a,dragCounter:l,handleUpload:T,children:[(0,i.jsxs)(d.default,{className:L.container,title:(0,i.jsx)(p.default,{children:"\u{1F5BC}\uFE0F Image \u2192 Text (OCR)"}),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(ek,{level:4,children:"\u{1F4D8} About Image to Text Converter"}),(0,i.jsxs)(eU,{children:["Upload an image containing ",(0,i.jsx)(eD,{strong:!0,children:"text"}),", and this tool will use",(0,i.jsx)(eD,{strong:!0,children:" OCR (Optical Character Recognition)"})," to extract the text."]})]}),(0,i.jsxs)(p.default,{wrap:!0,children:[(0,i.jsx)(k,{handleOCR:T,loading:g}),(0,i.jsx)(u.default,{type:"primary",onClick:()=>(0,J.handleOCR)(n,h,m,w.language,I),loading:g,disabled:!n,children:"Extract Text"}),(0,i.jsx)(C.default,{title:"Settings",children:(0,i.jsx)(u.default,{icon:(0,i.jsx)(es.default,{}),onClick:()=>b(!0)})})]}),(0,i.jsx)("div",{className:L.content,children:(0,i.jsxs)(x.default,{layout:e?"vertical":"horizontal",style:e?{height:"calc(100vh - 200px)"}:{},children:[(0,i.jsx)(x.default.Panel,{min:"30%",max:"60%",children:(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)(V,{imageUrl:o,extractedText:f,upscaleMode:w.upscaleMode}),g&&(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.6)",zIndex:10},children:(0,i.jsx)(y.default,{size:"large"})})]})}),(0,i.jsx)(x.default.Panel,{children:(0,i.jsx)(X,{text:f,setText:h})})]})})]}),w.textEnhancement&&(0,i.jsx)(d.default,{size:"small",title:(0,i.jsxs)(i.Fragment,{children:["Text Enhancement"," ",(0,i.jsx)(C.default,{title:(0,i.jsxs)(i.Fragment,{children:["Recommended: Turn this on if the image has color. Turn it off if the image is only black and white in"," ",(0,i.jsx)("a",{onClick:()=>b(!0),children:"Setting"})]}),children:(0,i.jsx)(en.default,{})})]}),style:{marginTop:20},children:(0,i.jsx)("div",{className:L.stepsPreview,children:S.map((e,t)=>(0,i.jsxs)("div",{className:L.stepImageWrapper,children:[(0,i.jsx)(_.default,{src:e,alt:`Step ${t+1}`,className:L.stepImage,preview:{mask:(0,i.jsxs)("div",{children:["Preview Step ",t+1]})}}),0===t&&(0,i.jsx)("div",{children:"Original image"}),1===t&&(0,i.jsx)("div",{children:"Store resized image"}),2===t&&(0,i.jsx)("div",{children:"Grayscale + contrast + threshold"}),3===t&&(0,i.jsx)("div",{children:"Simple sharpening kernel"}),t>3&&(0,i.jsxs)("div",{children:["Step ",t+1]})]},t))})}),(0,i.jsx)(ey,{callback:e=>{"openSettings"===e&&b(!0);}}),(0,i.jsx)(eM,{open:j,onClose:()=>b(!1)}),t&&(0,i.jsx)(ea.default,{})]});};}}]);
//# sourceMappingURL=2bf203fd-async.57840905.js.map