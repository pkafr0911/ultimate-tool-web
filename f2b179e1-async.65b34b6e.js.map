{"version":3,"sources":["src/pages/SnakeXenzia/index.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { Card, InputNumber, Button, Space, Typography, Switch, message } from 'antd';\nimport Confetti from 'react-confetti';\nimport './styles.less';\n\nconst { Title, Text } = Typography;\n\n// --- Define Types ---\n// Directions that the snake can move\ntype Direction = 'UP' | 'DOWN' | 'LEFT' | 'RIGHT';\n\n// Represent a single grid cell with x,y coordinates\ntype Cell = { x: number; y: number };\n\nconst SnakeXenziaPage: React.FC = () => {\n  // --- Game States ---\n  const [gridSize, setGridSize] = useState<number>(20); // The board width/height (square grid)\n  const [speed, setSpeed] = useState<number>(150); // How fast the snake moves (ms per move)\n  const [snake, setSnake] = useState<Cell[]>([{ x: 10, y: 10 }]); // Array of snake segments\n  const [direction, setDirection] = useState<Direction>('RIGHT'); // Current movement direction\n  const [food, setFood] = useState<Cell>({ x: 5, y: 5 }); // Position of the food\n  const [started, setStarted] = useState<boolean>(false); // Whether the game has started\n  const [gameOver, setGameOver] = useState<boolean>(false); // Whether the game is over\n  const [score, setScore] = useState<number>(0); // Player‚Äôs current score\n  const [showConfetti, setShowConfetti] = useState<boolean>(false); // Show confetti on Game Over\n  const [wallsEnabled, setWallsEnabled] = useState<boolean>(true); // Wall mode toggle (wrap-around)\n\n  // Reference for interval timer\n  const moveRef = useRef<any>(null);\n\n  // --- Generate a random food position ---\n  const randomFood = (): Cell => {\n    return {\n      x: Math.floor(Math.random() * gridSize),\n      y: Math.floor(Math.random() * gridSize),\n    };\n  };\n\n  // --- Start or Restart the Game ---\n  const startGame = () => {\n    // Prevent too small grids\n    if (gridSize < 10) {\n      message.error('Grid size must be at least 10!');\n      return;\n    }\n\n    // Reset all key states\n    setSnake([{ x: Math.floor(gridSize / 2), y: Math.floor(gridSize / 2) }]); // Start from center\n    setFood(randomFood()); // Randomize food location\n    setScore(0);\n    setGameOver(false);\n    setStarted(true);\n    setShowConfetti(false);\n    setDirection('RIGHT'); // Default direction\n  };\n\n  // --- Move Snake Each Frame ---\n  const moveSnake = () => {\n    // Functional setState ensures we get the latest snake value\n    setSnake((prevSnake) => {\n      const newSnake = [...prevSnake];\n      const head = { ...newSnake[0] }; // Copy current head\n\n      // Move head depending on direction\n      switch (direction) {\n        case 'UP':\n          head.y -= 1;\n          break;\n        case 'DOWN':\n          head.y += 1;\n          break;\n        case 'LEFT':\n          head.x -= 1;\n          break;\n        case 'RIGHT':\n          head.x += 1;\n          break;\n      }\n\n      // --- Handle Wall Collision or Wrap-around ---\n      if (wallsEnabled) {\n        // Game over if snake hits the wall\n        if (head.x < 0 || head.y < 0 || head.x >= gridSize || head.y >= gridSize) {\n          setGameOver(true);\n          return prevSnake;\n        }\n      } else {\n        // Wrap around edges to opposite side\n        if (head.x < 0) head.x = gridSize - 1;\n        if (head.x >= gridSize) head.x = 0;\n        if (head.y < 0) head.y = gridSize - 1;\n        if (head.y >= gridSize) head.y = 0;\n      }\n\n      // --- Check Self Collision ---\n      // If head hits one of its body segments, end the game\n      if (newSnake.some((seg) => seg.x === head.x && seg.y === head.y)) {\n        setGameOver(true);\n        return prevSnake;\n      }\n\n      // Add new head to front of array\n      newSnake.unshift(head);\n\n      // --- Check if Snake Eats Food ---\n      if (head.x === food.x && head.y === food.y) {\n        setScore((s) => s + 10); // Increase score\n        setFood(randomFood()); // Generate new food\n      } else {\n        newSnake.pop(); // Otherwise, remove tail (snake moves)\n      }\n\n      return newSnake;\n    });\n  };\n\n  // --- Handle Keyboard Controls ---\n  const handleKeyDown = (e: KeyboardEvent) => {\n    if (!started || gameOver) return;\n\n    switch (e.key) {\n      case 'ArrowUp':\n        if (direction !== 'DOWN') setDirection('UP');\n        break;\n      case 'ArrowDown':\n        if (direction !== 'UP') setDirection('DOWN');\n        break;\n      case 'ArrowLeft':\n        if (direction !== 'RIGHT') setDirection('LEFT');\n        break;\n      case 'ArrowRight':\n        if (direction !== 'LEFT') setDirection('RIGHT');\n        break;\n    }\n  };\n\n  // --- Main Game Loop ---\n  useEffect(() => {\n    if (started && !gameOver) {\n      // Move snake every [speed] milliseconds\n      moveRef.current = setInterval(moveSnake, speed);\n    }\n\n    // Cleanup interval when direction/speed/game state changes\n    return () => clearInterval(moveRef.current);\n  }, [started, speed, direction, gameOver]);\n\n  // --- Listen for Keyboard Events ---\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  // --- Handle Game Over State ---\n  useEffect(() => {\n    if (gameOver) {\n      clearInterval(moveRef.current);\n      message.error('üíÄ Game Over!');\n      setShowConfetti(true);\n    }\n  }, [gameOver]);\n\n  // --- Return to Setup Mode ---\n  const resetGame = () => {\n    setStarted(false);\n    setSnake([]);\n    setScore(0);\n    setGameOver(false);\n    setShowConfetti(false);\n  };\n\n  // --- Render UI ---\n  return (\n    <div className=\"tic-container\">\n      {/* Show confetti on Game Over */}\n      {showConfetti && gameOver && <Confetti />}\n\n      <Card className=\"tic-card\" bordered={false}>\n        <Title level={3}>üêç Snake Xenzia</Title>\n\n        {/* --- Game Setup Panel --- */}\n        {!started ? (\n          <Space direction=\"vertical\" size=\"large\" style={{ marginTop: 24 }}>\n            {/* Grid size selector */}\n            <div>\n              <Text strong>Grid Size:</Text>\n              <InputNumber\n                min={10}\n                max={50}\n                value={gridSize}\n                onChange={(val) => setGridSize(val || 20)}\n                style={{ marginLeft: 10 }}\n              />\n            </div>\n\n            {/* Speed selector */}\n            <div>\n              <Text strong>Speed (ms):</Text>\n              <InputNumber\n                min={50}\n                max={500}\n                step={10}\n                value={speed}\n                onChange={(val) => setSpeed(val || 150)}\n                style={{ marginLeft: 10 }}\n              />\n              <Text type=\"secondary\" style={{ marginLeft: 8 }}>\n                (Lower = faster)\n              </Text>\n            </div>\n\n            {/* Wall mode toggle */}\n            <div>\n              <Text strong>Walls Enabled:</Text>\n              <Switch\n                checked={wallsEnabled}\n                onChange={setWallsEnabled}\n                style={{ marginLeft: 10 }}\n              />\n              <Text type=\"secondary\" style={{ marginLeft: 8 }}>\n                {wallsEnabled ? 'Hit wall = Game over' : 'Wrap around mode'}\n              </Text>\n            </div>\n\n            {/* Start button */}\n            <Button type=\"primary\" size=\"large\" onClick={startGame}>\n              Start Game\n            </Button>\n          </Space>\n        ) : (\n          <>\n            {/* --- Game Board --- */}\n            <div\n              className=\"snake-board\"\n              style={{\n                display: 'grid',\n                gridTemplateColumns: `repeat(${gridSize}, 20px)`, // Create columns dynamically\n                gap: 2, // Space between cells\n                marginTop: 20,\n                justifyContent: 'center',\n              }}\n            >\n              {/* Render each cell in the grid */}\n              {Array.from({ length: gridSize }).map((_, rowIdx) =>\n                Array.from({ length: gridSize }).map((_, colIdx) => {\n                  const isSnake = snake.some((s) => s.x === colIdx && s.y === rowIdx);\n                  const isHead = snake.length && snake[0].x === colIdx && snake[0].y === rowIdx;\n                  const isFood = food.x === colIdx && food.y === rowIdx;\n\n                  return (\n                    <div\n                      key={`${rowIdx}-${colIdx}`}\n                      className=\"snake-cell\"\n                      style={{\n                        width: 20,\n                        height: 20,\n                        backgroundColor: isHead\n                          ? '#52c41a' // Snake head color\n                          : isSnake\n                            ? '#73d13d' // Snake body color\n                            : isFood\n                              ? '#ff7875' // Food color\n                              : '#f0f0f0', // Empty cell\n                        borderRadius: isFood ? '50%' : 2, // Make food circular\n                      }}\n                    />\n                  );\n                }),\n              )}\n            </div>\n\n            {/* --- Game Status --- */}\n            <div style={{ marginTop: 20 }}>\n              {!gameOver ? (\n                <Title level={4}>Score: {score}</Title>\n              ) : (\n                <Title level={4} style={{ color: '#ff4d4f' }}>\n                  Game Over! Final Score: {score}\n                </Title>\n              )}\n            </div>\n\n            {/* --- Control Buttons --- */}\n            <Space style={{ marginTop: 16 }}>\n              <Button onClick={startGame}>Restart</Button>\n              <Button danger onClick={resetGame}>\n                New Setup\n              </Button>\n            </Space>\n          </>\n        )}\n      </Card>\n    </div>\n  );\n};\n\nexport default SnakeXenziaPage;\n"],"names":[],"mappings":"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"}