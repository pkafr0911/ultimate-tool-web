(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["dd0c6a01"],{dd0c6a01:function(e,t,r){"use strict";r.d(t,"__esModule",{value:!0}),r.d(t,"diagram",{enumerable:!0,get:function(){return P;}});var a=r("852bbaa9"),l=r("5f284468"),n=a._(r("d543b1a7")),i=r("6e19b862"),o=r("5bc44871"),s=r("d44bf2af"),d=r("e77c2d9b"),c=r("fa540728"),h=r("7234525a"),u=r("73541c43"),f=r("2177de46");function y(e,t,r){let a=(t.width+t.height)*.9,l=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],n=L(e,a,a,l);return r.intersect=function(e){return(0,h.intersectPolygon)(r,l,e);},n;}function b(e,t,r){let a=t.height,l=a/4,n=t.width+2*l,i=[{x:l,y:0},{x:n-l,y:0},{x:n,y:-a/2},{x:n-l,y:-a},{x:l,y:-a},{x:0,y:-a/2}],o=L(e,n,a,i);return r.intersect=function(e){return(0,h.intersectPolygon)(r,i,e);},o;}function p(e,t,r){let a=t.width,l=t.height,n=[{x:-l/2,y:0},{x:a,y:0},{x:a,y:-l},{x:-l/2,y:-l},{x:0,y:-l/2}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function g(e,t,r){let a=t.width,l=t.height,n=[{x:-2*l/6,y:0},{x:a-l/6,y:0},{x:a+2*l/6,y:-l},{x:l/6,y:-l}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function w(e,t,r){let a=t.width,l=t.height,n=[{x:2*l/6,y:0},{x:a+l/6,y:0},{x:a-2*l/6,y:-l},{x:-l/6,y:-l}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function x(e,t,r){let a=t.width,l=t.height,n=[{x:-2*l/6,y:0},{x:a+2*l/6,y:0},{x:a-l/6,y:-l},{x:l/6,y:-l}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function k(e,t,r){let a=t.width,l=t.height,n=[{x:l/6,y:0},{x:a-l/6,y:0},{x:a+2*l/6,y:-l},{x:-2*l/6,y:-l}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function m(e,t,r){let a=t.width,l=t.height,n=[{x:0,y:0},{x:a+l/2,y:0},{x:a,y:-l/2},{x:a+l/2,y:-l},{x:0,y:-l}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function v(e,t,r){let a=t.height,l=t.width+a/4,n=e.insert("rect",":first-child").attr("rx",a/2).attr("ry",a/2).attr("x",-l/2).attr("y",-a/2).attr("width",l).attr("height",a);return r.intersect=function(e){return(0,u.intersectRect)(r,e);},n;}function S(e,t,r){let a=t.width,l=t.height,n=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}],i=L(e,a,l,n);return r.intersect=function(e){return(0,h.intersectPolygon)(r,n,e);},i;}function _(e,t,r){let a=t.width,l=a/2,n=l/(2.5+a/50),i=t.height+n,o=e.attr("label-offset-y",n).insert("path",":first-child").attr("d","M 0,"+n+" a "+l+","+n+" 0,0,0 "+a+" 0 a "+l+","+n+" 0,0,0 "+-a+" 0 l 0,"+i+" a "+l+","+n+" 0,0,0 "+a+" 0 l 0,"+-i).attr("transform","translate("+-a/2+","+-(i/2+n)+")");return r.intersect=function(e){let t=(0,u.intersectRect)(r,e),a=t.x-r.x;if(0!=l&&(Math.abs(a)<r.width/2||Math.abs(a)==r.width/2&&Math.abs(t.y-r.y)>r.height/2-n)){let i=n*n*(1-a*a/(l*l));0!=i&&(i=Math.sqrt(i)),i=n-i,e.y-r.y>0&&(i=-i),t.y+=i;}return t;},o;}function L(e,t,r,a){return e.insert("polygon",":first-child").attr("points",a.map(function(e){return e.x+","+e.y;}).join(" ")).attr("transform","translate("+-t/2+","+r/2+")");}r("967c9690"),r("21589439"),r("2ce92803"),r("41cf68e9"),r("8cc988a4"),r("a57dfb6b"),r("6d7df77e"),r("71eef041"),r("81540306"),r("e4775ece"),r("8a7f6143"),r("ccbcdf93"),r("fb738436"),r("a2c94fe0"),r("8eaf5076");let A=function(e){e.shapes().question=y,e.shapes().hexagon=b,e.shapes().stadium=v,e.shapes().subroutine=S,e.shapes().cylinder=_,e.shapes().rect_left_inv_arrow=p,e.shapes().lean_right=g,e.shapes().lean_left=w,e.shapes().trapezoid=x,e.shapes().inv_trapezoid=k,e.shapes().rect_right_inv_arrow=m;},D={},I=async function(e,t,r,a,l,n){let s=a?a.select(`[id="${r}"]`):(0,i.select)(`[id="${r}"]`),d=l||document;for(let r of Object.keys(e)){let a;let l=e[r],i="default";l.classes.length>0&&(i=l.classes.join(" "));let h=(0,o.k)(l.styles),u=void 0!==l.text?l.text:l.id;if((0,o.m)((0,o.c)().flowchart.htmlLabels)){let e={label:await (0,o.r)(u.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),(0,o.c)())};(a=(0,c.addHtmlLabel)(s,e).node()).parentNode.removeChild(a);}else{let e=d.createElementNS("http://www.w3.org/2000/svg","text");for(let t of(e.setAttribute("style",h.labelStyle.replace("color:","fill:")),u.split(o.e.lineBreakRegex))){let r=d.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","1"),r.textContent=t,e.appendChild(r);}a=e;}let f=0,y="";switch(l.type){case"round":f=5,y="rect";break;case"square":case"group":default:y="rect";break;case"diamond":y="question";break;case"hexagon":y="hexagon";break;case"odd":case"odd_right":y="rect_left_inv_arrow";break;case"lean_right":y="lean_right";break;case"lean_left":y="lean_left";break;case"trapezoid":y="trapezoid";break;case"inv_trapezoid":y="inv_trapezoid";break;case"circle":y="circle";break;case"ellipse":y="ellipse";break;case"stadium":y="stadium";break;case"subroutine":y="subroutine";break;case"cylinder":y="cylinder";}o.l.warn("Adding node",l.id,l.domId),t.setNode(n.db.lookUpDomId(l.id),{labelType:"svg",labelStyle:h.labelStyle,shape:y,label:a,rx:f,ry:f,class:i,style:h.style,id:n.db.lookUpDomId(l.id)});}},N=async function(e,t,r){let a,l,n=0;if(void 0!==e.defaultStyle){let t=(0,o.k)(e.defaultStyle);a=t.style,l=t.labelStyle;}for(let s of e){n++;let d="L-"+s.start+"-"+s.end,c="LS-"+s.start,h="LE-"+s.end,u={};"arrow_open"===s.type?u.arrowhead="none":u.arrowhead="normal";let f="",y="";if(void 0!==s.style){let e=(0,o.k)(s.style);f=e.style,y=e.labelStyle;}else switch(s.stroke){case"normal":f="fill:none",void 0!==a&&(f=a),void 0!==l&&(y=l);break;case"dotted":f="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f=" stroke-width: 3.5px;fill:none";}u.style=f,u.labelStyle=y,void 0!==s.interpolate?u.curve=(0,o.n)(s.interpolate,i.curveLinear):void 0!==e.defaultInterpolate?u.curve=(0,o.n)(e.defaultInterpolate,i.curveLinear):u.curve=(0,o.n)(D.curve,i.curveLinear),void 0===s.text?void 0!==s.style&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",(0,o.m)((0,o.c)().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${d}" class="edgeLabel L-${c}' L-${h}" style="${u.labelStyle}">${await (0,o.r)(s.text.replace(/fa[blrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`),(0,o.c)())}</span>`):(u.labelType="text",u.label=s.text.replace(o.e.lineBreakRegex,"\n"),void 0===s.style&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=d,u.class=c+" "+h,u.minlen=s.length||1,t.setEdge(r.db.lookUpDomId(s.start),r.db.lookUpDomId(s.end),u,n);}},U=async function(e,t,r,a){let l,c;o.l.info("Drawing flowchart");let{securityLevel:h,flowchart:u}=(0,o.c)();"sandbox"===h&&(l=(0,i.select)("#i"+t));let f="sandbox"===h?(0,i.select)(l.nodes()[0].contentDocument.body):(0,i.select)("body"),y="sandbox"===h?l.nodes()[0].contentDocument:document,b=a.db.getDirection();void 0===b&&(b="TD");let p=u.nodeSpacing||50,g=u.rankSpacing||50,w=new n.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:b,nodesep:p,ranksep:g,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{};}),x=a.db.getSubGraphs();for(let e=x.length-1;e>=0;e--)c=x[e],a.db.addVertex(c.id,c.title,"group",void 0,c.classes);let k=a.db.getVertices();o.l.warn("Get vertices",k);let m=a.db.getEdges(),v=0;for(v=x.length-1;v>=0;v--){c=x[v],(0,i.selectAll)("cluster").append("text");for(let e=0;e<c.nodes.length;e++)o.l.warn("Setting subgraph",c.nodes[e],a.db.lookUpDomId(c.nodes[e]),a.db.lookUpDomId(c.id)),w.setParent(a.db.lookUpDomId(c.nodes[e]),a.db.lookUpDomId(c.id));}await I(k,w,t,f,y,a),await N(m,w,a);let S=new s.render;A(S),S.arrows().none=function(e,t,r,a){let l=e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z");(0,d.applyStyle)(l,r[a+"Style"]);},S.arrows().normal=function(e,t){e.append("marker").attr("id",t).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0");};let _=f.select(`[id="${t}"]`),L=f.select("#"+t+" g");for(S(L,w),L.selectAll("g.node").attr("title",function(){return a.db.getTooltip(this.id);}),a.db.indexNodes("subGraph"+v),v=0;v<x.length;v++)if("undefined"!==(c=x[v]).title){let e=y.querySelectorAll("#"+t+' [id="'+a.db.lookUpDomId(c.id)+'"] rect'),r=y.querySelectorAll("#"+t+' [id="'+a.db.lookUpDomId(c.id)+'"]'),l=e[0].x.baseVal.value,n=e[0].y.baseVal.value,o=e[0].width.baseVal.value,s=(0,i.select)(r[0]).select(".label");s.attr("transform",`translate(${l+o/2}, ${n+14})`),s.attr("id",t+"Text");for(let e=0;e<c.classes.length;e++)r[0].classList.add(c.classes[e]);}if(!u.htmlLabels)for(let e of y.querySelectorAll('[id="'+t+'"] .edgeLabel .label')){let t=e.getBBox(),r=y.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild);}(0,o.o)(w,_,u.diagramPadding,u.useMaxWidth),Object.keys(k).forEach(function(e){let r=k[e];if(r.link){let l=f.select("#"+t+' [id="'+a.db.lookUpDomId(e)+'"]');if(l){let e=y.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",r.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",r.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===h?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):r.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",r.linkTarget);let t=l.insert(function(){return e;},":first-child"),a=l.select(".label-container");a&&t.append(function(){return a.node();});let n=l.select(".label");n&&t.append(function(){return n.node();});}}});},M=function(e){for(let t of Object.keys(e))D[t]=e[t];},P={parser:l.p,db:l.f,renderer:f.f,styles:f.a,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,M(e.flowchart),l.f.clear(),l.f.setGen("gen-1");}};}}]);
//# sourceMappingURL=dd0c6a01-async.90a6c65c.js.map