(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["c64d443d"],{a28c8bad:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{VectorEditorProvider:function(){return d;},useVectorEditor:function(){return c;}});var r=l("852bbaa9"),n=l("1a7c85b4"),i=l("d322be42"),o=r._(i);let a=e=>{let[t,l]=(0,o.useState)([]),[r,n]=(0,o.useState)(-1),[i,a]=(0,o.useState)(!1);return{saveState:(0,o.useCallback)(()=>{if(!e||i)return;let o=JSON.stringify(e.toJSON()),a=t.slice(0,r+1);a.push(o),a.length>50&&a.shift(),l(a),n(a.length-1);},[e,t,r,i]),undo:(0,o.useCallback)(()=>{if(!e||r<=0||i)return;a(!0);let l=r-1,o=t[l];e.loadFromJSON(JSON.parse(o),()=>{e.renderAll(),n(l),a(!1);});},[e,t,r,i]),redo:(0,o.useCallback)(()=>{if(!e||r>=t.length-1||i)return;a(!0);let l=r+1,o=t[l];e.loadFromJSON(JSON.parse(o),()=>{e.renderAll(),n(l),a(!1);});},[e,t,r,i]),canUndo:r>0,canRedo:r<t.length-1};},s=(0,o.createContext)(void 0),d=({children:e})=>{let[t,l]=(0,o.useState)(null),[r,i]=(0,o.useState)(null),[d,c]=(0,o.useState)("select"),u=a(t);return(0,n.jsx)(s.Provider,{value:{canvas:t,setCanvas:l,selectedObject:r,setSelectedObject:i,activeTool:d,setActiveTool:c,history:u},children:e});},c=()=>{let e=(0,o.useContext)(s);if(!e)throw Error("useVectorEditor must be used within a VectorEditorProvider");return e;};},f5c391a5:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return eU;}});var r=l("777fffbe"),n=l("852bbaa9"),i=l("1a7c85b4"),o=l("d322be42"),a=n._(o),s=l("28c7d19c"),d=l("e9bcd22d"),c=r._(d),u=l("b091b25f"),f=r._(u),h=l("a28c8bad"),x=l("b2a1469e"),g=r._(x),j=l("d4a32650"),m=r._(j),p=l("ea21718c"),b=r._(p),v=l("1353d6cc"),k=r._(v),y=l("f2806aec"),C=r._(y),w=l("81108cbb"),S=r._(w),A=l("d2d0b3b6"),E=r._(A),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},_=l("85c4e0d9"),O=r._(_),T=a.forwardRef(function(e,t){return a.createElement(O.default,(0,E.default)((0,E.default)({},e),{},{ref:t,icon:R}));}),M=l("0a08762b"),z=r._(M),P=l("84cd549f"),V=r._(P),I=l("07d5c3d6"),$=r._(I),q=l("34f8e1c9"),W=r._(q),H=l("076b2e3c"),L=r._(H),D=l("5af7999d"),N=r._(D),B=l("adbfb03b"),X=r._(B),Y=l("4e1dc2f8"),Z=l("dfa4ac87"),F=r._(Z),G=l("d5daf11a"),U=r._(G),J=l("97125d22"),K=r._(J),Q=l("2aa4d12e"),ee=r._(Q);let et=({open:e,onClose:t})=>{let{canvas:l,history:r}=(0,h.useVectorEditor)(),[n]=U.default.useForm(),o={backgroundColor:(null==l?void 0:l.backgroundColor)||"#ffffff",width:null==l?void 0:l.width,height:null==l?void 0:l.height};return(0,i.jsx)(F.default,{title:"Canvas Settings",open:e,onCancel:t,footer:null,destroyOnHidden:!0,children:(0,i.jsxs)(U.default,{form:n,layout:"vertical",initialValues:o,onValuesChange:(e,t)=>{if(l){if(e.backgroundColor){let t="string"==typeof e.backgroundColor?e.backgroundColor:e.backgroundColor.toHexString();l.backgroundColor=t,l.requestRenderAll();}(e.width||e.height)&&(l.setDimensions({width:t.width||l.width,height:t.height||l.height}),l.requestRenderAll());}},children:[(0,i.jsx)(U.default.Item,{label:"Background Color",name:"backgroundColor",children:(0,i.jsx)(K.default,{showText:!0})}),(0,i.jsx)(U.default.Item,{label:"Canvas Width",name:"width",children:(0,i.jsx)(ee.default,{})}),(0,i.jsx)(U.default.Item,{label:"Canvas Height",name:"height",children:(0,i.jsx)(ee.default,{})})]})});},el=()=>{let{canvas:e,activeTool:t,setActiveTool:l,history:r}=(0,h.useVectorEditor)(),[n,o]=a.default.useState(!1);return(0,i.jsxs)(b.default,{direction:"vertical",size:"small",children:[(0,i.jsx)(m.default,{title:"Select (V)",children:(0,i.jsx)(g.default,{type:"select"===t?"primary":"default",icon:(0,i.jsx)(C.default,{}),onClick:()=>l("select")})}),(0,i.jsx)(m.default,{title:"Pan (H / Space)",children:(0,i.jsx)(g.default,{type:"pan"===t?"primary":"default",icon:(0,i.jsx)(C.default,{}),onClick:()=>l("pan")})}),(0,i.jsx)(k.default,{style:{margin:"4px 0"}}),(0,i.jsx)(m.default,{title:"Rectangle (R)",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(S.default,{}),onClick:()=>{if(!e)return;let t=new Y.Rect({left:100,top:100,fill:"#ff0000",width:100,height:100});e.add(t),e.setActiveObject(t),l("select");}})}),(0,i.jsx)(m.default,{title:"Circle (C)",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(T,{rotate:45}),onClick:()=>{if(!e)return;let t=new Y.Circle({left:100,top:100,fill:"#00ff00",radius:50});e.add(t),e.setActiveObject(t),l("select");}})}),(0,i.jsx)(m.default,{title:"Text (T)",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(z.default,{}),onClick:()=>{if(!e)return;let t=new Y.IText("Type here",{left:100,top:100,fontFamily:"arial",fill:"#333",fontSize:20});e.add(t),e.setActiveObject(t),l("select");}})}),(0,i.jsx)(m.default,{title:"Pen (P)",children:(0,i.jsx)(g.default,{type:"pen"===t?"primary":"default",icon:(0,i.jsx)(N.default,{}),onClick:()=>l("pen")})}),(0,i.jsx)(k.default,{style:{margin:"4px 0"}}),(0,i.jsx)(m.default,{title:"Undo (Ctrl+Z)",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(W.default,{}),onClick:r.undo,disabled:!r.canUndo})}),(0,i.jsx)(m.default,{title:"Redo (Ctrl+Shift+Z)",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(L.default,{}),onClick:r.redo,disabled:!r.canRedo})}),(0,i.jsx)(k.default,{style:{margin:"4px 0"}}),(0,i.jsx)(m.default,{title:"Clear Canvas",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(V.default,{}),danger:!0,onClick:()=>{e&&(e.clear(),e.backgroundColor="#ffffff",e.renderAll(),r.saveState());}})}),(0,i.jsx)(m.default,{title:"Export SVG",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)($.default,{}),onClick:()=>{let t;if(!e)return;let l=e.backgroundColor;e.backgroundColor="transparent";let r=e.getObjects();if(r.length>0){let l=1/0,n=1/0,i=-1/0,o=-1/0;r.forEach(e=>{let t=e.getBoundingRect();t.left<l&&(l=t.left),t.top<n&&(n=t.top),t.left+t.width>i&&(i=t.left+t.width),t.top+t.height>o&&(o=t.top+t.height);}),l-=10,n-=10,i+=10,o+=10;let a=i-l,s=o-n;t=e.toSVG({viewBox:{x:l,y:n,width:a,height:s},width:a.toString(),height:s.toString()});}else t=e.toSVG();e.backgroundColor=l,e.requestRenderAll();let n=new Blob([t],{type:"image/svg+xml"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download="design.svg",document.body.appendChild(o),o.click(),document.body.removeChild(o);}})}),(0,i.jsx)(m.default,{title:"Settings",children:(0,i.jsx)(g.default,{icon:(0,i.jsx)(X.default,{}),onClick:()=>o(!0)})}),(0,i.jsx)(et,{open:n,onClose:()=>o(!1)})]});},er=e=>{(0,a.useEffect)(()=>{let t=t=>{if(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement)return;let l=t.key.toLowerCase(),r=t.ctrlKey||t.metaKey,n=t.shiftKey,i="";r&&(i+="ctrl+"),n&&(i+="shift+"),e[i+=l]?(t.preventDefault(),e[i](t)):!e[l]||r||n||e[l](t);};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t);},[e]);},en=(e,t)=>{let[l,r]=(0,a.useState)(!1),n=(0,a.useRef)(null),i=(0,a.useRef)([]),o=(0,a.useRef)([]),s=(0,a.useRef)(!1),d=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useRef)([]),f=(e,t=!1)=>{if(0===e.length)return"";let l=`M ${e[0].x} ${e[0].y}`;for(let t=1;t<e.length;t++){let r=e[t],n=e[t-1];if(n.cp2||r.cp1){let e=n.cp2?n.cp2.x:n.x,t=n.cp2?n.cp2.y:n.y,i=r.cp1?r.cp1.x:r.x,o=r.cp1?r.cp1.y:r.y;l+=` C ${e} ${t} ${i} ${o} ${r.x} ${r.y}`;}else l+=` L ${r.x} ${r.y}`;}return t&&(l+=" Z"),l;},h=(0,a.useCallback)(()=>{if(!e||0===i.current.length)return;let t=f(i.current);n.current&&e.remove(n.current);let l=new Y.Path(t,{fill:"",stroke:"black",strokeWidth:2,selectable:!1,evented:!1,objectCaching:!1});l.isTemp=!0,e.add(l),e.sendObjectToBack(l),n.current=l,e.requestRenderAll();},[e]),x=(0,a.useCallback)((t,l,r=!1)=>{if(!e)return;let n=new Y.Circle({left:t,top:l,radius:4,fill:r?"#00ff00":"#ffffff",stroke:"#333",strokeWidth:1,originX:"center",originY:"center",selectable:!1,evented:!0,hasControls:!1,hasBorders:!1});return n.isTemp=!0,e.add(n),o.current.push(n),e.requestRenderAll(),n;},[e]),g=(0,a.useCallback)((l=!1)=>{if(!e||!n.current)return;let a=f(i.current,l);n.current&&e.remove(n.current),o.current.forEach(t=>e.remove(t)),o.current=[],c.current&&(e.remove(c.current),c.current=null),u.current.forEach(t=>e.remove(t)),u.current=[];let h=new Y.Path(a,{fill:l?"#cccccc":"",stroke:"black",strokeWidth:2,selectable:!0,evented:!0,objectCaching:!0});e.add(h),e.setActiveObject(h),r(!1),n.current=null,i.current=[],s.current=!1,d.current=null,t&&t(),e.requestRenderAll();},[e,t]),j=(0,a.useCallback)(t=>{if(!e)return;let n=e.getPointer(t.e);if(l&&o.current.length>0){let e=o.current[0];if(t.target===e){g(!0);return;}if(o.current.includes(t.target))return;}l?(i.current.push({x:n.x,y:n.y}),x(n.x,n.y)):(r(!0),i.current=[{x:n.x,y:n.y}],x(n.x,n.y,!0)),h(),s.current=!0,d.current={x:n.x,y:n.y};},[e,l,h,x,g]),m=(0,a.useCallback)(t=>{if(!e||!l)return;let r=e.getPointer(t.e);if(s.current&&i.current.length>0){let t=i.current.length-1,l=i.current[t],n=r.x-l.x,o=r.y-l.y;if(l.cp2={x:l.x+n,y:l.y+o},l.cp1={x:l.x-n,y:l.y-o},h(),u.current.forEach(t=>e.remove(t)),u.current=[],l.cp1){let t=new Y.Line([l.x,l.y,l.cp1.x,l.cp1.y],{stroke:"#666",strokeWidth:1,selectable:!1,evented:!1});t.isTemp=!0,e.add(t),u.current.push(t);}if(l.cp2){let t=new Y.Line([l.x,l.y,l.cp2.x,l.cp2.y],{stroke:"#666",strokeWidth:1,selectable:!1,evented:!1});t.isTemp=!0,e.add(t),u.current.push(t);}c.current&&(e.remove(c.current),c.current=null);}else if(i.current.length>0){let t=i.current[i.current.length-1],l=`M ${t.x} ${t.y}`;t.cp2?l+=` C ${t.cp2.x} ${t.cp2.y} ${r.x} ${r.y} ${r.x} ${r.y}`:l+=` L ${r.x} ${r.y}`,c.current&&e.remove(c.current);let n=new Y.Path(l,{fill:"",stroke:"#999",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1});n.isTemp=!0,e.add(n),c.current=n,e.requestRenderAll();}},[e,l,h]);return{isDrawing:l,onMouseDown:j,onMouseMove:m,onMouseUp:(0,a.useCallback)(t=>{s.current=!1,d.current=null,e&&(u.current.forEach(t=>e.remove(t)),u.current=[],e.requestRenderAll());},[e]),onDoubleClick:(0,a.useCallback)(e=>{g(!1);},[g]),finishPath:g};},ei=()=>{let e=(0,a.useRef)(null),t=(0,a.useRef)(null),{setCanvas:l,setSelectedObject:r,activeTool:n,setActiveTool:o,history:s,canvas:d}=(0,h.useVectorEditor)(),c=en(d,s.saveState);return(0,a.useEffect)(()=>{if(!e.current||!t.current)return;let n=new Y.Canvas(e.current,{width:t.current.clientWidth,height:t.current.clientHeight,backgroundColor:"#ffffff",selection:!0});l(n);let i=()=>{let e=n.getActiveObjects();1===e.length?r(e[0]):r(null);};n.on("selection:created",i),n.on("selection:updated",i),n.on("selection:cleared",()=>r(null));let o=e=>{e.target&&e.target.isTemp||s.saveState();};n.on("object:modified",o),n.on("object:added",o),n.on("object:removed",o),n.on("mouse:wheel",e=>{let t=e.e.deltaY,l=n.getZoom();(l*=.999**t)>20&&(l=20),l<.01&&(l=.01),n.zoomToPoint(new Y.Point(e.e.offsetX,e.e.offsetY),l),e.e.preventDefault(),e.e.stopPropagation();});let a=()=>{t.current&&n.setDimensions({width:t.current.clientWidth,height:t.current.clientHeight});};return window.addEventListener("resize",a),()=>{n.dispose(),window.removeEventListener("resize",a);};},[]),(0,a.useEffect)(()=>{d&&(d.isDrawingMode=!1,"pan"===n?(d.defaultCursor="grab",d.selection=!1,d.forEachObject(e=>{e.selectable=!1,e.evented=!1;})):"pen"===n?(d.defaultCursor="crosshair",d.selection=!1,d.forEachObject(e=>{e.selectable=!1,e.evented=!1;})):(d.defaultCursor="default",d.selection=!0,d.forEachObject(e=>{e.selectable=!0,e.evented=!0;})),d.requestRenderAll());},[n,d]),(0,a.useEffect)(()=>{if(!d||"pen"!==n)return;let e=e=>c.onMouseDown(e),t=e=>c.onMouseMove(e),l=e=>c.onMouseUp(e),r=e=>c.onDoubleClick(e);return d.on("mouse:down",e),d.on("mouse:move",t),d.on("mouse:up",l),d.on("mouse:dblclick",r),()=>{d.off("mouse:down",e),d.off("mouse:move",t),d.off("mouse:up",l),d.off("mouse:dblclick",r);};},[d,n,c]),er({v:()=>o("select"),h:()=>o("pan")," ":()=>o("pan"),r:()=>{if(!d)return;let e=new Y.Rect({left:100,top:100,fill:"#ff0000",width:100,height:100});d.add(e),d.setActiveObject(e),o("select");},c:()=>{if(!d)return;let e=new Y.Circle({left:100,top:100,fill:"#00ff00",radius:50});d.add(e),d.setActiveObject(e),o("select");},t:()=>{if(!d)return;let e=new Y.IText("Type here",{left:100,top:100,fontFamily:"arial",fill:"#333",fontSize:20});d.add(e),d.setActiveObject(e),o("select");},p:()=>o("pen"),delete:()=>{if(!d)return;let e=d.getActiveObjects();e.length&&(d.discardActiveObject(),e.forEach(e=>{d.remove(e);}),d.requestRenderAll());},backspace:()=>{if(!d)return;let e=d.getActiveObjects();e.length&&(d.discardActiveObject(),e.forEach(e=>{d.remove(e);}),d.requestRenderAll());},"ctrl+z":()=>s.undo(),"ctrl+shift+z":()=>s.redo(),"ctrl+=":()=>{d&&d.setZoom(1.1*d.getZoom());},"ctrl+-":()=>{d&&d.setZoom(.9*d.getZoom());},"ctrl+0":()=>{d&&(d.setZoom(1),d.setViewportTransform([1,0,0,1,0,0]));}}),(0,i.jsx)("div",{ref:t,style:{width:"100%",height:"100%"},children:(0,i.jsx)("canvas",{ref:e})});};var eo=l("8e6ac0a6"),ea=r._(eo),es=l("6effc0fd"),ed=r._(es),ec=l("4bff2451"),eu=r._(ec);let{Title:ef}=ed.default,eh=()=>{let{canvas:e,selectedObject:t}=(0,h.useVectorEditor)(),[l]=U.default.useForm(),[,r]=(0,a.useState)({});return((0,a.useEffect)(()=>{if(t){let n=()=>{let e=e=>"string"==typeof e?e:e&&"object"==typeof e&&"colorStops"in e?"#000000":e?e.toString():"transparent";l.setFieldsValue({fill:e(t.fill),stroke:e(t.stroke),strokeWidth:t.strokeWidth,opacity:t.opacity,left:Math.round(t.left||0),top:Math.round(t.top||0),width:Math.round((t.width||0)*(t.scaleX||1)),height:Math.round((t.height||0)*(t.scaleY||1)),angle:Math.round(t.angle||0)}),r({});};if(n(),e){let t=()=>n();return e.on("object:modified",t),()=>{e.off("object:modified",t);};}}},[t,e,l]),t)?(0,i.jsxs)("div",{children:[(0,i.jsx)(ef,{level:5,children:"Properties"}),(0,i.jsxs)(U.default,{form:l,layout:"vertical",onValuesChange:(l,r)=>{var n,i,o,a;if(t&&e){if("fill"in l){let e="string"==typeof l.fill?l.fill:(null===(i=l.fill)||void 0===i?void 0:null===(n=i.toHexString)||void 0===n?void 0:n.call(i))||"#000000";t.set("fill",e);}if("stroke"in l){let e="string"==typeof l.stroke?l.stroke:(null===(a=l.stroke)||void 0===a?void 0:null===(o=a.toHexString)||void 0===o?void 0:o.call(a))||"#000000";t.set("stroke",e);}if("strokeWidth"in l&&t.set("strokeWidth",l.strokeWidth),"opacity"in l&&t.set("opacity",l.opacity),"left"in l&&t.set("left",l.left),"top"in l&&t.set("top",l.top),"angle"in l&&t.set("angle",l.angle),"width"in l){let e=l.width;t.width&&t.scaleToWidth(e);}if("height"in l){let e=l.height;t.height&&t.scaleToHeight(e);}t.setCoords(),e.requestRenderAll();}},size:"small",children:[(0,i.jsx)(U.default.Item,{name:"fill",label:"Fill Color",children:(0,i.jsx)(K.default,{showText:!0})}),(0,i.jsx)(U.default.Item,{name:"stroke",label:"Stroke Color",children:(0,i.jsx)(K.default,{showText:!0})}),(0,i.jsx)(U.default.Item,{name:"strokeWidth",label:"Stroke Width",children:(0,i.jsx)(ee.default,{min:0})}),(0,i.jsx)(U.default.Item,{name:"opacity",label:"Opacity",children:(0,i.jsx)(ea.default,{min:0,max:1,step:.1})}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)(U.default.Item,{name:"left",label:"X",children:(0,i.jsx)(ee.default,{})}),(0,i.jsx)(U.default.Item,{name:"top",label:"Y",children:(0,i.jsx)(ee.default,{})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)(U.default.Item,{name:"width",label:"Width",children:(0,i.jsx)(ee.default,{min:1})}),(0,i.jsx)(U.default.Item,{name:"height",label:"Height",children:(0,i.jsx)(ee.default,{min:1})})]}),(0,i.jsx)(U.default.Item,{name:"angle",label:"Rotation",children:(0,i.jsx)(ea.default,{min:0,max:360})})]})]}):(0,i.jsx)(eu.default,{description:"No object selected",image:eu.default.PRESENTED_IMAGE_SIMPLE});};var ex=l("f6c9c5f6"),eg=r._(ex),ej=l("54c23ac9"),em=r._(ej),ep=l("7502124f"),eb=r._(ep),ev=l("5a5a4642"),ek=r._(ev),ey=l("6e3683a5"),eC=r._(ey),ew=l("0d6a818e"),eS=l("4989c16f"),eA=l("039e4dd6");let{Title:eE}=ed.default,eR=({id:e,children:t,isSelected:l,onClick:r})=>{let{attributes:n,listeners:o,setNodeRef:a,setActivatorNodeRef:s,transform:d,transition:c}=(0,eS.useSortable)({id:e}),u={transform:eA.CSS.Transform.toString(d),transition:c,backgroundColor:l?"#e6f7ff":"transparent",marginBottom:4,border:"1px solid #f0f0f0",borderRadius:4,padding:"4px 8px",display:"flex",alignItems:"center"};return(0,i.jsxs)("div",{ref:a,style:u,children:[" ",(0,i.jsxs)("div",{ref:s,...n,...o,style:{cursor:"grab",marginRight:8,display:"flex",alignItems:"center",color:"#999"},children:[(0,i.jsx)(eC.default,{})," "]}),(0,i.jsxs)("div",{onClick:r,style:{flex:1,cursor:"pointer"},children:[" ",t," "]})]});},e_=()=>{let{canvas:e,selectedObject:t,setSelectedObject:l,history:r}=(0,h.useVectorEditor)(),[n,o]=(0,a.useState)([]),s=(0,ew.useSensors)((0,ew.useSensor)(ew.PointerSensor),(0,ew.useSensor)(ew.KeyboardSensor,{coordinateGetter:eS.sortableKeyboardCoordinates})),d=()=>{if(!e)return;let t=e.getObjects();t.forEach(e=>{e.uid||(e.uid=Math.random().toString(36).substr(2,9));}),o([...t].reverse());};(0,a.useEffect)(()=>{let t;if(!e)return;let l=()=>{clearTimeout(t),t=setTimeout(d,100);};return e.on("object:added",l),e.on("object:removed",l),e.on("object:modified",l),d(),()=>{e.off("object:added",l),e.off("object:removed",l),e.off("object:modified",l),clearTimeout(t);};},[e]);let c=(t,l)=>{l.stopPropagation(),t.visible=!t.visible,t.visible||null==e||e.discardActiveObject(),null==e||e.requestRenderAll(),r.saveState(),o([...(null==e?void 0:e.getObjects())||[]].reverse());},u=(t,l)=>{l.stopPropagation(),t.lockMovementX=!t.lockMovementX,t.lockMovementY=!t.lockMovementY,t.lockRotation=!t.lockRotation,t.lockScalingX=!t.lockScalingX,t.lockScalingY=!t.lockScalingY,t.selectable=!t.lockMovementX,t.selectable||null==e||e.discardActiveObject(),null==e||e.requestRenderAll(),r.saveState(),o([...(null==e?void 0:e.getObjects())||[]].reverse());},f=t=>{e&&t.visible&&t.selectable&&(e.setActiveObject(t),e.requestRenderAll());},x=(t,l)=>{l.stopPropagation(),null==e||e.remove(t),null==e||e.requestRenderAll(),r.saveState();};return(0,i.jsxs)("div",{style:{marginTop:16},children:[" ",(0,i.jsx)(eE,{level:5,children:"Layers"})," ",(0,i.jsxs)(ew.DndContext,{sensors:s,collisionDetection:ew.closestCenter,onDragEnd:t=>{let{active:l,over:i}=t;if(i&&l.id!==i.id){let t=n.findIndex(e=>e.uid===l.id),o=n.findIndex(e=>e.uid===i.id);if(-1!==t&&-1!==o){let l=n.length-1-o,i=n[t];null==e||e.moveObjectTo(i,l),null==e||e.requestRenderAll(),r.saveState(),d();}}},children:[" ",(0,i.jsx)(eS.SortableContext,{items:n.map(e=>e.uid),strategy:eS.verticalListSortingStrategy,children:(0,i.jsx)("div",{style:{maxHeight:300,overflowY:"auto",border:"1px solid #d9d9d9",borderRadius:4,padding:4},children:n.map((e,l)=>{let r=t===e,o=e.type||"Object",a=e.name||`${o} ${n.length-l}`;return(0,i.jsx)(eR,{id:e.uid,isSelected:r,onClick:()=>f(e),children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,i.jsxs)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:120},children:[a," "]}),(0,i.jsxs)(b.default,{size:4,children:[" ",(0,i.jsx)(g.default,{type:"text",size:"small",icon:e.visible?(0,i.jsx)(eg.default,{}):(0,i.jsx)(em.default,{}),onClick:t=>c(e,t),onMouseDown:e=>e.stopPropagation()}),(0,i.jsx)(g.default,{type:"text",size:"small",icon:e.lockMovementX?(0,i.jsx)(eb.default,{}):(0,i.jsx)(ek.default,{}),onClick:t=>u(e,t),onMouseDown:e=>e.stopPropagation()}),(0,i.jsx)(g.default,{type:"text",size:"small",danger:!0,icon:(0,i.jsx)(V.default,{}),onClick:t=>x(e,t),onMouseDown:e=>e.stopPropagation()})]})]})},e.uid);})})})]})]});};var eO=l("711e1aa9"),eT=r._(eO),eM=l("16d526ba"),ez=r._(eM),eP=l("1872ef2e"),eV=r._(eP),eI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}}]},name:"vertical-align-top",theme:"outlined"},e$=a.forwardRef(function(e,t){return a.createElement(O.default,(0,E.default)((0,E.default)({},e),{},{ref:t,icon:eI}));}),eq=l("0e7003b1"),eW=r._(eq),eH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"},eL=a.forwardRef(function(e,t){return a.createElement(O.default,(0,E.default)((0,E.default)({},e),{},{ref:t,icon:eH}));}),eD=l("acdcfa21"),eN=r._(eD),eB=l("e36949ef"),eX=r._(eB);let{Title:eY}=ed.default,eZ=()=>{let{canvas:e,selectedObject:t,history:l}=(0,h.useVectorEditor)(),r=r=>{if(!e||!t)return;let n=e.width||0,i=e.height||0;switch(r){case"left":t.set({left:0});break;case"center":e.centerObjectH(t);break;case"right":t.set({left:n-(t.width||0)*(t.scaleX||1)});break;case"top":t.set({top:0});break;case"middle":e.centerObjectV(t);break;case"bottom":t.set({top:i-(t.height||0)*(t.scaleY||1)});}t.setCoords(),e.requestRenderAll(),l.saveState();};return t?(0,i.jsxs)("div",{style:{marginBottom:16},children:[(0,i.jsx)(eY,{level:5,children:"Alignment & Grouping"}),(0,i.jsxs)(b.default,{wrap:!0,children:[(0,i.jsx)(m.default,{title:"Align Left",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eT.default,{}),onClick:()=>r("left")})}),(0,i.jsx)(m.default,{title:"Align Center",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(ez.default,{}),onClick:()=>r("center")})}),(0,i.jsx)(m.default,{title:"Align Right",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eV.default,{}),onClick:()=>r("right")})}),(0,i.jsx)(m.default,{title:"Align Top",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(e$,{}),onClick:()=>r("top")})}),(0,i.jsx)(m.default,{title:"Align Middle",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eW.default,{}),onClick:()=>r("middle")})}),(0,i.jsx)(m.default,{title:"Align Bottom",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eL,{}),onClick:()=>r("bottom")})})]}),(0,i.jsx)("div",{style:{marginTop:8},children:(0,i.jsxs)(b.default,{children:[(0,i.jsx)(m.default,{title:"Group",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eN.default,{}),onClick:()=>{if(!e)return;let t=e.getActiveObject();t&&"activeSelection"===t.type&&(t.toGroup(),e.requestRenderAll(),l.saveState());}})}),(0,i.jsx)(m.default,{title:"Ungroup",children:(0,i.jsx)(g.default,{size:"small",icon:(0,i.jsx)(eX.default,{}),onClick:()=>{if(!e)return;let t=e.getActiveObject();t&&"group"===t.type&&(t.toActiveSelection(),e.requestRenderAll(),l.saveState());}})})]})})]}):null;},{Sider:eF,Content:eG}=f.default,eU=()=>(0,i.jsx)(s.PageContainer,{title:"Vector Editor",children:(0,i.jsx)(h.VectorEditorProvider,{children:(0,i.jsx)(c.default,{className:"editorContainer-K_31rsCt",bodyStyle:{padding:0,height:"100%"},children:(0,i.jsxs)(f.default,{style:{height:"80vh"},children:[(0,i.jsx)(eF,{theme:"light",width:60,className:"toolbarSider-WrdEPO3N",children:(0,i.jsx)(el,{})}),(0,i.jsx)(eG,{className:"canvasContent-l3CEHf1z",children:(0,i.jsx)(ei,{})}),(0,i.jsxs)(eF,{theme:"light",width:300,className:"propertiesSider-2RCO5zZs",children:[(0,i.jsx)(eZ,{}),(0,i.jsx)(eh,{}),(0,i.jsx)(e_,{})]})]})})})});}}]);
//# sourceMappingURL=c64d443d-async.92c88cfd.js.map