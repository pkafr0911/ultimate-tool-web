(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ultimate-tool-web"]||[]).push([["2bf203fd"],{d1a0134f:function(e,t,a){a.d(t,"__esModule",{value:!0}),a.e(t,{default:function(){return eN;}});var l=a("777fffbe"),s=a("852bbaa9"),n=a("1a7c85b4"),c=a("b2ef07e9"),d=l._(c),i=a("1ee4d6ad"),r=l._(i),o=a("84cd549f"),u=l._(o),f=a("07d5c3d6"),h=l._(f),m=a("36ede29e"),g=l._(m),x=a("ab7a20df"),p=l._(x),j=a("7adb6bdc"),b=l._(j),v=a("d2d0b3b6"),y=l._(v),_=a("d322be42"),w=s._(_),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"scan",theme:"outlined"},S=a("85c4e0d9"),E=l._(S),R=w.forwardRef(function(e,t){return w.createElement(E.default,(0,y.default)((0,y.default)({},e),{},{ref:t,icon:N}));}),U=a("adbfb03b"),L=l._(U),C=a("b2a1469e"),k=l._(C),z=a("e9bcd22d"),M=l._(z),T=a("e2967699"),I=l._(T),D=a("1353d6cc"),O=l._(D),P=a("4bff2451"),A=l._(P),B=a("1ffd224b"),H=l._(B),V=a("cb3849a3"),F=l._(V),J=a("a5512054"),G=l._(J),X=a("3eb6f542"),$=l._(X),q=a("ea21718c"),K=l._(q),Q=a("6caefff4"),W=l._(Q),Y=a("5d5723f8"),Z=l._(Y),ee=a("d4a32650"),et=l._(ee),ea=a("6effc0fd"),el=l._(ea),es=a("34f06567"),en=l._(es),ec=a("c9d8dc0b"),ed=l._(ec),ei=a("13dfe186"),er=l._(ei),eo=a("85d53cee"),eu=l._(eo);async function ef(e,t){let{maxWidth:a=2e3,maxHeight:l=2e3,contrastBoost:s=1.2,threshold:n=150}=t||{},c=[],d=new Image;d.src=URL.createObjectURL(e),await new Promise((e,t)=>{d.onload=()=>e(),d.onerror=e=>t(e);});let i=d.width,r=d.height,o=Math.min(1,a/i,l/r);i=Math.round(i*o),r=Math.round(r*o);let u=document.createElement("canvas");u.width=i,u.height=r;let f=u.getContext("2d");f.drawImage(d,0,0,i,r),c.push(u.toDataURL("image/png")),c.push(u.toDataURL("image/png"));let h=f.getImageData(0,0,i,r),m=h.data;for(let e=0;e<m.length;e+=4){let t=.299*m[e]+.587*m[e+1]+.114*m[e+2],a=(t=Math.min(255,t*s))<n?0:255;m[e]=m[e+1]=m[e+2]=a;}f.putImageData(h,0,0),c.push(u.toDataURL("image/png"));let g=f.getImageData(0,0,i,r),x=g.data,p=i,j=r,b=new Uint8ClampedArray(x);for(let e=1;e<j-1;e++)for(let t=1;t<p-1;t++)for(let a=0;a<3;a++){let l=(e*p+t)*4+a,s=5*b[l]-b[l-4]-b[l+4]-b[l-4*p]-b[l+4*p];x[l]=Math.min(255,Math.max(0,s));}return f.putImageData(g,0,0),c.push(u.toDataURL("image/png")),{steps:c,finalBlob:await new Promise((e,t)=>{u.toBlob(a=>{a?e(a):t(Error("Failed to convert canvas to blob"));},"image/png",1);})};}var eh=a("d14fd15c"),em=l._(eh);let eg="image_to_text_settings",ex={language:["eng","vie"],upscaleMode:"manual",textEnhancement:!0},ep=e=>{localStorage.setItem(eg,JSON.stringify(e));},ej=()=>{try{let e=localStorage.getItem(eg);return e?{...ex,...JSON.parse(e)}:ex;}catch{return ex;}},eb=e=>{let t=new Blob([e||""],{type:"text/plain"}),a=URL.createObjectURL(t),l=document.createElement("a");l.download="extracted-text.txt",l.href=a,l.click();},ev=async(e,t,a,l,s)=>{if(!e)return ed.default.warning("Please upload an image first."),null;a(!0);try{let a;let n=ej(),c=[];if(n.textEnhancement){let t=await ef(e);c=t.steps,a=t.finalBlob,s(c);}else a=e,s([URL.createObjectURL(e)]);let d=await em.default.recognize(a,l.join("+"),{logger:e=>console.log(e)});return t(d.data.text),d.data;}catch(e){throw console.error(e),ed.default.error("Failed to extract text"),e;}finally{a(!1);}},{Title:ey,Text:e_}=el.default,{Dragger:ew}=en.default,eN=()=>{let[e,t]=(0,w.useState)(!1),a=(0,w.useRef)(0),[l,s]=(0,w.useState)(null),[c,i]=(0,w.useState)(""),[o,f]=(0,w.useState)(""),[m,x]=(0,w.useState)(!1),[j,v]=(0,w.useState)(null),[y,_]=(0,w.useState)([]),[N,S]=(0,w.useState)(["eng"]),[E,U]=(0,w.useState)(!0);(0,w.useEffect)(()=>{let e=ej();S(e.language||["eng"]),U(e.textEnhancement??!0);},[]),(0,w.useEffect)(()=>{ep({...ej(),language:N,textEnhancement:E});},[N,E]),(0,w.useEffect)(()=>()=>{c&&URL.revokeObjectURL(c),y.forEach(e=>URL.revokeObjectURL(e));},[c,y]);let C=e=>(s(e),f(""),v(null),_([]),i(URL.createObjectURL(e)),!1),z=async()=>{if(l){x(!0),v(null);try{let e=ej();ep({...e,language:N,textEnhancement:E});let t=await ev(l,f,x,N,_);t&&t.confidence&&(v(t.confidence),ed.default.success(`Text extracted with ${Math.round(t.confidence)}% confidence!`));}catch(e){}}};return(0,n.jsxs)(er.default,{setDragging:t,dragCounter:a,handleUpload:C,children:[(0,n.jsx)("div",{className:"ocr-container",children:(0,n.jsxs)(M.default,{className:"ocr-card",bordered:!1,children:[(0,n.jsxs)("div",{className:"header-section",children:[(0,n.jsxs)(ey,{level:2,style:{margin:0},children:[(0,n.jsx)(R,{})," Image to Text (OCR)"]}),(0,n.jsx)(e_,{type:"secondary",children:"Extract text from images with high accuracy using advanced OCR."})]}),(0,n.jsxs)(G.default,{gutter:[32,32],className:"main-content",children:[(0,n.jsx)(I.default,{xs:24,lg:12,className:"input-column",children:(0,n.jsxs)(M.default,{title:(0,n.jsxs)(K.default,{children:[(0,n.jsx)(g.default,{})," Source Image"]}),bordered:!1,className:"inner-card",children:[c?(0,n.jsxs)("div",{className:"image-preview-wrapper",children:[(0,n.jsx)(H.default,{src:c,alt:"preview",className:"preview-image"}),(0,n.jsx)("div",{className:"image-actions",children:(0,n.jsx)(k.default,{danger:!0,icon:(0,n.jsx)(u.default,{}),onClick:()=>{s(null),i(""),f(""),v(null),_([]);},size:"small",children:"Remove"})})]}):(0,n.jsxs)(ew,{accept:"image/*",showUploadList:!1,beforeUpload:C,className:"custom-dragger",children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(d.default,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag image to this area to upload"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single upload. Strictly prohibit from uploading company data or other band files"})]}),(0,n.jsx)(O.default,{orientation:"left",children:"Settings"}),(0,n.jsxs)(K.default,{direction:"vertical",style:{width:"100%"},size:"middle",children:[(0,n.jsxs)("div",{className:"setting-row",children:[(0,n.jsxs)(K.default,{children:[(0,n.jsx)(b.default,{}),(0,n.jsx)(e_,{children:"Language"})]}),(0,n.jsx)($.default,{mode:"multiple",value:N,onChange:S,style:{width:200},options:[{label:"English",value:"eng"},{label:"Vietnamese",value:"vie"},{label:"Spanish",value:"spa"},{label:"French",value:"fra"},{label:"German",value:"deu"},{label:"Chinese (Simplified)",value:"chi_sim"},{label:"Japanese",value:"jpn"}]})]}),(0,n.jsxs)("div",{className:"setting-row",children:[(0,n.jsxs)(K.default,{children:[(0,n.jsx)(L.default,{}),(0,n.jsx)(e_,{children:"Auto Enhancement"}),(0,n.jsx)(et.default,{title:"Automatically improves contrast and sharpness for better accuracy",children:(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"(?)"})})]}),(0,n.jsx)(Z.default,{checked:E,onChange:U})]}),(0,n.jsx)(k.default,{type:"primary",size:"large",icon:(0,n.jsx)(R,{}),block:!0,onClick:z,loading:m,disabled:!l,className:"process-btn",children:m?"Processing...":"Extract Text"})]})]})}),(0,n.jsxs)(I.default,{xs:24,lg:12,className:"output-column",children:[(0,n.jsx)(M.default,{title:(0,n.jsxs)(K.default,{children:[(0,n.jsx)(p.default,{})," Extracted Text"]}),bordered:!1,className:"inner-card",extra:o&&(0,n.jsxs)(K.default,{children:[(0,n.jsx)(k.default,{type:"text",icon:(0,n.jsx)(r.default,{}),onClick:()=>{o&&(navigator.clipboard.writeText(o),ed.default.success("Copied to clipboard!"));},children:"Copy"}),(0,n.jsx)(k.default,{type:"text",icon:(0,n.jsx)(h.default,{}),onClick:()=>eb(o),children:"Download"})]}),children:m?(0,n.jsxs)("div",{className:"loading-state",children:[(0,n.jsx)(W.default,{size:"large",tip:"Analyzing image..."}),(0,n.jsx)(e_,{type:"secondary",style:{marginTop:16},children:"This might take a few seconds depending on image complexity..."})]}):o?(0,n.jsxs)("div",{className:"result-container",children:[null!==j&&(0,n.jsxs)("div",{className:"confidence-meter",children:[(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"Confidence Score"}),(0,n.jsx)(F.default,{percent:Math.round(j),size:"small",status:j>80?"success":j>50?"normal":"exception"})]}),(0,n.jsx)("div",{className:"text-content",children:o})]}):(0,n.jsx)(A.default,{image:A.default.PRESENTED_IMAGE_SIMPLE,description:"No text extracted yet"})}),y.length>1&&(0,n.jsxs)("div",{style:{marginTop:24},children:[(0,n.jsx)(e_,{type:"secondary",style:{fontSize:12},children:"Processed Image Debug:"}),(0,n.jsx)("div",{style:{display:"flex",gap:8,marginTop:8,overflowX:"auto"},children:y.map((e,t)=>(0,n.jsx)(H.default,{src:e,width:80,height:80,style:{objectFit:"cover",borderRadius:4}},t))})]})]})]})]})}),e&&(0,n.jsx)(eu.default,{})]});};}}]);
//# sourceMappingURL=2bf203fd-async.3d6bf151.js.map