{"version":3,"sources":["node_modules/@ant-design/icons-svg/es/asn/ScanOutlined.js","node_modules/@ant-design/icons/es/icons/ScanOutlined.js","src/pages/ImageToText/utils/textEnhancement.ts","src/pages/ImageToText/constants.ts","src/pages/ImageToText/utils/helpers.tsx","src/pages/ImageToText/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar ScanOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"scan\", \"theme\": \"outlined\" };\nexport default ScanOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ScanOutlinedSvg from \"@ant-design/icons-svg/es/asn/ScanOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ScanOutlined = function ScanOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ScanOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ScanOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ScanOutlined';\n}\nexport default RefIcon;","export async function textEnhancement(\n  file: File,\n  options?: { maxWidth?: number; maxHeight?: number; contrastBoost?: number; threshold?: number },\n): Promise<{ steps: string[]; finalBlob: Blob }> {\n  const { maxWidth = 2000, maxHeight = 2000, contrastBoost = 1.2, threshold = 150 } = options || {};\n  const steps: string[] = [];\n\n  const img = new Image();\n  img.src = URL.createObjectURL(file);\n\n  await new Promise<void>((resolve, reject) => {\n    img.onload = () => resolve();\n    img.onerror = (err) => reject(err);\n  });\n\n  let width = img.width;\n  let height = img.height;\n  const scale = Math.min(1, maxWidth / width, maxHeight / height);\n  width = Math.round(width * scale);\n  height = Math.round(height * scale);\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d')!;\n\n  // Step 1: Original image\n  ctx.drawImage(img, 0, 0, width, height);\n  steps.push(canvas.toDataURL('image/png'));\n\n  // Step 2: Resize already applied, so we can directly store resized image\n  steps.push(canvas.toDataURL('image/png'));\n\n  // Step 3: Grayscale + contrast + threshold\n  const imgData = ctx.getImageData(0, 0, width, height);\n  const data = imgData.data;\n\n  for (let i = 0; i < data.length; i += 4) {\n    // Each pixel consists of 4 values in the data array: [R, G, B, A]\n    // i = red channel index, i+1 = green, i+2 = blue, i+3 = alpha (opacity)\n\n    // Convert RGB to grayscale using the luminosity method:\n    // Human eyes perceive green more strongly, blue less strongly\n    let gray =\n      0.299 * data[i] + // Red channel weight\n      0.587 * data[i + 1] + // Green channel weight\n      0.114 * data[i + 2]; // Blue channel weight\n\n    // Boost contrast slightly; ensure it does not exceed 255 (max for a channel)\n    gray = Math.min(255, gray * contrastBoost);\n\n    // Convert grayscale to binary (black or white) using a threshold\n    // If pixel brightness < threshold → black (0), else → white (255)\n    const value = gray < threshold ? 0 : 255;\n\n    // Apply the binary value to all RGB channels\n    // This makes the pixel pure black or pure white\n    data[i] = data[i + 1] = data[i + 2] = value;\n\n    // Alpha channel (data[i + 3]) remains unchanged\n  }\n  ctx.putImageData(imgData, 0, 0);\n  steps.push(canvas.toDataURL('image/png')); // Step after B&W conversion\n\n  // Step 4: Sharpening (text enhancement)\n  const imgData2 = ctx.getImageData(0, 0, width, height);\n  const data2 = imgData2.data;\n\n  // Simple sharpening kernel\n  const w = width;\n  const h = height;\n\n  const copy = new Uint8ClampedArray(data2); // make a copy to read original\n\n  for (let y = 1; y < h - 1; y++) {\n    // loop over each row, skip first & last (edges)\n    for (let x = 1; x < w - 1; x++) {\n      // loop over each column, skip first & last (edges)\n      for (let c = 0; c < 3; c++) {\n        // loop over RGB channels (0=R,1=G,2=B)\n        const idx = (y * w + x) * 4 + c; // calculate index in the 1D data array\n\n        const val =\n          5 * copy[idx] - // center pixel * 5\n          copy[idx - 4] - // subtract left neighbor\n          copy[idx + 4] - // subtract right neighbor\n          copy[idx - w * 4] - // subtract top neighbor\n          copy[idx + w * 4]; // subtract bottom neighbor\n        // This applies a simple 3x3 sharpening kernel:\n        // [ 0  -1  0 ]\n        // [-1   5 -1]\n        // [ 0  -1  0 ]\n        // It enhances edges by boosting center pixel relative to neighbors\n\n        data2[idx] = Math.min(255, Math.max(0, val)); // clamp result to [0,255] to avoid overflow\n      }\n    }\n  }\n\n  ctx.putImageData(imgData2, 0, 0);\n  steps.push(canvas.toDataURL('image/png')); // after sharpening\n\n  // Final blob\n  const finalBlob = await new Promise<Blob>((resolve, reject) => {\n    canvas.toBlob(\n      (blob) => {\n        if (blob) resolve(blob);\n        else reject(new Error('Failed to convert canvas to blob'));\n      },\n      'image/png',\n      1,\n    );\n  });\n\n  return { steps, finalBlob };\n}\n","// --- Helpers for LocalStorage ---\nexport const SETTINGS_KEY = 'image_to_text_settings';\n\nexport type OCRSettings = {\n  language: string[]; // e.g. ['eng', 'vie']\n  upscaleMode: 'auto' | 'manual' | 'none';\n  textEnhancement: boolean;\n};\n\nexport const defaultSettings: OCRSettings = {\n  language: ['eng', 'vie'], // e.g. ['eng', 'vie']\n  upscaleMode: 'manual',\n  textEnhancement: true,\n};\n\nexport const languageOptions = [\n  { label: 'English', value: 'eng' },\n  { label: 'Vietnamese', value: 'vie' },\n  { label: 'French', value: 'fra' },\n  { label: 'Spanish', value: 'spa' },\n  { label: 'German', value: 'deu' },\n  { label: 'Italian', value: 'ita' },\n  { label: 'Portuguese', value: 'por' },\n  { label: 'Russian', value: 'rus' },\n  { label: 'Simplified Chinese', value: 'chi_sim' },\n  { label: 'Traditional Chinese', value: 'chi_tra' },\n  { label: 'Japanese', value: 'jpn' },\n  { label: 'Korean', value: 'kor' },\n  { label: 'Arabic', value: 'ara' },\n  { label: 'Hindi', value: 'hin' },\n];\n","import { message } from 'antd';\nimport { textEnhancement } from './textEnhancement';\nimport Tesseract from 'tesseract.js';\nimport { defaultSettings, OCRSettings, SETTINGS_KEY } from '../constants';\n\n// --- Helpers for LocalStorage ---\nexport const saveSettings = (settings: OCRSettings) => {\n  localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\n};\n\nexport const loadSettings = (): OCRSettings => {\n  try {\n    const saved = localStorage.getItem(SETTINGS_KEY);\n    return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;\n  } catch {\n    return defaultSettings;\n  }\n};\n\nexport const downloadText = (text: string) => {\n  const blob = new Blob([text || ''], { type: 'text/plain' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.download = 'extracted-text.txt';\n  a.href = url;\n  a.click();\n};\n\n// --- OCR extraction ---\nexport const handleOCR = async (\n  imageFile: File | null,\n  setExtractedText: (text: string) => void,\n  setLoading: (loading: boolean) => void,\n  language: string[],\n  setStepImages: (steps: string[]) => void,\n) => {\n  if (!imageFile) {\n    message.warning('Please upload an image first.');\n    return null;\n  }\n\n  setLoading(true);\n\n  try {\n    const settings = loadSettings();\n\n    let finalBlob: Blob;\n    let steps: string[] = [];\n\n    if (settings.textEnhancement) {\n      // Use text enhance enhance if enabled\n      const enhanceResult = await textEnhancement(imageFile);\n      steps = enhanceResult.steps;\n      finalBlob = enhanceResult.finalBlob;\n\n      // Show preprocessing steps in UI\n      setStepImages(steps);\n    } else {\n      // Skip preprocessing, use original image\n      finalBlob = imageFile;\n      setStepImages([URL.createObjectURL(imageFile)]); // just show original image\n    }\n\n    // OCR\n    const result = await Tesseract.recognize(finalBlob, language.join('+'), {\n      logger: (m) => console.log(m),\n    });\n\n    setExtractedText(result.data.text);\n    return result.data;\n  } catch (error) {\n    console.error(error);\n    message.error('Failed to extract text');\n    throw error;\n  } finally {\n    setLoading(false);\n  }\n};\n","import {\n  CloudUploadOutlined,\n  CopyOutlined,\n  DeleteOutlined,\n  DownloadOutlined,\n  FileImageOutlined,\n  FileTextOutlined,\n  GlobalOutlined,\n  ScanOutlined,\n  SettingOutlined,\n} from '@ant-design/icons';\nimport {\n  Button,\n  Card,\n  Col,\n  Divider,\n  Empty,\n  Image,\n  Progress,\n  Row,\n  Select,\n  Space,\n  Spin,\n  Switch,\n  Tooltip,\n  Typography,\n  Upload,\n  message,\n} from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport DragDropWrapper from '@/components/DragDropWrapper';\nimport DragOverlay from '@/components/DragOverlay';\nimport { downloadText, handleOCR, loadSettings, saveSettings } from './utils/helpers';\nimport './styles.less';\n\nconst { Title, Text } = Typography;\nconst { Dragger } = Upload;\n\nconst ImageToText: React.FC = () => {\n  const [dragging, setDragging] = useState(false);\n  const dragCounter = useRef(0);\n\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imageUrl, setImageUrl] = useState<string>('');\n  const [extractedText, setExtractedText] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [confidence, setConfidence] = useState<number | null>(null);\n  const [stepImages, setStepImages] = useState<string[]>([]);\n\n  // Settings\n  const [language, setLanguage] = useState<string[]>(['eng']);\n  const [enhance, setEnhance] = useState(true);\n\n  useEffect(() => {\n    const settings = loadSettings();\n    setLanguage(settings.language || ['eng']);\n    setEnhance(settings.textEnhancement ?? true);\n  }, []);\n\n  useEffect(() => {\n    // Save settings when changed\n    const currentSettings = loadSettings();\n    saveSettings({\n      ...currentSettings,\n      language,\n      textEnhancement: enhance,\n    });\n  }, [language, enhance]);\n\n  useEffect(() => {\n    return () => {\n      if (imageUrl) URL.revokeObjectURL(imageUrl);\n      stepImages.forEach((url) => URL.revokeObjectURL(url));\n    };\n  }, [imageUrl, stepImages]);\n\n  const handleUpload = (file: File) => {\n    setImageFile(file);\n    setExtractedText('');\n    setConfidence(null);\n    setStepImages([]);\n    const url = URL.createObjectURL(file);\n    setImageUrl(url);\n    return false; // Prevent auto upload\n  };\n\n  const onProcess = async () => {\n    if (!imageFile) return;\n\n    setLoading(true);\n    setConfidence(null);\n\n    try {\n      // We need to temporarily save settings to ensure helper uses current state\n      const currentSettings = loadSettings();\n      saveSettings({\n        ...currentSettings,\n        language,\n        textEnhancement: enhance,\n      });\n\n      const result = await handleOCR(\n        imageFile,\n        setExtractedText,\n        setLoading,\n        language,\n        setStepImages,\n      );\n\n      if (result && result.confidence) {\n        setConfidence(result.confidence);\n        message.success(`Text extracted with ${Math.round(result.confidence)}% confidence!`);\n      }\n    } catch (error) {\n      // Error handled in helper\n    }\n  };\n\n  const handleCopy = () => {\n    if (!extractedText) return;\n    navigator.clipboard.writeText(extractedText);\n    message.success('Copied to clipboard!');\n  };\n\n  const handleClear = () => {\n    setImageFile(null);\n    setImageUrl('');\n    setExtractedText('');\n    setConfidence(null);\n    setStepImages([]);\n  };\n\n  return (\n    <DragDropWrapper\n      setDragging={setDragging}\n      dragCounter={dragCounter}\n      handleUpload={handleUpload}\n    >\n      <div className=\"ocr-container\">\n        <Card className=\"ocr-card\" bordered={false}>\n          <div className=\"header-section\">\n            <Title level={2} style={{ margin: 0 }}>\n              <ScanOutlined /> Image to Text (OCR)\n            </Title>\n            <Text type=\"secondary\">\n              Extract text from images with high accuracy using advanced OCR.\n            </Text>\n          </div>\n\n          <Row gutter={[32, 32]} className=\"main-content\">\n            {/* Left Column: Input */}\n            <Col xs={24} lg={12} className=\"input-column\">\n              <Card\n                title={\n                  <Space>\n                    <FileImageOutlined /> Source Image\n                  </Space>\n                }\n                bordered={false}\n                className=\"inner-card\"\n              >\n                {!imageUrl ? (\n                  <Dragger\n                    accept=\"image/*\"\n                    showUploadList={false}\n                    beforeUpload={handleUpload}\n                    className=\"custom-dragger\"\n                  >\n                    <p className=\"ant-upload-drag-icon\">\n                      <CloudUploadOutlined />\n                    </p>\n                    <p className=\"ant-upload-text\">Click or drag image to this area to upload</p>\n                    <p className=\"ant-upload-hint\">\n                      Support for a single upload. Strictly prohibit from uploading company data or\n                      other band files\n                    </p>\n                  </Dragger>\n                ) : (\n                  <div className=\"image-preview-wrapper\">\n                    <Image src={imageUrl} alt=\"preview\" className=\"preview-image\" />\n                    <div className=\"image-actions\">\n                      <Button danger icon={<DeleteOutlined />} onClick={handleClear} size=\"small\">\n                        Remove\n                      </Button>\n                    </div>\n                  </div>\n                )}\n\n                <Divider orientation=\"left\">Settings</Divider>\n\n                <Space direction=\"vertical\" style={{ width: '100%' }} size=\"middle\">\n                  <div className=\"setting-row\">\n                    <Space>\n                      <GlobalOutlined />\n                      <Text>Language</Text>\n                    </Space>\n                    <Select\n                      mode=\"multiple\"\n                      value={language}\n                      onChange={setLanguage}\n                      style={{ width: 200 }}\n                      options={[\n                        { label: 'English', value: 'eng' },\n                        { label: 'Vietnamese', value: 'vie' },\n                        { label: 'Spanish', value: 'spa' },\n                        { label: 'French', value: 'fra' },\n                        { label: 'German', value: 'deu' },\n                        { label: 'Chinese (Simplified)', value: 'chi_sim' },\n                        { label: 'Japanese', value: 'jpn' },\n                      ]}\n                    />\n                  </div>\n\n                  <div className=\"setting-row\">\n                    <Space>\n                      <SettingOutlined />\n                      <Text>Auto Enhancement</Text>\n                      <Tooltip title=\"Automatically improves contrast and sharpness for better accuracy\">\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                          (?)\n                        </Text>\n                      </Tooltip>\n                    </Space>\n                    <Switch checked={enhance} onChange={setEnhance} />\n                  </div>\n\n                  <Button\n                    type=\"primary\"\n                    size=\"large\"\n                    icon={<ScanOutlined />}\n                    block\n                    onClick={onProcess}\n                    loading={loading}\n                    disabled={!imageFile}\n                    className=\"process-btn\"\n                  >\n                    {loading ? 'Processing...' : 'Extract Text'}\n                  </Button>\n                </Space>\n              </Card>\n            </Col>\n\n            {/* Right Column: Output */}\n            <Col xs={24} lg={12} className=\"output-column\">\n              <Card\n                title={\n                  <Space>\n                    <FileTextOutlined /> Extracted Text\n                  </Space>\n                }\n                bordered={false}\n                className=\"inner-card\"\n                extra={\n                  extractedText && (\n                    <Space>\n                      <Button type=\"text\" icon={<CopyOutlined />} onClick={handleCopy}>\n                        Copy\n                      </Button>\n                      <Button\n                        type=\"text\"\n                        icon={<DownloadOutlined />}\n                        onClick={() => downloadText(extractedText)}\n                      >\n                        Download\n                      </Button>\n                    </Space>\n                  )\n                }\n              >\n                {loading ? (\n                  <div className=\"loading-state\">\n                    <Spin size=\"large\" tip=\"Analyzing image...\" />\n                    <Text type=\"secondary\" style={{ marginTop: 16 }}>\n                      This might take a few seconds depending on image complexity...\n                    </Text>\n                  </div>\n                ) : extractedText ? (\n                  <div className=\"result-container\">\n                    {confidence !== null && (\n                      <div className=\"confidence-meter\">\n                        <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                          Confidence Score\n                        </Text>\n                        <Progress\n                          percent={Math.round(confidence)}\n                          size=\"small\"\n                          status={\n                            confidence > 80 ? 'success' : confidence > 50 ? 'normal' : 'exception'\n                          }\n                        />\n                      </div>\n                    )}\n                    <div className=\"text-content\">{extractedText}</div>\n                  </div>\n                ) : (\n                  <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description=\"No text extracted yet\" />\n                )}\n              </Card>\n\n              {stepImages.length > 1 && (\n                <div style={{ marginTop: 24 }}>\n                  <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                    Processed Image Debug:\n                  </Text>\n                  <div style={{ display: 'flex', gap: 8, marginTop: 8, overflowX: 'auto' }}>\n                    {stepImages.map((src, idx) => (\n                      <Image\n                        key={idx}\n                        src={src}\n                        width={80}\n                        height={80}\n                        style={{ objectFit: 'cover', borderRadius: 4 }}\n                      />\n                    ))}\n                  </div>\n                </div>\n              )}\n            </Col>\n          </Row>\n        </Card>\n      </div>\n      {dragging && <DragOverlay />}\n    </DragDropWrapper>\n  );\n};\n\nexport default ImageToText;\n"],"names":[],"mappings":"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"}