{"version":3,"sources":["src/pages/ImageToText/constants.ts","src/pages/ImageToText/utils/textEnhancement.ts","src/pages/ImageToText/utils/helpers.tsx","E:/code\\ultimate-tool-web\\src\\pages\\ImageToText\\styles.less?asmodule","src/pages/ImageToText/components/OCRUploader.tsx","node_modules/@ant-design/icons-svg/es/asn/FullscreenOutlined.js","node_modules/@ant-design/icons/es/icons/FullscreenOutlined.js","src/pages/ImageToText/components/ImagePreview.tsx","src/pages/ImageToText/components/TextOutput.tsx","node_modules/@ant-design/icons-svg/es/asn/CameraOutlined.js","node_modules/@ant-design/icons/es/icons/CameraOutlined.js","src/pages/ImageToText/components/GuideSection.tsx","src/pages/ImageToText/hooks/useSetting.ts","src/pages/ImageToText/components/SettingsModal.tsx","src/pages/ImageToText/index.tsx"],"sourcesContent":["// --- Helpers for LocalStorage ---\r\nexport const SETTINGS_KEY = 'image_to_text_settings';\r\n\r\nexport type OCRSettings = {\r\n  language: string[]; // e.g. ['eng', 'vie']\r\n  upscaleMode: 'auto' | 'manual' | 'none';\r\n  textEnhancement: boolean;\r\n};\r\n\r\nexport const defaultSettings: OCRSettings = {\r\n  language: ['eng', 'vie'], // e.g. ['eng', 'vie']\r\n  upscaleMode: 'manual',\r\n  textEnhancement: true,\r\n};\r\n\r\nexport const languageOptions = [\r\n  { label: 'English', value: 'eng' },\r\n  { label: 'Vietnamese', value: 'vie' },\r\n  { label: 'French', value: 'fra' },\r\n  { label: 'Spanish', value: 'spa' },\r\n  { label: 'German', value: 'deu' },\r\n  { label: 'Italian', value: 'ita' },\r\n  { label: 'Portuguese', value: 'por' },\r\n  { label: 'Russian', value: 'rus' },\r\n  { label: 'Simplified Chinese', value: 'chi_sim' },\r\n  { label: 'Traditional Chinese', value: 'chi_tra' },\r\n  { label: 'Japanese', value: 'jpn' },\r\n  { label: 'Korean', value: 'kor' },\r\n  { label: 'Arabic', value: 'ara' },\r\n  { label: 'Hindi', value: 'hin' },\r\n];\r\n","export async function textEnhancement(\r\n  file: File,\r\n  options?: { maxWidth?: number; maxHeight?: number; contrastBoost?: number; threshold?: number },\r\n): Promise<{ steps: string[]; finalBlob: Blob }> {\r\n  const { maxWidth = 2000, maxHeight = 2000, contrastBoost = 1.2, threshold = 150 } = options || {};\r\n  const steps: string[] = [];\r\n\r\n  const img = new Image();\r\n  img.src = URL.createObjectURL(file);\r\n\r\n  await new Promise<void>((resolve, reject) => {\r\n    img.onload = () => resolve();\r\n    img.onerror = (err) => reject(err);\r\n  });\r\n\r\n  let width = img.width;\r\n  let height = img.height;\r\n  const scale = Math.min(1, maxWidth / width, maxHeight / height);\r\n  width = Math.round(width * scale);\r\n  height = Math.round(height * scale);\r\n\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = height;\r\n  const ctx = canvas.getContext('2d')!;\r\n\r\n  // Step 1: Original image\r\n  ctx.drawImage(img, 0, 0, width, height);\r\n  steps.push(canvas.toDataURL('image/png'));\r\n\r\n  // Step 2: Resize already applied, so we can directly store resized image\r\n  steps.push(canvas.toDataURL('image/png'));\r\n\r\n  // Step 3: Grayscale + contrast + threshold\r\n  const imgData = ctx.getImageData(0, 0, width, height);\r\n  const data = imgData.data;\r\n\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    // Each pixel consists of 4 values in the data array: [R, G, B, A]\r\n    // i = red channel index, i+1 = green, i+2 = blue, i+3 = alpha (opacity)\r\n\r\n    // Convert RGB to grayscale using the luminosity method:\r\n    // Human eyes perceive green more strongly, blue less strongly\r\n    let gray =\r\n      0.299 * data[i] + // Red channel weight\r\n      0.587 * data[i + 1] + // Green channel weight\r\n      0.114 * data[i + 2]; // Blue channel weight\r\n\r\n    // Boost contrast slightly; ensure it does not exceed 255 (max for a channel)\r\n    gray = Math.min(255, gray * contrastBoost);\r\n\r\n    // Convert grayscale to binary (black or white) using a threshold\r\n    // If pixel brightness < threshold ‚Üí black (0), else ‚Üí white (255)\r\n    const value = gray < threshold ? 0 : 255;\r\n\r\n    // Apply the binary value to all RGB channels\r\n    // This makes the pixel pure black or pure white\r\n    data[i] = data[i + 1] = data[i + 2] = value;\r\n\r\n    // Alpha channel (data[i + 3]) remains unchanged\r\n  }\r\n  ctx.putImageData(imgData, 0, 0);\r\n  steps.push(canvas.toDataURL('image/png')); // Step after B&W conversion\r\n\r\n  // Step 4: Sharpening (text enhancement)\r\n  const imgData2 = ctx.getImageData(0, 0, width, height);\r\n  const data2 = imgData2.data;\r\n\r\n  // Simple sharpening kernel\r\n  const w = width;\r\n  const h = height;\r\n\r\n  const copy = new Uint8ClampedArray(data2); // make a copy to read original\r\n\r\n  for (let y = 1; y < h - 1; y++) {\r\n    // loop over each row, skip first & last (edges)\r\n    for (let x = 1; x < w - 1; x++) {\r\n      // loop over each column, skip first & last (edges)\r\n      for (let c = 0; c < 3; c++) {\r\n        // loop over RGB channels (0=R,1=G,2=B)\r\n        const idx = (y * w + x) * 4 + c; // calculate index in the 1D data array\r\n\r\n        const val =\r\n          5 * copy[idx] - // center pixel * 5\r\n          copy[idx - 4] - // subtract left neighbor\r\n          copy[idx + 4] - // subtract right neighbor\r\n          copy[idx - w * 4] - // subtract top neighbor\r\n          copy[idx + w * 4]; // subtract bottom neighbor\r\n        // This applies a simple 3x3 sharpening kernel:\r\n        // [ 0  -1  0 ]\r\n        // [-1   5 -1]\r\n        // [ 0  -1  0 ]\r\n        // It enhances edges by boosting center pixel relative to neighbors\r\n\r\n        data2[idx] = Math.min(255, Math.max(0, val)); // clamp result to [0,255] to avoid overflow\r\n      }\r\n    }\r\n  }\r\n\r\n  ctx.putImageData(imgData2, 0, 0);\r\n  steps.push(canvas.toDataURL('image/png')); // after sharpening\r\n\r\n  // Final blob\r\n  const finalBlob = await new Promise<Blob>((resolve, reject) => {\r\n    canvas.toBlob(\r\n      (blob) => {\r\n        if (blob) resolve(blob);\r\n        else reject(new Error('Failed to convert canvas to blob'));\r\n      },\r\n      'image/png',\r\n      1,\r\n    );\r\n  });\r\n\r\n  return { steps, finalBlob };\r\n}\r\n","import { message } from 'antd';\r\nimport { textEnhancement } from './textEnhancement';\r\nimport Tesseract from 'tesseract.js';\r\nimport { defaultSettings, OCRSettings, SETTINGS_KEY } from '../constants';\r\n\r\n// --- Helpers for LocalStorage ---\r\nexport const saveSettings = (settings: OCRSettings) => {\r\n  localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\r\n};\r\n\r\nexport const loadSettings = (): OCRSettings => {\r\n  try {\r\n    const saved = localStorage.getItem(SETTINGS_KEY);\r\n    return saved ? { ...defaultSettings, ...JSON.parse(saved) } : defaultSettings;\r\n  } catch {\r\n    return defaultSettings;\r\n  }\r\n};\r\n\r\nexport const downloadText = (text: string) => {\r\n  const blob = new Blob([text || ''], { type: 'text/plain' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.download = 'extracted-text.txt';\r\n  a.href = url;\r\n  a.click();\r\n};\r\n\r\n// --- OCR extraction ---\r\nexport const handleOCR = async (\r\n  imageFile: File | null,\r\n  setExtractedText: (text: string) => void,\r\n  setLoading: (loading: boolean) => void,\r\n  language: string[],\r\n  setStepImages: (steps: string[]) => void,\r\n) => {\r\n  if (!imageFile) {\r\n    return message.warning('Please upload an image first.');\r\n  }\r\n\r\n  setLoading(true);\r\n\r\n  try {\r\n    const settings = loadSettings();\r\n\r\n    let finalBlob: Blob;\r\n    let steps: string[] = [];\r\n\r\n    if (settings.textEnhancement) {\r\n      // Use text enhance enhance if enabled\r\n      const enhanceResult = await textEnhancement(imageFile);\r\n      steps = enhanceResult.steps;\r\n      finalBlob = enhanceResult.finalBlob;\r\n\r\n      // Show preprocessing steps in UI\r\n      setStepImages(steps);\r\n    } else {\r\n      // Skip preprocessing, use original image\r\n      finalBlob = imageFile;\r\n      setStepImages([URL.createObjectURL(imageFile)]); // just show original image\r\n    }\r\n\r\n    // OCR\r\n    const result = await Tesseract.recognize(finalBlob, language.join('+'), {\r\n      logger: (m) => console.log(m),\r\n    });\r\n\r\n    setExtractedText(result.data.text);\r\n    message.success('Text extracted successfully!');\r\n  } catch (error) {\r\n    console.error(error);\r\n    message.error('Failed to extract text');\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n","\nimport \"E:/code/ultimate-tool-web/src/pages/ImageToText/styles.less?modules\";\nexport default {\"stepImage\": `stepImage-TxIRW12R`,\"stepsPreview\": `stepsPreview-7Tb0mUQ1`,\"stepCaption\": `stepCaption-bHvIeRSy`,\"image-to-text-guide\": `image-to-text-guide-h5392FIi`,\"container\": `container-0dn29Tr-`,\"content\": `content-xpWx1sWe`,\"stepImageWrapper\": `stepImageWrapper-0CqWZvgf`}\n","import React from 'react';\r\nimport { Upload, Button } from 'antd';\r\nimport { UploadOutlined } from '@ant-design/icons';\r\n\r\ntype Props = {\r\n  handleOCR: (file: File) => void;\r\n  loading: boolean;\r\n};\r\n\r\nconst OCRUploader: React.FC<Props> = ({ handleOCR, loading }) => {\r\n  return (\r\n    <Upload\r\n      accept=\"image/*\"\r\n      showUploadList={false}\r\n      beforeUpload={(file) => {\r\n        handleOCR(file);\r\n        return false;\r\n      }}\r\n    >\r\n      <Button icon={<UploadOutlined />} loading={loading} block>\r\n        Upload Image\r\n      </Button>\r\n    </Upload>\r\n  );\r\n};\r\n\r\nexport default OCRUploader;\r\n","// This icon file is generated automatically.\nvar FullscreenOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z\" } }] }, \"name\": \"fullscreen\", \"theme\": \"outlined\" };\nexport default FullscreenOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FullscreenOutlinedSvg from \"@ant-design/icons-svg/es/asn/FullscreenOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar FullscreenOutlined = function FullscreenOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: FullscreenOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(FullscreenOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'FullscreenOutlined';\n}\nexport default RefIcon;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Button, Space, Tooltip, Modal, Select, message } from 'antd';\r\nimport {\r\n  ZoomInOutlined,\r\n  ZoomOutOutlined,\r\n  RedoOutlined,\r\n  FullscreenOutlined,\r\n  SwapOutlined,\r\n  SettingOutlined,\r\n} from '@ant-design/icons';\r\n\r\ntype Props = {\r\n  imageUrl: string;\r\n  extractedText?: string; // Optional: text extracted from the image\r\n  upscaleMode;\r\n};\r\n\r\nconst ImagePreview: React.FC<Props> = ({ imageUrl, extractedText = '', upscaleMode }) => {\r\n  const [processedImageUrl, setProcessedImageUrl] = useState<string>(imageUrl);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\r\n  const [start, setStart] = useState<{ x: number; y: number } | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n  // ------------ DPI Detection + Upscale ------------------\r\n  const detectAndUpscale = async () => {\r\n    if (!imageUrl) return;\r\n    const img = new Image();\r\n    img.src = imageUrl;\r\n    try {\r\n      await img.decode();\r\n    } catch {\r\n      message.error('Failed to load image for DPI detection.');\r\n      return;\r\n    }\r\n\r\n    const dpi = Math.round((img.naturalWidth / img.width) * 96);\r\n    console.log('Detected DPI:', dpi);\r\n\r\n    if (dpi < 150 && upscaleMode !== 'none') {\r\n      const scale = 300 / dpi;\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = img.naturalWidth * scale;\r\n      canvas.height = img.naturalHeight * scale;\r\n      const ctx = canvas.getContext('2d');\r\n      if (ctx) {\r\n        ctx.imageSmoothingEnabled = true;\r\n        ctx.imageSmoothingQuality = 'high';\r\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n        const upscaledUrl = canvas.toDataURL('image/png');\r\n        setProcessedImageUrl(upscaledUrl);\r\n        message.success('Image upscaled to ~300 DPI');\r\n      }\r\n    } else {\r\n      setProcessedImageUrl(imageUrl);\r\n      if (upscaleMode === 'auto') {\r\n        message.info('Image DPI is sufficient; no upscaling needed');\r\n      }\r\n    }\r\n  };\r\n\r\n  // ------------------- PAN -------------------\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n    setStart({ x: e.clientX - offset.x, y: e.clientY - offset.y });\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !start) return;\r\n    setOffset({ x: e.clientX - start.x, y: e.clientY - start.y });\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n    setStart(null);\r\n  };\r\n\r\n  // ------------------- CTRL+Wheel Zoom -------------------\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    const img = imgRef.current;\r\n    if (!container || !img) return;\r\n\r\n    const handleWheel = (e: WheelEvent) => {\r\n      if (!e.ctrlKey) return;\r\n      e.preventDefault();\r\n\r\n      const rect = img.getBoundingClientRect();\r\n      const mouseX = e.clientX - rect.left;\r\n      const mouseY = e.clientY - rect.top;\r\n\r\n      setZoom((prevZoom) => {\r\n        const zoomFactor = e.deltaY < 0 ? 1.1 : 0.9;\r\n        const newZoom = Math.min(Math.max(prevZoom * zoomFactor, 0.2), 8);\r\n\r\n        const scaleChange = newZoom / prevZoom;\r\n\r\n        setOffset((prevOffset) => ({\r\n          x: mouseX - (mouseX - prevOffset.x) * scaleChange,\r\n          y: mouseY - (mouseY - prevOffset.y) * scaleChange,\r\n        }));\r\n\r\n        return newZoom;\r\n      });\r\n    };\r\n\r\n    container.addEventListener('wheel', handleWheel, { passive: false });\r\n    return () => container.removeEventListener('wheel', handleWheel);\r\n  }, []);\r\n\r\n  // ------------------- Zoom Buttons -------------------\r\n  const zoomIn = () => setZoom((z) => Math.min(z * 1.5, 8));\r\n  const zoomOut = () => setZoom((z) => Math.max(z * 0.67, 0.2));\r\n  const resetZoom = () => {\r\n    setZoom(1);\r\n    setOffset({ x: 0, y: 0 });\r\n  };\r\n  const fitScreen = () => setZoom(0.8);\r\n\r\n  // ------------------- Double Click Zoom -------------------\r\n  const handleDoubleClick = () => {\r\n    setZoom((z) => Math.min(z * 1.5, 8));\r\n  };\r\n\r\n  // ------------------- Sync processedImageUrl when imageUrl changes -------------------\r\n  useEffect(() => {\r\n    setProcessedImageUrl(imageUrl);\r\n\r\n    // Auto upscale if mode is 'auto'\r\n    if (upscaleMode === 'auto') {\r\n      detectAndUpscale();\r\n    }\r\n  }, [imageUrl, upscaleMode]);\r\n\r\n  // ------------------- Reset zoom/offset when processed image changes -------------------\r\n  useEffect(() => {\r\n    setZoom(1);\r\n    setOffset({ x: 0, y: 0 });\r\n  }, [processedImageUrl]);\r\n\r\n  return (\r\n    <div>\r\n      {/* Toolbar */}\r\n      <Space style={{ marginBottom: 10 }}>\r\n        <Tooltip title=\"Zoom In (CTRL+Wheel)\">\r\n          <Button size=\"small\" icon={<ZoomInOutlined />} onClick={zoomIn} />\r\n        </Tooltip>\r\n        <Tooltip title=\"Zoom Out (CTRL+Wheel)\">\r\n          <Button size=\"small\" icon={<ZoomOutOutlined />} onClick={zoomOut} />\r\n        </Tooltip>\r\n        <Tooltip title=\"Reset Zoom\">\r\n          <Button size=\"small\" icon={<RedoOutlined />} onClick={resetZoom} />\r\n        </Tooltip>\r\n        <Tooltip title=\"Fit Screen\">\r\n          <Button size=\"small\" icon={<FullscreenOutlined />} onClick={fitScreen} />\r\n        </Tooltip>\r\n        {upscaleMode === 'manual' && (\r\n          <Tooltip title=\"Detect & Upscale DPI\">\r\n            <Button size=\"small\" icon={<SwapOutlined />} onClick={detectAndUpscale}>\r\n              Upscale\r\n            </Button>\r\n          </Tooltip>\r\n        )}\r\n\r\n        <span>{Math.round(zoom * 100)}%</span>\r\n      </Space>\r\n\r\n      {/* Image Viewer */}\r\n      <div\r\n        ref={containerRef}\r\n        style={{\r\n          width: '100%',\r\n          height: 500,\r\n          border: '1px solid #eee',\r\n          overflow: 'hidden',\r\n          position: 'relative',\r\n          cursor: isDragging ? 'grabbing' : 'grab',\r\n          background: '#fafafa',\r\n        }}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n        onDoubleClick={handleDoubleClick}\r\n      >\r\n        <img\r\n          ref={imgRef}\r\n          src={processedImageUrl}\r\n          style={{\r\n            transform: `translate(${offset.x}px, ${offset.y}px) scale(${zoom})`,\r\n            transformOrigin: 'top left',\r\n            display: 'block',\r\n            userSelect: 'none',\r\n            pointerEvents: 'auto',\r\n          }}\r\n          draggable={false}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePreview;\r\n","import React from 'react';\r\nimport { Button, Input, Space, message } from 'antd';\r\nimport { handleCopy } from '@/helpers';\r\nimport { downloadText } from '../utils/helpers';\r\n\r\ntype Props = {\r\n  text: string;\r\n  setText: (value: string) => void;\r\n};\r\n\r\nconst TextOutput: React.FC<Props> = ({ text, setText }) => {\r\n  return (\r\n    <div style={{ height: '100%' }}>\r\n      <Space style={{ marginBottom: 10 }}>\r\n        <Button size=\"small\" onClick={() => handleCopy(text, 'Copied!')}>\r\n          Copy\r\n        </Button>\r\n        <Button size=\"small\" onClick={() => downloadText(text)}>\r\n          Download\r\n        </Button>\r\n      </Space>\r\n\r\n      <Input.TextArea\r\n        rows={22}\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n        placeholder=\"Extracted text will show here...\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextOutput;\r\n","// This icon file is generated automatically.\nvar CameraOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z\" } }] }, \"name\": \"camera\", \"theme\": \"outlined\" };\nexport default CameraOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CameraOutlinedSvg from \"@ant-design/icons-svg/es/asn/CameraOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar CameraOutlined = function CameraOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: CameraOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(CameraOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'CameraOutlined';\n}\nexport default RefIcon;","import React from 'react';\r\nimport { Typography, Divider } from 'antd';\r\nimport {\r\n  UploadOutlined,\r\n  FileTextOutlined,\r\n  SettingOutlined,\r\n  CameraOutlined,\r\n  CopyOutlined,\r\n  DownloadOutlined,\r\n  ExclamationCircleOutlined,\r\n} from '@ant-design/icons';\r\nimport styles from '../styles.less';\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst steps = [\r\n  {\r\n    icon: <UploadOutlined />,\r\n    text: 'Upload an image containing text via drag-and-drop or by clicking the \"Upload Image\" button.',\r\n  },\r\n  {\r\n    icon: <CameraOutlined />,\r\n    text: 'You can also paste an image directly from your clipboard (Ctrl+V or Cmd+V).',\r\n  },\r\n  {\r\n    icon: <FileTextOutlined />,\r\n    text: 'Click \"Extract Text\" to use OCR and extract text from the uploaded image.',\r\n  },\r\n  {\r\n    icon: <SettingOutlined />,\r\n    text: (\r\n      <>\r\n        Adjust OCR <Text strong>Language</Text> or <Text strong>Upscale Mode</Text> from the\r\n        Settings panel to improve recognition accuracy.\r\n      </>\r\n    ),\r\n  },\r\n  {\r\n    icon: <CopyOutlined />,\r\n    text: 'Copy the extracted text to your clipboard with the \"Copy\" button.',\r\n  },\r\n  {\r\n    icon: <DownloadOutlined />,\r\n    text: 'Download the extracted text as a file using the \"Download\" button.',\r\n  },\r\n  {\r\n    icon: <ExclamationCircleOutlined />,\r\n    text: (\r\n      <>\r\n        Always <Text strong>verify extracted text</Text> to ensure OCR accuracy, especially for\r\n        small or low-quality images.\r\n      </>\r\n    ),\r\n  },\r\n];\r\n\r\nconst GuideSection: React.FC<{ callback?: (action: string) => void }> = ({ callback }) => {\r\n  return (\r\n    <div className={styles['image-to-text-guide']}>\r\n      <Title level={5}>üß≠ How to Use Image ‚Üí Text (OCR) Tool</Title>\r\n\r\n      <ul className={styles['guide-list']}>\r\n        {steps.map((step, i) => (\r\n          <li key={i}>\r\n            <span className={styles['guide-icon']}>{step.icon}</span>\r\n            <span>{step.text}</span>\r\n          </li>\r\n        ))}\r\n        {callback && (\r\n          <li key=\"more\">\r\n            Click here to open advanced <a onClick={() => callback('openSettings')}>Settings</a>\r\n          </li>\r\n        )}\r\n      </ul>\r\n\r\n      <Divider style={{ margin: '12px 0' }} />\r\n\r\n      <Paragraph type=\"secondary\">\r\n        <ExclamationCircleOutlined style={{ marginRight: 8, color: '#faad14' }} />\r\n        Recommended: Use high-quality images for better OCR accuracy. Small fonts or blurry images\r\n        may reduce recognition quality.\r\n      </Paragraph>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GuideSection;\r\n","import { useEffect, useState } from 'react';\nimport { OCRSettings } from '../constants';\nimport { loadSettings, saveSettings } from '../utils/helpers';\n\nexport const useSetting = () => {\n  const [settings, setSettings] = useState<OCRSettings>(loadSettings());\n\n  useEffect(() => {\n    saveSettings(settings);\n  }, [settings]);\n\n  return { settings, setSettings };\n};\n","import React from 'react';\r\nimport { Modal, Select, Space, Switch, Tooltip, Typography } from 'antd';\r\nimport { languageOptions } from '../constants';\r\nimport { useSetting } from '../hooks/useSetting';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\nconst { Text } = Typography;\r\n\r\ntype Props = {\r\n  open: boolean;\r\n  onClose: () => void;\r\n};\r\n\r\nconst SettingsModal: React.FC<Props> = ({ open, onClose }) => {\r\n  const { settings, setSettings } = useSetting();\r\n  return (\r\n    <Modal title=\"‚öôÔ∏è Settings\" open={open} onCancel={onClose} onOk={onClose} footer={<></>}>\r\n      <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n        <div>\r\n          <Text>Language:</Text>\r\n          <Select\r\n            mode=\"multiple\"\r\n            style={{ width: '100%', marginTop: 5 }}\r\n            value={settings.language}\r\n            onChange={(val) => setSettings({ ...settings, language: val })}\r\n            options={languageOptions}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <Text>Upscale Mode:</Text>\r\n          <Select\r\n            style={{ width: '100%', marginTop: 5 }}\r\n            value={settings.upscaleMode}\r\n            onChange={(val) => setSettings({ ...settings, upscaleMode: val })}\r\n            options={[\r\n              { label: 'Auto', value: 'auto' },\r\n              { label: 'Manual', value: 'manual' },\r\n              { label: 'None', value: 'none' },\r\n            ]}\r\n          />\r\n        </div>\r\n\r\n        <Space direction=\"vertical\">\r\n          <Text>\r\n            Text Enhancemente:{' '}\r\n            <Tooltip\r\n              title={\r\n                'Recommended: Turn this on if the image has color. Turn it off if the image is only black and white.'\r\n              }\r\n            >\r\n              <ExclamationCircleOutlined />\r\n            </Tooltip>\r\n          </Text>\r\n          <Switch\r\n            style={{ margin: 5 }}\r\n            checked={settings.textEnhancement}\r\n            onChange={(val) => setSettings({ ...settings, textEnhancement: val })}\r\n          />\r\n        </Space>\r\n      </Space>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default SettingsModal;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Card, Button, Typography, Splitter, Space, message, Spin, Tooltip, Image } from 'antd';\r\nimport { useIsMobile } from '@/hooks/useIsMobile';\r\nimport styles from './styles.less';\r\n\r\nimport OCRUploader from './components/OCRUploader';\r\nimport ImagePreview from './components/ImagePreview';\r\nimport TextOutput from './components/TextOutput';\r\nimport DragDropWrapper from '@/components/DragDropWrapper';\r\nimport DragOverlay from '@/components/DragOverlay';\r\n\r\nimport { ExclamationCircleOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport { handleOCR, loadSettings } from './utils/helpers';\r\nimport GuideSection from './components/GuideSection';\r\nimport SettingsModal from './components/SettingsModal';\r\nimport { handlePasteImage } from '@/helpers';\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst ImageToText: React.FC = () => {\r\n  const isMobile = useIsMobile();\r\n\r\n  const [dragging, setDragging] = useState(false);\r\n  const dragCounter = useRef(0);\r\n\r\n  const [imageFile, setImageFile] = useState<File | null>(null);\r\n  const [imageUrl, setImageUrl] = useState<string>('');\r\n  const [extractedText, setExtractedText] = useState<string>('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // --- Settings Modal State ---\r\n  const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\r\n  const settings = loadSettings();\r\n\r\n  // step\r\n  const [stepImages, setStepImages] = useState<string[]>([]);\r\n\r\n  // --- Revoke previous object URL to avoid memory leaks ---\r\n  useEffect(() => {\r\n    return () => {\r\n      if (imageUrl) URL.revokeObjectURL(imageUrl);\r\n    };\r\n  }, [imageUrl]);\r\n\r\n  useEffect(() => {\r\n    handlePasteImage(handleUpload);\r\n  }, []);\r\n\r\n  // --- Handle uploaded image ---\r\n  const handleUpload = (file: File) => {\r\n    setImageFile(file);\r\n    setExtractedText('');\r\n\r\n    const url = URL.createObjectURL(file);\r\n    setImageUrl(url);\r\n  };\r\n\r\n  return (\r\n    <DragDropWrapper\r\n      setDragging={setDragging}\r\n      dragCounter={dragCounter}\r\n      handleUpload={handleUpload}\r\n    >\r\n      <Card className={styles.container} title={<Space>üñºÔ∏è Image ‚Üí Text (OCR)</Space>}>\r\n        {/* About Section */}\r\n        <div>\r\n          <Title level={4}>üìò About Image to Text Converter</Title>\r\n          <Paragraph>\r\n            Upload an image containing <Text strong>text</Text>, and this tool will use\r\n            <Text strong> OCR (Optical Character Recognition)</Text> to extract the text.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        {/* Upload & Extract */}\r\n        <Space wrap>\r\n          <OCRUploader handleOCR={handleUpload} loading={loading} />\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() =>\r\n              handleOCR(imageFile, setExtractedText, setLoading, settings.language, setStepImages)\r\n            }\r\n            loading={loading}\r\n            disabled={!imageFile}\r\n          >\r\n            Extract Text\r\n          </Button>\r\n          <Tooltip title=\"Settings\">\r\n            <Button icon={<SettingOutlined />} onClick={() => setIsSettingsModalOpen(true)} />\r\n          </Tooltip>\r\n        </Space>\r\n\r\n        {/* Content Layout */}\r\n        <div className={styles.content}>\r\n          <Splitter\r\n            layout={isMobile ? 'vertical' : 'horizontal'}\r\n            style={isMobile ? { height: 'calc(100vh - 200px)' } : {}}\r\n          >\r\n            <Splitter.Panel min=\"30%\" max=\"60%\">\r\n              <div style={{ position: 'relative' }}>\r\n                <ImagePreview\r\n                  imageUrl={imageUrl}\r\n                  extractedText={extractedText}\r\n                  upscaleMode={settings.upscaleMode}\r\n                />\r\n                {loading && (\r\n                  <div\r\n                    style={{\r\n                      position: 'absolute',\r\n                      top: 0,\r\n                      left: 0,\r\n                      width: '100%',\r\n                      height: '100%',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      background: 'rgba(255,255,255,0.6)',\r\n                      zIndex: 10,\r\n                    }}\r\n                  >\r\n                    <Spin size=\"large\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </Splitter.Panel>\r\n\r\n            <Splitter.Panel>\r\n              <TextOutput text={extractedText} setText={setExtractedText} />\r\n            </Splitter.Panel>\r\n          </Splitter>\r\n        </div>\r\n      </Card>\r\n\r\n      {settings.textEnhancement && (\r\n        <Card\r\n          size=\"small\"\r\n          title={\r\n            <>\r\n              Text Enhancement{' '}\r\n              <Tooltip\r\n                title={\r\n                  <>\r\n                    Recommended: Turn this on if the image has color. Turn it off if the image is\r\n                    only black and white in{' '}\r\n                    <a onClick={() => setIsSettingsModalOpen(true)}>Setting</a>\r\n                  </>\r\n                }\r\n              >\r\n                <ExclamationCircleOutlined />\r\n              </Tooltip>\r\n            </>\r\n          }\r\n          style={{ marginTop: 20 }}\r\n        >\r\n          <div className={styles.stepsPreview}>\r\n            {stepImages.map((src, index) => (\r\n              <div key={index} className={styles.stepImageWrapper}>\r\n                <Image\r\n                  src={src}\r\n                  alt={`Step ${index + 1}`}\r\n                  className={styles.stepImage}\r\n                  preview={{ mask: <div>Preview Step {index + 1}</div> }} // optional hover preview\r\n                />\r\n                {index === 0 && <div>{'Original image'}</div>}\r\n                {index === 1 && <div>{'Store resized image'}</div>}\r\n                {index === 2 && <div>{'Grayscale + contrast + threshold'}</div>}\r\n                {index === 3 && <div>{'Simple sharpening kernel'}</div>}\r\n                {index > 3 && <div>Step {index + 1}</div>}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {/* --- Guide Section --- */}\r\n      <GuideSection\r\n        callback={(action) => {\r\n          if (action === 'openSettings') setIsSettingsModalOpen(true);\r\n        }}\r\n      />\r\n\r\n      {/* --- Settings Modal --- */}\r\n      <SettingsModal open={isSettingsModalOpen} onClose={() => setIsSettingsModalOpen(false)} />\r\n\r\n      {/* Drag overlay */}\r\n      {dragging && <DragOverlay />}\r\n    </DragDropWrapper>\r\n  );\r\n};\r\n\r\nexport default ImageToText;\r\n"],"names":[],"mappings":"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"}