(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["a7a1eb93"],{"0fbef1c3":function(e,r,l){"use strict";let t;l.d(r,"__esModule",{value:!0}),l.d(r,"default",{enumerable:!0,get:function(){return k;}});var s=l("777fffbe"),o=l("1a7c85b4"),c=s._(l("b2a1469e")),n=s._(l("e9bcd22d")),a=s._(l("95eb3634")),i=s._(l("6effc0fd")),d=l("d322be42");let{Title:u,Text:h}=i.default,f=e=>e.map(e=>e.map(e=>e?{...e}:null)),p=(e,r)=>e>=0&&e<8&&r>=0&&r<8,m=e=>"w"===e?"b":"w",x=(t=0,()=>`p_${++t}`),j=()=>{let e=Array.from({length:8},()=>Array(8).fill(null)),r=["R","N","B","Q","K","B","N","R"];for(let l=0;l<8;l++)e[0][l]={type:r[l],color:"b",id:x()},e[1][l]={type:"P",color:"b",id:x()},e[6][l]={type:"P",color:"w",id:x()},e[7][l]={type:r[l],color:"w",id:x()};return e;},y=(e,r)=>{var l;for(let t=0;t<8;t++)for(let s=0;s<8;s++)if((null===(l=e[t][s])||void 0===l?void 0:l.type)==="K"&&e[t][s].color===r)return{r:t,c:s};return null;},g=(e,r,l)=>{let t=e[r][l];if(!t)return[];let s=[],o=t.color,c=(r,l)=>{if(!p(r,l))return;let t=e[r][l];t&&t.color===o||s.push({r:r,c:l});};if("P"===t.type){let t="w"===o?-1:1;for(let c of(p(r+t,l)&&!e[r+t][l]&&s.push({r:r+t,c:l}),r!==("w"===o?6:1)||e[r+t][l]||e[r+2*t][l]||s.push({r:r+2*t,c:l}),[-1,1])){let n=r+t,a=l+c;p(n,a)&&e[n][a]&&e[n][a].color!==o&&s.push({r:n,c:a});}}if("N"===t.type)for(let[e,t]of[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]])c(r+e,l+t);if("B"===t.type||"R"===t.type||"Q"===t.type){let c=[];for(let[n,a]of(("B"===t.type||"Q"===t.type)&&c.push([1,1],[1,-1],[-1,1],[-1,-1]),("R"===t.type||"Q"===t.type)&&c.push([1,0],[-1,0],[0,1],[0,-1]),c)){let t=r+n,c=l+a;for(;p(t,c);){if(e[t][c]){e[t][c].color!==o&&s.push({r:t,c:c});break;}s.push({r:t,c:c}),t+=n,c+=a;}}}if("K"===t.type)for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++)(0!==e||0!==t)&&c(r+e,l+t);return s;},v=(e,r,l)=>{for(let t=0;t<8;t++)for(let s=0;s<8;s++){let o=e[t][s];if(o&&o.color===l&&g(e,t,s).some(e=>e.r===r.r&&e.c===r.c))return!0;}return!1;},N=(e,r)=>{let l=[];for(let t=0;t<8;t++)for(let s=0;s<8;s++){let o=e[t][s];if(o&&o.color===r)for(let c of g(e,t,s)){let n=f(e),a=n[t][s],i=n[c.r][c.c];n[c.r][c.c]=a,n[t][s]=null;let d=null;"P"===a.type&&(0===c.r||7===c.r)&&(n[c.r][c.c]={type:"Q",color:a.color,id:x()},d="Q");let u=y(n,r);!u||v(n,u,m(r))||l.push({from:{r:t,c:s},to:c,piece:o,captured:i??null,promotion:d});}}return l;},b=(e,r)=>{let l=f(e),t=l[r.from.r][r.from.c];return r.promotion?l[r.to.r][r.to.c]={type:r.promotion,color:t.color,id:x()}:l[r.to.r][r.to.c]={...t},l[r.from.r][r.from.c]=null,l;},w=e=>`${"abcdefgh"[e.c]}${8-e.r}`;function k(){let[e,r]=(0,d.useState)(()=>j()),[l,t]=(0,d.useState)("w"),[s,i]=(0,d.useState)(null),[p,x]=(0,d.useState)([]),[g,k]=(0,d.useState)([]),C=(0,d.useRef)([]),$=(0,d.useRef)([]),[R,_]=(0,d.useState)("white");(0,d.useEffect)(()=>{if(!s)return x([]);let r=e[s.r][s.c];if(!r||r.color!==l)return x([]);x(N(e,l).filter(e=>e.from.r===s.r&&e.from.c===s.c).map(e=>e.to));},[s,e,l]);let z=(o,c)=>{let n=e[o][c];if(n&&n.color===l){i({r:o,c});return;}let a=p.some(e=>e.r===o&&e.c===c);if(s&&a){let n=N(e,l).find(e=>e.from.r===s.r&&e.from.c===s.c&&e.to.r===o&&e.to.c===c);if(!n)return;r(b(e,n)),t(m(l)),i(null),C.current.push(n),k([...C.current]),$.current=[],x([]);}else i(null),x([]);},Q=(0,d.useMemo)(()=>{let r=y(e,l),t=!!r&&v(e,r,m(l)),s=N(e,l);return t&&0===s.length?{status:"checkmate",inCheck:t}:t||0!==s.length?{status:"playing",inCheck:t}:{status:"stalemate",inCheck:t};},[e,l]),S=e=>{let r={K:"\u2654",Q:"\u2655",R:"\u2656",B:"\u2657",N:"\u2658",P:"\u2659"}[e.type];return"w"===e.color?r:r.replace("\u2654","\u265A").replace("\u2655","\u265B").replace("\u2656","\u265C").replace("\u2657","\u265D").replace("\u2658","\u265E").replace("\u2659","\u265F");};return(0,o.jsxs)("div",{className:"chess-page",children:[(0,o.jsxs)("div",{className:"chess-header",children:[(0,o.jsx)(u,{level:4,children:"Chess"}),(0,o.jsxs)("div",{className:"chess-controls",children:[(0,o.jsxs)(h,{className:"chess-turn",children:["Turn: ",(0,o.jsx)("strong",{children:"w"===l?"White":"Black"}),Q.inCheck&&(0,o.jsx)(h,{type:"danger",className:"ml-8",children:"(Check)"})]}),(0,o.jsx)(c.default,{size:"small",onClick:()=>_(e=>"white"===e?"black":"white"),children:"Flip"}),(0,o.jsx)(c.default,{size:"small",onClick:()=>{r(j()),t("w"),i(null),C.current=[],$.current=[],k([]);},children:"Restart"}),(0,o.jsx)(c.default,{size:"small",onClick:()=>{let e=C.current;if(!e.length)return;let l=e.pop(),s=j();for(let r of e){let e=b(s,r);for(let r=0;r<8;r++)for(let l=0;l<8;l++)s[r][l]=e[r][l];}$.current.push(l),r(f(s)),k([...e]),t(e=>m(e)),i(null);},children:"Undo"}),(0,o.jsx)(c.default,{size:"small",onClick:()=>{let l=$.current;if(!l.length)return;let s=l.pop();C.current.push(s),r(b(e,s)),k([...C.current]),t(e=>m(e)),i(null);},children:"Redo"}),(0,o.jsx)(c.default,{size:"small",onClick:()=>{let r=N(e,l);if(!r.length)return alert("No legal moves");let t=r[0];alert(`Try: ${w(t.from)} \u{2192} ${w(t.to)}`);},children:"Hint"})]})]}),(0,o.jsxs)("div",{className:"chess-content",children:[(0,o.jsxs)("div",{className:"chess-board-wrapper",children:[(0,o.jsx)("div",{className:"chess-coordinates top",children:["a","b","c","d","e","f","g","h"].map(e=>(0,o.jsx)("div",{className:"coord",children:e},e))}),(0,o.jsxs)("div",{className:"chess-row-with-coords",children:[(0,o.jsx)("div",{className:"chess-coordinates side",children:[8,7,6,5,4,3,2,1].map(e=>(0,o.jsx)("div",{className:"coord",children:e},e))}),(0,o.jsx)("div",{className:"chess-board",children:Array.from({length:8}).map((r,l)=>{let t="white"===R?l:7-l;return(0,o.jsx)("div",{className:"chess-row",children:Array.from({length:8}).map((r,l)=>{let c="white"===R?l:7-l,n=e[t][c],a=s&&s.r===t&&s.c===c,i=p.some(e=>e.r===t&&e.c===c),d=(t+c)%2==1;return(0,o.jsxs)("div",{className:`chess-square ${d?"dark":"light"} ${a?"selected":""}`,onClick:()=>z(t,c),children:[n&&(0,o.jsx)("span",{className:"chess-piece",children:S(n)}),i&&(0,o.jsx)("div",{className:"move-dot"})]},`${t}-${c}`);})},t);})})]}),(0,o.jsx)("div",{className:"chess-coordinates bottom",children:["a","b","c","d","e","f","g","h"].map(e=>(0,o.jsx)("div",{className:"coord",children:e},e))})]}),(0,o.jsxs)(n.default,{className:"move-history",title:"Move History",size:"small",children:[0===g.length?(0,o.jsx)(h,{type:"secondary",children:"No moves yet"}):(0,o.jsx)(a.default,{size:"small",bordered:!0,dataSource:g,renderItem:e=>(0,o.jsxs)(a.default.Item,{children:[w(e.from)," \u2192 ",w(e.to),e.captured?` \xd7 ${e.captured.type}`:"",e.promotion?` (=${e.promotion})`:""]})}),(0,o.jsx)("div",{className:"move-status",children:(0,o.jsxs)(h,{children:["Status: ",(0,o.jsx)("strong",{children:Q.status})]})})]})]}),(0,o.jsxs)(n.default,{size:"small",className:"chess-notes",children:[(0,o.jsx)(h,{strong:!0,children:"Notes:"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:"Local two-player game (alternate turns)."}),(0,o.jsx)("li",{children:"Auto-promotion to Queen when pawn reaches last rank."}),(0,o.jsx)("li",{children:"Castling and en-passant are not supported in this version."}),(0,o.jsx)("li",{children:"If you'd like AI opponent, castling, or en-passant, tell me and I\u2019ll add them."})]})]})]});}}}]);
//# sourceMappingURL=a7a1eb93-async.e1912a53.js.map