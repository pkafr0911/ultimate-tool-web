(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["daf5cedc"],{"3490d26e":function(e,l,t){t.d(l,"__esModule",{value:!0}),t.e(l,{default:function(){return F;}});var a=t("777fffbe"),n=t("852bbaa9"),s=t("1a7c85b4"),r=t("d2d0b3b6"),i=a._(r),d=t("d322be42"),c=n._(d),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"},f=t("85c4e0d9"),u=a._(f),h=c.forwardRef(function(e,l){return c.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:l,icon:o}));}),m=t("031722af"),g=a._(m),x=c.forwardRef(function(e,l){return c.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:l,icon:g.default}));}),j=t("b2a1469e"),p=a._(j),v=t("e9bcd22d"),b=a._(v),y=t("e2967699"),w=a._(y),M=t("2aa4d12e"),k=a._(M),C=t("a5512054"),_=a._(C),S=t("3eb6f542"),N=a._(S),T=t("ea21718c"),$=a._(T),R=t("5d5723f8"),I=a._(R),z=t("6effc0fd"),E=a._(z),H=t("c9d8dc0b"),V=a._(H);let{Title:A,Text:D}=E.default,{Option:W}=N.default,Y={beginner:{rows:9,cols:9,mines:10},intermediate:{rows:16,cols:16,mines:40},advanced:{rows:16,cols:30,mines:99}},B=(e,l,t)=>Math.max(l,Math.min(t,e)),F=()=>{let[e,l]=(0,c.useState)("beginner"),[t,a]=(0,c.useState)(9),[n,r]=(0,c.useState)(9),[i,d]=(0,c.useState)(10),[o,f]=(0,c.useState)(!0),[u,m]=(0,c.useState)([]),[g,j]=(0,c.useState)(!1),[v,y]=(0,c.useState)(!1),[M,C]=(0,c.useState)(!1),[S,T]=(0,c.useState)(0),[R,z]=(0,c.useState)(0),E=(0,c.useRef)(null),H=(0,c.useRef)(!0),F=(0,c.useMemo)(()=>n<=9?40:n<=16?32:n<=24?24:18,[n]);(0,c.useEffect)(()=>{if("custom"===e)return;let l=Y[e];l&&(a(l.rows),r(l.cols),d(l.mines));},[e]),(0,c.useEffect)(()=>{a(e=>B(e,9,30)),r(e=>B(e,9,30));let e=Math.max(10,Math.min(668,t*n-1));d(l=>B(l,10,e));},[t,n]);let G=(e,l)=>Array.from({length:e},(e,t)=>Array.from({length:l},(e,l)=>({r:t,c:l,mined:!1,revealed:!1,flagged:!1,adjacent:0}))),L=(e,l,t,a)=>{let n=e.length,s=e[0].length,r=[];for(let e=0;e<n;e++)for(let a=0;a<s;a++)1>=Math.abs(e-l)&&1>=Math.abs(a-t)||r.push([e,a]);for(let e=r.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1)),t=r[e];r[e]=r[l],r[l]=t;}r.slice(0,a).forEach(([l,t])=>e[l][t].mined=!0);let i=[-1,0,1];for(let l=0;l<n;l++)for(let t=0;t<s;t++){if(e[l][t].mined){e[l][t].adjacent=-1;continue;}let a=0;for(let r of i)for(let d of i){if(0===r&&0===d)continue;let i=l+r,c=t+d;i>=0&&i<n&&c>=0&&c<s&&e[i][c].mined&&a++;}e[l][t].adjacent=a;}},P=()=>{E.current&&(window.clearInterval(E.current),E.current=null);},Q=()=>{E.current||(E.current=window.setInterval(()=>z(e=>e+1),1e3));},U=(e,l,t)=>{if(v)return;let a=t||u.map(e=>e.map(e=>({...e}))),n=a[e][l];if(!n||n.revealed||n.flagged)return a;if(n.revealed=!0,n.mined){for(let e=0;e<a.length;e++)for(let l=0;l<a[0].length;l++)a[e][l].mined&&(a[e][l].revealed=!0);return m(a),y(!0),C(!1),P(),V.default.error("\u{1F4A5} Boom! You hit a mine."),a;}if(0===n.adjacent){let t=a.length,n=a[0].length,s=[[e,l]],r=[-1,0,1];for(;s.length;){let[e,l]=s.pop();for(let i of r)for(let d of r){let r=e+i,c=l+d;if(r<0||c<0||r>=t||c>=n)continue;let o=a[r][c];!o||o.revealed||o.flagged||(o.revealed=!0,0!==o.adjacent||o.mined||s.push([r,c]));}}}return m(a),a;},q=e=>{let l=e.length,t=e[0].length;for(let a=0;a<l;a++)for(let l=0;l<t;l++)if(!e[a][l].mined&&!e[a][l].revealed)return!1;return!0;},J=(e,l)=>{if(v||M)return;let t=u;H.current&&(L(t=u.map(e=>e.map(e=>({...e}))),e,l,i),H.current=!1,Q());let a=U(e,l,t);a&&!v&&q(a)&&(C(!0),y(!0),P(),T(e=>Math.max(0,e)),V.default.success("\u{1F389} You cleared the board \u2014 you win!"));},K=(e,l,t)=>{if(e.preventDefault(),!g||v||M)return;let a=u.map(e=>e.map(e=>({...e}))),n=a[l][t];if(!n.revealed){if(n.flagged)n.flagged=!1,T(e=>e+1);else{if(S<=0){V.default.warning("No flags left");return;}n.flagged=!0,T(e=>e-1);}m(a),q(a)&&(C(!0),y(!0),P(),V.default.success("\u{1F389} You cleared the board \u2014 you win!"));}},O=(e,l)=>{if(v||M)return;let t=u[e][l];if(!t||!t.revealed||t.adjacent<=0)return;let a=u.length,n=u[0].length,s=0,r=[];for(let t=-1;t<=1;t++)for(let i=-1;i<=1;i++){if(0===t&&0===i)continue;let d=e+t,c=l+i;!(d<0)&&!(c<0)&&!(d>=a)&&!(c>=n)&&(r.push([d,c]),u[d][c].flagged&&s++);}if(s!==t.adjacent)return;let i=u.map(e=>e.map(e=>({...e})));for(let[e,l]of r)if(!i[e][l].flagged&&!i[e][l].revealed&&(i=U(e,l,i)||i,v))break;m(i),!v&&q(i)&&(C(!0),y(!0),P(),V.default.success("\u{1F389} You cleared the board \u2014 you win!"));};(0,c.useEffect)(()=>()=>P(),[]);let X=({cell:e})=>{let l=["ms-cell"];return e.revealed&&l.push("ms-revealed"),e.flagged&&l.push("ms-flagged"),e.mined&&e.revealed&&l.push("ms-mine"),(0,s.jsx)("div",{className:l.join(" "),style:{width:F,height:F,lineHeight:`${F}px`,fontSize:Math.floor(.55*F)},onClick:()=>J(e.r,e.c),onContextMenu:l=>K(l,e.r,e.c),onDoubleClick:()=>O(e.r,e.c),role:"button","aria-label":`cell ${e.r}-${e.c}`,children:e.revealed?e.mined?"\u{1F4A3}":e.adjacent>0?(0,s.jsx)("span",{className:`ms-num ms-num-${e.adjacent}`,children:e.adjacent}):"":e.flagged?(0,s.jsx)(h,{}):""});};return(0,s.jsx)("div",{className:"ms-page",children:(0,s.jsxs)(b.default,{className:"ms-card",bordered:!1,children:[(0,s.jsx)(A,{level:3,children:"\u{1F9E9} Minesweeper"}),(0,s.jsxs)(_.default,{gutter:[12,12],align:"middle",children:[(0,s.jsx)(w.default,{xs:24,sm:12,md:10,lg:8,children:(0,s.jsxs)($.default,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(D,{strong:!0,children:"Difficulty:"}),(0,s.jsxs)(N.default,{value:e,onChange:e=>l(e),style:{minWidth:160},children:[(0,s.jsx)(W,{value:"beginner",children:"Beginner (9\xd79, 10 mines)"}),(0,s.jsx)(W,{value:"intermediate",children:"Intermediate (16\xd716, 40 mines)"}),(0,s.jsx)(W,{value:"advanced",children:"Advanced (16\xd730, 99 mines)"}),(0,s.jsx)(W,{value:"custom",children:"Custom"})]}),(0,s.jsx)(p.default,{icon:(0,s.jsx)(x,{}),onClick:()=>{let e=B(t,9,30),l=B(n,9,30),s=B(i,10,Math.max(10,Math.min(668,e*l-1)));a(e),r(l),d(s),P(),H.current=!0,j(!0),y(!1),C(!1),T(s),z(0),m(G(e,l)),V.default.success("New game ready \u2014 click a cell to start (first click is safe).");},type:"primary",children:"Start / Restart"}),(0,s.jsx)(p.default,{onClick:()=>{P(),j(!1),m([]),y(!1),C(!1),T(0),z(0),H.current=!0,V.default.info("Game reset. Choose settings and start.");},danger:!0,children:"New Setup"})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(D,{children:"Rows:"}),(0,s.jsx)(k.default,{min:9,max:30,value:t,onChange:e=>a(e||9),disabled:"custom"!==e}),(0,s.jsx)(D,{children:"Cols:"}),(0,s.jsx)(k.default,{min:9,max:30,value:n,onChange:e=>r(e||9),disabled:"custom"!==e}),(0,s.jsx)(D,{children:"Mines:"}),(0,s.jsx)(k.default,{min:10,max:Math.max(10,Math.min(668,t*n-1)),value:i,onChange:e=>d(e||10),disabled:"custom"!==e})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,s.jsx)(D,{children:"Show Tips:"}),(0,s.jsx)(I.default,{checked:o,onChange:f}),(0,s.jsx)(D,{type:"secondary",children:"(tap cell to reveal, right-click to flag)"})]})]})}),(0,s.jsx)(w.default,{xs:24,sm:12,md:14,lg:16,children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(D,{strong:!0,children:"Mines:"}),(0,s.jsx)("div",{children:S})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(D,{strong:!0,children:"Time:"}),(0,s.jsxs)("div",{children:[R,"s"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(D,{strong:!0,children:"Status:"}),(0,s.jsx)("div",{children:v?M?"Won \u2705":"Lost \u274C":g?"Playing":"Idle"})]})]})})]}),(0,s.jsx)("div",{className:"ms-board-wrap",children:(0,s.jsx)("div",{className:"ms-board",style:{gridTemplateColumns:`repeat(${n}, ${F}px)`,gap:6},children:u.length>0?u.map(e=>e.map(e=>(0,s.jsx)(X,{cell:e},`${e.r}-${e.c}`))):Array.from({length:t*n}).map((e,l)=>(0,s.jsx)("div",{className:"ms-cell",style:{width:F,height:F,lineHeight:`${F}px`,fontSize:Math.floor(.55*F),background:"#fafafa"}},l))})}),o&&(0,s.jsxs)("div",{className:"ms-tips",children:[(0,s.jsx)(A,{level:5,children:"Quick Tips"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"First click never hits a mine \u2014 the mines are placed after your first click."}),(0,s.jsx)("li",{children:"Right-click (or long press on mobile) to place a flag. Flags left is shown in the header."}),(0,s.jsx)("li",{children:"Double-click (or tap twice) a revealed number to chord (reveal neighbors) if flags match the number."}),(0,s.jsx)("li",{children:"Use custom mode to set Rows (9\u201330), Cols (9\u201330), and Mines (10\u2013668)."})]})]}),(0,s.jsxs)("div",{style:{marginTop:12,display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{children:(0,s.jsx)(D,{type:"secondary",children:"Made with \u2764\uFE0F \u2014 responsive and playable on mobile."})})]})]})});};}}]);
//# sourceMappingURL=daf5cedc-async.498fdf8c.js.map