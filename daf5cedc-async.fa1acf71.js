(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["daf5cedc"],{"3490d26e":function(e,l,a){a.d(l,"__esModule",{value:!0}),a.e(l,{default:function(){return F;}});var t=a("777fffbe"),n=a("852bbaa9"),s=a("1a7c85b4"),r=a("d2d0b3b6"),i=t._(r),d=a("d322be42"),c=n._(d),f=a("031722af"),o=t._(f),u=a("85c4e0d9"),h=t._(u),m=c.forwardRef(function(e,l){return c.createElement(h.default,(0,i.default)((0,i.default)({},e),{},{ref:l,icon:o.default}));}),g=a("b2a1469e"),x=t._(g),j=a("e9bcd22d"),p=t._(j),v=a("e2967699"),b=t._(v),y=a("2aa4d12e"),w=t._(y),M=a("a5512054"),k=t._(M),C=a("3eb6f542"),S=t._(C),_=a("ea21718c"),N=t._(_),T=a("5d5723f8"),I=t._(T),R=a("6effc0fd"),$=t._(R),A=a("c9d8dc0b"),D=t._(A);let{Title:E,Text:z}=$.default,{Option:W}=S.default,Y={beginner:{rows:9,cols:9,mines:10},intermediate:{rows:16,cols:16,mines:40},advanced:{rows:16,cols:30,mines:99}},B=(e,l,a)=>Math.max(l,Math.min(a,e)),F=()=>{let[e,l]=(0,c.useState)("beginner"),[a,t]=(0,c.useState)(9),[n,r]=(0,c.useState)(9),[i,d]=(0,c.useState)(10),[f,o]=(0,c.useState)(!0),[u,h]=(0,c.useState)("reveal"),[g,j]=(0,c.useState)([]),[v,y]=(0,c.useState)(!1),[M,C]=(0,c.useState)(!1),[_,T]=(0,c.useState)(!1),[R,$]=(0,c.useState)(0),[A,F]=(0,c.useState)(0),H=(0,c.useRef)(null),G=(0,c.useRef)(!0),L=(0,c.useMemo)(()=>n<=9?32:n<=16?24:n<=24?18:16,[n]);(0,c.useEffect)(()=>{if("custom"===e)return;let l=Y[e];l&&(t(l.rows),r(l.cols),d(l.mines));},[e]),(0,c.useEffect)(()=>{t(e=>B(e,9,30)),r(e=>B(e,9,30));let e=Math.max(10,Math.min(668,a*n-1));d(l=>B(l,10,e));},[a,n]);let P=(e,l)=>Array.from({length:e},(e,a)=>Array.from({length:l},(e,l)=>({r:a,c:l,mined:!1,revealed:!1,flagged:!1,adjacent:0}))),Q=(e,l,a,t)=>{let n=e.length,s=e[0].length,r=[];for(let e=0;e<n;e++)for(let t=0;t<s;t++)1>=Math.abs(e-l)&&1>=Math.abs(t-a)||r.push([e,t]);for(let e=r.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[r[e],r[l]]=[r[l],r[e]];}r.slice(0,t).forEach(([l,a])=>e[l][a].mined=!0);let i=[-1,0,1];for(let l=0;l<n;l++)for(let a=0;a<s;a++){if(e[l][a].mined){e[l][a].adjacent=-1;continue;}let t=0;for(let r of i)for(let d of i){if(0===r&&0===d)continue;let i=l+r,c=a+d;i>=0&&i<n&&c>=0&&c<s&&e[i][c].mined&&t++;}e[l][a].adjacent=t;}},U=()=>{H.current&&(window.clearInterval(H.current),H.current=null);},q=()=>{H.current||(H.current=window.setInterval(()=>F(e=>e+1),1e3));},J=(e,l,a)=>{if(M)return;let t=a||g.map(e=>e.map(e=>({...e}))),n=t[e][l];if(!n||n.revealed||n.flagged)return t;if(n.revealed=!0,n.mined){for(let e=0;e<t.length;e++)for(let l=0;l<t[0].length;l++)t[e][l].mined&&(t[e][l].revealed=!0);return j(t),C(!0),T(!1),U(),D.default.error("\u{1F4A5} Boom! You hit a mine."),t;}if(0===n.adjacent){let a=t.length,n=t[0].length,s=[[e,l]],r=[-1,0,1];for(;s.length;){let[e,l]=s.pop();for(let i of r)for(let d of r){let r=e+i,c=l+d;if(r<0||c<0||r>=a||c>=n)continue;let f=t[r][c];!f||f.revealed||f.flagged||(f.revealed=!0,0!==f.adjacent||f.mined||s.push([r,c]));}}}return j(t),t;},K=e=>e.every(e=>e.every(e=>e.mined||e.revealed)),O=(e,l)=>{if(M||_)return;let a=g;G.current&&(Q(a=g.map(e=>e.map(e=>({...e}))),e,l,i),G.current=!1,q());let t=J(e,l,a);t&&!M&&K(t)&&(T(!0),C(!0),U(),$(e=>Math.max(0,e)),D.default.success("\u{1F389} You cleared the board \u2014 you win!"));},V=(e,l,a)=>{if(e.preventDefault(),!v||M||_)return;let t=g.map(e=>e.map(e=>({...e}))),n=t[l][a];if(!n.revealed){if(n.flagged)n.flagged=!1,$(e=>e+1);else{if(R<=0)return D.default.warning("No flags left");n.flagged=!0,$(e=>e-1);}j(t),K(t)&&(T(!0),C(!0),U(),D.default.success("\u{1F389} You cleared the board \u2014 you win!"));}},X=(e,l)=>{if(M||_)return;let a=g[e][l];if(!a||!a.revealed||a.adjacent<=0)return;let t=g.length,n=g[0].length,s=0,r=[];for(let a=-1;a<=1;a++)for(let i=-1;i<=1;i++){if(0===a&&0===i)continue;let d=e+a,c=l+i;!(d<0)&&!(c<0)&&!(d>=t)&&!(c>=n)&&(r.push([d,c]),g[d][c].flagged&&s++);}if(s!==a.adjacent)return;let i=g.map(e=>e.map(e=>({...e})));for(let[e,l]of r)if(!i[e][l].flagged&&!i[e][l].revealed&&(i=J(e,l,i)||i,M))break;j(i),!M&&K(i)&&(T(!0),C(!0),U(),D.default.success("\u{1F389} You cleared the board \u2014 you win!"));};(0,c.useEffect)(()=>()=>U(),[]);let Z=({cell:e})=>{let l=["ms-cell"];return e.revealed&&l.push("ms-revealed"),e.flagged&&l.push("ms-flagged"),e.mined&&e.revealed&&l.push("ms-mine"),(0,s.jsx)("div",{className:l.join(" "),style:{width:L,height:L,lineHeight:`${L}px`,fontSize:Math.floor(.55*L)},onClick:l=>{l.preventDefault(),"reveal"===u?O(e.r,e.c):V(l,e.r,e.c);},onContextMenu:l=>V(l,e.r,e.c),onDoubleClick:()=>X(e.r,e.c),children:e.revealed?e.mined?"\u{1F4A3}":e.adjacent>0?(0,s.jsx)("span",{className:`ms-num ms-num-${e.adjacent}`,children:e.adjacent}):"":e.flagged?"\u{1F6A9}":""});};return(0,s.jsx)("div",{className:"ms-page",children:(0,s.jsxs)(p.default,{className:"ms-card",bordered:!1,children:[(0,s.jsx)(E,{level:3,children:"\u{1F4A3} Minesweeper"}),(0,s.jsxs)(k.default,{gutter:[12,12],align:"middle",children:[(0,s.jsx)(b.default,{xs:24,sm:12,md:10,lg:8,children:(0,s.jsxs)(N.default,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(z,{strong:!0,children:"Difficulty:"}),(0,s.jsxs)(S.default,{value:e,onChange:e=>l(e),style:{minWidth:160},children:[(0,s.jsx)(W,{value:"beginner",children:"Beginner (9\xd79, 10 mines)"}),(0,s.jsx)(W,{value:"intermediate",children:"Intermediate (16\xd716, 40 mines)"}),(0,s.jsx)(W,{value:"advanced",children:"Advanced (16\xd730, 99 mines)"}),(0,s.jsx)(W,{value:"custom",children:"Custom"})]}),(0,s.jsx)(x.default,{icon:(0,s.jsx)(m,{}),onClick:()=>{let e=B(a,9,30),l=B(n,9,30),s=B(i,10,Math.max(10,Math.min(668,e*l-1)));t(e),r(l),d(s),U(),G.current=!0,y(!0),C(!1),T(!1),$(s),F(0),j(P(e,l)),D.default.success("New game ready \u2014 click a cell to start (first click is safe).");},type:"primary",children:"Start / Restart"}),(0,s.jsx)(x.default,{onClick:()=>{U(),y(!1),j([]),C(!1),T(!1),$(0),F(0),G.current=!0,D.default.info("Game reset. Choose settings and start.");},danger:!0,children:"New Setup"})]}),"custom"===e?(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(z,{children:"Rows:"}),(0,s.jsx)(w.default,{min:9,max:30,value:a,onChange:e=>t(e||9),disabled:"custom"!==e}),(0,s.jsx)(z,{children:"Cols:"}),(0,s.jsx)(w.default,{min:9,max:30,value:n,onChange:e=>r(e||9),disabled:"custom"!==e}),(0,s.jsx)(z,{children:"Mines:"}),(0,s.jsx)(w.default,{min:10,max:Math.max(10,Math.min(668,a*n-1)),value:i,onChange:e=>d(e||10),disabled:"custom"!==e})]}):null,(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,s.jsx)(z,{children:"Show Tips:"}),(0,s.jsx)(I.default,{checked:f,onChange:o})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,s.jsx)(z,{children:"Tap Mode:"}),(0,s.jsx)(S.default,{value:u,onChange:e=>h(e),style:{width:140},options:[{label:"\u{1F4A3} Reveal (default)",value:"reveal"},{label:"\u{1F6A9} Flag",value:"flag"}]})]})]})}),(0,s.jsx)(b.default,{xs:24,sm:12,md:14,lg:16,children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{strong:!0,children:"Mines:"}),(0,s.jsx)("div",{children:R})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{strong:!0,children:"Time:"}),(0,s.jsxs)("div",{children:[A,"s"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{strong:!0,children:"Status:"}),(0,s.jsx)("div",{children:M?_?"Won \u2705":"Lost \u274C":v?"Playing":"Idle"})]})]})})]}),(0,s.jsx)("div",{className:"ms-board-wrap",children:(0,s.jsx)("div",{className:"ms-board",style:{gridTemplateColumns:`repeat(${n}, ${L}px)`,gap:6},children:g.length>0?g.map(e=>e.map(e=>(0,s.jsx)(Z,{cell:e},`${e.r}-${e.c}`))):Array.from({length:a*n}).map((e,l)=>(0,s.jsx)("div",{className:"ms-cell",style:{width:L,height:L,lineHeight:`${L}px`,fontSize:Math.floor(.55*L),background:"#fafafa"}},l))})}),f&&(0,s.jsxs)("div",{className:"ms-tips",children:[(0,s.jsx)(E,{level:5,children:"Quick Tips"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"First click never hits a mine \u2014 mines are placed after your first click."}),(0,s.jsx)("li",{children:"Right-click (or long press) to place a flag."}),(0,s.jsx)("li",{children:"Double-click a number to chord if flags match."}),(0,s.jsx)("li",{children:"Use custom mode for full control of board size."})]})]}),(0,s.jsx)("div",{style:{marginTop:12,textAlign:"center"},children:(0,s.jsx)(z,{type:"secondary",children:"Made with \u2764\uFE0F \u2014 responsive and mobile friendly."})})]})});};}}]);
//# sourceMappingURL=daf5cedc-async.fa1acf71.js.map