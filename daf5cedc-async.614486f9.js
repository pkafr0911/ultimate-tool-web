(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["daf5cedc"],{e5cc4132:function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return ef;}});var a=l("777fffbe"),n=l("852bbaa9"),s=l("95bd365d"),r=l("20c112ff"),i=l("314fd1a3"),d=n._(i);let c=()=>{let[e,t]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{t("ontouchstart"in window||navigator.maxTouchPoints>0);},[]),e;};var o=l("532621ad"),f=a._(o),u=l("0ec3d373"),h=a._(u),m=l("bb4b9fac"),g=a._(m),p=l("c213ceab"),x=a._(p),j=l("1734979e"),v=a._(j),y=l("f6952fcd"),b=a._(y),w=l("4444b98c"),C=l("0a1edbdd"),S=l("9f7f85f7"),k=l("d55878a9");let M=["wrap","nowrap","wrap-reverse"],T=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],$=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],_=(e,t)=>{let l=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${l}`]:l&&M.includes(l)};},O=(e,t)=>{let l={};return $.forEach(a=>{l[`${e}-align-${a}`]=t.align===a;}),l[`${e}-align-stretch`]=!t.align&&!!t.vertical,l;},N=(e,t)=>{let l={};return T.forEach(a=>{l[`${e}-justify-${a}`]=t.justify===a;}),l;},G=e=>{let{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}};},E=e=>{let{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}};},I=e=>{let{componentCls:t}=e,l={};return M.forEach(e=>{l[`${t}-wrap-${e}`]={flexWrap:e};}),l;},R=e=>{let{componentCls:t}=e,l={};return $.forEach(e=>{l[`${t}-align-${e}`]={alignItems:e};}),l;},D=e=>{let{componentCls:t}=e,l={};return T.forEach(e=>{l[`${t}-justify-${e}`]={justifyContent:e};}),l;};var A=(0,S.genStyleHooks)("Flex",e=>{let{paddingXS:t,padding:l,paddingLG:a}=e,n=(0,k.mergeToken)(e,{flexGapSM:t,flexGap:l,flexGapLG:a});return[G(n),E(n),I(n),R(n),D(n)];},()=>({}),{resetStyle:!1}),P=this&&this.__rest||function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]]);return l;};let Y=d.default.forwardRef((e,t)=>{let{prefixCls:l,rootClassName:a,className:n,style:s,flex:r,gap:i,children:c,vertical:o=!1,component:f="div"}=e,u=P(e,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:h,direction:m,getPrefixCls:g}=d.default.useContext(C.ConfigContext),p=g("flex",l),[x,j,y]=A(p),S=null!=o?o:null==h?void 0:h.vertical,k=(0,v.default)(n,a,null==h?void 0:h.className,p,j,y,(0,v.default)(Object.assign(Object.assign(Object.assign({},_(p,e)),O(p,e)),N(p,e))),{[`${p}-rtl`]:"rtl"===m,[`${p}-gap-${i}`]:(0,w.isPresetSize)(i),[`${p}-vertical`]:S}),M=Object.assign(Object.assign({},null==h?void 0:h.style),s);return r&&(M.flex=r),i&&!(0,w.isPresetSize)(i)&&(M.gap=i),x(d.default.createElement(f,Object.assign({ref:t,className:k,style:M},(0,b.default)(u,["justify","wrap","align"])),c));});var z=l("c4e93e50"),L=a._(z),W=l("e015c964"),B=a._(W),F=l("4f331305");a._(F);var H=l("5a83e636"),U=a._(H),K=l("522a0302"),Q=a._(K),q=l("0ed998a9"),J=a._(q),V=l("f3cfb986"),X=a._(V),Z=l("a9a67fa4"),ee=a._(Z),et=l("90c13dc1"),el=a._(et),ea=l("0c5bfc2e"),en=a._(ea);let{Text:es}=Q.default,er=({visible:e,onClose:t,difficulty:l,setDifficulty:a,rows:n,setRows:r,cols:i,setCols:c,mines:o,setMines:f,showTips:u,setShowTips:m,started:g,startGame:p,resetAll:x})=>{let[j,v]=(0,d.useState)(l),[y,b]=(0,d.useState)(n),[w,C]=(0,d.useState)(i),[S,k]=(0,d.useState)(o),[M,T]=(0,d.useState)(u);return(0,d.useEffect)(()=>{e&&(v(l),b(n),C(i),k(o),T(u));},[e]),(0,s.jsx)(el.default,{open:e,onCancel:t,footer:null,maskClosable:!1,centered:!0,title:"Game Setup",children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(es,{strong:!0,children:"Difficulty:"}),(0,s.jsxs)(L.default.Group,{value:j,onChange:e=>v(e.target.value),style:{display:"flex",flexDirection:"column",marginTop:8,gap:4},children:[(0,s.jsx)(L.default,{value:"beginner",children:"Beginner (9\xd79, 10 mines)"}),(0,s.jsx)(L.default,{value:"intermediate",children:"Intermediate (16\xd716, 40 mines)"}),(0,s.jsx)(L.default,{value:"advanced",children:"Advanced (16\xd730, 99 mines)"}),(0,s.jsx)(L.default,{value:"custom",children:"Custom"})]})]}),"custom"===j&&(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[(0,s.jsx)(es,{children:"Rows:"}),(0,s.jsx)(ee.default,{min:9,max:30,value:y,onChange:e=>b(e||9)}),(0,s.jsx)(es,{children:"Cols:"}),(0,s.jsx)(ee.default,{min:9,max:30,value:w,onChange:e=>C(e||9)}),(0,s.jsx)(es,{children:"Mines:"}),(0,s.jsx)(ee.default,{min:10,max:Math.max(10,Math.min(668,y*w-1)),value:S,onChange:e=>k(e||10)})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,s.jsx)(es,{children:"Show Tips:"}),(0,s.jsx)(en.default,{checked:M,onChange:T})]}),(0,s.jsxs)(U.default,{style:{justifyContent:"flex-end",display:"flex",marginTop:8},children:[(0,s.jsx)(h.default,{onClick:t,danger:!0,children:"Cancel"}),(0,s.jsx)(h.default,{type:"primary",onClick:()=>{let e=()=>{a(j),r(y),c(w),f(S),m(M),x(),t(),J.default.success("Game setup updated!");};g?el.default.confirm({title:"Restart Game?",content:"Changing settings will restart your current game and clear your progress. Continue?",okText:"Yes, restart",cancelText:"No, keep playing",centered:!0,onOk:e}):e();},children:"Confirm"})]})]})});},{Title:ei,Text:ed}=Q.default,ec={beginner:{rows:9,cols:9,mines:10},intermediate:{rows:16,cols:16,mines:40},advanced:{rows:16,cols:30,mines:99}},eo=(e,t,l)=>Math.max(t,Math.min(l,e)),ef=()=>{let[e,t]=(0,d.useState)("beginner"),[l,a]=(0,d.useState)(9),[n,i]=(0,d.useState)(9),[o,u]=(0,d.useState)(10),[m,p]=(0,d.useState)(!0),[j,v]=(0,d.useState)("reveal"),[y,b]=(0,d.useState)([]),[w,C]=(0,d.useState)(!1),[S,k]=(0,d.useState)(!1),[M,T]=(0,d.useState)(!1),[$,_]=(0,d.useState)(0),[O,N]=(0,d.useState)(0),[G,E]=(0,d.useState)(!0),I=(0,d.useRef)(null),R=(0,d.useRef)(!0),D=(0,r.useIsMobile)(),A=c(),P=(0,d.useMemo)(()=>D?4:6,[D]),z=(0,d.useMemo)(()=>D?n<=9?32:n<=16?24:n<=24?18:16:n<=9?40:n<=16?32:n<=24?28:22,[n,D]),W=(0,d.useMemo)(()=>{let e=window.innerWidth;return(z+2*P)*n>(D?e:e-160)?"flex-start":"center";},[z,n,D]);(0,d.useEffect)(()=>{if("custom"===e)return;let t=ec[e];t&&(a(t.rows),i(t.cols),u(t.mines));},[e]),(0,d.useEffect)(()=>{a(e=>eo(e,9,30)),i(e=>eo(e,9,30));let e=Math.max(10,Math.min(668,l*n-1));u(t=>eo(t,10,e));},[l,n]);let F=(e,t)=>Array.from({length:e},(e,l)=>Array.from({length:t},(e,t)=>({r:l,c:t,mined:!1,revealed:!1,flagged:!1,adjacent:0}))),H=(e,t,l,a)=>{let n=e.length,s=e[0].length,r=[];for(let e=0;e<n;e++)for(let a=0;a<s;a++)1>=Math.abs(e-t)&&1>=Math.abs(a-l)||r.push([e,a]);for(let e=r.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]];}r.slice(0,a).forEach(([t,l])=>e[t][l].mined=!0);let i=[-1,0,1];for(let t=0;t<n;t++)for(let l=0;l<s;l++){if(e[t][l].mined){e[t][l].adjacent=-1;continue;}let a=0;for(let r of i)for(let d of i){if(0===r&&0===d)continue;let i=t+r,c=l+d;i>=0&&i<n&&c>=0&&c<s&&e[i][c].mined&&a++;}e[t][l].adjacent=a;}},K=()=>{let e=eo(l,9,30),t=eo(n,9,30),s=eo(o,10,Math.max(10,Math.min(668,e*t-1)));a(e),i(t),u(s),Q(),R.current=!0,C(!0),k(!1),T(!1),_(s),N(0),b(F(e,t)),J.default.success("New game ready \u2014 click a cell to start (first click is safe).");},Q=()=>{I.current&&(window.clearInterval(I.current),I.current=null);},q=()=>{I.current||(I.current=window.setInterval(()=>N(e=>e+1),1e3));},V=(e,t,l)=>{if(S)return;let a=l||y.map(e=>e.map(e=>({...e}))),n=a[e][t];if(!n||n.revealed||n.flagged)return a;if(n.revealed=!0,n.mined){for(let e=0;e<a.length;e++)for(let t=0;t<a[0].length;t++)a[e][t].mined&&(a[e][t].revealed=!0);return b(a),k(!0),T(!1),Q(),J.default.error("\u{1F4A5} Boom! You hit a mine."),a;}if(0===n.adjacent){let l=a.length,n=a[0].length,s=[[e,t]],r=[-1,0,1];for(;s.length;){let[e,t]=s.pop();for(let i of r)for(let d of r){let r=e+i,c=t+d;if(r<0||c<0||r>=l||c>=n)continue;let o=a[r][c];!o||o.revealed||o.flagged||(o.revealed=!0,0!==o.adjacent||o.mined||s.push([r,c]));}}}return b(a),a;},Z=e=>e.every(e=>e.every(e=>e.mined||e.revealed)),ee=(e,t)=>{if(S||M)return;let l=y;R.current&&(H(l=y.map(e=>e.map(e=>({...e}))),e,t,o),R.current=!1,q());let a=V(e,t,l);a&&!S&&Z(a)&&(T(!0),k(!0),Q(),_(e=>Math.max(0,e)),J.default.success("\u{1F389} You cleared the board \u2014 you win!"));},et=(e,t,l)=>{if(e.preventDefault(),!w||S||M)return;let a=y.map(e=>e.map(e=>({...e}))),n=a[t][l];if(!n.revealed){if(n.flagged)n.flagged=!1,_(e=>e+1);else{if($<=0)return J.default.warning("No flags left");n.flagged=!0,_(e=>e-1);}b(a),Z(a)&&(T(!0),k(!0),Q(),J.default.success("\u{1F389} You cleared the board \u2014 you win!"));}},el=(e,t)=>{if(S||M)return;let l=y[e][t];if(!l||!l.revealed||l.adjacent<=0)return;let a=y.length,n=y[0].length,s=0,r=[];for(let l=-1;l<=1;l++)for(let i=-1;i<=1;i++){if(0===l&&0===i)continue;let d=e+l,c=t+i;!(d<0)&&!(c<0)&&!(d>=a)&&!(c>=n)&&(r.push([d,c]),y[d][c].flagged&&s++);}if(s!==l.adjacent)return;let i=y.map(e=>e.map(e=>({...e})));for(let[e,t]of r)if(!i[e][t].flagged&&!i[e][t].revealed&&(i=V(e,t,i)||i,S))break;b(i),!S&&Z(i)&&(T(!0),k(!0),Q(),J.default.success("\u{1F389} You cleared the board \u2014 you win!"));},ea=()=>{Q(),C(!1),b([]),k(!1),T(!1),_(0),N(0),R.current=!0;};(0,d.useEffect)(()=>()=>Q(),[]);let en=({cell:e})=>{let t=["ms-cell"];return e.revealed&&t.push("ms-revealed"),e.flagged&&t.push("ms-flagged"),e.mined&&e.revealed&&t.push("ms-mine"),(0,s.jsx)("div",{className:t.join(" "),style:{width:z,height:z,lineHeight:`${z}px`,fontSize:Math.floor(.55*z)},onClick:t=>{t.preventDefault(),"reveal"===j?ee(e.r,e.c):et(t,e.r,e.c);},onContextMenu:t=>et(t,e.r,e.c),onDoubleClick:()=>el(e.r,e.c),children:e.revealed?e.mined?"\u{1F4A3}":e.adjacent>0?(0,s.jsx)("span",{className:`ms-num ms-num-${e.adjacent}`,children:e.adjacent}):"":e.flagged?"\u{1F6A9}":""});};return(0,s.jsxs)("div",{className:"ms-page",children:[M&&(0,s.jsx)(X.default,{}),(0,s.jsxs)(g.default,{className:"ms-card",variant:"borderless",children:[(0,s.jsx)(U.default,{children:(0,s.jsx)(ei,{level:3,children:"\u{1F4A3} Minesweeper "})}),(0,s.jsxs)(Y,{justify:"center",align:"center",style:{gap:8,marginTop:16},children:[!w&&(0,s.jsx)(h.default,{style:{width:"100%"},type:"primary",onClick:K,children:"Start"}),w&&(0,s.jsx)(h.default,{style:{width:"100%"},danger:!0,onClick:()=>{ea(),J.default.info("Game reset. Choose settings and start.");},children:"Reset"}),(0,s.jsx)(h.default,{onClick:()=>E(!0),type:"dashed",icon:(0,s.jsx)(f.default,{})})]}),(0,s.jsxs)(B.default,{gutter:[12,12],align:"middle",children:[(0,s.jsx)(x.default,{xs:24,sm:12,md:10,lg:8,children:(0,s.jsx)(U.default,{direction:"vertical",size:"small",style:{width:"100%"},children:A&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,s.jsx)(ed,{children:"Tap Mode:"}),(0,s.jsxs)(L.default.Group,{value:j,onChange:e=>v(e.target.value),optionType:"button",buttonStyle:"solid",children:[(0,s.jsx)(L.default.Button,{value:"reveal",children:"\u{1F4A3} Reveal"}),(0,s.jsx)(L.default.Button,{value:"flag",children:"\u{1F6A9} Flag"})]})]})]})})}),(0,s.jsx)(x.default,{xs:24,sm:12,md:14,lg:16,children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ed,{strong:!0,children:"Mines:"}),(0,s.jsx)("div",{children:$})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed,{strong:!0,children:"Time:"}),(0,s.jsxs)("div",{children:[O,"s"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed,{strong:!0,children:"Status:"}),(0,s.jsx)("div",{children:S?M?"Won \u2705":"Lost \u274C":w?"Playing":"Idle"})]})]})})]}),(0,s.jsx)("div",{className:"ms-board-wrap",style:{justifyContent:W},children:(0,s.jsx)("div",{className:"ms-board",style:{gridTemplateColumns:`repeat(${n}, ${z}px)`,gap:P,position:"relative"},children:y.length>0?y.map(e=>e.map(e=>(0,s.jsx)(en,{cell:e},`${e.r}-${e.c}`))):Array.from({length:l*n}).map((e,t)=>(0,s.jsx)("div",{className:"ms-cell",style:{width:z,height:z,lineHeight:`${z}px`,fontSize:Math.floor(.55*z),background:"#fafafa"},onClick:K},t))})}),!w&&!S&&(0,s.jsx)("div",{className:"ms-start-overlay",onClick:K,children:"CLICK TO START"}),S&&M&&(0,s.jsx)("div",{className:"ms-win-overlay",onClick:ea,children:"\u{1F389} YOU WIN \u{1F389}"}),S&&!M&&(0,s.jsx)("div",{className:"ms-lose-overlay",onClick:ea,children:"\u{1F4A5} YOU LOSE \u{1F4A5}"}),m&&(0,s.jsxs)("div",{className:"ms-tips",children:[(0,s.jsx)(ei,{level:5,children:"Quick Tips"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"First click never hits a mine \u2014 mines are placed after your first click."}),(0,s.jsx)("li",{children:"Right-click (or long press) to place a flag."}),(0,s.jsx)("li",{children:"Double-click a number to chord if flags match."}),(0,s.jsx)("li",{children:"Use custom mode for full control of board size."})]})]}),(0,s.jsx)("div",{style:{marginTop:12,textAlign:"center"},children:(0,s.jsx)(ed,{type:"secondary",children:"Made with \u2764\uFE0F \u2014 responsive and mobile friendly."})})]}),(0,s.jsx)(er,{visible:G,onClose:()=>E(!1),difficulty:e,setDifficulty:t,rows:l,setRows:a,cols:n,setCols:i,mines:o,setMines:u,showTips:m,setShowTips:p,started:w||S||M,startGame:K,resetAll:ea})]});};}}]);
//# sourceMappingURL=daf5cedc-async.614486f9.js.map