{"version":3,"sources":["src/pages/DeviceTest/KeyboardTest.tsx","node_modules/@ant-design/icons-svg/es/asn/CameraOutlined.js","node_modules/@ant-design/icons/es/icons/CameraOutlined.js","src/pages/DeviceTest/CameraTest.tsx","node_modules/@ant-design/icons-svg/es/asn/AudioOutlined.js","node_modules/@ant-design/icons/es/icons/AudioOutlined.js","src/pages/DeviceTest/MicrophoneTest.tsx","src/pages/DeviceTest/HeadphoneTest.tsx","src/pages/DeviceTest/GamepadTest.tsx","src/pages/DeviceTest/MouseTest.tsx","src/pages/DeviceTest/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { Badge, Card, Col, Row, Segmented, Switch, Tooltip } from 'antd';\r\n\r\n// ─── Key definition ────────────────────────────────────────────────────────\r\ninterface KeyDef {\r\n  code: string;\r\n  label: string;\r\n  subLabel?: string; // top label (e.g. shift symbol)\r\n  width?: number;\r\n  height?: number;\r\n}\r\n\r\ntype KeyRow = KeyDef[];\r\n\r\n// ─── Layout computation ────────────────────────────────────────────────────\r\nconst KEY_SIZE = 48;\r\nconst KEY_GAP = 4;\r\nconst CELL = KEY_SIZE + KEY_GAP; // 52\r\n\r\ninterface RenderedKey {\r\n  code: string;\r\n  label: string;\r\n  subLabel?: string;\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n}\r\n\r\nfunction computeKeyPositions(layout: KeyRow[]) {\r\n  const keys: RenderedKey[] = [];\r\n  let maxX = 0;\r\n\r\n  layout.forEach((row, ri) => {\r\n    let x = 0;\r\n    const y = ri * CELL;\r\n\r\n    row.forEach((kd) => {\r\n      if (kd.code.startsWith('_gap')) {\r\n        x += (kd.width ?? 1) * CELL;\r\n        return;\r\n      }\r\n      const wu = kd.width ?? 1;\r\n      const hu = kd.height ?? 1;\r\n      const w = wu * CELL - KEY_GAP;\r\n      const h = hu * CELL - KEY_GAP;\r\n      keys.push({ code: kd.code, label: kd.label, subLabel: kd.subLabel, x, y, w, h });\r\n      x += wu * CELL;\r\n    });\r\n\r\n    maxX = Math.max(maxX, x - KEY_GAP);\r\n  });\r\n\r\n  return { keys, width: maxX, height: layout.length * CELL - KEY_GAP };\r\n}\r\n\r\nconst WIN_DESKTOP_LAYOUT: KeyRow[] = [\r\n  // Function row — gaps tuned so PrtSc/ScrLk/Pause align with Ins/Home/PgUp\r\n  [\r\n    { code: 'Escape', label: 'Esc' },\r\n    { code: '_gap1', label: '', width: 1 },\r\n    { code: 'F1', label: 'F1' },\r\n    { code: 'F2', label: 'F2' },\r\n    { code: 'F3', label: 'F3' },\r\n    { code: 'F4', label: 'F4' },\r\n    { code: '_gap2', label: '', width: 0.5 },\r\n    { code: 'F5', label: 'F5' },\r\n    { code: 'F6', label: 'F6' },\r\n    { code: 'F7', label: 'F7' },\r\n    { code: 'F8', label: 'F8' },\r\n    { code: '_gap3', label: '', width: 0.5 },\r\n    { code: 'F9', label: 'F9' },\r\n    { code: 'F10', label: 'F10' },\r\n    { code: 'F11', label: 'F11' },\r\n    { code: 'F12', label: 'F12' },\r\n    { code: '_gap4', label: '', width: 0.25 },\r\n    { code: 'PrintScreen', label: 'PrtSc' },\r\n    { code: 'ScrollLock', label: 'ScrLk' },\r\n    { code: 'Pause', label: 'Pause' },\r\n  ],\r\n  // Number row\r\n  [\r\n    { code: 'Backquote', label: '`', subLabel: '~' },\r\n    { code: 'Digit1', label: '1', subLabel: '!' },\r\n    { code: 'Digit2', label: '2', subLabel: '@' },\r\n    { code: 'Digit3', label: '3', subLabel: '#' },\r\n    { code: 'Digit4', label: '4', subLabel: '$' },\r\n    { code: 'Digit5', label: '5', subLabel: '%' },\r\n    { code: 'Digit6', label: '6', subLabel: '^' },\r\n    { code: 'Digit7', label: '7', subLabel: '&' },\r\n    { code: 'Digit8', label: '8', subLabel: '*' },\r\n    { code: 'Digit9', label: '9', subLabel: '(' },\r\n    { code: 'Digit0', label: '0', subLabel: ')' },\r\n    { code: 'Minus', label: '-', subLabel: '_' },\r\n    { code: 'Equal', label: '=', subLabel: '+' },\r\n    { code: 'Backspace', label: 'Backspace', width: 2 },\r\n    { code: '_gap5', label: '', width: 0.25 },\r\n    { code: 'Insert', label: 'Ins' },\r\n    { code: 'Home', label: 'Home' },\r\n    { code: 'PageUp', label: 'PgUp' },\r\n    { code: '_gap6', label: '', width: 0.25 },\r\n    { code: 'NumLock', label: 'Num' },\r\n    { code: 'NumpadDivide', label: '/' },\r\n    { code: 'NumpadMultiply', label: '*' },\r\n    { code: 'NumpadSubtract', label: '-' },\r\n  ],\r\n  // QWERTY row\r\n  [\r\n    { code: 'Tab', label: 'Tab', width: 1.5 },\r\n    { code: 'KeyQ', label: 'Q' },\r\n    { code: 'KeyW', label: 'W' },\r\n    { code: 'KeyE', label: 'E' },\r\n    { code: 'KeyR', label: 'R' },\r\n    { code: 'KeyT', label: 'T' },\r\n    { code: 'KeyY', label: 'Y' },\r\n    { code: 'KeyU', label: 'U' },\r\n    { code: 'KeyI', label: 'I' },\r\n    { code: 'KeyO', label: 'O' },\r\n    { code: 'KeyP', label: 'P' },\r\n    { code: 'BracketLeft', label: '[', subLabel: '{' },\r\n    { code: 'BracketRight', label: ']', subLabel: '}' },\r\n    { code: 'Backslash', label: '\\\\', subLabel: '|', width: 1.5 },\r\n    { code: '_gap7', label: '', width: 0.25 },\r\n    { code: 'Delete', label: 'Del' },\r\n    { code: 'End', label: 'End' },\r\n    { code: 'PageDown', label: 'PgDn' },\r\n    { code: '_gap8', label: '', width: 0.25 },\r\n    { code: 'Numpad7', label: '7' },\r\n    { code: 'Numpad8', label: '8' },\r\n    { code: 'Numpad9', label: '9' },\r\n    { code: 'NumpadAdd', label: '+', height: 2 },\r\n  ],\r\n  // Home row\r\n  [\r\n    { code: 'CapsLock', label: 'Caps', width: 1.75 },\r\n    { code: 'KeyA', label: 'A' },\r\n    { code: 'KeyS', label: 'S' },\r\n    { code: 'KeyD', label: 'D' },\r\n    { code: 'KeyF', label: 'F' },\r\n    { code: 'KeyG', label: 'G' },\r\n    { code: 'KeyH', label: 'H' },\r\n    { code: 'KeyJ', label: 'J' },\r\n    { code: 'KeyK', label: 'K' },\r\n    { code: 'KeyL', label: 'L' },\r\n    { code: 'Semicolon', label: ';', subLabel: ':' },\r\n    { code: 'Quote', label: \"'\", subLabel: '\"' },\r\n    { code: 'Enter', label: 'Enter', width: 2.25 },\r\n    { code: '_gap9', label: '', width: 3.5 },\r\n    { code: 'Numpad4', label: '4' },\r\n    { code: 'Numpad5', label: '5' },\r\n    { code: 'Numpad6', label: '6' },\r\n  ],\r\n  // Shift row\r\n  [\r\n    { code: 'ShiftLeft', label: 'Shift', width: 2.25 },\r\n    { code: 'KeyZ', label: 'Z' },\r\n    { code: 'KeyX', label: 'X' },\r\n    { code: 'KeyC', label: 'C' },\r\n    { code: 'KeyV', label: 'V' },\r\n    { code: 'KeyB', label: 'B' },\r\n    { code: 'KeyN', label: 'N' },\r\n    { code: 'KeyM', label: 'M' },\r\n    { code: 'Comma', label: ',', subLabel: '<' },\r\n    { code: 'Period', label: '.', subLabel: '>' },\r\n    { code: 'Slash', label: '/', subLabel: '?' },\r\n    { code: 'ShiftRight', label: 'Shift', width: 2.75 },\r\n    { code: '_gap10', label: '', width: 1.25 },\r\n    { code: 'ArrowUp', label: '↑' },\r\n    { code: '_gap11', label: '', width: 1.25 },\r\n    { code: 'Numpad1', label: '1' },\r\n    { code: 'Numpad2', label: '2' },\r\n    { code: 'Numpad3', label: '3' },\r\n    { code: 'NumpadEnter', label: 'Ent', height: 2 },\r\n  ],\r\n  // Bottom row\r\n  [\r\n    { code: 'ControlLeft', label: 'Ctrl', width: 1.25 },\r\n    { code: 'MetaLeft', label: 'Win', width: 1.25 },\r\n    { code: 'AltLeft', label: 'Alt', width: 1.25 },\r\n    { code: 'Space', label: '', width: 6.25 },\r\n    { code: 'AltRight', label: 'Alt', width: 1.25 },\r\n    { code: 'MetaRight', label: 'Win', width: 1.25 },\r\n    { code: 'ContextMenu', label: 'Menu', width: 1.25 },\r\n    { code: 'ControlRight', label: 'Ctrl', width: 1.25 },\r\n    { code: '_gap12', label: '', width: 0.25 },\r\n    { code: 'ArrowLeft', label: '←' },\r\n    { code: 'ArrowDown', label: '↓' },\r\n    { code: 'ArrowRight', label: '→' },\r\n    { code: '_gap13', label: '', width: 0.25 },\r\n    { code: 'Numpad0', label: '0', width: 2 },\r\n    { code: 'NumpadDecimal', label: '.' },\r\n  ],\r\n];\r\n\r\nconst MAC_DESKTOP_LAYOUT: KeyRow[] = [\r\n  [\r\n    { code: 'Escape', label: 'Esc' },\r\n    { code: '_gap1', label: '', width: 1 },\r\n    { code: 'F1', label: 'F1' },\r\n    { code: 'F2', label: 'F2' },\r\n    { code: 'F3', label: 'F3' },\r\n    { code: 'F4', label: 'F4' },\r\n    { code: '_gap2', label: '', width: 0.5 },\r\n    { code: 'F5', label: 'F5' },\r\n    { code: 'F6', label: 'F6' },\r\n    { code: 'F7', label: 'F7' },\r\n    { code: 'F8', label: 'F8' },\r\n    { code: '_gap3', label: '', width: 0.5 },\r\n    { code: 'F9', label: 'F9' },\r\n    { code: 'F10', label: 'F10' },\r\n    { code: 'F11', label: 'F11' },\r\n    { code: 'F12', label: 'F12' },\r\n  ],\r\n  [\r\n    { code: 'Backquote', label: '`', subLabel: '~' },\r\n    { code: 'Digit1', label: '1', subLabel: '!' },\r\n    { code: 'Digit2', label: '2', subLabel: '@' },\r\n    { code: 'Digit3', label: '3', subLabel: '#' },\r\n    { code: 'Digit4', label: '4', subLabel: '$' },\r\n    { code: 'Digit5', label: '5', subLabel: '%' },\r\n    { code: 'Digit6', label: '6', subLabel: '^' },\r\n    { code: 'Digit7', label: '7', subLabel: '&' },\r\n    { code: 'Digit8', label: '8', subLabel: '*' },\r\n    { code: 'Digit9', label: '9', subLabel: '(' },\r\n    { code: 'Digit0', label: '0', subLabel: ')' },\r\n    { code: 'Minus', label: '-', subLabel: '_' },\r\n    { code: 'Equal', label: '=', subLabel: '+' },\r\n    { code: 'Backspace', label: 'Delete', width: 1.5 },\r\n  ],\r\n  [\r\n    { code: 'Tab', label: 'Tab', width: 1.5 },\r\n    { code: 'KeyQ', label: 'Q' },\r\n    { code: 'KeyW', label: 'W' },\r\n    { code: 'KeyE', label: 'E' },\r\n    { code: 'KeyR', label: 'R' },\r\n    { code: 'KeyT', label: 'T' },\r\n    { code: 'KeyY', label: 'Y' },\r\n    { code: 'KeyU', label: 'U' },\r\n    { code: 'KeyI', label: 'I' },\r\n    { code: 'KeyO', label: 'O' },\r\n    { code: 'KeyP', label: 'P' },\r\n    { code: 'BracketLeft', label: '[', subLabel: '{' },\r\n    { code: 'BracketRight', label: ']', subLabel: '}' },\r\n    { code: 'Backslash', label: '\\\\', subLabel: '|', width: 1.5 },\r\n  ],\r\n  [\r\n    { code: 'CapsLock', label: 'Caps', width: 1.75 },\r\n    { code: 'KeyA', label: 'A' },\r\n    { code: 'KeyS', label: 'S' },\r\n    { code: 'KeyD', label: 'D' },\r\n    { code: 'KeyF', label: 'F' },\r\n    { code: 'KeyG', label: 'G' },\r\n    { code: 'KeyH', label: 'H' },\r\n    { code: 'KeyJ', label: 'J' },\r\n    { code: 'KeyK', label: 'K' },\r\n    { code: 'KeyL', label: 'L' },\r\n    { code: 'Semicolon', label: ';', subLabel: ':' },\r\n    { code: 'Quote', label: \"'\", subLabel: '\"' },\r\n    { code: 'Enter', label: 'Return', width: 2.25 },\r\n  ],\r\n  [\r\n    { code: 'ShiftLeft', label: 'Shift', width: 2.25 },\r\n    { code: 'KeyZ', label: 'Z' },\r\n    { code: 'KeyX', label: 'X' },\r\n    { code: 'KeyC', label: 'C' },\r\n    { code: 'KeyV', label: 'V' },\r\n    { code: 'KeyB', label: 'B' },\r\n    { code: 'KeyN', label: 'N' },\r\n    { code: 'KeyM', label: 'M' },\r\n    { code: 'Comma', label: ',', subLabel: '<' },\r\n    { code: 'Period', label: '.', subLabel: '>' },\r\n    { code: 'Slash', label: '/', subLabel: '?' },\r\n    { code: 'ShiftRight', label: 'Shift', width: 2.75 },\r\n  ],\r\n  [\r\n    { code: 'Fn', label: 'Fn', width: 1 },\r\n    { code: 'ControlLeft', label: '⌃', width: 1.25 },\r\n    { code: 'AltLeft', label: '⌥', width: 1.25 },\r\n    { code: 'MetaLeft', label: '⌘', width: 1.5 },\r\n    { code: 'Space', label: '', width: 5 },\r\n    { code: 'MetaRight', label: '⌘', width: 1.5 },\r\n    { code: 'AltRight', label: '⌥', width: 1.25 },\r\n    { code: 'ArrowLeft', label: '←' },\r\n    { code: 'ArrowDown', label: '↓' },\r\n    { code: 'ArrowUp', label: '↑' },\r\n    { code: 'ArrowRight', label: '→' },\r\n  ],\r\n];\r\n\r\n// ─── 80% TKL layout (no numpad) ────────────────────────────────────────────\r\nconst WIN_TKL_LAYOUT: KeyRow[] = [\r\n  // Function row\r\n  [\r\n    { code: 'Escape', label: 'Esc' },\r\n    { code: '_gap1', label: '', width: 1 },\r\n    { code: 'F1', label: 'F1' },\r\n    { code: 'F2', label: 'F2' },\r\n    { code: 'F3', label: 'F3' },\r\n    { code: 'F4', label: 'F4' },\r\n    { code: '_gap2', label: '', width: 0.5 },\r\n    { code: 'F5', label: 'F5' },\r\n    { code: 'F6', label: 'F6' },\r\n    { code: 'F7', label: 'F7' },\r\n    { code: 'F8', label: 'F8' },\r\n    { code: '_gap3', label: '', width: 0.5 },\r\n    { code: 'F9', label: 'F9' },\r\n    { code: 'F10', label: 'F10' },\r\n    { code: 'F11', label: 'F11' },\r\n    { code: 'F12', label: 'F12' },\r\n    { code: '_gap4', label: '', width: 0.25 },\r\n    { code: 'PrintScreen', label: 'PrtSc' },\r\n    { code: 'ScrollLock', label: 'ScrLk' },\r\n    { code: 'Pause', label: 'Pause' },\r\n  ],\r\n  [\r\n    { code: 'Backquote', label: '`', subLabel: '~' },\r\n    { code: 'Digit1', label: '1', subLabel: '!' },\r\n    { code: 'Digit2', label: '2', subLabel: '@' },\r\n    { code: 'Digit3', label: '3', subLabel: '#' },\r\n    { code: 'Digit4', label: '4', subLabel: '$' },\r\n    { code: 'Digit5', label: '5', subLabel: '%' },\r\n    { code: 'Digit6', label: '6', subLabel: '^' },\r\n    { code: 'Digit7', label: '7', subLabel: '&' },\r\n    { code: 'Digit8', label: '8', subLabel: '*' },\r\n    { code: 'Digit9', label: '9', subLabel: '(' },\r\n    { code: 'Digit0', label: '0', subLabel: ')' },\r\n    { code: 'Minus', label: '-', subLabel: '_' },\r\n    { code: 'Equal', label: '=', subLabel: '+' },\r\n    { code: 'Backspace', label: 'Backspace', width: 2 },\r\n    { code: '_gap5', label: '', width: 0.25 },\r\n    { code: 'Insert', label: 'Ins' },\r\n    { code: 'Home', label: 'Home' },\r\n    { code: 'PageUp', label: 'PgUp' },\r\n  ],\r\n  [\r\n    { code: 'Tab', label: 'Tab', width: 1.5 },\r\n    { code: 'KeyQ', label: 'Q' },\r\n    { code: 'KeyW', label: 'W' },\r\n    { code: 'KeyE', label: 'E' },\r\n    { code: 'KeyR', label: 'R' },\r\n    { code: 'KeyT', label: 'T' },\r\n    { code: 'KeyY', label: 'Y' },\r\n    { code: 'KeyU', label: 'U' },\r\n    { code: 'KeyI', label: 'I' },\r\n    { code: 'KeyO', label: 'O' },\r\n    { code: 'KeyP', label: 'P' },\r\n    { code: 'BracketLeft', label: '[', subLabel: '{' },\r\n    { code: 'BracketRight', label: ']', subLabel: '}' },\r\n    { code: 'Backslash', label: '\\\\', subLabel: '|', width: 1.5 },\r\n    { code: '_gap7', label: '', width: 0.25 },\r\n    { code: 'Delete', label: 'Del' },\r\n    { code: 'End', label: 'End' },\r\n    { code: 'PageDown', label: 'PgDn' },\r\n  ],\r\n  [\r\n    { code: 'CapsLock', label: 'Caps', width: 1.75 },\r\n    { code: 'KeyA', label: 'A' },\r\n    { code: 'KeyS', label: 'S' },\r\n    { code: 'KeyD', label: 'D' },\r\n    { code: 'KeyF', label: 'F' },\r\n    { code: 'KeyG', label: 'G' },\r\n    { code: 'KeyH', label: 'H' },\r\n    { code: 'KeyJ', label: 'J' },\r\n    { code: 'KeyK', label: 'K' },\r\n    { code: 'KeyL', label: 'L' },\r\n    { code: 'Semicolon', label: ';', subLabel: ':' },\r\n    { code: 'Quote', label: \"'\", subLabel: '\"' },\r\n    { code: 'Enter', label: 'Enter', width: 2.25 },\r\n  ],\r\n  [\r\n    { code: 'ShiftLeft', label: 'Shift', width: 2.25 },\r\n    { code: 'KeyZ', label: 'Z' },\r\n    { code: 'KeyX', label: 'X' },\r\n    { code: 'KeyC', label: 'C' },\r\n    { code: 'KeyV', label: 'V' },\r\n    { code: 'KeyB', label: 'B' },\r\n    { code: 'KeyN', label: 'N' },\r\n    { code: 'KeyM', label: 'M' },\r\n    { code: 'Comma', label: ',', subLabel: '<' },\r\n    { code: 'Period', label: '.', subLabel: '>' },\r\n    { code: 'Slash', label: '/', subLabel: '?' },\r\n    { code: 'ShiftRight', label: 'Shift', width: 2.75 },\r\n    { code: '_gap10', label: '', width: 1.25 },\r\n    { code: 'ArrowUp', label: '↑' },\r\n  ],\r\n  [\r\n    { code: 'ControlLeft', label: 'Ctrl', width: 1.25 },\r\n    { code: 'MetaLeft', label: 'Win', width: 1.25 },\r\n    { code: 'AltLeft', label: 'Alt', width: 1.25 },\r\n    { code: 'Space', label: '', width: 6.25 },\r\n    { code: 'AltRight', label: 'Alt', width: 1.25 },\r\n    { code: 'MetaRight', label: 'Win', width: 1.25 },\r\n    { code: 'ContextMenu', label: 'Menu', width: 1.25 },\r\n    { code: 'ControlRight', label: 'Ctrl', width: 1.25 },\r\n    { code: '_gap12', label: '', width: 0.25 },\r\n    { code: 'ArrowLeft', label: '←' },\r\n    { code: 'ArrowDown', label: '↓' },\r\n    { code: 'ArrowRight', label: '→' },\r\n  ],\r\n];\r\n\r\n// ─── 60% compact layout (no F-row, no nav, no numpad) ──────────────────────\r\nconst WIN_60_LAYOUT: KeyRow[] = [\r\n  [\r\n    { code: 'Backquote', label: '`', subLabel: '~' },\r\n    { code: 'Digit1', label: '1', subLabel: '!' },\r\n    { code: 'Digit2', label: '2', subLabel: '@' },\r\n    { code: 'Digit3', label: '3', subLabel: '#' },\r\n    { code: 'Digit4', label: '4', subLabel: '$' },\r\n    { code: 'Digit5', label: '5', subLabel: '%' },\r\n    { code: 'Digit6', label: '6', subLabel: '^' },\r\n    { code: 'Digit7', label: '7', subLabel: '&' },\r\n    { code: 'Digit8', label: '8', subLabel: '*' },\r\n    { code: 'Digit9', label: '9', subLabel: '(' },\r\n    { code: 'Digit0', label: '0', subLabel: ')' },\r\n    { code: 'Minus', label: '-', subLabel: '_' },\r\n    { code: 'Equal', label: '=', subLabel: '+' },\r\n    { code: 'Backspace', label: 'Backspace', width: 2 },\r\n  ],\r\n  [\r\n    { code: 'Tab', label: 'Tab', width: 1.5 },\r\n    { code: 'KeyQ', label: 'Q' },\r\n    { code: 'KeyW', label: 'W' },\r\n    { code: 'KeyE', label: 'E' },\r\n    { code: 'KeyR', label: 'R' },\r\n    { code: 'KeyT', label: 'T' },\r\n    { code: 'KeyY', label: 'Y' },\r\n    { code: 'KeyU', label: 'U' },\r\n    { code: 'KeyI', label: 'I' },\r\n    { code: 'KeyO', label: 'O' },\r\n    { code: 'KeyP', label: 'P' },\r\n    { code: 'BracketLeft', label: '[', subLabel: '{' },\r\n    { code: 'BracketRight', label: ']', subLabel: '}' },\r\n    { code: 'Backslash', label: '\\\\', subLabel: '|', width: 1.5 },\r\n  ],\r\n  [\r\n    { code: 'CapsLock', label: 'Caps', width: 1.75 },\r\n    { code: 'KeyA', label: 'A' },\r\n    { code: 'KeyS', label: 'S' },\r\n    { code: 'KeyD', label: 'D' },\r\n    { code: 'KeyF', label: 'F' },\r\n    { code: 'KeyG', label: 'G' },\r\n    { code: 'KeyH', label: 'H' },\r\n    { code: 'KeyJ', label: 'J' },\r\n    { code: 'KeyK', label: 'K' },\r\n    { code: 'KeyL', label: 'L' },\r\n    { code: 'Semicolon', label: ';', subLabel: ':' },\r\n    { code: 'Quote', label: \"'\", subLabel: '\"' },\r\n    { code: 'Enter', label: 'Enter', width: 2.25 },\r\n  ],\r\n  [\r\n    { code: 'ShiftLeft', label: 'Shift', width: 2.25 },\r\n    { code: 'KeyZ', label: 'Z' },\r\n    { code: 'KeyX', label: 'X' },\r\n    { code: 'KeyC', label: 'C' },\r\n    { code: 'KeyV', label: 'V' },\r\n    { code: 'KeyB', label: 'B' },\r\n    { code: 'KeyN', label: 'N' },\r\n    { code: 'KeyM', label: 'M' },\r\n    { code: 'Comma', label: ',', subLabel: '<' },\r\n    { code: 'Period', label: '.', subLabel: '>' },\r\n    { code: 'Slash', label: '/', subLabel: '?' },\r\n    { code: 'ShiftRight', label: 'Shift', width: 2.75 },\r\n  ],\r\n  [\r\n    { code: 'ControlLeft', label: 'Ctrl', width: 1.25 },\r\n    { code: 'MetaLeft', label: 'Win', width: 1.25 },\r\n    { code: 'AltLeft', label: 'Alt', width: 1.25 },\r\n    { code: 'Space', label: '', width: 6.25 },\r\n    { code: 'AltRight', label: 'Alt', width: 1.25 },\r\n    { code: 'MetaRight', label: 'Win', width: 1.25 },\r\n    { code: 'ContextMenu', label: 'Menu', width: 1.25 },\r\n    { code: 'ControlRight', label: 'Ctrl', width: 1.25 },\r\n  ],\r\n];\r\n\r\nconst MAC_60_LAYOUT: KeyRow[] = [\r\n  [\r\n    { code: 'Backquote', label: '`', subLabel: '~' },\r\n    { code: 'Digit1', label: '1', subLabel: '!' },\r\n    { code: 'Digit2', label: '2', subLabel: '@' },\r\n    { code: 'Digit3', label: '3', subLabel: '#' },\r\n    { code: 'Digit4', label: '4', subLabel: '$' },\r\n    { code: 'Digit5', label: '5', subLabel: '%' },\r\n    { code: 'Digit6', label: '6', subLabel: '^' },\r\n    { code: 'Digit7', label: '7', subLabel: '&' },\r\n    { code: 'Digit8', label: '8', subLabel: '*' },\r\n    { code: 'Digit9', label: '9', subLabel: '(' },\r\n    { code: 'Digit0', label: '0', subLabel: ')' },\r\n    { code: 'Minus', label: '-', subLabel: '_' },\r\n    { code: 'Equal', label: '=', subLabel: '+' },\r\n    { code: 'Backspace', label: 'Delete', width: 1.5 },\r\n  ],\r\n  [\r\n    { code: 'Tab', label: 'Tab', width: 1.5 },\r\n    { code: 'KeyQ', label: 'Q' },\r\n    { code: 'KeyW', label: 'W' },\r\n    { code: 'KeyE', label: 'E' },\r\n    { code: 'KeyR', label: 'R' },\r\n    { code: 'KeyT', label: 'T' },\r\n    { code: 'KeyY', label: 'Y' },\r\n    { code: 'KeyU', label: 'U' },\r\n    { code: 'KeyI', label: 'I' },\r\n    { code: 'KeyO', label: 'O' },\r\n    { code: 'KeyP', label: 'P' },\r\n    { code: 'BracketLeft', label: '[', subLabel: '{' },\r\n    { code: 'BracketRight', label: ']', subLabel: '}' },\r\n    { code: 'Backslash', label: '\\\\', subLabel: '|', width: 1.5 },\r\n  ],\r\n  [\r\n    { code: 'CapsLock', label: 'Caps', width: 1.75 },\r\n    { code: 'KeyA', label: 'A' },\r\n    { code: 'KeyS', label: 'S' },\r\n    { code: 'KeyD', label: 'D' },\r\n    { code: 'KeyF', label: 'F' },\r\n    { code: 'KeyG', label: 'G' },\r\n    { code: 'KeyH', label: 'H' },\r\n    { code: 'KeyJ', label: 'J' },\r\n    { code: 'KeyK', label: 'K' },\r\n    { code: 'KeyL', label: 'L' },\r\n    { code: 'Semicolon', label: ';', subLabel: ':' },\r\n    { code: 'Quote', label: \"'\", subLabel: '\"' },\r\n    { code: 'Enter', label: 'Return', width: 2.25 },\r\n  ],\r\n  [\r\n    { code: 'ShiftLeft', label: 'Shift', width: 2.25 },\r\n    { code: 'KeyZ', label: 'Z' },\r\n    { code: 'KeyX', label: 'X' },\r\n    { code: 'KeyC', label: 'C' },\r\n    { code: 'KeyV', label: 'V' },\r\n    { code: 'KeyB', label: 'B' },\r\n    { code: 'KeyN', label: 'N' },\r\n    { code: 'KeyM', label: 'M' },\r\n    { code: 'Comma', label: ',', subLabel: '<' },\r\n    { code: 'Period', label: '.', subLabel: '>' },\r\n    { code: 'Slash', label: '/', subLabel: '?' },\r\n    { code: 'ShiftRight', label: 'Shift', width: 2.75 },\r\n  ],\r\n  [\r\n    { code: 'Fn', label: 'Fn', width: 1 },\r\n    { code: 'ControlLeft', label: '⌃', width: 1.25 },\r\n    { code: 'AltLeft', label: '⌥', width: 1.25 },\r\n    { code: 'MetaLeft', label: '⌘', width: 1.5 },\r\n    { code: 'Space', label: '', width: 5 },\r\n    { code: 'MetaRight', label: '⌘', width: 1.5 },\r\n    { code: 'AltRight', label: '⌥', width: 1.25 },\r\n  ],\r\n];\r\n\r\nfunction getLayout(os: string | number, size: string | number): KeyRow[] {\r\n  if (os === 'Mac') {\r\n    return size === '60%' ? MAC_60_LAYOUT : MAC_DESKTOP_LAYOUT;\r\n  }\r\n  if (size === '60%') return WIN_60_LAYOUT;\r\n  if (size === '80%') return WIN_TKL_LAYOUT;\r\n  return WIN_DESKTOP_LAYOUT;\r\n}\r\n\r\n// Performance history\r\nconst PERF_HISTORY_SIZE = 60;\r\n\r\nconst KeyboardTest: React.FC = () => {\r\n  // Settings\r\n  const [layoutSize, setLayoutSize] = useState<string | number>('100%');\r\n  const [osType, setOsType] = useState<string | number>('Windows');\r\n  const [kbType, setKbType] = useState<string | number>('Desktop');\r\n  const [soundOn, setSoundOn] = useState(true);\r\n\r\n  // Key tracking\r\n  const [pressedKeys, setPressedKeys] = useState<Set<string>>(new Set());\r\n  const [activeKeys, setActiveKeys] = useState<Set<string>>(new Set());\r\n  const [totalPresses, setTotalPresses] = useState(0);\r\n  const [keyCounts, setKeyCounts] = useState<Record<string, number>>({});\r\n  const [lastKeyCode, setLastKeyCode] = useState<string>('-');\r\n  const [lastInterval, setLastInterval] = useState<string>('-');\r\n  const [typedText, setTypedText] = useState('');\r\n\r\n  // Performance\r\n  const [cps, setCps] = useState(0);\r\n  const [apm, setApm] = useState(0);\r\n  const [perfHistory, setPerfHistory] = useState<number[]>(new Array(PERF_HISTORY_SIZE).fill(0));\r\n  const pressTimestamps = useRef<number[]>([]);\r\n  const lastPressTime = useRef<number>(0);\r\n  const perfCanvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const audioCtxRef = useRef<AudioContext | null>(null);\r\n\r\n  // Sound effect\r\n  const playClickSound = useCallback(() => {\r\n    if (!soundOn) return;\r\n    try {\r\n      if (!audioCtxRef.current) {\r\n        audioCtxRef.current = new AudioContext();\r\n      }\r\n      const ctx = audioCtxRef.current;\r\n      const osc = ctx.createOscillator();\r\n      const gain = ctx.createGain();\r\n      osc.connect(gain);\r\n      gain.connect(ctx.destination);\r\n      osc.frequency.value = 800 + Math.random() * 400;\r\n      osc.type = 'sine';\r\n      gain.gain.setValueAtTime(0.03, ctx.currentTime);\r\n      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);\r\n      osc.start(ctx.currentTime);\r\n      osc.stop(ctx.currentTime + 0.05);\r\n    } catch {\r\n      // ignore\r\n    }\r\n  }, [soundOn]);\r\n\r\n  const handleKeyDown = useCallback(\r\n    (e: KeyboardEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const code = e.code;\r\n      const now = performance.now();\r\n\r\n      if (lastPressTime.current > 0) {\r\n        setLastInterval(`${(now - lastPressTime.current).toFixed(1)} ms`);\r\n      }\r\n      lastPressTime.current = now;\r\n      pressTimestamps.current.push(now);\r\n\r\n      setActiveKeys((prev) => new Set(prev).add(code));\r\n      setPressedKeys((prev) => new Set(prev).add(code));\r\n      setTotalPresses((c) => c + 1);\r\n      setKeyCounts((prev) => ({ ...prev, [code]: (prev[code] || 0) + 1 }));\r\n      setLastKeyCode(code);\r\n\r\n      // Append printable chars to typed text\r\n      if (e.key.length === 1) {\r\n        setTypedText((prev) => prev + e.key);\r\n      } else if (e.key === 'Backspace') {\r\n        setTypedText((prev) => prev.slice(0, -1));\r\n      } else if (e.key === 'Enter') {\r\n        setTypedText((prev) => prev + '\\n');\r\n      }\r\n\r\n      playClickSound();\r\n    },\r\n    [playClickSound],\r\n  );\r\n\r\n  const handleKeyUp = useCallback((e: KeyboardEvent) => {\r\n    e.preventDefault();\r\n    setActiveKeys((prev) => {\r\n      const next = new Set(prev);\r\n      next.delete(e.code);\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  // Attach listeners\r\n  useEffect(() => {\r\n    const el = containerRef.current;\r\n    if (!el) return;\r\n    el.addEventListener('keydown', handleKeyDown);\r\n    el.addEventListener('keyup', handleKeyUp);\r\n    return () => {\r\n      el.removeEventListener('keydown', handleKeyDown);\r\n      el.removeEventListener('keyup', handleKeyUp);\r\n    };\r\n  }, [handleKeyDown, handleKeyUp]);\r\n\r\n  useEffect(() => {\r\n    containerRef.current?.focus();\r\n  }, []);\r\n\r\n  // CPS / APM + perf history (every second)\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const now = performance.now();\r\n      const oneSecAgo = now - 1000;\r\n      const sixtySecAgo = now - 60000;\r\n      const recentPresses = pressTimestamps.current.filter((t) => t > oneSecAgo).length;\r\n      const minutePresses = pressTimestamps.current.filter((t) => t > sixtySecAgo).length;\r\n      setCps(recentPresses);\r\n      setApm(minutePresses);\r\n      setPerfHistory((prev) => [...prev.slice(1), recentPresses]);\r\n      pressTimestamps.current = pressTimestamps.current.filter((t) => t > sixtySecAgo);\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Draw performance chart\r\n  useEffect(() => {\r\n    const canvas = perfCanvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    const w = canvas.width;\r\n    const h = canvas.height;\r\n    const maxVal = Math.max(...perfHistory, 5);\r\n\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Grid lines\r\n    ctx.strokeStyle = '#eee';\r\n    ctx.lineWidth = 1;\r\n    for (let i = 0; i <= 4; i++) {\r\n      const y = (h / 4) * i;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, y);\r\n      ctx.lineTo(w, y);\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Bars\r\n    const barWidth = w / PERF_HISTORY_SIZE - 1;\r\n    perfHistory.forEach((val, i) => {\r\n      const barH = (val / maxVal) * (h - 4);\r\n      const x = i * (barWidth + 1);\r\n      const gradient = ctx.createLinearGradient(x, h - barH, x, h);\r\n      gradient.addColorStop(0, '#4096ff');\r\n      gradient.addColorStop(1, '#1677ff');\r\n      ctx.fillStyle = gradient;\r\n      ctx.fillRect(x, h - barH, barWidth, barH);\r\n    });\r\n  }, [perfHistory]);\r\n\r\n  const handleReset = () => {\r\n    setPressedKeys(new Set());\r\n    setActiveKeys(new Set());\r\n    setTotalPresses(0);\r\n    setKeyCounts({});\r\n    setLastKeyCode('-');\r\n    setLastInterval('-');\r\n    setTypedText('');\r\n    setCps(0);\r\n    setApm(0);\r\n    setPerfHistory(new Array(PERF_HISTORY_SIZE).fill(0));\r\n    pressTimestamps.current = [];\r\n    lastPressTime.current = 0;\r\n    containerRef.current?.focus();\r\n  };\r\n\r\n  const getKeyClass = (code: string) => {\r\n    if (activeKeys.has(code)) return 'kb-key kb-key--active';\r\n    if (pressedKeys.has(code)) return 'kb-key kb-key--pressed';\r\n    return 'kb-key';\r\n  };\r\n\r\n  const layout = useMemo(() => getLayout(osType, layoutSize), [osType, layoutSize]);\r\n  const layoutInfo = useMemo(() => computeKeyPositions(layout), [layout]);\r\n  const totalKeys = layout.flat().filter((k) => !k.code.startsWith('_gap')).length;\r\n\r\n  // Most pressed key\r\n  const mostPressed =\r\n    Object.keys(keyCounts).length > 0\r\n      ? Object.entries(keyCounts).reduce((a, b) => (b[1] > a[1] ? b : a))\r\n      : null;\r\n\r\n  // Estimated scan rate\r\n  const scanRate = lastInterval !== '-' ? `${Math.round(1000 / parseFloat(lastInterval))} Hz` : '-';\r\n\r\n  return (\r\n    <div className=\"keyboard-test\" ref={containerRef} tabIndex={0} style={{ outline: 'none' }}>\r\n      {/* ── Toolbar ─────────────────────────────────────────────── */}\r\n      <div className=\"kb-toolbar\">\r\n        <div className=\"kb-toolbar-group\">\r\n          <span className=\"kb-toolbar-label\">LAYOUT SIZE</span>\r\n          <Segmented\r\n            size=\"small\"\r\n            value={layoutSize}\r\n            onChange={setLayoutSize}\r\n            options={['100%', '80%', '60%']}\r\n          />\r\n        </div>\r\n        <div className=\"kb-toolbar-group\">\r\n          <span className=\"kb-toolbar-label\">OS</span>\r\n          <Segmented\r\n            size=\"small\"\r\n            value={osType}\r\n            onChange={setOsType}\r\n            options={['Windows', 'Mac']}\r\n          />\r\n        </div>\r\n        <div className=\"kb-toolbar-group\">\r\n          <span className=\"kb-toolbar-label\">TYPE</span>\r\n          <Segmented\r\n            size=\"small\"\r\n            value={kbType}\r\n            onChange={setKbType}\r\n            options={['Desktop', 'Laptop']}\r\n          />\r\n        </div>\r\n        <div className=\"kb-toolbar-group\">\r\n          <span className=\"kb-toolbar-label\">SOUND</span>\r\n          <Switch\r\n            checked={soundOn}\r\n            onChange={setSoundOn}\r\n            checkedChildren=\"On\"\r\n            unCheckedChildren=\"Off\"\r\n            size=\"small\"\r\n          />\r\n        </div>\r\n        <div className=\"kb-toolbar-group\">\r\n          <span className=\"kb-toolbar-label\">ACTION</span>\r\n          <button className=\"kb-reset-btn\" onClick={handleReset}>\r\n            Reset\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ── Input Area ──────────────────────────────────────────── */}\r\n      <div className=\"kb-input-area\">\r\n        <div className=\"kb-input-text\">\r\n          {typedText || <span className=\"kb-input-placeholder\">Start typing...</span>}\r\n          <span className=\"kb-input-cursor\" />\r\n        </div>\r\n        <Badge\r\n          count={`${pressedKeys.size} keys`}\r\n          showZero\r\n          style={{\r\n            backgroundColor: pressedKeys.size === totalKeys ? '#52c41a' : '#1677ff',\r\n            fontSize: 12,\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* ── Keyboard Layout ─────────────────────────────────────── */}\r\n      <div\r\n        className=\"kb-layout\"\r\n        style={{\r\n          width: layoutInfo.width + 36,\r\n          height: layoutInfo.height + 36,\r\n        }}\r\n      >\r\n        {layoutInfo.keys.map((rk) => {\r\n          const count = keyCounts[rk.code] || 0;\r\n          return (\r\n            <div\r\n              key={rk.code}\r\n              className={getKeyClass(rk.code)}\r\n              style={{\r\n                position: 'absolute',\r\n                left: rk.x + 18,\r\n                top: rk.y + 18,\r\n                width: rk.w,\r\n                height: rk.h,\r\n              }}\r\n              title={`${rk.code} (${count})`}\r\n            >\r\n              {rk.subLabel && <span className=\"kb-key-sub\">{rk.subLabel}</span>}\r\n              <span className=\"kb-key-label\">{rk.label}</span>\r\n              {count > 0 && <span className=\"kb-key-count\">{count}</span>}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* ── Bottom: Stats + Performance Monitor ─────────────────── */}\r\n      <Row gutter={16} style={{ marginTop: 16 }}>\r\n        <Col xs={24} md={12}>\r\n          <Card title=\"Stats\" size=\"small\" className=\"kb-stats-card\">\r\n            <Row gutter={[16, 16]}>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Active Keys</div>\r\n                  <div className=\"kb-stat-value kb-stat-value--blue\">{activeKeys.size}</div>\r\n                </div>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Total Presses</div>\r\n                  <div className=\"kb-stat-value\">{totalPresses}</div>\r\n                </div>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Most Pressed</div>\r\n                  <div className=\"kb-stat-value\">\r\n                    {mostPressed ? `${mostPressed[0]} (${mostPressed[1]})` : '-'}\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Last Key Code</div>\r\n                  <div className=\"kb-stat-value\">{lastKeyCode}</div>\r\n                </div>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Est. Scan Rate</div>\r\n                  <div className=\"kb-stat-value\">{scanRate}</div>\r\n                </div>\r\n              </Col>\r\n              <Col span={12}>\r\n                <div className=\"kb-stat-item\">\r\n                  <div className=\"kb-stat-label\">Last Interval</div>\r\n                  <div className=\"kb-stat-value\">{lastInterval}</div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n\r\n        <Col xs={24} md={12}>\r\n          <Card\r\n            title=\"Performance Monitor\"\r\n            size=\"small\"\r\n            className=\"kb-perf-card\"\r\n            extra={\r\n              <div className=\"kb-perf-badges\">\r\n                <Tooltip title=\"Characters Per Second — keys pressed in the last 1 second\">\r\n                  <div className=\"kb-perf-badge\">\r\n                    <span className=\"kb-perf-badge-label\">CPS</span>\r\n                    <span className=\"kb-perf-badge-value\">{cps}</span>\r\n                  </div>\r\n                </Tooltip>\r\n                <Tooltip title=\"Actions Per Minute — total key presses in the last 60 seconds\">\r\n                  <div className=\"kb-perf-badge\">\r\n                    <span className=\"kb-perf-badge-label\">APM</span>\r\n                    <span className=\"kb-perf-badge-value\">{apm}</span>\r\n                  </div>\r\n                </Tooltip>\r\n              </div>\r\n            }\r\n          >\r\n            <canvas ref={perfCanvasRef} width={600} height={120} className=\"kb-perf-canvas\" />\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KeyboardTest;\r\n","// This icon file is generated automatically.\nvar CameraOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z\" } }] }, \"name\": \"camera\", \"theme\": \"outlined\" };\nexport default CameraOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CameraOutlinedSvg from \"@ant-design/icons-svg/es/asn/CameraOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar CameraOutlined = function CameraOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: CameraOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(CameraOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'CameraOutlined';\n}\nexport default RefIcon;","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport {\r\n  Alert,\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Descriptions,\r\n  Progress,\r\n  Row,\r\n  Select,\r\n  Space,\r\n  Switch,\r\n  Tag,\r\n  Tooltip,\r\n  Typography,\r\n} from 'antd';\r\nimport {\r\n  CameraOutlined,\r\n  DownloadOutlined,\r\n  PlayCircleOutlined,\r\n  StopOutlined,\r\n  SwapOutlined,\r\n  VideoCameraOutlined,\r\n} from '@ant-design/icons';\r\nimport Highcharts from 'highcharts';\r\nimport HighchartsReact from 'highcharts-react-official';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\ninterface QualityMetrics {\r\n  brightness: number; // 0-255\r\n  contrast: number; // 0-100\r\n  saturation: number; // 0-100\r\n  sharpness: number; // 0-100\r\n  noise: number; // 0-100\r\n  colorTemp: number; // estimated Kelvin\r\n  rHistogram: number[];\r\n  gHistogram: number[];\r\n  bHistogram: number[];\r\n}\r\n\r\nconst QUALITY_HISTORY_LENGTH = 60;\r\n\r\nfunction rateMetric(value: number, low: number, high: number): { label: string; color: string } {\r\n  if (value < low) return { label: 'Low', color: '#ff4d4f' };\r\n  if (value > high) return { label: 'High', color: '#ff4d4f' };\r\n  return { label: 'Good', color: '#52c41a' };\r\n}\r\n\r\nfunction analyzeFrame(video: HTMLVideoElement, canvas: HTMLCanvasElement): QualityMetrics | null {\r\n  if (!video.videoWidth || !video.videoHeight) return null;\r\n\r\n  // Sample at reduced resolution for performance\r\n  const scale = 0.25;\r\n  const w = Math.floor(video.videoWidth * scale);\r\n  const h = Math.floor(video.videoHeight * scale);\r\n  canvas.width = w;\r\n  canvas.height = h;\r\n  const ctx = canvas.getContext('2d', { willReadFrequently: true });\r\n  if (!ctx) return null;\r\n\r\n  ctx.drawImage(video, 0, 0, w, h);\r\n  const imageData = ctx.getImageData(0, 0, w, h);\r\n  const data = imageData.data;\r\n  const pixelCount = w * h;\r\n\r\n  const rHist = new Array(256).fill(0);\r\n  const gHist = new Array(256).fill(0);\r\n  const bHist = new Array(256).fill(0);\r\n\r\n  let totalLum = 0;\r\n  let totalSat = 0;\r\n  let totalR = 0;\r\n  let totalG = 0;\r\n  let totalB = 0;\r\n\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    const r = data[i];\r\n    const g = data[i + 1];\r\n    const b = data[i + 2];\r\n\r\n    rHist[r]++;\r\n    gHist[g]++;\r\n    bHist[b]++;\r\n\r\n    const lum = 0.299 * r + 0.587 * g + 0.114 * b;\r\n    totalLum += lum;\r\n    totalR += r;\r\n    totalG += g;\r\n    totalB += b;\r\n\r\n    // Saturation via HSL\r\n    const max = Math.max(r, g, b);\r\n    const min = Math.min(r, g, b);\r\n    const l = (max + min) / 2;\r\n    const sat = max === min ? 0 : (max - min) / (l > 127.5 ? 510 - max - min : max + min);\r\n    totalSat += sat;\r\n  }\r\n\r\n  const brightness = totalLum / pixelCount;\r\n  const avgSat = (totalSat / pixelCount) * 100;\r\n  const avgR = totalR / pixelCount;\r\n  const avgG = totalG / pixelCount;\r\n  const avgB = totalB / pixelCount;\r\n\r\n  // Contrast: std deviation of luminance\r\n  let lumVariance = 0;\r\n  for (let i = 0; i < data.length; i += 4) {\r\n    const lum = 0.299 * data[i] + 0.587 * data[i + 1] + 0.114 * data[i + 2];\r\n    lumVariance += (lum - brightness) ** 2;\r\n  }\r\n  const contrast = Math.min(100, (Math.sqrt(lumVariance / pixelCount) / 128) * 100);\r\n\r\n  // Sharpness: Laplacian variance (sample every 2nd pixel for speed)\r\n  let laplacianSum = 0;\r\n  let laplacianCount = 0;\r\n  for (let y = 1; y < h - 1; y += 2) {\r\n    for (let x = 1; x < w - 1; x += 2) {\r\n      const idx = (y * w + x) * 4;\r\n      const center = 0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2];\r\n      const top =\r\n        0.299 * data[idx - w * 4] + 0.587 * data[idx - w * 4 + 1] + 0.114 * data[idx - w * 4 + 2];\r\n      const bottom =\r\n        0.299 * data[idx + w * 4] + 0.587 * data[idx + w * 4 + 1] + 0.114 * data[idx + w * 4 + 2];\r\n      const left = 0.299 * data[idx - 4] + 0.587 * data[idx - 3] + 0.114 * data[idx - 2];\r\n      const right = 0.299 * data[idx + 4] + 0.587 * data[idx + 5] + 0.114 * data[idx + 6];\r\n      const lap = Math.abs(top + bottom + left + right - 4 * center);\r\n      laplacianSum += lap;\r\n      laplacianCount++;\r\n    }\r\n  }\r\n  const sharpness = Math.min(100, (laplacianSum / laplacianCount / 50) * 100);\r\n\r\n  // Noise: local variance on small patches\r\n  let noiseSum = 0;\r\n  let noiseCount = 0;\r\n  const patchSize = 4;\r\n  for (let py = 0; py < h - patchSize; py += patchSize * 2) {\r\n    for (let px = 0; px < w - patchSize; px += patchSize * 2) {\r\n      let patchMean = 0;\r\n      const patchPixels: number[] = [];\r\n      for (let dy = 0; dy < patchSize; dy++) {\r\n        for (let dx = 0; dx < patchSize; dx++) {\r\n          const idx = ((py + dy) * w + (px + dx)) * 4;\r\n          const lum = 0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2];\r\n          patchPixels.push(lum);\r\n          patchMean += lum;\r\n        }\r\n      }\r\n      patchMean /= patchPixels.length;\r\n      let patchVar = 0;\r\n      for (const p of patchPixels) patchVar += (p - patchMean) ** 2;\r\n      noiseSum += patchVar / patchPixels.length;\r\n      noiseCount++;\r\n    }\r\n  }\r\n  const noise = Math.min(100, (Math.sqrt(noiseSum / noiseCount) / 30) * 100);\r\n\r\n  // Color temperature estimate (simple McCamy's approximation from RGB ratios)\r\n  const rRatio = avgR / (avgR + avgG + avgB);\r\n  const bRatio = avgB / (avgR + avgG + avgB);\r\n  const colorTemp = Math.round(6500 + (rRatio - bRatio) * 15000);\r\n\r\n  return {\r\n    brightness,\r\n    contrast,\r\n    saturation: avgSat,\r\n    sharpness,\r\n    noise,\r\n    colorTemp: Math.max(2000, Math.min(12000, colorTemp)),\r\n    rHistogram: rHist,\r\n    gHistogram: gHist,\r\n    bHistogram: bHist,\r\n  };\r\n}\r\n\r\nconst CameraTest: React.FC = () => {\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const analysisCanvasRef = useRef<HTMLCanvasElement>(null);\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const chunksRef = useRef<Blob[]>([]);\r\n\r\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\r\n  const [selectedDevice, setSelectedDevice] = useState<string>('');\r\n  const [stream, setStream] = useState<MediaStream | null>(null);\r\n  const [error, setError] = useState<string>('');\r\n  const [mirrored, setMirrored] = useState(true);\r\n  const [recording, setRecording] = useState(false);\r\n  const [recordedUrl, setRecordedUrl] = useState<string>('');\r\n  const [cameraInfo, setCameraInfo] = useState<Record<string, string>>({});\r\n  const [fps, setFps] = useState(0);\r\n  const [quality, setQuality] = useState<QualityMetrics | null>(null);\r\n  const [qualityHistory, setQualityHistory] = useState<{\r\n    brightness: number[];\r\n    contrast: number[];\r\n    sharpness: number[];\r\n    noise: number[];\r\n    fps: number[];\r\n  }>({ brightness: [], contrast: [], sharpness: [], noise: [], fps: [] });\r\n  const fpsFrameCount = useRef(0);\r\n  const fpsLastTime = useRef(performance.now());\r\n  const animRef = useRef<number>(0);\r\n  const analysisIntervalRef = useRef<ReturnType<typeof setInterval>>(0 as any);\r\n\r\n  // Enumerate video devices\r\n  const enumerateDevices = useCallback(async () => {\r\n    try {\r\n      const allDevices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = allDevices.filter((d) => d.kind === 'videoinput');\r\n      setDevices(videoDevices);\r\n      if (videoDevices.length > 0 && !selectedDevice) {\r\n        setSelectedDevice(videoDevices[0].deviceId);\r\n      }\r\n    } catch {\r\n      setError('Unable to enumerate devices');\r\n    }\r\n  }, [selectedDevice]);\r\n\r\n  // Start camera\r\n  const startCamera = useCallback(\r\n    async (deviceId?: string) => {\r\n      try {\r\n        if (stream) {\r\n          stream.getTracks().forEach((t) => t.stop());\r\n        }\r\n        setError('');\r\n        const constraints: MediaStreamConstraints = {\r\n          video: {\r\n            deviceId: deviceId ? { exact: deviceId } : undefined,\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1080 },\r\n          },\r\n        };\r\n        const newStream = await navigator.mediaDevices.getUserMedia(constraints);\r\n        setStream(newStream);\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = newStream;\r\n        }\r\n        // Extract camera info\r\n        const track = newStream.getVideoTracks()[0];\r\n        const settings = track.getSettings();\r\n        const capabilities = track.getCapabilities?.() as any;\r\n        setCameraInfo({\r\n          Label: track.label,\r\n          Resolution: `${settings.width} × ${settings.height}`,\r\n          'Frame Rate': `${settings.frameRate} fps`,\r\n          'Facing Mode': settings.facingMode || 'N/A',\r\n          'Aspect Ratio': settings.aspectRatio?.toFixed(2) || 'N/A',\r\n          'Max Resolution': capabilities\r\n            ? `${capabilities.width?.max} × ${capabilities.height?.max}`\r\n            : 'N/A',\r\n        });\r\n      } catch (err: any) {\r\n        setError(err.message || 'Camera access denied');\r\n      }\r\n    },\r\n    [stream],\r\n  );\r\n\r\n  // FPS counter\r\n  useEffect(() => {\r\n    if (!stream || !videoRef.current) return;\r\n    const video = videoRef.current;\r\n    const countFps = () => {\r\n      fpsFrameCount.current++;\r\n      const now = performance.now();\r\n      if (now - fpsLastTime.current >= 1000) {\r\n        setFps(fpsFrameCount.current);\r\n        fpsFrameCount.current = 0;\r\n        fpsLastTime.current = now;\r\n      }\r\n      animRef.current = requestAnimationFrame(countFps);\r\n    };\r\n    video.onplay = () => {\r\n      animRef.current = requestAnimationFrame(countFps);\r\n    };\r\n    return () => cancelAnimationFrame(animRef.current);\r\n  }, [stream]);\r\n\r\n  // Frame quality analysis (every 500ms to avoid perf issues)\r\n  useEffect(() => {\r\n    if (!stream || !videoRef.current) {\r\n      setQuality(null);\r\n      return;\r\n    }\r\n    const video = videoRef.current;\r\n    const canvas = analysisCanvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    analysisIntervalRef.current = setInterval(() => {\r\n      if (video.readyState < 2) return;\r\n      const metrics = analyzeFrame(video, canvas);\r\n      if (metrics) {\r\n        setQuality(metrics);\r\n        setQualityHistory((prev) => {\r\n          const push = (arr: number[], val: number) => {\r\n            const next = [...arr, val];\r\n            return next.length > QUALITY_HISTORY_LENGTH\r\n              ? next.slice(-QUALITY_HISTORY_LENGTH)\r\n              : next;\r\n          };\r\n          return {\r\n            brightness: push(prev.brightness, metrics.brightness),\r\n            contrast: push(prev.contrast, metrics.contrast),\r\n            sharpness: push(prev.sharpness, metrics.sharpness),\r\n            noise: push(prev.noise, metrics.noise),\r\n            fps: push(prev.fps, fps),\r\n          };\r\n        });\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearInterval(analysisIntervalRef.current);\r\n  }, [stream, fps]);\r\n\r\n  // Auto-start\r\n  useEffect(() => {\r\n    enumerateDevices();\r\n  }, []);\r\n\r\n  // Stop camera on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      stream?.getTracks().forEach((t) => t.stop());\r\n      cancelAnimationFrame(animRef.current);\r\n      clearInterval(analysisIntervalRef.current);\r\n    };\r\n  }, [stream]);\r\n\r\n  // ── Highcharts options ──────────────────────────────────\r\n  const histogramOptions = useMemo<Highcharts.Options>(() => {\r\n    if (!quality) return {};\r\n    return {\r\n      chart: { height: 180, spacing: [5, 5, 5, 5], backgroundColor: 'transparent' },\r\n      title: { text: '' },\r\n      xAxis: {\r\n        labels: { enabled: false },\r\n        title: { text: '' },\r\n        gridLineWidth: 0,\r\n      },\r\n      yAxis: {\r\n        labels: { enabled: false },\r\n        title: { text: '' },\r\n        gridLineWidth: 0,\r\n      },\r\n      legend: { enabled: false },\r\n      credits: { enabled: false },\r\n      tooltip: { enabled: false },\r\n      plotOptions: {\r\n        areaspline: {\r\n          fillOpacity: 0.25,\r\n          lineWidth: 1.5,\r\n          marker: { enabled: false },\r\n          animation: false,\r\n        },\r\n      },\r\n      series: [\r\n        { type: 'areaspline', name: 'Red', data: quality.rHistogram, color: '#ff4d4f' },\r\n        { type: 'areaspline', name: 'Green', data: quality.gHistogram, color: '#52c41a' },\r\n        { type: 'areaspline', name: 'Blue', data: quality.bHistogram, color: '#1677ff' },\r\n      ],\r\n    };\r\n  }, [quality]);\r\n\r\n  const timeSeriesOptions = useMemo<Highcharts.Options>(() => {\r\n    return {\r\n      chart: { height: 200, spacing: [10, 10, 10, 10], backgroundColor: 'transparent' },\r\n      title: { text: '' },\r\n      xAxis: {\r\n        labels: { enabled: false },\r\n        title: { text: '' },\r\n        gridLineWidth: 0,\r\n        tickWidth: 0,\r\n      },\r\n      yAxis: {\r\n        min: 0,\r\n        max: 100,\r\n        title: { text: '' },\r\n        gridLineColor: 'rgba(128,128,128,0.15)',\r\n        labels: { style: { fontSize: '10px' } },\r\n      },\r\n      legend: {\r\n        align: 'center',\r\n        verticalAlign: 'bottom',\r\n        itemStyle: { fontSize: '11px' },\r\n      },\r\n      credits: { enabled: false },\r\n      tooltip: {\r\n        shared: true,\r\n        valueSuffix: '',\r\n        headerFormat: '',\r\n      },\r\n      plotOptions: {\r\n        spline: {\r\n          lineWidth: 2,\r\n          marker: { enabled: false },\r\n          animation: false,\r\n        },\r\n      },\r\n      series: [\r\n        {\r\n          type: 'spline',\r\n          name: 'Brightness',\r\n          data: qualityHistory.brightness.map((v) => Math.round((v / 255) * 100)),\r\n          color: '#faad14',\r\n        },\r\n        {\r\n          type: 'spline',\r\n          name: 'Contrast',\r\n          data: qualityHistory.contrast.map(Math.round),\r\n          color: '#1677ff',\r\n        },\r\n        {\r\n          type: 'spline',\r\n          name: 'Sharpness',\r\n          data: qualityHistory.sharpness.map(Math.round),\r\n          color: '#52c41a',\r\n        },\r\n        {\r\n          type: 'spline',\r\n          name: 'Noise',\r\n          data: qualityHistory.noise.map(Math.round),\r\n          color: '#ff4d4f',\r\n        },\r\n      ],\r\n    };\r\n  }, [qualityHistory]);\r\n\r\n  const fpsChartOptions = useMemo<Highcharts.Options>(() => {\r\n    return {\r\n      chart: { height: 140, spacing: [10, 10, 5, 10], backgroundColor: 'transparent' },\r\n      title: { text: '' },\r\n      xAxis: {\r\n        labels: { enabled: false },\r\n        title: { text: '' },\r\n        gridLineWidth: 0,\r\n        tickWidth: 0,\r\n      },\r\n      yAxis: {\r\n        min: 0,\r\n        title: { text: '' },\r\n        gridLineColor: 'rgba(128,128,128,0.15)',\r\n        labels: { style: { fontSize: '10px' } },\r\n      },\r\n      legend: { enabled: false },\r\n      credits: { enabled: false },\r\n      tooltip: { valueSuffix: ' fps', headerFormat: '' },\r\n      plotOptions: {\r\n        area: {\r\n          fillOpacity: 0.15,\r\n          lineWidth: 2,\r\n          marker: { enabled: false },\r\n          animation: false,\r\n        },\r\n      },\r\n      series: [{ type: 'area', name: 'FPS', data: qualityHistory.fps, color: '#722ed1' }],\r\n    };\r\n  }, [qualityHistory.fps]);\r\n\r\n  const takeSnapshot = () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    const ctx = canvas.getContext('2d')!;\r\n    if (mirrored) {\r\n      ctx.translate(canvas.width, 0);\r\n      ctx.scale(-1, 1);\r\n    }\r\n    ctx.drawImage(video, 0, 0);\r\n    const link = document.createElement('a');\r\n    link.download = `camera-snapshot-${Date.now()}.png`;\r\n    link.href = canvas.toDataURL('image/png');\r\n    link.click();\r\n  };\r\n\r\n  const toggleRecording = () => {\r\n    if (recording) {\r\n      mediaRecorderRef.current?.stop();\r\n      setRecording(false);\r\n      return;\r\n    }\r\n    if (!stream) return;\r\n    chunksRef.current = [];\r\n    const mr = new MediaRecorder(stream, { mimeType: 'video/webm' });\r\n    mr.ondataavailable = (e) => {\r\n      if (e.data.size > 0) chunksRef.current.push(e.data);\r\n    };\r\n    mr.onstop = () => {\r\n      const blob = new Blob(chunksRef.current, { type: 'video/webm' });\r\n      setRecordedUrl(URL.createObjectURL(blob));\r\n    };\r\n    mr.start();\r\n    mediaRecorderRef.current = mr;\r\n    setRecording(true);\r\n  };\r\n\r\n  const downloadRecording = () => {\r\n    if (!recordedUrl) return;\r\n    const a = document.createElement('a');\r\n    a.href = recordedUrl;\r\n    a.download = `camera-recording-${Date.now()}.webm`;\r\n    a.click();\r\n  };\r\n\r\n  const handleDeviceChange = (deviceId: string) => {\r\n    setSelectedDevice(deviceId);\r\n    startCamera(deviceId);\r\n  };\r\n\r\n  return (\r\n    <div className=\"camera-test\">\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} lg={16}>\r\n          <Card\r\n            title={\r\n              <Space>\r\n                <VideoCameraOutlined />\r\n                Camera Preview\r\n                {stream && <Tag color=\"green\">{fps} FPS</Tag>}\r\n              </Space>\r\n            }\r\n            extra={\r\n              <Space>\r\n                <Switch\r\n                  checkedChildren=\"Mirror\"\r\n                  unCheckedChildren=\"Normal\"\r\n                  checked={mirrored}\r\n                  onChange={setMirrored}\r\n                />\r\n              </Space>\r\n            }\r\n          >\r\n            {error && <Alert message={error} type=\"error\" showIcon style={{ marginBottom: 16 }} />}\r\n\r\n            <div className=\"camera-preview-wrapper\">\r\n              <video\r\n                ref={videoRef}\r\n                autoPlay\r\n                playsInline\r\n                muted\r\n                className=\"camera-video\"\r\n                style={{ transform: mirrored ? 'scaleX(-1)' : 'none' }}\r\n              />\r\n              {!stream && !error && (\r\n                <div className=\"camera-placeholder\">\r\n                  <VideoCameraOutlined style={{ fontSize: 64, opacity: 0.3 }} />\r\n                  <Text type=\"secondary\" style={{ marginTop: 16 }}>\r\n                    Click &quot;Start Camera&quot; to begin testing\r\n                  </Text>\r\n                </div>\r\n              )}\r\n              {recording && <div className=\"recording-indicator\">● REC</div>}\r\n            </div>\r\n\r\n            <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n            <canvas ref={analysisCanvasRef} style={{ display: 'none' }} />\r\n\r\n            <div style={{ marginTop: 16 }}>\r\n              <Space wrap>\r\n                <Select\r\n                  style={{ width: 300 }}\r\n                  placeholder=\"Select camera\"\r\n                  value={selectedDevice || undefined}\r\n                  onChange={handleDeviceChange}\r\n                  options={devices.map((d) => ({\r\n                    label: d.label || `Camera ${d.deviceId.slice(0, 8)}`,\r\n                    value: d.deviceId,\r\n                  }))}\r\n                />\r\n                {!stream ? (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    icon={<PlayCircleOutlined />}\r\n                    onClick={() => startCamera(selectedDevice)}\r\n                  >\r\n                    Start Camera\r\n                  </Button>\r\n                ) : (\r\n                  <Button\r\n                    danger\r\n                    icon={<StopOutlined />}\r\n                    onClick={() => {\r\n                      stream.getTracks().forEach((t) => t.stop());\r\n                      setStream(null);\r\n                      setCameraInfo({});\r\n                    }}\r\n                  >\r\n                    Stop Camera\r\n                  </Button>\r\n                )}\r\n                <Button icon={<CameraOutlined />} onClick={takeSnapshot} disabled={!stream}>\r\n                  Snapshot\r\n                </Button>\r\n                <Button\r\n                  icon={recording ? <StopOutlined /> : <VideoCameraOutlined />}\r\n                  onClick={toggleRecording}\r\n                  disabled={!stream}\r\n                  danger={recording}\r\n                >\r\n                  {recording ? 'Stop Recording' : 'Record'}\r\n                </Button>\r\n                {recordedUrl && (\r\n                  <Button icon={<DownloadOutlined />} onClick={downloadRecording}>\r\n                    Download Recording\r\n                  </Button>\r\n                )}\r\n              </Space>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n\r\n        <Col xs={24} lg={8}>\r\n          <Space direction=\"vertical\" style={{ width: '100%' }} size={16}>\r\n            <Card title=\"Camera Information\" size=\"small\">\r\n              {Object.keys(cameraInfo).length > 0 ? (\r\n                <Descriptions column={1} size=\"small\" bordered>\r\n                  {Object.entries(cameraInfo).map(([key, val]) => (\r\n                    <Descriptions.Item label={key} key={key}>\r\n                      {val}\r\n                    </Descriptions.Item>\r\n                  ))}\r\n                </Descriptions>\r\n              ) : (\r\n                <Text type=\"secondary\">Start camera to see device information</Text>\r\n              )}\r\n            </Card>\r\n\r\n            {quality && (\r\n              <Card title=\"Image Quality\" size=\"small\">\r\n                <div className=\"camera-quality-metrics\">\r\n                  {[\r\n                    {\r\n                      label: 'Brightness',\r\n                      value: quality.brightness,\r\n                      max: 255,\r\n                      percent: Math.round((quality.brightness / 255) * 100),\r\n                      rating: rateMetric(quality.brightness, 60, 200),\r\n                      tooltip:\r\n                        'Average luminance of the frame. Too dark (<60) or too bright (>200) is flagged.',\r\n                      color: '#faad14',\r\n                    },\r\n                    {\r\n                      label: 'Contrast',\r\n                      value: quality.contrast,\r\n                      max: 100,\r\n                      percent: Math.round(quality.contrast),\r\n                      rating: rateMetric(quality.contrast, 15, 90),\r\n                      tooltip: 'Standard deviation of luminance. Low means flat/washed out image.',\r\n                      color: '#1677ff',\r\n                    },\r\n                    {\r\n                      label: 'Saturation',\r\n                      value: quality.saturation,\r\n                      max: 100,\r\n                      percent: Math.round(quality.saturation),\r\n                      rating: rateMetric(quality.saturation, 10, 85),\r\n                      tooltip: 'Average color saturation. Low means desaturated/gray image.',\r\n                      color: '#eb2f96',\r\n                    },\r\n                    {\r\n                      label: 'Sharpness',\r\n                      value: quality.sharpness,\r\n                      max: 100,\r\n                      percent: Math.round(quality.sharpness),\r\n                      rating: rateMetric(quality.sharpness, 10, 101),\r\n                      tooltip: 'Edge detection via Laplacian. Low means blurry image.',\r\n                      color: '#52c41a',\r\n                    },\r\n                    {\r\n                      label: 'Noise',\r\n                      value: quality.noise,\r\n                      max: 100,\r\n                      percent: Math.round(quality.noise),\r\n                      rating: rateMetric(100 - quality.noise, 30, 101),\r\n                      tooltip: 'Local variance estimation. High means noisy/grainy image.',\r\n                      color: '#ff4d4f',\r\n                    },\r\n                  ].map((m) => (\r\n                    <div key={m.label} className=\"camera-metric-row\">\r\n                      <div className=\"camera-metric-header\">\r\n                        <Tooltip title={m.tooltip}>\r\n                          <Text strong style={{ fontSize: 12 }}>\r\n                            {m.label}\r\n                          </Text>\r\n                        </Tooltip>\r\n                        <Space size={4}>\r\n                          <Tag\r\n                            color={m.rating.color === '#52c41a' ? 'success' : 'error'}\r\n                            style={{ margin: 0, fontSize: 10 }}\r\n                          >\r\n                            {m.rating.label}\r\n                          </Tag>\r\n                          <Text code style={{ fontSize: 11 }}>\r\n                            {m.percent}%\r\n                          </Text>\r\n                        </Space>\r\n                      </div>\r\n                      <Progress\r\n                        percent={m.percent}\r\n                        showInfo={false}\r\n                        strokeColor={m.color}\r\n                        size=\"small\"\r\n                      />\r\n                    </div>\r\n                  ))}\r\n\r\n                  <div className=\"camera-metric-row\" style={{ marginTop: 8 }}>\r\n                    <div className=\"camera-metric-header\">\r\n                      <Tooltip title=\"Estimated correlated color temperature based on RGB ratios\">\r\n                        <Text strong style={{ fontSize: 12 }}>\r\n                          Color Temp\r\n                        </Text>\r\n                      </Tooltip>\r\n                      <Text code style={{ fontSize: 11 }}>\r\n                        ~{quality.colorTemp}K\r\n                      </Text>\r\n                    </div>\r\n                    <div className=\"camera-color-temp-bar\">\r\n                      <div\r\n                        className=\"camera-color-temp-indicator\"\r\n                        style={{\r\n                          left: `${((quality.colorTemp - 2000) / 10000) * 100}%`,\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    <div className=\"camera-color-temp-labels\">\r\n                      <Text type=\"secondary\" style={{ fontSize: 10 }}>\r\n                        Warm 2000K\r\n                      </Text>\r\n                      <Text type=\"secondary\" style={{ fontSize: 10 }}>\r\n                        Cool 12000K\r\n                      </Text>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )}\r\n          </Space>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* ── Charts row ────────────────────────────────────── */}\r\n      {stream && quality && (\r\n        <Row gutter={[16, 16]} style={{ marginTop: 16 }}>\r\n          <Col xs={24} md={12}>\r\n            <Card title=\"RGB Histogram\" size=\"small\">\r\n              <HighchartsReact highcharts={Highcharts} options={histogramOptions} />\r\n            </Card>\r\n          </Col>\r\n          <Col xs={24} md={12}>\r\n            <Card title=\"Quality Over Time\" size=\"small\">\r\n              <HighchartsReact highcharts={Highcharts} options={timeSeriesOptions} />\r\n            </Card>\r\n          </Col>\r\n          <Col xs={24} md={12}>\r\n            <Card title=\"FPS Over Time\" size=\"small\">\r\n              <HighchartsReact highcharts={Highcharts} options={fpsChartOptions} />\r\n            </Card>\r\n          </Col>\r\n          <Col xs={24} md={12}>\r\n            <Card title=\"Quality Summary\" size=\"small\">\r\n              <Descriptions column={{ xs: 1, sm: 2 }} size=\"small\" bordered>\r\n                <Descriptions.Item label=\"Overall\">\r\n                  {(() => {\r\n                    const score = Math.round(\r\n                      (quality.brightness > 60 && quality.brightness < 200 ? 25 : 5) +\r\n                        (quality.contrast > 15 ? 25 : 10) +\r\n                        (quality.sharpness > 10 ? 25 : 10) +\r\n                        (quality.noise < 50 ? 25 : 5),\r\n                    );\r\n                    return (\r\n                      <Tag color={score >= 80 ? 'success' : score >= 50 ? 'warning' : 'error'}>\r\n                        {score >= 80 ? 'Excellent' : score >= 50 ? 'Acceptable' : 'Poor'} ({score}\r\n                        /100)\r\n                      </Tag>\r\n                    );\r\n                  })()}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Brightness\">\r\n                  {quality.brightness < 60\r\n                    ? '⚠️ Too dark – improve lighting'\r\n                    : quality.brightness > 200\r\n                      ? '⚠️ Overexposed – reduce light'\r\n                      : '✅ Good exposure'}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Focus\">\r\n                  {quality.sharpness < 10\r\n                    ? '⚠️ Blurry – check focus'\r\n                    : quality.sharpness < 30\r\n                      ? '⚠️ Slightly soft'\r\n                      : '✅ Sharp'}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Noise\">\r\n                  {quality.noise > 60\r\n                    ? '⚠️ Very noisy – improve lighting'\r\n                    : quality.noise > 30\r\n                      ? '⚠️ Some noise detected'\r\n                      : '✅ Clean image'}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Color\">\r\n                  {quality.saturation < 10\r\n                    ? '⚠️ Very desaturated'\r\n                    : quality.saturation > 85\r\n                      ? '⚠️ Oversaturated'\r\n                      : '✅ Good color'}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Temperature\">\r\n                  {quality.colorTemp < 3500\r\n                    ? '🔶 Very warm (indoor/tungsten)'\r\n                    : quality.colorTemp > 7500\r\n                      ? '🔷 Very cool (shade/overcast)'\r\n                      : '✅ Neutral'}\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraTest;\r\n","// This icon file is generated automatically.\nvar AudioOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z\" } }] }, \"name\": \"audio\", \"theme\": \"outlined\" };\nexport default AudioOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport AudioOutlinedSvg from \"@ant-design/icons-svg/es/asn/AudioOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar AudioOutlined = function AudioOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: AudioOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(AudioOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'AudioOutlined';\n}\nexport default RefIcon;","import React, { useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Alert,\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Descriptions,\r\n  Progress,\r\n  Row,\r\n  Select,\r\n  Slider,\r\n  Space,\r\n  Tag,\r\n  Typography,\r\n} from 'antd';\r\nimport {\r\n  AudioOutlined,\r\n  DownloadOutlined,\r\n  PlayCircleOutlined,\r\n  StopOutlined,\r\n} from '@ant-design/icons';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst MicrophoneTest: React.FC = () => {\r\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\r\n  const [selectedDevice, setSelectedDevice] = useState<string>('');\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n  const [volume, setVolume] = useState(0);\r\n  const [peakVolume, setPeakVolume] = useState(0);\r\n  const [recording, setRecording] = useState(false);\r\n  const [recordedUrl, setRecordedUrl] = useState<string>('');\r\n  const [micInfo, setMicInfo] = useState<Record<string, string>>({});\r\n  const [sensitivity, setSensitivity] = useState(1);\r\n\r\n  // ── Refs for all audio objects ────────────────────────────────────────────\r\n  // We use refs (not state) for the audio pipeline objects so the rAF draw loop\r\n  // always reads the latest values without stale-closure issues.\r\n  // If these were state, every setState call inside the loop would re-render the\r\n  // component and potentially restart the loop or capture outdated values.\r\n  const streamRef = useRef<MediaStream | null>(null); // raw microphone stream\r\n  const analyserRef = useRef<AnalyserNode | null>(null); // Web Audio analyser node\r\n  const audioCtxRef = useRef<AudioContext | null>(null); // Web Audio context\r\n  const animRef = useRef<number>(0); // rAF handle for cancellation\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null); // for audio recording\r\n  const chunksRef = useRef<Blob[]>([]); // recorded audio chunks\r\n  const canvasRef = useRef<HTMLCanvasElement>(null); // visualizer canvas element\r\n  // sensitivityRef mirrors the sensitivity slider value so the rAF loop can\r\n  // read the latest value every frame without being recreated on each change.\r\n  const sensitivityRef = useRef(sensitivity);\r\n  // peakRef holds the highest volume seen in the current session so we never\r\n  // need to read React state (which could be stale) inside the loop.\r\n  const peakRef = useRef(0);\r\n\r\n  // Sync sensitivityRef whenever the slider changes — O(1), no loop restart needed\r\n  useEffect(() => {\r\n    sensitivityRef.current = sensitivity;\r\n  }, [sensitivity]);\r\n\r\n  // ── Draw loop ─────────────────────────────────────────────────────────────\r\n  // This effect starts the requestAnimationFrame loop when the mic becomes active\r\n  // and cleans it up when the mic is stopped (isActive → false).\r\n  //\r\n  // Why trigger via `isActive` state instead of calling directly in startMic?\r\n  // Because startMic is an async function. When it sets analyserRef.current and\r\n  // then immediately calls drawWaveform(), React hasn't re-rendered yet and the\r\n  // canvas might not have been updated in the DOM. By setting isActive=true and\r\n  // letting this effect run, we guarantee all refs are set and the canvas is\r\n  // mounted before we start drawing.\r\n  useEffect(() => {\r\n    if (!isActive) return;\r\n\r\n    const analyser = analyserRef.current;\r\n    const canvas = canvasRef.current;\r\n    if (!analyser || !canvas) return;\r\n\r\n    const ctx = canvas.getContext('2d')!;\r\n\r\n    // fftSize = 2048 means we get 2048 time-domain samples per frame.\r\n    // frequencyBinCount = fftSize / 2 = 1024 frequency bins.\r\n    const bufferLength = analyser.fftSize;\r\n    // dataArray: time-domain — raw audio samples, each value 0-255 (128 = silence)\r\n    const dataArray = new Uint8Array(bufferLength);\r\n    // freqArray: frequency-domain — energy per frequency bin, 0-255 (255 = loudest)\r\n    const freqArray = new Uint8Array(analyser.frequencyBinCount);\r\n\r\n    const draw = () => {\r\n      // Schedule next frame first so we keep ~60fps even if the rest of the\r\n      // function takes a variable amount of time.\r\n      animRef.current = requestAnimationFrame(draw);\r\n\r\n      // Pull fresh audio data into our pre-allocated arrays each frame.\r\n      // These are in-place fills — no allocation happens here.\r\n      analyser.getByteTimeDomainData(dataArray); // waveform shape\r\n      analyser.getByteFrequencyData(freqArray); // spectrum bars\r\n\r\n      // ── Volume (RMS) ──────────────────────────────────────────────────\r\n      // Root Mean Square gives a perceptual loudness value:\r\n      //   1. Normalize each sample from 0-255 to -1..+1  (128 = 0)\r\n      //   2. Square it  (makes negatives positive, emphasises peaks)\r\n      //   3. Average, then sqrt  → RMS in range 0..1\r\n      //   4. Scale to 0-100 and apply sensitivity multiplier\r\n      let sum = 0;\r\n      for (let i = 0; i < bufferLength; i++) {\r\n        const v = (dataArray[i] - 128) / 128; // center around 0\r\n        sum += v * v;\r\n      }\r\n      const rms = Math.sqrt(sum / bufferLength);\r\n      const vol = Math.min(100, Math.round(rms * 200 * sensitivityRef.current));\r\n      setVolume(vol);\r\n      // Only update peak when a new maximum is reached — never goes down until reset\r\n      if (vol > peakRef.current) {\r\n        peakRef.current = vol;\r\n        setPeakVolume(vol);\r\n      }\r\n\r\n      // ── Canvas rendering ──────────────────────────────────────────────\r\n      const W = canvas.width; // intrinsic pixel width (800)\r\n      const H = canvas.height; // intrinsic pixel height (200)\r\n\r\n      // Clear with dark background each frame\r\n      ctx.fillStyle = '#141414';\r\n      ctx.fillRect(0, 0, W, H);\r\n\r\n      // ── Layer 1: Frequency bars (drawn first, behind the waveform) ────\r\n      // Each bar represents one frequency bin (0 = bass, 1023 = treble).\r\n      // Height = how loud that frequency is. Color shifts blue→cyan→green\r\n      // as frequency increases (hue 0→240 = blue range of HSL color wheel).\r\n      const barW = Math.ceil((W / analyser.frequencyBinCount) * 2.5);\r\n      let x = 0;\r\n      for (let i = 0; i < analyser.frequencyBinCount; i++) {\r\n        const barH = (freqArray[i] / 255) * H * 0.85; // scale bar height to canvas\r\n        const hue = (i / analyser.frequencyBinCount) * 240; // low freq = blue, high = green\r\n        ctx.fillStyle = `hsl(${hue}, 90%, 55%)`;\r\n        ctx.fillRect(x, H - barH, barW, barH); // draw upward from the bottom\r\n        x += barW + 1;\r\n        if (x > W) break; // stop once we've filled the canvas width\r\n      }\r\n\r\n      // ── Layer 2: Waveform line (drawn on top of bars) ─────────────────\r\n      // Each sample in dataArray maps to one X pixel slice.\r\n      // Value 128/255 ≈ 0.5 → middle of canvas (silence = flat center line).\r\n      // Values above 128 → above center; below 128 → below center.\r\n      ctx.lineWidth = 2;\r\n      ctx.strokeStyle = 'rgba(255,255,255,0.85)'; // white semi-transparent\r\n      ctx.beginPath();\r\n      const sliceW = W / bufferLength; // pixels per sample\r\n      let wx = 0;\r\n      for (let i = 0; i < bufferLength; i++) {\r\n        const y = (dataArray[i] / 255) * H; // map 0-255 → 0-canvas height\r\n        i === 0 ? ctx.moveTo(wx, y) : ctx.lineTo(wx, y);\r\n        wx += sliceW;\r\n      }\r\n      ctx.stroke();\r\n    };\r\n\r\n    draw(); // kick off the loop\r\n\r\n    // Cleanup: when isActive becomes false (mic stopped), cancel the loop\r\n    return () => {\r\n      cancelAnimationFrame(animRef.current);\r\n    };\r\n  }, [isActive]);\r\n\r\n  // ── Device enumeration ────────────────────────────────────────────────────\r\n  // Called once on mount. enumerateDevices() lists all media input/output devices.\r\n  // We filter for 'audioinput' (microphones only) and pre-select the first one.\r\n  // Note: device labels are empty strings until the user has granted mic permission\r\n  // at least once — that's why we show deviceId as a fallback label.\r\n  useEffect(() => {\r\n    const enumerate = async () => {\r\n      try {\r\n        const all = await navigator.mediaDevices.enumerateDevices();\r\n        const audio = all.filter((d) => d.kind === 'audioinput');\r\n        setDevices(audio);\r\n        if (audio.length > 0) setSelectedDevice(audio[0].deviceId);\r\n      } catch {\r\n        setError('Unable to enumerate audio devices');\r\n      }\r\n    };\r\n    enumerate();\r\n  }, []);\r\n\r\n  // ── Cleanup on unmount ────────────────────────────────────────────────────\r\n  // Runs when the component is removed from the DOM (e.g. user navigates away).\r\n  // We must stop the mic track and close the AudioContext to release the\r\n  // microphone hardware and avoid the browser's \"mic in use\" indicator lingering.\r\n  useEffect(() => {\r\n    return () => {\r\n      cancelAnimationFrame(animRef.current);\r\n      streamRef.current?.getTracks().forEach((t) => t.stop());\r\n      audioCtxRef.current?.close();\r\n    };\r\n  }, []);\r\n\r\n  const startMic = async (deviceId?: string) => {\r\n    try {\r\n      // ── Tear down any existing session first ──────────────────────────\r\n      // If the user clicks Start a second time (e.g. after switching device),\r\n      // we must cancel the running rAF loop and stop the old stream tracks\r\n      // before creating new ones, otherwise they pile up and the old mic stays open.\r\n      cancelAnimationFrame(animRef.current);\r\n      streamRef.current?.getTracks().forEach((t) => t.stop());\r\n      audioCtxRef.current?.close();\r\n      analyserRef.current = null;\r\n      setIsActive(false); // stops the draw-loop effect\r\n      setError('');\r\n      peakRef.current = 0;\r\n      setPeakVolume(0);\r\n      setVolume(0);\r\n\r\n      // ── Request microphone access ─────────────────────────────────────\r\n      // getUserMedia shows the browser permission prompt if not yet granted.\r\n      // Passing { exact: deviceId } targets a specific mic; without it the\r\n      // browser picks the default input.\r\n      const newStream = await navigator.mediaDevices.getUserMedia({\r\n        audio: deviceId ? { deviceId: { exact: deviceId } } : true,\r\n      });\r\n      streamRef.current = newStream;\r\n\r\n      // ── Build the Web Audio processing chain ──────────────────────────\r\n      // AudioContext is the container for all Web Audio nodes.\r\n      // IMPORTANT: browsers auto-suspend AudioContext when it is not created\r\n      // in a direct (synchronous) user-gesture handler. Because we are after\r\n      // an `await`, the gesture context may be lost, so we explicitly resume().\r\n      const audioCtx = new AudioContext();\r\n      if (audioCtx.state === 'suspended') await audioCtx.resume();\r\n\r\n      // MediaStreamSource wraps the raw mic stream so it can feed into the graph\r\n      const source = audioCtx.createMediaStreamSource(newStream);\r\n\r\n      // AnalyserNode: reads audio data without modifying or outputting it.\r\n      // fftSize controls frequency resolution (larger = more detail, more cost).\r\n      // smoothingTimeConstant (0-1): how much previous frames blend into the\r\n      // current one — higher = smoother bars, lower = more reactive.\r\n      const analyser = audioCtx.createAnalyser();\r\n      analyser.fftSize = 2048;\r\n      analyser.smoothingTimeConstant = 0.8;\r\n\r\n      // Connect: source → analyser (analyser is not connected to destination,\r\n      // so audio is analysed silently — you won't hear yourself)\r\n      source.connect(analyser);\r\n\r\n      audioCtxRef.current = audioCtx;\r\n      analyserRef.current = analyser;\r\n\r\n      // ── Collect mic metadata ───────────────────────────────────────────\r\n      // getSettings() returns the actual constraints that the browser applied\r\n      // (may differ from what was requested — e.g. browser may override sampleRate).\r\n      const track = newStream.getAudioTracks()[0];\r\n      const s = track.getSettings();\r\n      setMicInfo({\r\n        Label: track.label || 'Unknown',\r\n        'Sample Rate': `${s.sampleRate ?? audioCtx.sampleRate} Hz`,\r\n        'Channel Count': String(s.channelCount ?? 'N/A'),\r\n        'Echo Cancellation': s.echoCancellation ? 'Enabled' : 'Disabled',\r\n        'Noise Suppression': (s as any).noiseSuppression ? 'Enabled' : 'Disabled',\r\n        'Auto Gain Control': (s as any).autoGainControl ? 'Enabled' : 'Disabled',\r\n      });\r\n\r\n      // ── Start the draw loop ────────────────────────────────────────────\r\n      // Setting isActive=true triggers the useEffect above. We do this LAST\r\n      // so all refs are fully populated before the effect reads them.\r\n      setIsActive(true);\r\n    } catch (err: any) {\r\n      setError(err.message || 'Microphone access denied');\r\n    }\r\n  };\r\n\r\n  // Stops the mic, closes audio context, cancels the animation loop, and\r\n  // clears the canvas back to blank.\r\n  const stopMic = () => {\r\n    cancelAnimationFrame(animRef.current);\r\n    streamRef.current?.getTracks().forEach((t) => t.stop());\r\n    audioCtxRef.current?.close();\r\n    streamRef.current = null;\r\n    analyserRef.current = null;\r\n    setIsActive(false);\r\n    setVolume(0);\r\n    setPeakVolume(0);\r\n    peakRef.current = 0;\r\n    setMicInfo({});\r\n\r\n    // clear canvas\r\n    const canvas = canvasRef.current;\r\n    if (canvas) {\r\n      const ctx = canvas.getContext('2d');\r\n      ctx?.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n  };\r\n\r\n  // ── Recording ─────────────────────────────────────────────────────────────\r\n  // MediaRecorder taps the same stream the analyser uses and writes encoded\r\n  // audio (webm/opus) into Blob chunks. When stopped, we combine the chunks into\r\n  // a single Blob and create an object URL for playback/download.\r\n  const toggleRecording = () => {\r\n    if (recording) {\r\n      mediaRecorderRef.current?.stop();\r\n      setRecording(false);\r\n      return;\r\n    }\r\n    const stream = streamRef.current;\r\n    if (!stream) return;\r\n    chunksRef.current = [];\r\n    const mr = new MediaRecorder(stream, { mimeType: 'audio/webm' });\r\n    mr.ondataavailable = (e) => {\r\n      if (e.data.size > 0) chunksRef.current.push(e.data);\r\n    };\r\n    mr.onstop = () => {\r\n      const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\r\n      setRecordedUrl(URL.createObjectURL(blob));\r\n    };\r\n    mr.start();\r\n    mediaRecorderRef.current = mr;\r\n    setRecording(true);\r\n  };\r\n\r\n  const downloadRecording = () => {\r\n    if (!recordedUrl) return;\r\n    const a = document.createElement('a');\r\n    a.href = recordedUrl;\r\n    a.download = `mic-recording-${Date.now()}.webm`;\r\n    a.click();\r\n  };\r\n\r\n  const handleDeviceChange = (deviceId: string) => {\r\n    setSelectedDevice(deviceId);\r\n    if (isActive) startMic(deviceId);\r\n  };\r\n\r\n  const getVolumeColor = () => {\r\n    if (volume > 70) return '#ff4d4f';\r\n    if (volume > 40) return '#faad14';\r\n    return '#52c41a';\r\n  };\r\n\r\n  return (\r\n    <div className=\"microphone-test\">\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} lg={16}>\r\n          <Card\r\n            title={\r\n              <Space>\r\n                <AudioOutlined />\r\n                Microphone Test\r\n                {isActive && <Tag color=\"green\">Active</Tag>}\r\n                {recording && <Tag color=\"red\">● Recording</Tag>}\r\n              </Space>\r\n            }\r\n          >\r\n            {error && <Alert message={error} type=\"error\" showIcon style={{ marginBottom: 16 }} />}\r\n\r\n            <div className=\"mic-visualizer\">\r\n              <canvas\r\n                ref={canvasRef}\r\n                width={800}\r\n                height={200}\r\n                style={{\r\n                  width: '100%',\r\n                  height: 200,\r\n                  borderRadius: 8,\r\n                  border: '1px solid #303030',\r\n                  backgroundColor: '#141414',\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 16 }}>\r\n              <Row gutter={16} align=\"middle\">\r\n                <Col span={12}>\r\n                  <Text strong>Volume Level</Text>\r\n                  <Progress\r\n                    percent={volume}\r\n                    strokeColor={getVolumeColor()}\r\n                    status=\"active\"\r\n                    format={(p) => `${p}%`}\r\n                  />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Text strong>Peak Volume</Text>\r\n                  <Progress percent={peakVolume} strokeColor=\"#1677ff\" format={(p) => `${p}%`} />\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 16 }}>\r\n              <Text strong>Sensitivity</Text>\r\n              <Slider\r\n                min={0.5}\r\n                max={5}\r\n                step={0.1}\r\n                value={sensitivity}\r\n                onChange={setSensitivity}\r\n                marks={{ 0.5: 'Low', 1: 'Normal', 3: 'High', 5: 'Max' }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginTop: 16 }}>\r\n              <Space wrap>\r\n                <Select\r\n                  style={{ width: 300 }}\r\n                  placeholder=\"Select microphone\"\r\n                  value={selectedDevice || undefined}\r\n                  onChange={handleDeviceChange}\r\n                  options={devices.map((d) => ({\r\n                    label: d.label || `Mic ${d.deviceId.slice(0, 8)}`,\r\n                    value: d.deviceId,\r\n                  }))}\r\n                />\r\n                {!isActive ? (\r\n                  <Button\r\n                    type=\"primary\"\r\n                    icon={<PlayCircleOutlined />}\r\n                    onClick={() => startMic(selectedDevice)}\r\n                  >\r\n                    Start Mic\r\n                  </Button>\r\n                ) : (\r\n                  <Button danger icon={<StopOutlined />} onClick={stopMic}>\r\n                    Stop Mic\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  icon={recording ? <StopOutlined /> : <AudioOutlined />}\r\n                  onClick={toggleRecording}\r\n                  disabled={!isActive}\r\n                  danger={recording}\r\n                >\r\n                  {recording ? 'Stop Recording' : 'Record'}\r\n                </Button>\r\n                {recordedUrl && (\r\n                  <>\r\n                    <Button icon={<DownloadOutlined />} onClick={downloadRecording}>\r\n                      Download\r\n                    </Button>\r\n                    <audio controls src={recordedUrl} style={{ height: 32 }} />\r\n                  </>\r\n                )}\r\n              </Space>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n\r\n        <Col xs={24} lg={8}>\r\n          <Card title=\"Microphone Information\" style={{ height: '100%' }}>\r\n            {Object.keys(micInfo).length > 0 ? (\r\n              <Descriptions column={1} size=\"small\" bordered>\r\n                {Object.entries(micInfo).map(([key, val]) => (\r\n                  <Descriptions.Item label={key} key={key}>\r\n                    {val}\r\n                  </Descriptions.Item>\r\n                ))}\r\n              </Descriptions>\r\n            ) : (\r\n              <Text type=\"secondary\">Start microphone to see device information</Text>\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MicrophoneTest;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Button,\r\n  Card,\r\n  Col,\r\n  Row,\r\n  Slider,\r\n  Space,\r\n  Typography,\r\n  Tooltip,\r\n  Tag,\r\n  Divider,\r\n  Alert,\r\n} from 'antd';\r\nimport { CaretRightOutlined, PauseOutlined, SoundOutlined, SwapOutlined } from '@ant-design/icons';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\n// ─── Musical note helpers ────────────────────────────────────────────────────\r\n// Standard tuning: A4 = 440 Hz, MIDI note 69\r\n// Formula: freq = 440 * 2^((midi - 69) / 12)\r\nconst NOTE_NAMES = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\r\n\r\nfunction freqToNote(freq: number): string {\r\n  // midi note closest to this freq\r\n  const midi = Math.round(12 * Math.log2(freq / 440) + 69);\r\n  const octave = Math.floor(midi / 12) - 1;\r\n  const name = NOTE_NAMES[((midi % 12) + 12) % 12];\r\n  const noteFreq = 440 * Math.pow(2, (midi - 69) / 12);\r\n  const cents = Math.round(1200 * Math.log2(freq / noteFreq));\r\n  const centsStr = cents === 0 ? '' : cents > 0 ? ` +${cents}¢` : ` ${cents}¢`;\r\n  return `${name}${octave}${centsStr}`;\r\n}\r\n\r\n// ─── Preset quality tests ────────────────────────────────────────────────────\r\nconst PRESETS = [\r\n  {\r\n    label: 'Sub Bass',\r\n    freq: 40,\r\n    desc: 'Deep rumble — tests sub-woofer / large drivers',\r\n    color: '#722ed1',\r\n  },\r\n  { label: 'Bass', freq: 100, desc: 'Kick drum body — warmth and punch', color: '#1677ff' },\r\n  { label: 'Low-Mid', freq: 300, desc: 'Male vocals, guitar body', color: '#13c2c2' },\r\n  { label: 'Mid', freq: 1000, desc: 'Voice clarity, presence', color: '#52c41a' },\r\n  { label: 'High-Mid', freq: 4000, desc: 'Consonants, sibilance, attack', color: '#faad14' },\r\n  { label: 'Treble', freq: 10000, desc: 'Cymbals, air, brilliance', color: '#f5222d' },\r\n];\r\n\r\ntype Channel = 'left' | 'right' | 'both';\r\n\r\nconst HeadphoneTest: React.FC = () => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [frequency, setFrequency] = useState(440);\r\n  const [volume, setVolume] = useState(0.4);\r\n  const [channel, setChannel] = useState<Channel>('both');\r\n  const [autoLR, setAutoLR] = useState(false);\r\n  const [activeChannel, setActiveChannel] = useState<Channel>('both'); // what's actually playing right now\r\n\r\n  // Web Audio refs — we keep the graph alive while playing and recreate on param change\r\n  const audioCtxRef = useRef<AudioContext | null>(null);\r\n  const oscRef = useRef<OscillatorNode | null>(null);\r\n  const gainRef = useRef<GainNode | null>(null);\r\n  const pannerRef = useRef<StereoPannerNode | null>(null);\r\n  const autoTimerRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n  const autoChannelRef = useRef<Channel>('left');\r\n\r\n  // ── Audio helpers ─────────────────────────────────────────────────────────\r\n  // panValue: -1 = full left, 0 = center, +1 = full right\r\n  const channelToPan = (ch: Channel) => (ch === 'left' ? -1 : ch === 'right' ? 1 : 0);\r\n\r\n  const stopTone = useCallback(() => {\r\n    try {\r\n      oscRef.current?.stop();\r\n    } catch {}\r\n    oscRef.current = null;\r\n    gainRef.current = null;\r\n    pannerRef.current = null;\r\n    audioCtxRef.current?.close();\r\n    audioCtxRef.current = null;\r\n    if (autoTimerRef.current) {\r\n      clearInterval(autoTimerRef.current);\r\n      autoTimerRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  const startTone = useCallback(\r\n    (freq: number, vol: number, ch: Channel) => {\r\n      stopTone();\r\n\r\n      const ctx = new AudioContext();\r\n      const osc = ctx.createOscillator();\r\n      const gain = ctx.createGain();\r\n      const panner = ctx.createStereoPanner();\r\n\r\n      osc.type = 'sine';\r\n      osc.frequency.value = freq;\r\n      gain.gain.value = vol;\r\n      panner.pan.value = channelToPan(ch);\r\n\r\n      // chain: oscillator → gain → panner → output\r\n      osc.connect(gain);\r\n      gain.connect(panner);\r\n      panner.connect(ctx.destination);\r\n\r\n      osc.start();\r\n\r\n      audioCtxRef.current = ctx;\r\n      oscRef.current = osc;\r\n      gainRef.current = gain;\r\n      pannerRef.current = panner;\r\n      setActiveChannel(ch);\r\n    },\r\n    [stopTone],\r\n  );\r\n\r\n  // ── Live-update frequency/volume/pan while playing (no restart needed) ───\r\n  useEffect(() => {\r\n    if (!isPlaying || !oscRef.current || !gainRef.current || !pannerRef.current) return;\r\n    oscRef.current.frequency.value = frequency;\r\n    gainRef.current.gain.value = volume;\r\n    if (!autoLR) {\r\n      pannerRef.current.pan.value = channelToPan(channel);\r\n      setActiveChannel(channel);\r\n    }\r\n  }, [frequency, volume, channel, isPlaying, autoLR]);\r\n\r\n  // ── Auto left-right mode ──────────────────────────────────────────────────\r\n  useEffect(() => {\r\n    if (!isPlaying || !autoLR) return;\r\n    // swap channel every 1.5 s\r\n    autoTimerRef.current = setInterval(() => {\r\n      autoChannelRef.current = autoChannelRef.current === 'left' ? 'right' : 'left';\r\n      if (pannerRef.current) {\r\n        pannerRef.current.pan.value = channelToPan(autoChannelRef.current);\r\n        setActiveChannel(autoChannelRef.current);\r\n      }\r\n    }, 1500);\r\n    return () => {\r\n      if (autoTimerRef.current) clearInterval(autoTimerRef.current);\r\n    };\r\n  }, [isPlaying, autoLR]);\r\n\r\n  const togglePlay = () => {\r\n    if (isPlaying) {\r\n      stopTone();\r\n      setIsPlaying(false);\r\n    } else {\r\n      startTone(frequency, volume, autoLR ? 'left' : channel);\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const playPreset = (freq: number) => {\r\n    setFrequency(freq);\r\n    if (isPlaying) {\r\n      // restart with new freq\r\n      startTone(freq, volume, autoLR ? 'left' : channel);\r\n    } else {\r\n      startTone(freq, volume, autoLR ? 'left' : channel);\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const handleChannelChange = (ch: Channel) => {\r\n    setChannel(ch);\r\n    setAutoLR(false);\r\n    if (isPlaying && pannerRef.current) {\r\n      pannerRef.current.pan.value = channelToPan(ch);\r\n      setActiveChannel(ch);\r\n    }\r\n  };\r\n\r\n  const handleAutoLR = () => {\r\n    const next = !autoLR;\r\n    setAutoLR(next);\r\n    if (isPlaying) {\r\n      if (next) {\r\n        // start auto timer immediately\r\n        autoChannelRef.current = 'left';\r\n        if (pannerRef.current) {\r\n          pannerRef.current.pan.value = -1;\r\n          setActiveChannel('left');\r\n        }\r\n      } else {\r\n        if (autoTimerRef.current) clearInterval(autoTimerRef.current);\r\n        if (pannerRef.current) {\r\n          pannerRef.current.pan.value = channelToPan(channel);\r\n          setActiveChannel(channel);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => () => stopTone(), [stopTone]);\r\n\r\n  // ── Balance visualizer ────────────────────────────────────────────────────\r\n  const panValue = channelToPan(activeChannel); // -1 to +1\r\n  const indicatorLeft = `${((panValue + 1) / 2) * 100}%`;\r\n\r\n  const freqLabel = `${frequency < 1000 ? frequency : (frequency / 1000).toFixed(1) + 'k'} Hz`;\r\n  const noteName = freqToNote(frequency);\r\n\r\n  return (\r\n    <div className=\"headphone-test\">\r\n      <Alert\r\n        message=\"Put on your headphones before starting the tests.\"\r\n        type=\"info\"\r\n        showIcon\r\n        style={{ marginBottom: 16 }}\r\n      />\r\n\r\n      <Row gutter={[16, 16]}>\r\n        {/* ── Left / Right balance test ───────────────────────────────────── */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            title={\r\n              <>\r\n                <SwapOutlined /> Left / Right Channel Test\r\n              </>\r\n            }\r\n            size=\"small\"\r\n          >\r\n            <Text type=\"secondary\" style={{ display: 'block', marginBottom: 12 }}>\r\n              Verifies that left and right earpieces are correctly wired. You should only hear sound\r\n              in the indicated ear.\r\n            </Text>\r\n\r\n            {/* Balance track */}\r\n            <div style={{ position: 'relative', height: 40, marginBottom: 16 }}>\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: '50%',\r\n                  left: 0,\r\n                  right: 0,\r\n                  height: 4,\r\n                  background: '#303030',\r\n                  borderRadius: 2,\r\n                  transform: 'translateY(-50%)',\r\n                }}\r\n              />\r\n              {/* Moving dot */}\r\n              <div\r\n                style={{\r\n                  position: 'absolute',\r\n                  top: '50%',\r\n                  left: indicatorLeft,\r\n                  width: 20,\r\n                  height: 20,\r\n                  borderRadius: '50%',\r\n                  background: isPlaying ? '#1677ff' : '#444',\r\n                  transform: 'translate(-50%, -50%)',\r\n                  transition: 'left 0.4s ease, background 0.3s',\r\n                  boxShadow: isPlaying ? '0 0 8px #1677ff' : 'none',\r\n                }}\r\n              />\r\n              <Text\r\n                style={{ position: 'absolute', left: 0, top: '100%', fontSize: 11, color: '#888' }}\r\n              >\r\n                LEFT\r\n              </Text>\r\n              <Text\r\n                style={{ position: 'absolute', right: 0, top: '100%', fontSize: 11, color: '#888' }}\r\n              >\r\n                RIGHT\r\n              </Text>\r\n            </div>\r\n\r\n            <Space wrap style={{ marginTop: 24 }}>\r\n              <Button\r\n                type={channel === 'left' && !autoLR ? 'primary' : 'default'}\r\n                onClick={() => handleChannelChange('left')}\r\n              >\r\n                🔇 Left Only\r\n              </Button>\r\n              <Button\r\n                type={channel === 'both' && !autoLR ? 'primary' : 'default'}\r\n                onClick={() => handleChannelChange('both')}\r\n              >\r\n                🔊 Both\r\n              </Button>\r\n              <Button\r\n                type={channel === 'right' && !autoLR ? 'primary' : 'default'}\r\n                onClick={() => handleChannelChange('right')}\r\n              >\r\n                Right Only 🔇\r\n              </Button>\r\n              <Button\r\n                type={autoLR ? 'primary' : 'default'}\r\n                icon={<SwapOutlined />}\r\n                onClick={handleAutoLR}\r\n              >\r\n                Auto LR\r\n              </Button>\r\n            </Space>\r\n\r\n            {isPlaying && (\r\n              <div style={{ marginTop: 12 }}>\r\n                <Tag color=\"blue\">\r\n                  Playing:{' '}\r\n                  {activeChannel === 'left'\r\n                    ? '◀ Left'\r\n                    : activeChannel === 'right'\r\n                      ? 'Right ▶'\r\n                      : '◀ Both ▶'}\r\n                </Tag>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* ── Play controls ───────────────────────────────────────────────── */}\r\n        <Col xs={24} lg={12}>\r\n          <Card\r\n            title={\r\n              <>\r\n                <SoundOutlined /> Tone Controls\r\n              </>\r\n            }\r\n            size=\"small\"\r\n          >\r\n            <Row gutter={[0, 16]}>\r\n              <Col span={24}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 4 }}>\r\n                  <Text strong>Frequency</Text>\r\n                  <Space>\r\n                    <Text code>{freqLabel}</Text>\r\n                    <Tooltip title=\"Closest musical note\">\r\n                      <Tag color=\"geekblue\">{noteName}</Tag>\r\n                    </Tooltip>\r\n                  </Space>\r\n                </div>\r\n                {/* Log-scale via sqrt trick: store sqrt of freq for linear slider */}\r\n                <Slider\r\n                  min={Math.sqrt(20)}\r\n                  max={Math.sqrt(20000)}\r\n                  step={0.01}\r\n                  value={Math.sqrt(frequency)}\r\n                  onChange={(v) => setFrequency(Math.round(v * v))}\r\n                  tooltip={{ formatter: () => freqLabel }}\r\n                />\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                  <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n                    20 Hz\r\n                  </Text>\r\n                  <Text type=\"secondary\" style={{ fontSize: 11 }}>\r\n                    20 kHz\r\n                  </Text>\r\n                </div>\r\n              </Col>\r\n\r\n              <Col span={24}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 4 }}>\r\n                  <Text strong>Volume</Text>\r\n                  <Text code>{Math.round(volume * 100)}%</Text>\r\n                </div>\r\n                <Slider\r\n                  min={0}\r\n                  max={1}\r\n                  step={0.01}\r\n                  value={volume}\r\n                  onChange={setVolume}\r\n                  tooltip={{ formatter: (v) => `${Math.round((v ?? 0) * 100)}%` }}\r\n                />\r\n              </Col>\r\n\r\n              <Col span={24}>\r\n                <Button\r\n                  type=\"primary\"\r\n                  size=\"large\"\r\n                  block\r\n                  icon={isPlaying ? <PauseOutlined /> : <CaretRightOutlined />}\r\n                  onClick={togglePlay}\r\n                  danger={isPlaying}\r\n                >\r\n                  {isPlaying ? 'Stop Tone' : 'Play Tone'}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* ── Frequency preset tests ───────────────────────────────────────── */}\r\n        <Col span={24}>\r\n          <Card title=\"Frequency Range Tests\" size=\"small\">\r\n            <Text type=\"secondary\" style={{ display: 'block', marginBottom: 12 }}>\r\n              Click a preset to play that frequency. Good headphones should reproduce all ranges\r\n              clearly without distortion.\r\n            </Text>\r\n            <Row gutter={[12, 12]}>\r\n              {PRESETS.map((p) => (\r\n                <Col xs={12} sm={8} md={4} key={p.freq}>\r\n                  <Tooltip title={p.desc}>\r\n                    <Button\r\n                      block\r\n                      style={{\r\n                        borderColor: p.color,\r\n                        color: isPlaying && frequency === p.freq ? '#fff' : p.color,\r\n                        background: isPlaying && frequency === p.freq ? p.color : 'transparent',\r\n                        height: 64,\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                      }}\r\n                      onClick={() => playPreset(p.freq)}\r\n                    >\r\n                      <div style={{ fontWeight: 700, fontSize: 14 }}>{p.label}</div>\r\n                      <div style={{ fontSize: 11, opacity: 0.75 }}>\r\n                        {p.freq < 1000 ? `${p.freq} Hz` : `${p.freq / 1000} kHz`}\r\n                      </div>\r\n                    </Button>\r\n                  </Tooltip>\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* ── How to use ───────────────────────────────────────────────────── */}\r\n        <Col span={24}>\r\n          <Card title=\"How to Use\" size=\"small\">\r\n            <Row gutter={[16, 8]}>\r\n              <Col xs={24} sm={8}>\r\n                <Title level={5}>1. Left / Right Test</Title>\r\n                <Text type=\"secondary\">\r\n                  Click \"Left Only\" — you should only hear sound in your left ear. Click \"Right\r\n                  Only\" — only in the right ear. If it's reversed, your headphones are on backwards\r\n                  or the cable is swapped.\r\n                </Text>\r\n              </Col>\r\n              <Divider type=\"vertical\" style={{ height: 'auto' }} />\r\n              <Col xs={24} sm={7}>\r\n                <Title level={5}>2. Frequency Generator</Title>\r\n                <Text type=\"secondary\">\r\n                  Drag the slider through the full range (20 Hz – 20 kHz). You should hear the tone\r\n                  get higher. If it disappears at any point, your headphones may have a gap in their\r\n                  frequency response.\r\n                </Text>\r\n              </Col>\r\n              <Divider type=\"vertical\" style={{ height: 'auto' }} />\r\n              <Col xs={24} sm={7}>\r\n                <Title level={5}>3. Preset Range Tests</Title>\r\n                <Text type=\"secondary\">\r\n                  Click each preset and listen for distortion or complete silence. Bass presets test\r\n                  driver size; treble tests tweeter quality. All six should play cleanly on good\r\n                  headphones.\r\n                </Text>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeadphoneTest;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport {\r\n  Alert,\r\n  Badge,\r\n  Card,\r\n  Col,\r\n  Descriptions,\r\n  Progress,\r\n  Row,\r\n  Select,\r\n  Space,\r\n  Tag,\r\n  Typography,\r\n} from 'antd';\r\nimport { ControlOutlined } from '@ant-design/icons';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface GamepadState {\r\n  index: number;\r\n  id: string;\r\n  buttons: { pressed: boolean; value: number }[];\r\n  axes: number[];\r\n  timestamp: number;\r\n  mapping: string;\r\n  connected: boolean;\r\n  vibrationActuator: boolean;\r\n}\r\n\r\nconst BUTTON_LABELS = [\r\n  'A / ✕',\r\n  'B / ○',\r\n  'X / □',\r\n  'Y / △',\r\n  'LB / L1',\r\n  'RB / R1',\r\n  'LT / L2',\r\n  'RT / R2',\r\n  'Back / Select',\r\n  'Start',\r\n  'L3 (Left Stick)',\r\n  'R3 (Right Stick)',\r\n  'D-Pad Up',\r\n  'D-Pad Down',\r\n  'D-Pad Left',\r\n  'D-Pad Right',\r\n  'Home / Guide',\r\n];\r\n\r\nconst AXIS_LABELS = ['Left Stick X', 'Left Stick Y', 'Right Stick X', 'Right Stick Y'];\r\n\r\nconst GamepadTest: React.FC = () => {\r\n  const [gamepads, setGamepads] = useState<(GamepadState | null)[]>([]);\r\n  const [connected, setConnected] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(null);\r\n  const animRef = useRef<number>(0);\r\n  const canvasLeftRef = useRef<HTMLCanvasElement>(null);\r\n  const canvasRightRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const pollGamepads = useCallback(() => {\r\n    const gps = navigator.getGamepads();\r\n    const states: (GamepadState | null)[] = [];\r\n    let hasAny = false;\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      const gp = gps[i];\r\n      if (gp) {\r\n        hasAny = true;\r\n        states.push({\r\n          index: gp.index,\r\n          id: gp.id,\r\n          buttons: Array.from(gp.buttons).map((b) => ({\r\n            pressed: b.pressed,\r\n            value: b.value,\r\n          })),\r\n          axes: Array.from(gp.axes),\r\n          timestamp: gp.timestamp,\r\n          mapping: gp.mapping || 'non-standard',\r\n          connected: gp.connected,\r\n          vibrationActuator: !!(gp as any).vibrationActuator,\r\n        });\r\n      } else {\r\n        states.push(null);\r\n      }\r\n    }\r\n\r\n    setGamepads(states);\r\n    setConnected(hasAny);\r\n\r\n    // Auto-select first available gamepad if none selected or selected one disconnected\r\n    setSelectedIndex((prev) => {\r\n      if (prev !== null && states[prev]) return prev;\r\n      const firstIdx = states.findIndex((g) => g !== null);\r\n      return firstIdx >= 0 ? firstIdx : null;\r\n    });\r\n\r\n    // Draw stick visualizations for the selected gamepad\r\n    if (hasAny) {\r\n      const selected = states.find(\r\n        (g, i) => g !== null && (selectedIndex === null || i === selectedIndex),\r\n      ) as GamepadState | undefined;\r\n      if (selected) {\r\n        drawStick(canvasLeftRef.current, selected.axes[0] || 0, selected.axes[1] || 0);\r\n        drawStick(canvasRightRef.current, selected.axes[2] || 0, selected.axes[3] || 0);\r\n      }\r\n    }\r\n\r\n    animRef.current = requestAnimationFrame(pollGamepads);\r\n  }, []);\r\n\r\n  const drawStick = (canvas: HTMLCanvasElement | null, x: number, y: number) => {\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n    const w = canvas.width;\r\n    const h = canvas.height;\r\n    const cx = w / 2;\r\n    const cy = h / 2;\r\n    const radius = w * 0.4;\r\n\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Background circle\r\n    ctx.beginPath();\r\n    ctx.arc(cx, cy, radius, 0, Math.PI * 2);\r\n    ctx.fillStyle = '#f0f0f0';\r\n    ctx.fill();\r\n    ctx.strokeStyle = '#d9d9d9';\r\n    ctx.lineWidth = 2;\r\n    ctx.stroke();\r\n\r\n    // Crosshair\r\n    ctx.beginPath();\r\n    ctx.moveTo(cx - radius, cy);\r\n    ctx.lineTo(cx + radius, cy);\r\n    ctx.moveTo(cx, cy - radius);\r\n    ctx.lineTo(cx, cy + radius);\r\n    ctx.strokeStyle = '#e0e0e0';\r\n    ctx.lineWidth = 1;\r\n    ctx.stroke();\r\n\r\n    // Dead zone circle\r\n    ctx.beginPath();\r\n    ctx.arc(cx, cy, radius * 0.15, 0, Math.PI * 2);\r\n    ctx.strokeStyle = '#bbb';\r\n    ctx.setLineDash([3, 3]);\r\n    ctx.stroke();\r\n    ctx.setLineDash([]);\r\n\r\n    // Stick position\r\n    const dotX = cx + x * radius;\r\n    const dotY = cy + y * radius;\r\n    ctx.beginPath();\r\n    ctx.arc(dotX, dotY, 10, 0, Math.PI * 2);\r\n    const magnitude = Math.sqrt(x * x + y * y);\r\n    const hue = magnitude > 0.8 ? 0 : magnitude > 0.4 ? 40 : 120;\r\n    ctx.fillStyle = `hsl(${hue}, 80%, 50%)`;\r\n    ctx.fill();\r\n    ctx.strokeStyle = 'white';\r\n    ctx.lineWidth = 2;\r\n    ctx.stroke();\r\n\r\n    // Position text\r\n    ctx.fillStyle = '#666';\r\n    ctx.font = '10px monospace';\r\n    ctx.textAlign = 'center';\r\n    ctx.fillText(`(${x.toFixed(2)}, ${y.toFixed(2)})`, cx, h - 5);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const onConnect = () => pollGamepads();\r\n    const onDisconnect = () => {\r\n      setConnected(false);\r\n      setGamepads([]);\r\n    };\r\n\r\n    window.addEventListener('gamepadconnected', onConnect);\r\n    window.addEventListener('gamepaddisconnected', onDisconnect);\r\n\r\n    animRef.current = requestAnimationFrame(pollGamepads);\r\n\r\n    return () => {\r\n      window.removeEventListener('gamepadconnected', onConnect);\r\n      window.removeEventListener('gamepaddisconnected', onDisconnect);\r\n      cancelAnimationFrame(animRef.current);\r\n    };\r\n  }, [pollGamepads]);\r\n\r\n  const connectedGamepads = gamepads.filter((g): g is GamepadState => g !== null);\r\n  const activeGamepad = (\r\n    selectedIndex !== null ? gamepads[selectedIndex] : gamepads.find((g) => g !== null)\r\n  ) as GamepadState | undefined;\r\n\r\n  return (\r\n    <div className=\"gamepad-test\">\r\n      {!connected && (\r\n        <Alert\r\n          message=\"No gamepad detected\"\r\n          description=\"Connect a gamepad/controller and press any button to start testing. Supports Xbox, PlayStation, Switch Pro, and other standard controllers.\"\r\n          type=\"info\"\r\n          showIcon\r\n          style={{ marginBottom: 16 }}\r\n        />\r\n      )}\r\n\r\n      {connected && connectedGamepads.length > 1 && (\r\n        <Card size=\"small\" style={{ marginBottom: 16 }}>\r\n          <Space align=\"center\" wrap>\r\n            <Text strong>Select Device:</Text>\r\n            <Select\r\n              value={selectedIndex ?? undefined}\r\n              onChange={(val) => setSelectedIndex(val)}\r\n              style={{ minWidth: 320 }}\r\n              options={connectedGamepads.map((gp) => ({\r\n                value: gp.index,\r\n                label: (\r\n                  <Space>\r\n                    <Tag color=\"green\">Player {gp.index + 1}</Tag>\r\n                    {gp.id}\r\n                  </Space>\r\n                ),\r\n              }))}\r\n            />\r\n            <Text type=\"secondary\">{connectedGamepads.length} devices connected</Text>\r\n          </Space>\r\n        </Card>\r\n      )}\r\n\r\n      {activeGamepad && (\r\n        <>\r\n          <Card\r\n            title={\r\n              <Space>\r\n                <ControlOutlined />\r\n                {activeGamepad.id}\r\n                <Tag color=\"green\">Connected</Tag>\r\n                <Tag color=\"blue\">{activeGamepad.mapping} mapping</Tag>\r\n                {connectedGamepads.length > 1 && (\r\n                  <Tag color=\"purple\">Player {activeGamepad.index + 1}</Tag>\r\n                )}\r\n              </Space>\r\n            }\r\n            style={{ marginBottom: 16 }}\r\n          >\r\n            <Row gutter={[16, 16]}>\r\n              {/* Buttons */}\r\n              <Col xs={24} md={12}>\r\n                <Text strong style={{ display: 'block', marginBottom: 12 }}>\r\n                  Buttons\r\n                </Text>\r\n                <div className=\"gamepad-buttons-grid\">\r\n                  {activeGamepad.buttons.map((btn, i) => (\r\n                    <div\r\n                      key={i}\r\n                      className={`gamepad-btn ${btn.pressed ? 'gamepad-btn--pressed' : ''}`}\r\n                    >\r\n                      <div className=\"gamepad-btn-label\">{BUTTON_LABELS[i] || `Button ${i}`}</div>\r\n                      {btn.value > 0 && btn.value < 1 && (\r\n                        <Progress\r\n                          percent={Math.round(btn.value * 100)}\r\n                          size=\"small\"\r\n                          showInfo={false}\r\n                          strokeColor=\"#1677ff\"\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </Col>\r\n\r\n              {/* Analog sticks */}\r\n              <Col xs={24} md={12}>\r\n                <Text strong style={{ display: 'block', marginBottom: 12 }}>\r\n                  Analog Sticks\r\n                </Text>\r\n                <Row gutter={16}>\r\n                  <Col span={12}>\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      <Text type=\"secondary\">Left Stick</Text>\r\n                      <canvas\r\n                        ref={canvasLeftRef}\r\n                        width={150}\r\n                        height={150}\r\n                        style={{ display: 'block', margin: '8px auto' }}\r\n                      />\r\n                    </div>\r\n                  </Col>\r\n                  <Col span={12}>\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      <Text type=\"secondary\">Right Stick</Text>\r\n                      <canvas\r\n                        ref={canvasRightRef}\r\n                        width={150}\r\n                        height={150}\r\n                        style={{ display: 'block', margin: '8px auto' }}\r\n                      />\r\n                    </div>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <div style={{ marginTop: 16 }}>\r\n                  <Text strong style={{ display: 'block', marginBottom: 8 }}>\r\n                    Axes\r\n                  </Text>\r\n                  {activeGamepad.axes.map((axis, i) => (\r\n                    <div key={i} style={{ marginBottom: 8 }}>\r\n                      <Text type=\"secondary\">{AXIS_LABELS[i] || `Axis ${i}`}</Text>\r\n                      <div\r\n                        style={{\r\n                          display: 'flex',\r\n                          alignItems: 'center',\r\n                          gap: 8,\r\n                        }}\r\n                      >\r\n                        <div className=\"axis-bar-track\">\r\n                          <div\r\n                            className=\"axis-bar-fill\"\r\n                            style={{\r\n                              left: '50%',\r\n                              width: `${Math.abs(axis) * 50}%`,\r\n                              transform: axis < 0 ? 'translateX(-100%)' : 'none',\r\n                              backgroundColor: Math.abs(axis) > 0.8 ? '#ff4d4f' : '#1677ff',\r\n                            }}\r\n                          />\r\n                          <div className=\"axis-bar-center\" />\r\n                        </div>\r\n                        <Text code style={{ minWidth: 60, textAlign: 'right' }}>\r\n                          {axis.toFixed(4)}\r\n                        </Text>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Card>\r\n\r\n          <Card title=\"Gamepad Details\" size=\"small\">\r\n            <Descriptions column={{ xs: 1, sm: 2 }} size=\"small\" bordered>\r\n              <Descriptions.Item label=\"ID\">{activeGamepad.id}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Index\">{activeGamepad.index}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Mapping\">{activeGamepad.mapping}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Buttons\">{activeGamepad.buttons.length}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Axes\">{activeGamepad.axes.length}</Descriptions.Item>\r\n              <Descriptions.Item label=\"Vibration\">\r\n                {activeGamepad.vibrationActuator ? (\r\n                  <Tag color=\"green\">Supported</Tag>\r\n                ) : (\r\n                  <Tag color=\"default\">Not Available</Tag>\r\n                )}\r\n              </Descriptions.Item>\r\n            </Descriptions>\r\n          </Card>\r\n        </>\r\n      )}\r\n\r\n      {/* Multiple gamepads summary */}\r\n      {connectedGamepads.length > 1 && (\r\n        <Card title=\"All Connected Gamepads\" size=\"small\" style={{ marginTop: 16 }}>\r\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n            {connectedGamepads.map((gp) => (\r\n              <Badge.Ribbon\r\n                text={`Player ${gp.index + 1}`}\r\n                key={gp.index}\r\n                color={gp.index === selectedIndex ? 'blue' : undefined}\r\n              >\r\n                <Card\r\n                  size=\"small\"\r\n                  hoverable\r\n                  style={{\r\n                    cursor: 'pointer',\r\n                    borderColor: gp.index === selectedIndex ? '#1677ff' : undefined,\r\n                  }}\r\n                  onClick={() => setSelectedIndex(gp.index)}\r\n                >\r\n                  <Space>\r\n                    <Text strong={gp.index === selectedIndex}>{gp.id}</Text>\r\n                    {gp.index === selectedIndex && <Tag color=\"blue\">Testing</Tag>}\r\n                  </Space>\r\n                </Card>\r\n              </Badge.Ribbon>\r\n            ))}\r\n          </Space>\r\n        </Card>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GamepadTest;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Card, Col, Descriptions, Row, Space, Statistic, Tag, Typography } from 'antd';\r\n\r\nconst { Text, Title } = Typography;\r\n\r\ninterface ClickRecord {\r\n  button: number;\r\n  timestamp: number;\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nconst BUTTON_NAMES: Record<number, string> = {\r\n  0: 'Left',\r\n  1: 'Middle',\r\n  2: 'Right',\r\n  3: 'Back',\r\n  4: 'Forward',\r\n};\r\n\r\nconst BUTTON_COLORS: Record<number, string> = {\r\n  0: '#1677ff',\r\n  1: '#52c41a',\r\n  2: '#ff4d4f',\r\n  3: '#722ed1',\r\n  4: '#fa8c16',\r\n};\r\n\r\nconst MouseTest: React.FC = () => {\r\n  const [clicks, setClicks] = useState<ClickRecord[]>([]);\r\n  const [buttonStates, setButtonStates] = useState<Record<number, boolean>>({});\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [scrollDelta, setScrollDelta] = useState({ x: 0, y: 0, total: 0 });\r\n  const [moveDistance, setMoveDistance] = useState(0);\r\n  const [speed, setSpeed] = useState(0);\r\n  const [trail, setTrail] = useState<{ x: number; y: number }[]>([]);\r\n  const [doubleClicks, setDoubleClicks] = useState(0);\r\n\r\n  const testAreaRef = useRef<HTMLDivElement>(null);\r\n  const lastPosRef = useRef<{ x: number; y: number } | null>(null);\r\n  const lastTimeRef = useRef(0);\r\n  const trailCanvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const buttonCounts = clicks.reduce(\r\n    (acc, c) => {\r\n      acc[c.button] = (acc[c.button] || 0) + 1;\r\n      return acc;\r\n    },\r\n    {} as Record<number, number>,\r\n  );\r\n\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    const rect = testAreaRef.current?.getBoundingClientRect();\r\n    if (!rect) return;\r\n\r\n    setButtonStates((prev) => ({ ...prev, [e.button]: true }));\r\n    setClicks((prev) => [\r\n      ...prev,\r\n      {\r\n        button: e.button,\r\n        timestamp: Date.now(),\r\n        x: e.clientX - rect.left,\r\n        y: e.clientY - rect.top,\r\n      },\r\n    ]);\r\n  }, []);\r\n\r\n  const handleMouseUp = useCallback((e: React.MouseEvent) => {\r\n    setButtonStates((prev) => ({ ...prev, [e.button]: false }));\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\r\n    const rect = testAreaRef.current?.getBoundingClientRect();\r\n    if (!rect) return;\r\n\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    setPosition({ x, y });\r\n\r\n    const now = performance.now();\r\n    if (lastPosRef.current) {\r\n      const dx = e.movementX;\r\n      const dy = e.movementY;\r\n      const dist = Math.sqrt(dx * dx + dy * dy);\r\n      setMoveDistance((prev) => prev + dist);\r\n\r\n      const dt = now - lastTimeRef.current;\r\n      if (dt > 0) {\r\n        setSpeed(Math.round((dist / dt) * 1000));\r\n      }\r\n    }\r\n    lastPosRef.current = { x, y };\r\n    lastTimeRef.current = now;\r\n\r\n    // Trail\r\n    setTrail((prev) => {\r\n      const next = [...prev, { x, y }];\r\n      return next.length > 200 ? next.slice(-200) : next;\r\n    });\r\n  }, []);\r\n\r\n  const handleWheel = useCallback((e: React.WheelEvent) => {\r\n    e.preventDefault();\r\n    setScrollDelta((prev) => ({\r\n      x: prev.x + e.deltaX,\r\n      y: prev.y + e.deltaY,\r\n      total: prev.total + Math.abs(e.deltaY) + Math.abs(e.deltaX),\r\n    }));\r\n  }, []);\r\n\r\n  const handleDoubleClick = useCallback((e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    setDoubleClicks((prev) => prev + 1);\r\n  }, []);\r\n\r\n  const handleContextMenu = useCallback((e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n  }, []);\r\n\r\n  // Draw trail on canvas\r\n  useEffect(() => {\r\n    const canvas = trailCanvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    if (trail.length < 2) return;\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(trail[0].x, trail[0].y);\r\n    for (let i = 1; i < trail.length; i++) {\r\n      ctx.lineTo(trail[i].x, trail[i].y);\r\n    }\r\n    ctx.strokeStyle = 'rgba(22, 119, 255, 0.3)';\r\n    ctx.lineWidth = 2;\r\n    ctx.lineCap = 'round';\r\n    ctx.lineJoin = 'round';\r\n    ctx.stroke();\r\n\r\n    // Draw recent dots\r\n    const recent = trail.slice(-20);\r\n    recent.forEach((p, i) => {\r\n      const alpha = (i + 1) / recent.length;\r\n      ctx.beginPath();\r\n      ctx.arc(p.x, p.y, 3 * alpha + 1, 0, Math.PI * 2);\r\n      ctx.fillStyle = `rgba(22, 119, 255, ${alpha * 0.6})`;\r\n      ctx.fill();\r\n    });\r\n  }, [trail]);\r\n\r\n  const handleReset = () => {\r\n    setClicks([]);\r\n    setButtonStates({});\r\n    setScrollDelta({ x: 0, y: 0, total: 0 });\r\n    setMoveDistance(0);\r\n    setSpeed(0);\r\n    setTrail([]);\r\n    setDoubleClicks(0);\r\n    lastPosRef.current = null;\r\n  };\r\n\r\n  // Calculate CPS (clicks per second) for last 5 seconds\r\n  const now = Date.now();\r\n  const recentClicks = clicks.filter((c) => now - c.timestamp < 5000);\r\n  const cps = recentClicks.length > 0 ? (recentClicks.length / 5).toFixed(1) : '0';\r\n\r\n  return (\r\n    <div className=\"mouse-test\">\r\n      <Row gutter={[16, 16]}>\r\n        {/* Test area */}\r\n        <Col xs={24} lg={16}>\r\n          <Card\r\n            title=\"Click Test Area\"\r\n            size=\"small\"\r\n            extra={\r\n              <button className=\"mouse-reset-btn\" onClick={handleReset}>\r\n                Reset\r\n              </button>\r\n            }\r\n          >\r\n            <div\r\n              ref={testAreaRef}\r\n              className=\"mouse-test-area\"\r\n              onMouseDown={handleMouseDown}\r\n              onMouseUp={handleMouseUp}\r\n              onMouseMove={handleMouseMove}\r\n              onWheel={handleWheel}\r\n              onDoubleClick={handleDoubleClick}\r\n              onContextMenu={handleContextMenu}\r\n            >\r\n              <canvas\r\n                ref={trailCanvasRef}\r\n                width={800}\r\n                height={400}\r\n                className=\"mouse-trail-canvas\"\r\n              />\r\n\r\n              {/* Click ripples */}\r\n              {clicks.slice(-30).map((c, i) => (\r\n                <div\r\n                  key={`${c.timestamp}-${i}`}\r\n                  className=\"mouse-click-ripple\"\r\n                  style={{\r\n                    left: c.x,\r\n                    top: c.y,\r\n                    borderColor: BUTTON_COLORS[c.button] || '#999',\r\n                  }}\r\n                />\r\n              ))}\r\n\r\n              {/* Crosshair */}\r\n              <div className=\"mouse-crosshair-h\" style={{ top: position.y }} />\r\n              <div className=\"mouse-crosshair-v\" style={{ left: position.x }} />\r\n\r\n              {/* Cursor dot */}\r\n              <div className=\"mouse-cursor-dot\" style={{ left: position.x, top: position.y }} />\r\n\r\n              {/* Instruction overlay */}\r\n              {clicks.length === 0 && (\r\n                <div className=\"mouse-test-overlay\">\r\n                  <Text type=\"secondary\" style={{ fontSize: 16 }}>\r\n                    Click, scroll, and move your mouse here\r\n                  </Text>\r\n                </div>\r\n              )}\r\n\r\n              {/* Position label */}\r\n              <div className=\"mouse-pos-label\">\r\n                ({Math.round(position.x)}, {Math.round(position.y)})\r\n              </div>\r\n            </div>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Stats panel */}\r\n        <Col xs={24} lg={8}>\r\n          <Space direction=\"vertical\" style={{ width: '100%' }} size={16}>\r\n            {/* Mouse buttons visual */}\r\n            <Card title=\"Mouse Buttons\" size=\"small\">\r\n              <div className=\"mouse-visual\">\r\n                <div className=\"mouse-body\">\r\n                  <div className=\"mouse-buttons-row\">\r\n                    <div\r\n                      className={`mouse-btn-visual mouse-btn-left ${buttonStates[0] ? 'mouse-btn-visual--active' : ''}`}\r\n                    >\r\n                      <span>L</span>\r\n                      <Tag color={buttonStates[0] ? 'blue' : 'default'}>{buttonCounts[0] || 0}</Tag>\r\n                    </div>\r\n                    <div\r\n                      className={`mouse-btn-visual mouse-btn-middle ${buttonStates[1] ? 'mouse-btn-visual--active' : ''}`}\r\n                    >\r\n                      <span>M</span>\r\n                      <Tag color={buttonStates[1] ? 'green' : 'default'}>\r\n                        {buttonCounts[1] || 0}\r\n                      </Tag>\r\n                    </div>\r\n                    <div\r\n                      className={`mouse-btn-visual mouse-btn-right ${buttonStates[2] ? 'mouse-btn-visual--active' : ''}`}\r\n                    >\r\n                      <span>R</span>\r\n                      <Tag color={buttonStates[2] ? 'red' : 'default'}>{buttonCounts[2] || 0}</Tag>\r\n                    </div>\r\n                  </div>\r\n                  {/* Scroll indicator */}\r\n                  <div className=\"mouse-scroll-visual\">\r\n                    <div\r\n                      className=\"mouse-scroll-indicator\"\r\n                      style={{\r\n                        transform: `translateY(${Math.max(-15, Math.min(15, -(scrollDelta.y % 100) / 3))}px)`,\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  {/* Side buttons */}\r\n                  <div className=\"mouse-side-buttons\">\r\n                    <div\r\n                      className={`mouse-side-btn ${buttonStates[3] ? 'mouse-side-btn--active' : ''}`}\r\n                    >\r\n                      <span>←</span>\r\n                      <small>{buttonCounts[3] || 0}</small>\r\n                    </div>\r\n                    <div\r\n                      className={`mouse-side-btn ${buttonStates[4] ? 'mouse-side-btn--active' : ''}`}\r\n                    >\r\n                      <span>→</span>\r\n                      <small>{buttonCounts[4] || 0}</small>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            {/* Stats */}\r\n            <Card title=\"Statistics\" size=\"small\">\r\n              <Row gutter={[12, 12]}>\r\n                <Col span={12}>\r\n                  <Statistic title=\"Total Clicks\" value={clicks.length} />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic title=\"Double Clicks\" value={doubleClicks} />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic title=\"CPS (5s)\" value={cps} />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic title=\"Speed\" value={speed} suffix=\"px/s\" />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic title=\"Distance\" value={Math.round(moveDistance)} suffix=\"px\" />\r\n                </Col>\r\n                <Col span={12}>\r\n                  <Statistic title=\"Scroll\" value={Math.round(scrollDelta.total)} suffix=\"Δ\" />\r\n                </Col>\r\n              </Row>\r\n            </Card>\r\n\r\n            {/* Scroll details */}\r\n            <Card title=\"Scroll Details\" size=\"small\">\r\n              <Descriptions column={1} size=\"small\" bordered>\r\n                <Descriptions.Item label=\"Vertical (Y)\">\r\n                  <Text code>{Math.round(scrollDelta.y)}</Text>\r\n                  {scrollDelta.y !== 0 && (\r\n                    <Tag color={scrollDelta.y > 0 ? 'orange' : 'cyan'} style={{ marginLeft: 8 }}>\r\n                      {scrollDelta.y > 0 ? '↓ Down' : '↑ Up'}\r\n                    </Tag>\r\n                  )}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Horizontal (X)\">\r\n                  <Text code>{Math.round(scrollDelta.x)}</Text>\r\n                  {scrollDelta.x !== 0 && (\r\n                    <Tag color={scrollDelta.x > 0 ? 'orange' : 'cyan'} style={{ marginLeft: 8 }}>\r\n                      {scrollDelta.x > 0 ? '→ Right' : '← Left'}\r\n                    </Tag>\r\n                  )}\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Total Scroll\">\r\n                  <Text code>{Math.round(scrollDelta.total)}</Text>\r\n                </Descriptions.Item>\r\n              </Descriptions>\r\n            </Card>\r\n\r\n            {/* Click log */}\r\n            <Card title=\"Recent Clicks\" size=\"small\">\r\n              <div className=\"mouse-click-log\">\r\n                {clicks.length === 0 && <Text type=\"secondary\">No clicks recorded yet</Text>}\r\n                {clicks\r\n                  .slice(-10)\r\n                  .reverse()\r\n                  .map((c, i) => (\r\n                    <div key={`${c.timestamp}-${i}`} className=\"mouse-click-log-item\">\r\n                      <Tag color={BUTTON_COLORS[c.button] || 'default'}>\r\n                        {BUTTON_NAMES[c.button] || `Button ${c.button}`}\r\n                      </Tag>\r\n                      <Text type=\"secondary\" style={{ fontSize: 12 }}>\r\n                        ({Math.round(c.x)}, {Math.round(c.y)})\r\n                      </Text>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            </Card>\r\n          </Space>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MouseTest;\r\n","import { PageContainer } from '@ant-design/pro-components';\r\nimport { Tabs } from 'antd';\r\nimport React from 'react';\r\nimport { history, useLocation } from 'umi';\r\nimport KeyboardTest from './KeyboardTest';\r\nimport CameraTest from './CameraTest';\r\nimport MicrophoneTest from './MicrophoneTest';\r\nimport HeadphoneTest from './HeadphoneTest';\r\nimport GamepadTest from './GamepadTest';\r\nimport MouseTest from './MouseTest';\r\nimport './styles.less';\r\n\r\nconst TABS = ['keyboard', 'camera', 'microphone', 'headphone', 'gamepad', 'mouse'] as const;\r\ntype TabKey = (typeof TABS)[number];\r\n\r\nfunction getTabFromPath(pathname: string): TabKey {\r\n  const last = pathname.split('/').pop() as TabKey;\r\n  return TABS.includes(last) ? last : 'keyboard';\r\n}\r\n\r\nconst DeviceTest: React.FC = () => {\r\n  const location = useLocation();\r\n  const activeTab = getTabFromPath(location.pathname);\r\n\r\n  const handleTabChange = (key: string) => {\r\n    history.push(`/utility/device-test/${key}`);\r\n  };\r\n\r\n  return (\r\n    <PageContainer\r\n      title=\"Device Test\"\r\n      subTitle=\"Test your keyboard, camera, microphone, headphone, gamepad & mouse\"\r\n    >\r\n      <div className=\"device-test-page\">\r\n        <Tabs\r\n          activeKey={activeTab}\r\n          onChange={handleTabChange}\r\n          type=\"card\"\r\n          size=\"large\"\r\n          items={[\r\n            {\r\n              key: 'keyboard',\r\n              label: '⌨️ Keyboard',\r\n              children: <KeyboardTest />,\r\n            },\r\n            {\r\n              key: 'camera',\r\n              label: '📷 Camera',\r\n              children: <CameraTest />,\r\n            },\r\n            {\r\n              key: 'microphone',\r\n              label: '🎤 Microphone',\r\n              children: <MicrophoneTest />,\r\n            },\r\n            {\r\n              key: 'headphone',\r\n              label: '🎧 Headphone',\r\n              children: <HeadphoneTest />,\r\n            },\r\n            {\r\n              key: 'gamepad',\r\n              label: '🎮 Gamepad',\r\n              children: <GamepadTest />,\r\n            },\r\n            {\r\n              key: 'mouse',\r\n              label: '🖱️ Mouse',\r\n              children: <MouseTest />,\r\n            },\r\n          ]}\r\n        />\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default DeviceTest;\r\n"],"names":[],"mappings":"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"}