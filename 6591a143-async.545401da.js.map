{"version":3,"sources":["node_modules/@ant-design/icons-svg/es/asn/ExpandOutlined.js","node_modules/@ant-design/icons/es/icons/ExpandOutlined.js","node_modules/@ant-design/icons/es/icons/ZoomOutOutlined.js","src/pages/MermaidEditor/constants.ts","/home/thanhnd/Downloads/code/ultimate-tool-web/src/pages/MermaidEditor/styles.less?asmodule","src/pages/MermaidEditor/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar ExpandOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z\" } }] }, \"name\": \"expand\", \"theme\": \"outlined\" };\nexport default ExpandOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExpandOutlinedSvg from \"@ant-design/icons-svg/es/asn/ExpandOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ExpandOutlined = function ExpandOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ExpandOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ExpandOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ExpandOutlined';\n}\nexport default RefIcon;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ZoomOutOutlinedSvg from \"@ant-design/icons-svg/es/asn/ZoomOutOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ZoomOutOutlined = function ZoomOutOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ZoomOutOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ZoomOutOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ZoomOutOutlined';\n}\nexport default RefIcon;","export const SAMPLE_DIAGRAMS: Record<string, { label: string; icon: string; code: string }> = {\n  flowchart: {\n    label: 'Flowchart',\n    icon: 'üìä',\n    code: `flowchart TD\n    A[Christmas] -->|Get money| B(Go shopping)\n    B --> C{Let me think}\n    C -->|One| D[Laptop]\n    C -->|Two| E[iPhone]\n    C -->|Three| F[fa:fa-car Car]`,\n  },\n  sequence: {\n    label: 'Sequence',\n    icon: 'üîÑ',\n    code: `sequenceDiagram\n    Alice->>+John: Hello John, how are you?\n    Alice->>+John: John, can you hear me?\n    John-->>-Alice: Hi Alice, I can hear you!\n    John-->>-Alice: I feel great!`,\n  },\n  classDiagram: {\n    label: 'Class',\n    icon: 'üèóÔ∏è',\n    code: `classDiagram\n    Animal <|-- Duck\n    Animal <|-- Fish\n    Animal <|-- Zebra\n    Animal : +int age\n    Animal : +String gender\n    Animal: +isMammal()\n    Animal: +mate()\n    class Duck{\n        +String beakColor\n        +swim()\n        +quack()\n    }\n    class Fish{\n        -int sizeInFeet\n        -canEat()\n    }\n    class Zebra{\n        +bool is_wild\n        +run()\n    }`,\n  },\n  stateDiagram: {\n    label: 'State',\n    icon: 'üî≤',\n    code: `stateDiagram-v2\n    [*] --> Still\n    Still --> [*]\n\n    Still --> Moving\n    Moving --> Still\n    Moving --> Crash\n    Crash --> [*]`,\n  },\n  erDiagram: {\n    label: 'Entity Relationship',\n    icon: 'üóÉÔ∏è',\n    code: `erDiagram\n    CUSTOMER ||--o{ ORDER : places\n    ORDER ||--|{ LINE-ITEM : contains\n    CUSTOMER }|..|{ DELIVERY-ADDRESS : uses`,\n  },\n  gantt: {\n    label: 'Gantt',\n    icon: 'üìÖ',\n    code: `gantt\n    title A Gantt Diagram\n    dateFormat YYYY-MM-DD\n    section Section\n        A task          :a1, 2024-01-01, 30d\n        Another task    :after a1, 20d\n    section Another\n        Task in Another :2024-01-12, 12d\n        another task    :24d`,\n  },\n  pie: {\n    label: 'Pie',\n    icon: 'ü•ß',\n    code: `pie title Pets adopted by volunteers\n    \"Dogs\" : 386\n    \"Cats\" : 85\n    \"Rats\" : 15`,\n  },\n  gitGraph: {\n    label: 'Git',\n    icon: 'üåø',\n    code: `gitGraph\n    commit\n    commit\n    branch develop\n    checkout develop\n    commit\n    commit\n    checkout main\n    merge develop\n    commit\n    commit`,\n  },\n  mindmap: {\n    label: 'Mindmap',\n    icon: 'üß†',\n    code: `mindmap\n  root((mindmap))\n    Origins\n      Long history\n      ::icon(fa fa-book)\n      Popularisation\n        British popular psychology author Tony Buzan\n    Research\n      On effectiveness<br/>and features\n      On Automatic creation\n        Uses\n            Creative techniques\n            Strategic planning\n            Argument mapping\n    Tools\n      Pen and paper\n      Mermaid`,\n  },\n  timeline: {\n    label: 'Timeline',\n    icon: '‚è≥',\n    code: `timeline\n    title History of Social Media Platform\n    2002 : LinkedIn\n    2004 : Facebook\n         : Google\n    2005 : YouTube\n    2006 : Twitter`,\n  },\n  quadrant: {\n    label: 'Quadrant',\n    icon: 'üìê',\n    code: `quadrantChart\n    title Reach and engagement of campaigns\n    x-axis Low Reach --> High Reach\n    y-axis Low Engagement --> High Engagement\n    quadrant-1 We should expand\n    quadrant-2 Need to promote\n    quadrant-3 Re-evaluate\n    quadrant-4 May be improved\n    Campaign A: [0.3, 0.6]\n    Campaign B: [0.45, 0.23]\n    Campaign C: [0.57, 0.69]\n    Campaign D: [0.78, 0.34]\n    Campaign E: [0.40, 0.34]\n    Campaign F: [0.35, 0.78]`,\n  },\n  sankey: {\n    label: 'Sankey',\n    icon: 'üåä',\n    code: `sankey-beta\n\nAgricultural 'waste',Bio-energy,124.729\nBio-energy,Electricity grid,29.544\nBio-energy,Losses,6.242\nBio-energy,Industry,10.544\nCoal imports,Coal,135.835\nCoal reserves,Coal,35.000\nCoal,Electricity grid,35.999\nCoal,Industry,11.606\nCoal,Losses,51.230`,\n  },\n  xychart: {\n    label: 'XY Chart',\n    icon: 'üìà',\n    code: `xychart-beta\n    title \"Sales Revenue\"\n    x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec]\n    y-axis \"Revenue (in $)\" 4000 --> 11000\n    bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]\n    line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]`,\n  },\n  block: {\n    label: 'Block',\n    icon: 'üß±',\n    code: `block-beta\ncolumns 1\n  db((\"DB\"))\n  blockArrowId6<[\"&nbsp;&nbsp;&nbsp;\"]>(down)\n  block:ID\n    A\n    B[\"A wide one in the middle\"]\n    C\n  end\n  space\n  D\n  ID --> D\n  C --> D\n  style B fill:#969,stroke:#333,stroke-width:4px`,\n  },\n  journey: {\n    label: 'User Journey',\n    icon: 'üö∂',\n    code: `journey\n    title My working day\n    section Go to work\n      Make tea: 5: Me\n      Go upstairs: 3: Me\n      Do work: 1: Me, Cat\n    section Go home\n      Go downstairs: 5: Me\n      Sit down: 5: Me`,\n  },\n  requirement: {\n    label: 'Requirement',\n    icon: 'üìã',\n    code: `requirementDiagram\n\n    requirement test_req {\n    id: 1\n    text: the test text.\n    risk: high\n    verifymethod: test\n    }\n\n    element test_entity {\n    type: simulation\n    }\n\n    test_entity - satisfies -> test_req`,\n  },\n  c4: {\n    label: 'C4',\n    icon: 'üè¢',\n    code: `C4Context\n      title System Context diagram for Internet Banking System\n      Enterprise_Boundary(b0, \"BankBoundary0\") {\n        Person(customerA, \"Banking Customer A\", \"A customer of the bank, with personal bank accounts.\")\n        System(SystemAA, \"Internet Banking System\", \"Allows customers to view information about their bank accounts, and make payments.\")\n\n        Enterprise_Boundary(b1, \"BankBoundary\") {\n          SystemDb_Ext(SystemE, \"Mainframe Banking System\", \"Stores all of the core banking information about customers, accounts, transactions, etc.\")\n          System_Boundary(b2, \"BankBoundary2\") {\n            System(SystemA, \"Banking System A\")\n          }\n        }\n      }\n\n      BiRel(customerA, SystemAA, \"Uses\")\n      Rel(SystemAA, SystemE, \"Uses\")\n      Rel(SystemAA, SystemA, \"Uses\")\n\n      UpdateRelStyle(customerA, SystemAA, $offsetY=\"10\")`,\n  },\n  kanban: {\n    label: 'Kanban',\n    icon: 'üìå',\n    code: `kanban\n  Todo\n    id1[Design new feature]\n    id2[Write documentation]\n  \"In Progress\"\n    id3[Implement login]@{ assigned: 'knsv' }\n  Done\n    id4[Setup CI/CD]\n    id5[Create test cases]`,\n  },\n};\n\nexport const DEFAULT_CODE = SAMPLE_DIAGRAMS.flowchart.code;\n\nexport const DEFAULT_CONFIG = `{\n  \"theme\": \"default\"\n}`;\n","\nimport \"/home/thanhnd/Downloads/code/ultimate-tool-web/src/pages/MermaidEditor/styles.less?modules\";\nexport default {\"fullscreenContent\": `fullscreenContent-5QHMvfvD`,\"mermaidEditorPageDark\": `mermaidEditorPageDark-0uqRHYPB`,\"previewPane\": `previewPane-V8yqv8mL`,\"toolbar\": `toolbar-P6PY3OSU`,\"sampleGrid\": `sampleGrid-ylYNvRTR`,\"errorMessage\": `errorMessage-09DphXw0`,\"editorPane\": `editorPane-uBafukMN`,\"editorTab\": `editorTab-LwbGvuQv`,\"mermaidOutput\": `mermaidOutput-h_lG0LPQ`,\"sampleIcon\": `sampleIcon-k03R-H5M`,\"fullscreenHeader\": `fullscreenHeader-vNwgiEM6`,\"toolbarLeft\": `toolbarLeft-rk4j-HZs`,\"editorContent\": `editorContent-JcQkascd`,\"previewContent\": `previewContent-STtgrtW-`,\"editorTabs\": `editorTabs-aLzkjWsc`,\"previewTitle\": `previewTitle-hC0wgeAG`,\"fullscreenOverlay\": `fullscreenOverlay-YsfxxJ3F`,\"active\": `active-NKZINbso`,\"toolbarRight\": `toolbarRight-kDAHcCSf`,\"previewHeader\": `previewHeader-zAfSNtTo`,\"editorContainer\": `editorContainer-r1mqEq7F`,\"previewActions\": `previewActions-ssoXK-lU`,\"mermaidEditorPage\": `mermaidEditorPage-h4k9NT7L`,\"sampleCard\": `sampleCard-HN8bm_zj`,\"sampleDiagramsPanel\": `sampleDiagramsPanel-fC-p95mX`}\n","import { useDarkMode } from '@/hooks/useDarkMode';\nimport { useIsMobile } from '@/hooks/useIsMobile';\nimport {\n  AimOutlined,\n  BorderOutlined,\n  CodeOutlined,\n  CopyOutlined,\n  DownloadOutlined,\n  ExpandOutlined,\n  EyeOutlined,\n  SettingOutlined,\n  CompressOutlined,\n  FileImageOutlined,\n  AppstoreOutlined,\n  ZoomInOutlined,\n  ZoomOutOutlined,\n} from '@ant-design/icons';\nimport Editor from '@monaco-editor/react';\nimport { Button, Collapse, ColorPicker, message, Splitter, Tooltip, Typography } from 'antd';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { DEFAULT_CODE, DEFAULT_CONFIG, SAMPLE_DIAGRAMS } from './constants';\nimport styles from './styles.less';\nimport classNames from 'classnames';\nimport mermaid from 'mermaid';\n\nconst { Title, Text } = Typography;\n\ntype EditorTab = 'code' | 'config';\n\nconst CHECKERBOARD_STYLE: React.CSSProperties = {\n  backgroundImage: [\n    'linear-gradient(45deg, rgba(0,0,0,0.06) 25%, transparent 25%)',\n    'linear-gradient(-45deg, rgba(0,0,0,0.06) 25%, transparent 25%)',\n    'linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.06) 75%)',\n    'linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.06) 75%)',\n  ].join(', '),\n  backgroundPosition: '0 0, 0 10px, 10px -10px, -10px 0px',\n  backgroundSize: '20px 20px',\n};\n\nconst getPreviewBgStyle = (bg: string, showGrid: boolean): React.CSSProperties => {\n  if (showGrid) {\n    return {\n      backgroundColor: bg,\n      ...CHECKERBOARD_STYLE,\n    };\n  }\n  return { backgroundColor: bg };\n};\n\nconst STORAGE_KEY = 'mermaid-editor';\n\nconst loadFromStorage = () => {\n  try {\n    const raw = localStorage.getItem(STORAGE_KEY);\n    if (raw) return JSON.parse(raw);\n  } catch {\n    // ignore\n  }\n  return null;\n};\n\nconst MermaidEditorPage: React.FC = () => {\n  const { darkMode } = useDarkMode();\n  const isMobile = useIsMobile();\n\n  const saved = useRef(loadFromStorage()).current;\n\n  const [code, setCode] = useState<string>(saved?.code ?? DEFAULT_CODE);\n  const [config, setConfig] = useState<string>(saved?.config ?? DEFAULT_CONFIG);\n  const [activeTab, setActiveTab] = useState<EditorTab>('code');\n  const [svgOutput, setSvgOutput] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [previewBg, setPreviewBg] = useState(\n    saved?.previewBg ?? (darkMode ? '#1f1f1f' : '#ffffff'),\n  );\n  const [showGrid, setShowGrid] = useState<boolean>(saved?.showGrid ?? true);\n\n  // Save to localStorage on change\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify({ code, config, previewBg, showGrid }));\n    } catch {\n      // ignore quota errors\n    }\n  }, [code, config, previewBg, showGrid]);\n\n  const BG_PRESETS = [\n    '#ffffff',\n    '#f5f5f5',\n    '#e8e8e8',\n    '#1f1f1f',\n    '#141414',\n    '#000000',\n    '#f0f5ff',\n    '#f6ffed',\n    '#fff7e6',\n    '#fff1f0',\n  ];\n\n  const previewRef = useRef<HTMLDivElement>(null);\n  const fullscreenPreviewRef = useRef<HTMLDivElement>(null);\n  const renderTimeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const renderIdRef = useRef(0);\n\n  // Pan & Zoom state\n  const [zoom, setZoom] = useState(1);\n  const [pan, setPan] = useState({ x: 0, y: 0 });\n  const isPanningRef = useRef(false);\n  const panStartRef = useRef({ x: 0, y: 0 });\n  const panOffsetRef = useRef({ x: 0, y: 0 });\n\n  // Fullscreen Pan & Zoom state\n  const [fsZoom, setFsZoom] = useState(1);\n  const [fsPan, setFsPan] = useState({ x: 0, y: 0 });\n  const isFsPanningRef = useRef(false);\n  const fsPanStartRef = useRef({ x: 0, y: 0 });\n  const fsPanOffsetRef = useRef({ x: 0, y: 0 });\n\n  const ZOOM_MIN = 0.1;\n  const ZOOM_MAX = 5;\n  const ZOOM_STEP = 0.1;\n\n  // Reset pan/zoom when diagram changes\n  useEffect(() => {\n    setZoom(1);\n    setPan({ x: 0, y: 0 });\n  }, [svgOutput]);\n\n  const resetView = () => {\n    setZoom(1);\n    setPan({ x: 0, y: 0 });\n  };\n\n  const resetFsView = () => {\n    setFsZoom(1);\n    setFsPan({ x: 0, y: 0 });\n  };\n\n  // Wheel zoom handler for preview (zoom toward mouse position)\n  const handleWheel = useCallback((e: React.WheelEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n    const centerX = rect.width / 2;\n    const centerY = rect.height / 2;\n\n    setZoom((prevZoom) => {\n      const delta = e.deltaY > 0 ? -ZOOM_STEP : ZOOM_STEP;\n      const newZoom = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, prevZoom + delta));\n      const scale = newZoom / prevZoom;\n\n      setPan((prevPan) => ({\n        x: mouseX - centerX - (mouseX - centerX - prevPan.x) * scale,\n        y: mouseY - centerY - (mouseY - centerY - prevPan.y) * scale,\n      }));\n\n      return newZoom;\n    });\n  }, []);\n\n  // Mouse pan handlers for preview\n  const handleMouseDown = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (e.button !== 0) return;\n      isPanningRef.current = true;\n      panStartRef.current = { x: e.clientX, y: e.clientY };\n      panOffsetRef.current = { ...pan };\n      e.currentTarget.style.cursor = 'grabbing';\n    },\n    [pan],\n  );\n\n  const handleMouseMove = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!isPanningRef.current) return;\n    const dx = e.clientX - panStartRef.current.x;\n    const dy = e.clientY - panStartRef.current.y;\n    setPan({ x: panOffsetRef.current.x + dx, y: panOffsetRef.current.y + dy });\n  }, []);\n\n  const handleMouseUp = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    isPanningRef.current = false;\n    e.currentTarget.style.cursor = 'grab';\n  }, []);\n\n  // Wheel zoom handler for fullscreen (zoom toward mouse position)\n  const handleFsWheel = useCallback((e: React.WheelEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    const rect = e.currentTarget.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n    const centerX = rect.width / 2;\n    const centerY = rect.height / 2;\n\n    setFsZoom((prevZoom) => {\n      const delta = e.deltaY > 0 ? -ZOOM_STEP : ZOOM_STEP;\n      const newZoom = Math.min(ZOOM_MAX, Math.max(ZOOM_MIN, prevZoom + delta));\n      const scale = newZoom / prevZoom;\n\n      setFsPan((prevPan) => ({\n        x: mouseX - centerX - (mouseX - centerX - prevPan.x) * scale,\n        y: mouseY - centerY - (mouseY - centerY - prevPan.y) * scale,\n      }));\n\n      return newZoom;\n    });\n  }, []);\n\n  // Mouse pan handlers for fullscreen\n  const handleFsMouseDown = useCallback(\n    (e: React.MouseEvent<HTMLDivElement>) => {\n      if (e.button !== 0) return;\n      isFsPanningRef.current = true;\n      fsPanStartRef.current = { x: e.clientX, y: e.clientY };\n      fsPanOffsetRef.current = { ...fsPan };\n      e.currentTarget.style.cursor = 'grabbing';\n    },\n    [fsPan],\n  );\n\n  const handleFsMouseMove = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!isFsPanningRef.current) return;\n    const dx = e.clientX - fsPanStartRef.current.x;\n    const dy = e.clientY - fsPanStartRef.current.y;\n    setFsPan({ x: fsPanOffsetRef.current.x + dx, y: fsPanOffsetRef.current.y + dy });\n  }, []);\n\n  const handleFsMouseUp = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    isFsPanningRef.current = false;\n    e.currentTarget.style.cursor = 'grab';\n  }, []);\n\n  // Initialize mermaid\n  useEffect(() => {\n    mermaid.initialize({\n      startOnLoad: false,\n      theme: darkMode ? 'dark' : 'default',\n      securityLevel: 'loose',\n      fontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n      flowchart: { useMaxWidth: false, htmlLabels: true, padding: 15 },\n      sequence: { useMaxWidth: false },\n      gantt: { useMaxWidth: false },\n      class: { useMaxWidth: false },\n      state: { useMaxWidth: false },\n      er: { useMaxWidth: false },\n      pie: { useMaxWidth: false },\n      journey: { useMaxWidth: false },\n    });\n  }, [darkMode]);\n\n  // Render diagram with debounce\n  const renderDiagram = useCallback(\n    async (mermaidCode: string, mermaidConfig: string) => {\n      if (renderTimeoutRef.current) {\n        clearTimeout(renderTimeoutRef.current);\n      }\n\n      renderTimeoutRef.current = setTimeout(async () => {\n        const currentId = ++renderIdRef.current;\n\n        try {\n          // Parse config\n          let parsedConfig: Record<string, any> = {};\n          try {\n            parsedConfig = JSON.parse(mermaidConfig);\n          } catch {\n            // ignore invalid config\n          }\n\n          // Re-initialize with config\n          mermaid.initialize({\n            startOnLoad: false,\n            theme: darkMode ? 'dark' : 'default',\n            securityLevel: 'loose',\n            fontFamily: '\"trebuchet ms\", verdana, arial, sans-serif',\n            flowchart: { useMaxWidth: false, htmlLabels: true, padding: 15 },\n            sequence: { useMaxWidth: false },\n            gantt: { useMaxWidth: false },\n            class: { useMaxWidth: false },\n            state: { useMaxWidth: false },\n            er: { useMaxWidth: false },\n            pie: { useMaxWidth: false },\n            journey: { useMaxWidth: false },\n            ...parsedConfig,\n          });\n\n          // Validate syntax\n          await mermaid.parse(mermaidCode);\n\n          // Render\n          const uniqueId = `mermaid-preview-${currentId}-${Date.now()}`;\n          const { svg } = await mermaid.render(uniqueId, mermaidCode);\n\n          if (currentId === renderIdRef.current) {\n            // Remove inline max-width from SVG to prevent text clipping\n            const cleanedSvg = svg\n              .replace(/max-width:\\s*[\\d.]+px;?/gi, '')\n              .replace(/style=\"/i, 'style=\"max-width:none!important;');\n            setSvgOutput(cleanedSvg);\n            setError('');\n          }\n        } catch (err: any) {\n          if (currentId === renderIdRef.current) {\n            setError(err?.message || 'Failed to render diagram');\n          }\n        }\n      }, 300);\n    },\n    [darkMode],\n  );\n\n  // Re-render on code/config change\n  useEffect(() => {\n    renderDiagram(code, config);\n    return () => {\n      if (renderTimeoutRef.current) {\n        clearTimeout(renderTimeoutRef.current);\n      }\n    };\n  }, [code, config, renderDiagram]);\n\n  // Copy SVG to clipboard\n  const handleCopySvg = async () => {\n    if (!svgOutput) {\n      message.warning('No diagram to copy');\n      return;\n    }\n    try {\n      await navigator.clipboard.writeText(svgOutput);\n      message.success('SVG copied to clipboard');\n    } catch {\n      message.error('Failed to copy');\n    }\n  };\n\n  // Copy code to clipboard\n  const handleCopyCode = async () => {\n    try {\n      await navigator.clipboard.writeText(code);\n      message.success('Code copied to clipboard');\n    } catch {\n      message.error('Failed to copy');\n    }\n  };\n\n  // Download as SVG\n  const handleDownloadSvg = () => {\n    if (!svgOutput) {\n      message.warning('No diagram to download');\n      return;\n    }\n    const blob = new Blob([svgOutput], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'mermaid-diagram.svg';\n    a.click();\n    URL.revokeObjectURL(url);\n    message.success('SVG downloaded');\n  };\n\n  // Download as PNG\n  const handleDownloadPng = () => {\n    if (!svgOutput) {\n      message.warning('No diagram to download');\n      return;\n    }\n\n    const svgEl = document.createElement('div');\n    svgEl.innerHTML = svgOutput;\n    const svgNode = svgEl.querySelector('svg');\n    if (!svgNode) return;\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const svgData = new XMLSerializer().serializeToString(svgNode);\n    const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\n    const url = URL.createObjectURL(svgBlob);\n    const img = new Image();\n\n    img.onload = () => {\n      const scale = 2; // 2x resolution\n      canvas.width = img.width * scale;\n      canvas.height = img.height * scale;\n      ctx.scale(scale, scale);\n      ctx.fillStyle = darkMode ? '#1f1f1f' : '#ffffff';\n      ctx.fillRect(0, 0, img.width, img.height);\n      ctx.drawImage(img, 0, 0);\n      canvas.toBlob((blob) => {\n        if (!blob) return;\n        const pngUrl = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = pngUrl;\n        a.download = 'mermaid-diagram.png';\n        a.click();\n        URL.revokeObjectURL(pngUrl);\n        message.success('PNG downloaded');\n      });\n      URL.revokeObjectURL(url);\n    };\n\n    img.src = url;\n  };\n\n  // Load sample diagram\n  const handleLoadSample = (key: string) => {\n    const sample = SAMPLE_DIAGRAMS[key];\n    if (sample) {\n      setCode(sample.code);\n      setActiveTab('code');\n    }\n  };\n\n  const editorContent = activeTab === 'code' ? code : config;\n  const editorLanguage = activeTab === 'code' ? 'markdown' : 'json';\n\n  const pageClass = classNames(styles.mermaidEditorPage, {\n    [styles.mermaidEditorPageDark]: darkMode,\n  });\n\n  return (\n    <div className={pageClass}>\n      {/* Toolbar */}\n      <div className={styles.toolbar}>\n        <div className={styles.toolbarLeft}>\n          <Title level={5} style={{ margin: 0 }}>\n            Mermaid Live Editor\n          </Title>\n          {error ? (\n            <Text type=\"danger\" style={{ fontSize: 12 }}>\n              ‚óè Syntax Error\n            </Text>\n          ) : svgOutput ? (\n            <Text type=\"success\" style={{ fontSize: 12 }}>\n              ‚óè Valid\n            </Text>\n          ) : null}\n        </div>\n        <div className={styles.toolbarRight}>\n          <Tooltip title=\"Copy Code\">\n            <Button icon={<CopyOutlined />} size=\"small\" onClick={handleCopyCode} />\n          </Tooltip>\n          <Tooltip title=\"Copy SVG\">\n            <Button icon={<CodeOutlined />} size=\"small\" onClick={handleCopySvg} />\n          </Tooltip>\n          <Tooltip title=\"Download SVG\">\n            <Button icon={<DownloadOutlined />} size=\"small\" onClick={handleDownloadSvg} />\n          </Tooltip>\n          <Tooltip title=\"Download PNG\">\n            <Button icon={<FileImageOutlined />} size=\"small\" onClick={handleDownloadPng} />\n          </Tooltip>\n          <Tooltip title=\"Fullscreen\">\n            <Button icon={<ExpandOutlined />} size=\"small\" onClick={() => setIsFullscreen(true)} />\n          </Tooltip>\n        </div>\n      </div>\n\n      {/* Main Editor & Preview */}\n      <Splitter className={styles.editorContainer} layout={isMobile ? 'vertical' : 'horizontal'}>\n        <Splitter.Panel defaultSize=\"30%\" min=\"20%\">\n          <div className={styles.editorPane}>\n            {/* Editor Tabs */}\n            <div className={styles.editorTabs}>\n              <div\n                className={classNames(styles.editorTab, { [styles.active]: activeTab === 'code' })}\n                onClick={() => setActiveTab('code')}\n              >\n                <CodeOutlined /> Code\n              </div>\n              <div\n                className={classNames(styles.editorTab, {\n                  [styles.active]: activeTab === 'config',\n                })}\n                onClick={() => setActiveTab('config')}\n              >\n                <SettingOutlined /> Config\n              </div>\n            </div>\n\n            {/* Code Editor */}\n            <div className={styles.editorContent}>\n              <Editor\n                height=\"100%\"\n                language={editorLanguage}\n                value={editorContent}\n                theme={darkMode ? 'vs-dark' : 'vs'}\n                onChange={(value) => {\n                  if (activeTab === 'code') {\n                    setCode(value || '');\n                  } else {\n                    setConfig(value || '');\n                  }\n                }}\n                options={{\n                  minimap: { enabled: false },\n                  fontSize: 14,\n                  lineNumbers: 'on',\n                  wordWrap: 'on',\n                  scrollBeyondLastLine: false,\n                  automaticLayout: true,\n                  padding: { top: 12 },\n                  tabSize: 2,\n                }}\n              />\n            </div>\n\n            {/* Sample Diagrams */}\n            <Collapse\n              ghost\n              size=\"small\"\n              items={[\n                {\n                  key: 'samples',\n                  label: (\n                    <span>\n                      <AppstoreOutlined /> Sample Diagrams\n                    </span>\n                  ),\n                  children: (\n                    <div className={styles.sampleDiagramsPanel}>\n                      <div className={styles.sampleGrid}>\n                        {Object.entries(SAMPLE_DIAGRAMS).map(([key, sample]) => (\n                          <div\n                            key={key}\n                            className={styles.sampleCard}\n                            onClick={() => handleLoadSample(key)}\n                          >\n                            <div className={styles.sampleIcon}>{sample.icon}</div>\n                            <div>{sample.label}</div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  ),\n                },\n              ]}\n            />\n          </div>\n        </Splitter.Panel>\n\n        <Splitter.Panel min=\"20%\">\n          <div className={styles.previewPane}>\n            {/* Preview Header */}\n            <div className={styles.previewHeader}>\n              <span className={styles.previewTitle}>\n                <EyeOutlined /> Preview\n                <Text type=\"secondary\" style={{ fontSize: 11, marginLeft: 8 }}>\n                  {Math.round(zoom * 100)}%\n                </Text>\n              </span>\n              <div className={styles.previewActions}>\n                <Tooltip title=\"Toggle Grid\">\n                  <Button\n                    type={showGrid ? 'primary' : 'text'}\n                    size=\"small\"\n                    icon={<BorderOutlined />}\n                    onClick={() => setShowGrid((v) => !v)}\n                  />\n                </Tooltip>\n                <ColorPicker\n                  size=\"small\"\n                  value={previewBg}\n                  onChange={(_, hex) => setPreviewBg(hex)}\n                  presets={[\n                    {\n                      label: 'Presets',\n                      colors: BG_PRESETS,\n                    },\n                  ]}\n                />\n                <Tooltip title=\"Zoom In\">\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<ZoomInOutlined />}\n                    onClick={() => setZoom((z) => Math.min(ZOOM_MAX, z + ZOOM_STEP))}\n                  />\n                </Tooltip>\n                <Tooltip title=\"Zoom Out\">\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<ZoomOutOutlined />}\n                    onClick={() => setZoom((z) => Math.max(ZOOM_MIN, z - ZOOM_STEP))}\n                  />\n                </Tooltip>\n                <Tooltip title=\"Reset View\">\n                  <Button type=\"text\" size=\"small\" icon={<AimOutlined />} onClick={resetView} />\n                </Tooltip>\n                <Tooltip title=\"Fullscreen\">\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    icon={<ExpandOutlined />}\n                    onClick={() => setIsFullscreen(true)}\n                  />\n                </Tooltip>\n              </div>\n            </div>\n\n            {/* Preview Content */}\n            <div\n              className={styles.previewContent}\n              ref={previewRef}\n              onWheel={handleWheel}\n              onMouseDown={handleMouseDown}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseUp}\n              style={{ cursor: 'grab', ...getPreviewBgStyle(previewBg, showGrid) }}\n            >\n              {error ? (\n                <div className={styles.errorMessage}>{error}</div>\n              ) : svgOutput ? (\n                <div\n                  className={styles.mermaidOutput}\n                  style={{\n                    transform: `translate(${pan.x}px, ${pan.y}px) scale(${zoom})`,\n                    transformOrigin: 'center center',\n                    transition: isPanningRef.current ? 'none' : 'transform 0.1s ease-out',\n                  }}\n                  dangerouslySetInnerHTML={{ __html: svgOutput }}\n                />\n              ) : (\n                <Text type=\"secondary\">Enter Mermaid code to see preview...</Text>\n              )}\n            </div>\n          </div>\n        </Splitter.Panel>\n      </Splitter>\n\n      {/* Fullscreen Preview */}\n      {isFullscreen && (\n        <div className={styles.fullscreenOverlay}>\n          <div className={styles.fullscreenHeader}>\n            <Title level={5} style={{ margin: 0 }}>\n              Mermaid Diagram Preview\n            </Title>\n            <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n              <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                {Math.round(fsZoom * 100)}%\n              </Text>\n              <Tooltip title=\"Zoom In\">\n                <Button\n                  size=\"small\"\n                  icon={<ZoomInOutlined />}\n                  onClick={() => setFsZoom((z) => Math.min(ZOOM_MAX, z + ZOOM_STEP))}\n                />\n              </Tooltip>\n              <Tooltip title=\"Zoom Out\">\n                <Button\n                  size=\"small\"\n                  icon={<ZoomOutOutlined />}\n                  onClick={() => setFsZoom((z) => Math.max(ZOOM_MIN, z - ZOOM_STEP))}\n                />\n              </Tooltip>\n              <Tooltip title=\"Reset View\">\n                <Button size=\"small\" icon={<AimOutlined />} onClick={resetFsView} />\n              </Tooltip>\n              <Button\n                icon={<CompressOutlined />}\n                onClick={() => {\n                  setIsFullscreen(false);\n                  resetFsView();\n                }}\n              >\n                Exit Fullscreen\n              </Button>\n            </div>\n          </div>\n          <div\n            className={styles.fullscreenContent}\n            ref={fullscreenPreviewRef}\n            onWheel={handleFsWheel}\n            onMouseDown={handleFsMouseDown}\n            onMouseMove={handleFsMouseMove}\n            onMouseUp={handleFsMouseUp}\n            onMouseLeave={handleFsMouseUp}\n            style={{ cursor: 'grab', ...getPreviewBgStyle(previewBg, showGrid) }}\n          >\n            {error ? (\n              <div className={styles.errorMessage}>{error}</div>\n            ) : svgOutput ? (\n              <div\n                className={styles.mermaidOutput}\n                style={{\n                  transform: `translate(${fsPan.x}px, ${fsPan.y}px) scale(${fsZoom})`,\n                  transformOrigin: 'center center',\n                  transition: isFsPanningRef.current ? 'none' : 'transform 0.1s ease-out',\n                }}\n                dangerouslySetInnerHTML={{ __html: svgOutput }}\n              />\n            ) : (\n              <Text type=\"secondary\">No diagram to display</Text>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MermaidEditorPage;\n"],"names":[],"mappings":"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"}