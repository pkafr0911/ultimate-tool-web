{"version":3,"sources":["node_modules/@ant-design/icons-svg/es/asn/InfoCircleOutlined.js","node_modules/@ant-design/icons/es/icons/InfoCircleOutlined.js","node_modules/@ant-design/icons/es/icons/LoadingOutlined.js","src/pages/PNGJPEG/utils/ImageEditorEngine.tsx","src/pages/PNGJPEG/utils/helpers.tsx","src/pages/PNGJPEG/components/ImageEditor/ImageCanvas.tsx","node_modules/@ant-design/icons/es/icons/RotateLeftOutlined.js","node_modules/@ant-design/icons-svg/es/asn/ScissorOutlined.js","node_modules/@ant-design/icons/es/icons/ScissorOutlined.js","node_modules/@ant-design/icons-svg/es/asn/ExportOutlined.js","node_modules/@ant-design/icons/es/icons/ExportOutlined.js","src/pages/PNGJPEG/components/ImageEditor/ImageEditorToolbar.tsx","src/pages/PNGJPEG/components/ImageEditor/index.tsx","src/pages/PNGJPEG/hooks/useCanvas.tsx","src/pages/PNGJPEG/hooks/useHistory.tsx","src/pages/PNGJPEG/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar InfoCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"info-circle\", \"theme\": \"outlined\" };\nexport default InfoCircleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport InfoCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/InfoCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar InfoCircleOutlined = function InfoCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: InfoCircleOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(InfoCircleOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'InfoCircleOutlined';\n}\nexport default RefIcon;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LoadingOutlinedSvg from \"@ant-design/icons-svg/es/asn/LoadingOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar LoadingOutlined = function LoadingOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: LoadingOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(LoadingOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'LoadingOutlined';\n}\nexport default RefIcon;","export type ImageDataLike = ImageData;\n\nexport function createCanvas(w: number, h: number) {\n  const c = document.createElement('canvas');\n  c.width = w;\n  c.height = h;\n  return c;\n}\n\nexport function drawImageToCanvasFromUrl(url: string): Promise<HTMLCanvasElement> {\n  return new Promise((res, rej) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => {\n      const c = createCanvas(img.naturalWidth, img.naturalHeight);\n      const ctx = c.getContext('2d')!;\n      ctx.drawImage(img, 0, 0);\n      res(c);\n    };\n    img.onerror = rej;\n    img.src = url;\n  });\n}\n\nexport function cloneImageData(src: ImageDataLike): ImageData {\n  const out = new ImageData(src.width, src.height);\n  out.data.set(new Uint8ClampedArray(src.data));\n  return out;\n}\n\nexport function applyBrightnessContrast(data: ImageData, brightness = 0, contrast = 0) {\n  // brightness in [-255,255], contrast in [-100,100]\n  const d = data.data;\n  const c = contrast / 100 + 1;\n  const intercept = 128 * (1 - c);\n  for (let i = 0; i < d.length; i += 4) {\n    d[i] = Math.min(255, Math.max(0, d[i] * c + intercept + brightness));\n    d[i + 1] = Math.min(255, Math.max(0, d[i + 1] * c + intercept + brightness));\n    d[i + 2] = Math.min(255, Math.max(0, d[i + 2] * c + intercept + brightness));\n  }\n  return data;\n}\n\nexport function applyConvolution(data: ImageData, kernel: number[], kernelSize: number) {\n  const w = data.width;\n  const h = data.height;\n  const src = data.data;\n  const out = new Uint8ClampedArray(src.length);\n  const half = Math.floor(kernelSize / 2);\n\n  for (let y = 0; y < h; y++) {\n    for (let x = 0; x < w; x++) {\n      let r = 0,\n        g = 0,\n        b = 0,\n        a = 0;\n      for (let ky = 0; ky < kernelSize; ky++) {\n        for (let kx = 0; kx < kernelSize; kx++) {\n          const px = x + kx - half;\n          const py = y + ky - half;\n          if (px < 0 || px >= w || py < 0 || py >= h) continue;\n          const idx = (py * w + px) * 4;\n          const kval = kernel[ky * kernelSize + kx];\n          r += src[idx] * kval;\n          g += src[idx + 1] * kval;\n          b += src[idx + 2] * kval;\n          a += src[idx + 3] * kval;\n        }\n      }\n      const idx = (y * w + x) * 4;\n      out[idx] = Math.min(255, Math.max(0, r));\n      out[idx + 1] = Math.min(255, Math.max(0, g));\n      out[idx + 2] = Math.min(255, Math.max(0, b));\n      out[idx + 3] = Math.min(255, Math.max(0, a || src[idx + 3]));\n    }\n  }\n\n  data.data.set(out);\n  return data;\n}\n\nexport const Kernels = {\n  sharpen: [0, -1, 0, -1, 5, -1, 0, -1, 0],\n  blur3: [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9],\n  gaussian5: [\n    1 / 273,\n    4 / 273,\n    7 / 273,\n    4 / 273,\n    1 / 273,\n    4 / 273,\n    16 / 273,\n    26 / 273,\n    16 / 273,\n    4 / 273,\n    7 / 273,\n    26 / 273,\n    41 / 273,\n    26 / 273,\n    7 / 273,\n    4 / 273,\n    16 / 273,\n    26 / 273,\n    16 / 273,\n    4 / 273,\n    1 / 273,\n    4 / 273,\n    7 / 273,\n    4 / 273,\n    1 / 273,\n  ],\n  // -------- New dynamic blur kernel generators --------\n  generateBoxBlurKernel(size: number) {\n    const s = size | 0;\n    const count = s * s;\n    return Array(count).fill(1 / count);\n  },\n\n  generateGaussianKernel(radius: number) {\n    const r = radius | 0;\n    const size = r * 2 + 1;\n    const sigma = r / 2;\n    const twoSigmaSq = 2 * sigma * sigma;\n\n    let kernel: number[] = [];\n    let sum = 0;\n\n    for (let y = -r; y <= r; y++) {\n      for (let x = -r; x <= r; x++) {\n        const v = Math.exp(-(x * x + y * y) / twoSigmaSq);\n        kernel.push(v);\n        sum += v;\n      }\n    }\n\n    // normalize Gaussian kernel\n    return kernel.map((v) => v / sum);\n  },\n};\n\nexport function applyThresholdAlpha(data: ImageData, threshold = 255) {\n  // If pixel is near-white (all channels > threshold), set alpha = 0\n  const d = data.data;\n  for (let i = 0; i < d.length; i += 4) {\n    if (d[i] > threshold && d[i + 1] > threshold && d[i + 2] > threshold) {\n      d[i + 3] = 0;\n    }\n  }\n  return data;\n}\n\nexport function applyThresholdAlphaBlack(data: ImageData, threshold = 0) {\n  // If pixel is near-black (all RGB channels < threshold), set alpha = 0\n  const d = data.data;\n  for (let i = 0; i < d.length; i += 4) {\n    if (d[i] < threshold && d[i + 1] < threshold && d[i + 2] < threshold) {\n      d[i + 3] = 0;\n    }\n  }\n  return data;\n}\n\nexport function flipHorizontal(canvas: HTMLCanvasElement) {\n  const ctx = canvas.getContext('2d')!;\n  ctx.save();\n  ctx.translate(canvas.width, 0);\n  ctx.scale(-1, 1);\n  const img = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.putImageData(img, 0, 0);\n  ctx.restore();\n}\n\nexport function flipVertical(canvas: HTMLCanvasElement) {\n  const ctx = canvas.getContext('2d')!;\n  ctx.save();\n  ctx.translate(0, canvas.height);\n  ctx.scale(1, -1);\n  const img = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.putImageData(img, 0, 0);\n  ctx.restore();\n}\n\nexport function rotateCanvas(canvas: HTMLCanvasElement, degrees: number) {\n  const radians = (degrees * Math.PI) / 180;\n  const w = canvas.width;\n  const h = canvas.height;\n  const c2 = createCanvas(h, w); // Swap dims if 90/270\n  const ctx2 = c2.getContext('2d')!;\n  ctx2.translate(c2.width / 2, c2.height / 2);\n  ctx2.rotate(radians);\n  ctx2.drawImage(canvas, -w / 2, -h / 2);\n  // resize original\n  canvas.width = c2.width;\n  canvas.height = c2.height;\n  const ctx = canvas.getContext('2d')!;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.drawImage(c2, 0, 0);\n}\n\nexport function exportCanvasToBlob(\n  canvas: HTMLCanvasElement,\n  type = 'image/png',\n  quality = 0.92,\n): Promise<Blob> {\n  return new Promise((res) => canvas.toBlob((b) => res(b as Blob), type, quality));\n}\n\n/**\n * Simple homography for perspective correction using ctx.setTransform is not enough.\n * We'll implement a basic 4-point to 4-point transform by drawing using an offscreen canvas with\n * path clipping and mapping via getImageData sampling. For moderate sizes, this works.\n * Note: For high-quality projective transforms consider using WebGL or external libs.\n */\nexport function perspectiveTransform(\n  srcCanvas: HTMLCanvasElement,\n  srcQuad: [number, number, number, number, number, number, number, number],\n  destW: number,\n  destH: number,\n): HTMLCanvasElement {\n  // srcQuad: [x0,y0, x1,y1, x2,y2, x3,y3] (clockwise)\n  // create dest canvas\n  const dest = createCanvas(destW, destH);\n  const dctx = dest.getContext('2d')!;\n  // We'll use a very simple approach: use temporary canvas and ctx.setTransform for affine approx\n  // That is, we split quad into two triangles and map each triangle using affine transform\n  const sctx = srcCanvas.getContext('2d')!;\n  const sData = sctx.getImageData(0, 0, srcCanvas.width, srcCanvas.height);\n\n  function mapTriangle(sTri: number[], dTri: number[]) {\n    // sTri and dTri are arrays of 3 points [x0,y0,x1,y1,x2,y2]\n    // compute affine transform matrix from d -> s, then draw via setTransform + clipping\n    const [sx0, sy0, sx1, sy1, sx2, sy2] = sTri;\n    const [dx0, dy0, dx1, dy1, dx2, dy2] = dTri;\n\n    // compute matrix A so that [sx] = A * [dx,dy,1]\n    // Solve linear equations for a,b,c,d,e,f\n    const denom = dx0 * (dy1 - dy2) + dx1 * (dy2 - dy0) + dx2 * (dy0 - dy1);\n    if (Math.abs(denom) < 1e-6) return;\n\n    // Use Canvas API trick:\n    // create path for dTri on dest canvas, clip, set transform to map dTri bbox -> sTri and draw sCanvas\n    dctx.save();\n    dctx.beginPath();\n    dctx.moveTo(dx0, dy0);\n    dctx.lineTo(dx1, dy1);\n    dctx.lineTo(dx2, dy2);\n    dctx.closePath();\n    dctx.clip();\n\n    // compute affine matrix that maps dest tri -> src tri\n    // Build matrices and solve. Simpler: use ctx.transform to map bounding boxes; this is approximate.\n    // For simplicity and decent quality, draw full src into dest and let clip mask show triangle - this tends to be fine for small edits\n    dctx.drawImage(srcCanvas, 0, 0, destW, destH);\n    dctx.restore();\n  }\n\n  // split into two triangles:\n  const [x0, y0, x1, y1, x2, y2, x3, y3] = srcQuad;\n  // dest triangles are basically rectangle triangles\n  mapTriangle([x0, y0, x1, y1, x2, y2], [0, 0, destW, 0, 0, destH]);\n  mapTriangle([x2, y2, x3, y3, x0, y0], [destW, destH, 0, destH, destW, 0]);\n  return dest;\n}\n","import { message } from 'antd';\nimport {\n  applyBrightnessContrast,\n  applyConvolution,\n  applyThresholdAlpha,\n  applyThresholdAlphaBlack,\n  cloneImageData,\n  createCanvas,\n  exportCanvasToBlob,\n  Kernels,\n} from './ImageEditorEngine';\n\n// rotate\nexport const rotate = (deg: number, canvasRef, overlayRef, history) => {\n  if (!canvasRef.current) return;\n  // create temp canvas and rotate\n  const src = canvasRef.current;\n  const tmp = createCanvas(src.width, src.height);\n  const tctx = tmp.getContext('2d')!;\n  tctx.drawImage(src, 0, 0);\n  const dest = createCanvas(src.height, src.width);\n  const dctx = dest.getContext('2d')!;\n  dctx.translate(dest.width / 2, dest.height / 2);\n  dctx.rotate((deg * Math.PI) / 180);\n  dctx.drawImage(tmp, -tmp.width / 2, -tmp.height / 2);\n  // replace\n  canvasRef.current.width = dest.width;\n  canvasRef.current.height = dest.height;\n  overlayRef.current!.width = dest.width;\n  overlayRef.current!.height = dest.height;\n  const wctx = canvasRef.current.getContext('2d')!;\n  wctx.clearRect(0, 0, dest.width, dest.height);\n  wctx.drawImage(dest, 0, 0);\n  history.push(canvasRef.current.toDataURL(), `Rotate ${deg}`);\n};\n\n// exportImage\nexport const exportImage = async (asJpeg = false, canvasRef, onExport) => {\n  if (!canvasRef.current) return;\n  const blob = await exportCanvasToBlob(\n    canvasRef.current,\n    asJpeg ? 'image/jpeg' : 'image/png',\n    0.92,\n  );\n  if (onExport) onExport(blob);\n  // auto download\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = asJpeg ? 'edited.jpg' : 'edited.png';\n  a.click();\n  URL.revokeObjectURL(url);\n  message.success('Exported image');\n};\n\n// copy to clipboard (image)\nexport const copyToClipboard = async (canvasRef) => {\n  if (!canvasRef.current) return;\n  try {\n    const blob = await exportCanvasToBlob(canvasRef.current, 'image/png');\n    // @ts-ignore navigator.clipboard\n    await (navigator.clipboard as any).write([new ClipboardItem({ 'image/png': blob })]);\n    message.success('Image copied to clipboard');\n  } catch (err) {\n    console.warn('clipboard failed', err);\n    message.error('Copy failed (browser may not support)');\n  }\n};\n\n// flip\nexport const flipH = (canvasRef, history) => {\n  if (!canvasRef.current) return;\n  const ctx = canvasRef.current.getContext('2d')!;\n  const tmp = createCanvas(canvasRef.current.width, canvasRef.current.height);\n  tmp.getContext('2d')!.drawImage(canvasRef.current, 0, 0);\n  ctx.save();\n  ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n  ctx.scale(-1, 1);\n  ctx.drawImage(tmp, -canvasRef.current.width, 0);\n  ctx.restore();\n  history.push(canvasRef.current.toDataURL(), 'Flip horizontal');\n};\nexport const flipV = (canvasRef, history) => {\n  if (!canvasRef.current) return;\n  const ctx = canvasRef.current.getContext('2d')!;\n  const tmp = createCanvas(canvasRef.current.width, canvasRef.current.height);\n  tmp.getContext('2d')!.drawImage(canvasRef.current, 0, 0);\n  ctx.save();\n  ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n  ctx.scale(1, -1);\n  ctx.drawImage(tmp, 0, -canvasRef.current.height);\n  ctx.restore();\n  history.push(canvasRef.current.toDataURL(), 'Flip vertical');\n};\n\n// Crop: apply cropRect to canvas\nexport const applyCrop = (canvasRef, overlayRef, cropRect, setCropRect, history) => {\n  if (!canvasRef.current || !cropRect) return;\n  const c = createCanvas(Math.max(1, Math.round(cropRect.w)), Math.max(1, Math.round(cropRect.h)));\n  const ctx = c.getContext('2d')!;\n  ctx.drawImage(\n    canvasRef.current,\n    cropRect.x,\n    cropRect.y,\n    cropRect.w,\n    cropRect.h,\n    0,\n    0,\n    cropRect.w,\n    cropRect.h,\n  );\n  // replace current canvas\n  canvasRef.current.width = c.width;\n  canvasRef.current.height = c.height;\n  overlayRef.current!.width = c.width;\n  overlayRef.current!.height = c.height;\n  const wctx = canvasRef.current.getContext('2d')!;\n  wctx.clearRect(0, 0, c.width, c.height);\n  wctx.drawImage(c, 0, 0);\n  setCropRect(null);\n  history.push(canvasRef.current.toDataURL(), 'Cropped');\n};\n\n/** --- COLOR PICKER --- */\nexport const samplePixel = (e: MouseEvent, canvasRef, zoom) => {\n  const canvas = canvasRef.current;\n  if (!canvas) return null;\n\n  const rect = canvas.getBoundingClientRect();\n  const x = Math.floor((e.clientX - rect.left) / zoom);\n  const y = Math.floor((e.clientY - rect.top) / zoom);\n  if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) return null;\n\n  const ctx = canvas.getContext('2d', { willReadFrequently: true });\n  if (!ctx) return null;\n  const p = ctx.getImageData(x, y, 1, 1).data;\n  return `#${[p[0], p[1], p[2]].map((v) => v.toString(16).padStart(2, '0')).join('')}`;\n};\n\n// Store previous effects to detect changes\nlet previousEffects = {\n  blur: 0,\n  gaussian: 0,\n  sharpen: 0,\n  bgThreshold: 0,\n  bgThresholdBlack: 0,\n  brightness: 0,\n  contrast: 0,\n};\n\n//cache the base image once\nlet cachedBaseImageData: ImageData | null = null;\n\nexport const applyEffects = (\n  canvasRef,\n  baseCanvas,\n  {\n    blur = 0,\n    gaussian = 0,\n    sharpen = 0,\n    bgThreshold = 0,\n    bgThresholdBlack = 0,\n    brightness = 0,\n    contrast = 0,\n  },\n  history,\n) => {\n  if (!canvasRef.current || !baseCanvas) return;\n\n  const ctx = canvasRef.current.getContext('2d')!;\n  const baseCtx = baseCanvas.getContext('2d')!;\n\n  // Cache base data once\n  if (!cachedBaseImageData)\n    cachedBaseImageData = baseCtx.getImageData(0, 0, baseCanvas.width, baseCanvas.height);\n\n  // Always start from cached original\n  if (!cachedBaseImageData) return;\n  let cloned = cloneImageData(cachedBaseImageData);\n\n  // Check if any effect actually applied â†’ if not, return early (optimization)\n  if (\n    blur === 0 &&\n    gaussian === 0 &&\n    sharpen === 0 &&\n    bgThreshold === 0 &&\n    bgThresholdBlack === 0 &&\n    brightness === 0 &&\n    contrast === 0\n  ) {\n    ctx.putImageData(cloned, 0, 0);\n    return;\n  }\n\n  // Apply effects sequentially\n  if (blur > 0) {\n    const size = blur % 2 === 0 ? blur + 1 : blur;\n    applyConvolution(cloned, Kernels.generateBoxBlurKernel(size), size);\n  }\n\n  if (gaussian > 0) {\n    const r = gaussian;\n    applyConvolution(cloned, Kernels.generateGaussianKernel(r), r * 2 + 1);\n  }\n\n  if (sharpen > 0) {\n    const kernel = Kernels.sharpen.map((v) =>\n      v === 5 ? 1 + sharpen * 4 : v === -1 ? -sharpen : v,\n    );\n    applyConvolution(cloned, kernel, 3);\n  }\n\n  if (bgThreshold < 255) applyThresholdAlpha(cloned, bgThreshold);\n\n  if (bgThresholdBlack > 0) applyThresholdAlphaBlack(cloned, bgThresholdBlack);\n\n  if (brightness !== 0 || contrast !== 0) applyBrightnessContrast(cloned, brightness, contrast);\n\n  // Draw final image\n  ctx.putImageData(cloned, 0, 0);\n\n  const changedEffects = Object.entries({\n    blur,\n    gaussian,\n    sharpen,\n    bgThreshold,\n    bgThresholdBlack,\n    brightness,\n    contrast,\n  }).filter(([key, value]) => previousEffects[key] !== value);\n\n  // If no effect changed â†’ do nothing\n  if (changedEffects.length === 0) return;\n\n  // Create history label using only changed values\n  const historyLabel = changedEffects.map(([key, value]) => `${key}=${value}`).join(', ');\n\n  history.push(canvasRef.current.toDataURL(), `Effects: ${historyLabel}`);\n\n  // Update previous values\n  previousEffects = {\n    blur,\n    gaussian,\n    sharpen,\n    bgThreshold,\n    bgThresholdBlack,\n    brightness,\n    contrast,\n  };\n};\n","// src/components/ImageCanvas.tsx\nimport React from 'react';\n\ntype HoverColor = {\n  x: number;\n  y: number;\n  color: string;\n};\n\ntype ImageCanvasProps = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  overlayRef: React.RefObject<HTMLCanvasElement>;\n  containerRef: React.RefObject<HTMLDivElement>;\n  offset: { x: number; y: number };\n  zoom: number;\n  tool: string;\n  currentCursor: string;\n  hoverColor: HoverColor | null;\n  onMouseDown: (e: React.MouseEvent) => void;\n  onMouseMove: (e: React.MouseEvent) => void;\n  onMouseUp: () => void;\n};\n\nconst ImageCanvas: React.FC<ImageCanvasProps> = ({\n  canvasRef,\n  overlayRef,\n  containerRef,\n  offset,\n  zoom,\n  tool,\n  currentCursor,\n  hoverColor,\n  onMouseDown,\n  onMouseMove,\n  onMouseUp,\n}) => {\n  return (\n    <div\n      ref={containerRef}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseUp={onMouseUp}\n      style={{\n        width: '100%',\n        height: '100vh',\n        overflow: 'hidden',\n        border: '1px solid #eee',\n        position: 'relative',\n        background: '#fafafa',\n        cursor: currentCursor,\n      }}\n    >\n      <canvas\n        ref={canvasRef}\n        style={{\n          transform: `translate(${offset.x}px, ${offset.y}px) scale(${zoom})`,\n          transformOrigin: 'top left',\n          display: 'block',\n        }}\n      />\n      <canvas\n        ref={overlayRef}\n        style={{\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          pointerEvents: 'none',\n          transform: `translate(${offset.x}px, ${offset.y}px) scale(${zoom})`,\n          transformOrigin: 'top left',\n        }}\n      />\n      {hoverColor && tool === 'color' && (\n        <div\n          style={{\n            position: 'fixed', // use fixed to position relative to viewport\n            left: hoverColor.x + 12,\n            top: hoverColor.y + 12,\n            background: '#fff',\n            padding: '4px 8px',\n            borderRadius: 4,\n            boxShadow: '0 0 6px rgba(0,0,0,0.2)',\n            fontSize: 12,\n            zIndex: 999999,\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            gap: 6,\n          }}\n        >\n          <span\n            style={{\n              display: 'inline-block',\n              width: 12,\n              height: 12,\n              background: hoverColor.color,\n              border: '1px solid #ccc',\n            }}\n          />\n          {hoverColor.color}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageCanvas;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport RotateLeftOutlinedSvg from \"@ant-design/icons-svg/es/asn/RotateLeftOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar RotateLeftOutlined = function RotateLeftOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: RotateLeftOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(RotateLeftOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'RotateLeftOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ScissorOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z\" } }] }, \"name\": \"scissor\", \"theme\": \"outlined\" };\nexport default ScissorOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ScissorOutlinedSvg from \"@ant-design/icons-svg/es/asn/ScissorOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ScissorOutlined = function ScissorOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ScissorOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ScissorOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ScissorOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar ExportOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"fill-rule\": \"evenodd\", \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z\" } }] }, \"name\": \"export\", \"theme\": \"outlined\" };\nexport default ExportOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExportOutlinedSvg from \"@ant-design/icons-svg/es/asn/ExportOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar ExportOutlined = function ExportOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ExportOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(ExportOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'ExportOutlined';\n}\nexport default RefIcon;","import React from 'react';\nimport { Button, Divider, Slider, Space, Tooltip, message, ColorPicker, InputNumber } from 'antd';\nimport {\n  UndoOutlined,\n  RedoOutlined,\n  RotateLeftOutlined,\n  RotateRightOutlined,\n  SwapOutlined,\n  BgColorsOutlined,\n  ScissorOutlined,\n  ExportOutlined,\n  CopyOutlined,\n  EditOutlined,\n} from '@ant-design/icons';\nimport { applyEffects, copyToClipboard, flipH, flipV, rotate } from '../../utils/helpers';\nimport {\n  applyBrightnessContrast,\n  applyThresholdAlpha,\n  cloneImageData,\n} from '../../utils/ImageEditorEngine';\ntype HistoryItem = {\n  url: string;\n  label?: string;\n};\n\ntype Props = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  baseCanvas?: HTMLCanvasElement | null;\n  history: {\n    history: HistoryItem[];\n    index: number;\n    current: HistoryItem;\n    push: (url: string, label?: string) => void;\n    undo: () => void;\n    redo: () => void;\n  };\n  drawColor: string;\n  setDrawColor: (color: string) => void;\n  drawLineWidth: number;\n  setDrawLineWidth: (width: number) => void;\n  setTool: any;\n  brightness: number;\n  setBrightness: (v: number) => void;\n  contrast: number;\n  setContrast: (v: number) => void;\n  blur: number;\n  setBlur: (v: number) => void;\n  gaussian: number;\n  setGaussian: (v: number) => void;\n  sharpen: number;\n  setSharpen: (v: number) => void;\n  bgThreshold: number;\n  setBgThreshold: (v: number) => void;\n  bgThresholdBlack: number;\n  setBgThresholdBlack: (v: number) => void;\n  setShowPerspectiveModal: (show: boolean) => void;\n  dpiMeasured?: number | null;\n  setDpiMeasured?: (v: number | null) => void;\n  exportImage: (\n    jpg: boolean,\n    canvasRef: React.RefObject<HTMLCanvasElement>,\n    callback?: (blob: Blob) => void,\n  ) => void;\n  onExport?: (blob: Blob) => void;\n  overlayRef: React.RefObject<HTMLCanvasElement>;\n};\n\nconst ImageEditorToolbar: React.FC<Props> = ({\n  canvasRef,\n  baseCanvas,\n  history,\n  drawColor,\n  setDrawColor,\n  drawLineWidth,\n  setDrawLineWidth,\n  setTool,\n  brightness,\n  setBrightness,\n  contrast,\n  setContrast,\n  blur,\n  setBlur,\n  gaussian,\n  setGaussian,\n  sharpen,\n  setSharpen,\n  bgThreshold,\n  setBgThreshold,\n  bgThresholdBlack,\n  setBgThresholdBlack,\n  setShowPerspectiveModal,\n  dpiMeasured,\n  setDpiMeasured,\n  exportImage,\n  onExport,\n  overlayRef,\n}) => {\n  return (\n    <div style={{ width: 260 }}>\n      <Space direction=\"vertical\" style={{ width: '100%' }}>\n        <Space wrap>\n          <Tooltip title=\"Undo (Ctrl+Z)\">\n            <Button icon={<UndoOutlined />} onClick={history.undo} />\n          </Tooltip>\n          <Tooltip title=\"Redo (Ctrl+Shift+Z)\">\n            <Button icon={<RedoOutlined />} onClick={history.redo} />\n          </Tooltip>\n          <Tooltip title=\"Rotate left\">\n            <Button\n              icon={<RotateLeftOutlined />}\n              onClick={() => rotate(-90, canvasRef, overlayRef, history)}\n            />\n          </Tooltip>\n          <Tooltip title=\"Rotate right\">\n            <Button\n              icon={<RotateRightOutlined />}\n              onClick={() => rotate(90, canvasRef, overlayRef, history)}\n            />\n          </Tooltip>\n          <Tooltip title=\"Flip horizontal\">\n            <Button icon={<SwapOutlined />} onClick={() => flipH(canvasRef, history)} />\n          </Tooltip>\n          <Tooltip title=\"Flip vertical\">\n            <Button icon={<SwapOutlined rotate={90} />} onClick={() => flipV(canvasRef, history)} />\n          </Tooltip>\n        </Space>\n\n        <Divider />\n\n        {/* Brush */}\n        <div>\n          <div style={{ marginBottom: 8 }}>\n            Brush Tool{' '}\n            <Button size=\"small\" onClick={() => setTool('draw')}>\n              <EditOutlined />\n            </Button>\n          </div>\n          <Space>\n            <ColorPicker\n              value={drawColor}\n              onChange={(color) => setDrawColor(color.toHexString())}\n              allowClear={false}\n              showText\n            />\n            <InputNumber\n              min={1}\n              max={50}\n              value={drawLineWidth}\n              onChange={(v) => setDrawLineWidth(v || 1)}\n              style={{ width: 60 }}\n            />\n          </Space>\n        </div>\n\n        <Divider />\n\n        {/* Brightness / Contrast */}\n        <div>\n          <div style={{ marginBottom: 8 }}>Brightness</div>\n          <Slider\n            min={-150}\n            max={150}\n            value={brightness}\n            onChange={setBrightness}\n            onChangeComplete={() =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n          <div style={{ marginBottom: 8 }}>Contrast</div>\n          <Slider\n            min={-100}\n            max={100}\n            value={contrast}\n            onChange={setContrast}\n            onChangeComplete={() =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n        </div>\n\n        <Divider />\n\n        {/* Filters */}\n        <div>\n          <div style={{ marginBottom: 8 }}>Box Blur</div>\n          <Slider\n            min={0}\n            max={25}\n            value={blur}\n            onChange={setBlur}\n            onChangeComplete={(v) =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                },\n                history,\n              )\n            }\n          />\n          <div style={{ marginBottom: 8 }}>Gaussian Blur</div>\n          <Slider\n            min={0}\n            max={20}\n            value={gaussian}\n            onChange={setGaussian}\n            onChangeComplete={(v) =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n          <div style={{ marginBottom: 8 }}>Sharpen</div>\n          <Slider\n            min={0}\n            max={5}\n            value={sharpen}\n            onChange={setSharpen}\n            onChangeComplete={(v) =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n          <Divider />\n          <div style={{ marginBottom: 8 }}>Background Threshold </div>\n          <div>Remove white </div>\n\n          <Slider\n            min={0}\n            max={255}\n            value={bgThreshold}\n            onChange={setBgThreshold}\n            onChangeComplete={(v) =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n\n          <div>Remove black </div>\n          <Slider\n            min={0}\n            max={255}\n            value={bgThresholdBlack}\n            onChange={setBgThresholdBlack}\n            onChangeComplete={(v) =>\n              applyEffects(\n                canvasRef,\n                baseCanvas,\n                {\n                  blur,\n                  gaussian,\n                  sharpen,\n                  bgThreshold,\n                  bgThresholdBlack,\n                  brightness,\n                  contrast,\n                },\n                history,\n              )\n            }\n          />\n        </div>\n\n        <Divider />\n\n        {/* Crop / Perspective */}\n        <div>\n          <div style={{ marginBottom: 8 }}>Crop & Perspective</div>\n          <Space>\n            <Button icon={<ScissorOutlined />} onClick={() => setTool('crop')}>\n              Crop (C)\n            </Button>\n            <Button\n              onClick={() => {\n                setShowPerspectiveModal(true);\n                setTool('perspective');\n              }}\n            >\n              Perspective\n            </Button>\n          </Space>\n        </div>\n\n        <Divider />\n\n        {/* Ruler */}\n        <div>\n          <div style={{ marginBottom: 8 }}>Ruler / DPI</div>\n          <Space>\n            <Button icon={'ðŸ“'} onClick={() => setTool('ruler')}>\n              Ruler\n            </Button>\n            <Button\n              onClick={() => {\n                setDpiMeasured?.(null);\n                message.info('Ruler cleared');\n              }}\n            >\n              Clear\n            </Button>\n          </Space>\n          {dpiMeasured && <div>Estimated DPI: {dpiMeasured}</div>}\n        </div>\n\n        <Divider />\n\n        {/* Export */}\n        <div>\n          <div style={{ marginBottom: 8 }}>Export</div>\n          <Space>\n            <Button\n              icon={<ExportOutlined />}\n              onClick={() => exportImage(false, canvasRef, onExport)}\n            >\n              PNG\n            </Button>\n            <Button onClick={() => exportImage(true, canvasRef, onExport)}>JPG</Button>\n            <Button icon={<CopyOutlined />} onClick={() => copyToClipboard(canvasRef)}>\n              Copy\n            </Button>\n          </Space>\n        </div>\n      </Space>\n    </div>\n  );\n};\n\nexport default ImageEditorToolbar;\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { Button, Space, Tooltip, Modal, Select, message } from 'antd';\nimport { ZoomInOutlined, ZoomOutOutlined } from '@ant-design/icons';\n\nimport { perspectiveTransform } from '@/pages/PNGJPEG/utils/ImageEditorEngine';\n\nimport useCanvas from '../../hooks/useCanvas';\nimport useHistory from '../../hooks/useHistory';\nimport { applyCrop, exportImage, rotate, samplePixel } from '../../utils/helpers';\nimport ImageCanvas from './ImageCanvas';\nimport ImageEditorToolbar from './ImageEditorToolbar';\n\ntype Tool = 'pan' | 'crop' | 'color' | 'ruler' | 'perspective' | 'select' | 'draw';\n\ntype Props = {\n  imageUrl: string;\n  onExport?: (blob: Blob) => void;\n};\n\nconst { Option } = Select;\n\nconst ImageEditor: React.FC<Props> = ({ imageUrl, onExport }) => {\n  /** --------------------------------------\n   * Canvas Setup\n   -------------------------------------- */\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const onLoad = (dataUrl: string) => {\n    history.push(dataUrl, 'Initial load');\n  };\n\n  const { canvasRef, overlayRef, baseCanvas } = useCanvas(imageUrl, onLoad);\n  const history = useHistory(canvasRef, overlayRef);\n\n  /** --------------------------------------\n   * Viewer State (pan, zoom)\n   -------------------------------------- */\n  const [zoom, setZoom] = useState(1);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [isPanning, setIsPanning] = useState(false);\n  const panStart = useRef<{ x: number; y: number } | null>(null);\n\n  /** --------------------------------------\n   * Tools + Editing State\n   -------------------------------------- */\n  const [tool, setTool] = useState<Tool>('pan');\n\n  // brightness / contrast\n  const [brightness, setBrightness] = useState(0);\n  const [contrast, setContrast] = useState(0);\n\n  // crop\n  const [cropRect, setCropRect] = useState<{ x: number; y: number; w: number; h: number } | null>(\n    null,\n  );\n  const cropStart = useRef<{ x: number; y: number } | null>(null);\n\n  // perspective\n  const [showPerspectiveModal, setShowPerspectiveModal] = useState(false);\n  const perspectivePoints = useRef<\n    [number, number, number, number, number, number, number, number] | null\n  >(null);\n\n  // transient tool swaps (Space, Alt)\n  const [toolBefore, setToolBefore] = useState<Tool | null>(null);\n  const [isSpaceDown, setIsSpaceDown] = useState(false);\n  const [isAltDown, setIsAltDown] = useState(false);\n\n  /** --------------------------------------\n   * Color Picker\n   -------------------------------------- */\n  const [hoverColor, setHoverColor] = useState<{ x: number; y: number; color: string } | null>(\n    null,\n  );\n  const [pickedColor, setPickedColor] = useState<string | null>(null);\n\n  /** --------------------------------------\n   * Ruler\n   -------------------------------------- */\n  const [rulerActive] = useState(false);\n  const rulerPoints = useRef<{ x1: number; y1: number; x2: number; y2: number } | null>(null);\n  const [dpiMeasured, setDpiMeasured] = useState<number | null>(null);\n\n  /** --------------------------------------\n   * Freehand Drawing\n   -------------------------------------- */\n  const [drawColor, setDrawColor] = useState('#ff0000');\n  const [drawLineWidth, setDrawLineWidth] = useState(2);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const drawPoints = useRef<{ x: number; y: number }[]>([]);\n\n  /** --------------------------------------\n   * Filter\n   -------------------------------------- */\n  const [blur, setBlur] = useState(0); // box blur level\n  const [gaussian, setGaussian] = useState(0); // gaussian radius\n  const [sharpen, setSharpen] = useState(0);\n  const [bgThreshold, setBgThreshold] = useState(255);\n  const [bgThresholdBlack, setBgThresholdBlack] = useState(0);\n\n  const resizingBrush = useRef(false);\n  const resizeStartX = useRef<number | null>(null);\n  const initialLineWidth = useRef(drawLineWidth);\n\n  // To prevent the right-click menu from showing\n  useEffect(() => {\n    const canvas = containerRef.current;\n    if (!canvas) return;\n    const handleContextMenu = (e: MouseEvent) => e.preventDefault();\n    canvas.addEventListener('contextmenu', handleContextMenu);\n    return () => canvas.removeEventListener('contextmenu', handleContextMenu);\n  }, []);\n\n  // Ctrl+Wheel zoom\n  useEffect(() => {\n    const container = containerRef.current;\n    const canvas = canvasRef.current;\n    if (!container || !canvas) return;\n\n    const handleWheel = (e: WheelEvent) => {\n      if (!e.ctrlKey) return;\n      e.preventDefault();\n\n      const rect = canvas.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n\n      setZoom((prev) => {\n        const zoomFactor = e.deltaY < 0 ? 1.1 : 0.9;\n        const newZoom = Math.min(Math.max(prev * zoomFactor, 0.1), 12);\n\n        const scaleChange = newZoom / prev;\n        setOffset((prevOffset) => ({\n          x: mouseX - (mouseX - prevOffset.x) * scaleChange,\n          y: mouseY - (mouseY - prevOffset.y) * scaleChange,\n        }));\n\n        return newZoom;\n      });\n    };\n\n    container.addEventListener('wheel', handleWheel, { passive: false });\n    return () => container.removeEventListener('wheel', handleWheel);\n  }, []);\n\n  /** --- PAN / ZOOM / TOOL HANDLERS --- */\n  const handleMouseDownViewer = (e: React.MouseEvent) => {\n    const rect = canvasRef.current!.getBoundingClientRect();\n    const x = (e.clientX - rect.left) / zoom;\n    const y = (e.clientY - rect.top) / zoom;\n\n    if (tool === 'color' && e.altKey && e.button === 2) setTool('draw');\n    // ALT + right button for brush resize\n    if ((tool === 'draw' || tool === 'color') && e.altKey && e.button === 2) {\n      e.preventDefault();\n      resizingBrush.current = true;\n      resizeStartX.current = e.clientX;\n      initialLineWidth.current = drawLineWidth;\n      return;\n    }\n\n    if (tool === 'pan' || tool === 'select') {\n      setIsPanning(true);\n      panStart.current = { x: e.clientX - offset.x, y: e.clientY - offset.y };\n    } else if (tool === 'crop') {\n      cropStart.current = { x, y };\n      setCropRect({ x, y, w: 1, h: 1 });\n    } else if (tool === 'ruler') {\n      if (!rulerPoints.current) {\n        rulerPoints.current = { x1: x, y1: y, x2: x, y2: y };\n      } else {\n        rulerPoints.current.x2 = x;\n        rulerPoints.current.y2 = y;\n        const dx = x - rulerPoints.current.x1;\n        const dy = y - rulerPoints.current.y1;\n        const px = Math.sqrt(dx * dx + dy * dy);\n        const dpi = Math.round(\n          (px / (canvasRef.current!.width / (window.devicePixelRatio || 1))) * 96,\n        );\n        setDpiMeasured(dpi);\n        message.info(`Distance: ${Math.round(px)} px, estimated DPI: ${dpi}`);\n        rulerPoints.current = null;\n      }\n    } else if (tool === 'perspective') {\n      if (!perspectivePoints.current) perspectivePoints.current = [x, y, x, y, x, y, x, y];\n      const p = perspectivePoints.current!;\n      for (let i = 0; i < 8; i += 2) {\n        if (isNaN(p[i]) || isNaN(p[i + 1]) || (p[i] === 0 && p[i + 1] === 0)) {\n          p[i] = x;\n          p[i + 1] = y;\n          break;\n        }\n      }\n    } else if (tool === 'draw') {\n      setIsDrawing(true);\n      drawPoints.current = [{ x, y }];\n    }\n  };\n\n  const handleMouseMoveViewer = (e: React.MouseEvent) => {\n    if (resizingBrush.current && resizeStartX.current !== null) {\n      const deltaX = e.clientX - resizeStartX.current;\n      const newWidth = Math.max(1, Math.min(50, initialLineWidth.current + deltaX / 5));\n      setDrawLineWidth(newWidth);\n      return;\n    }\n\n    if ((tool === 'pan' || tool === 'select') && isPanning && panStart.current) {\n      setOffset({ x: e.clientX - panStart.current.x, y: e.clientY - panStart.current.y });\n    } else if (tool === 'crop' && cropStart.current) {\n      const rect = canvasRef.current!.getBoundingClientRect();\n      const cur = { x: (e.clientX - rect.left) / zoom, y: (e.clientY - rect.top) / zoom };\n      setCropRect({\n        x: Math.min(cropStart.current.x, cur.x),\n        y: Math.min(cropStart.current.y, cur.y),\n        w: Math.abs(cur.x - cropStart.current.x),\n        h: Math.abs(cur.y - cropStart.current.y),\n      });\n      drawOverlay();\n    } else if (tool === 'draw' && isDrawing && canvasRef.current) {\n      const rect = canvasRef.current.getBoundingClientRect();\n      const x = (e.clientX - rect.left) / zoom;\n      const y = (e.clientY - rect.top) / zoom;\n\n      drawPoints.current.push({ x, y });\n\n      const ctx = canvasRef.current.getContext('2d')!;\n      ctx.save();\n      ctx.strokeStyle = drawColor;\n      ctx.lineWidth = drawLineWidth;\n      ctx.lineCap = 'round';\n      ctx.beginPath();\n      const points = drawPoints.current;\n      ctx.moveTo(points[points.length - 2].x, points[points.length - 2].y);\n      ctx.lineTo(points[points.length - 1].x, points[points.length - 1].y);\n      ctx.stroke();\n      ctx.restore();\n    } else {\n      drawOverlay();\n    }\n  };\n\n  const handleMouseUpViewer = () => {\n    if (resizingBrush.current) {\n      resizingBrush.current = false;\n      resizeStartX.current = null;\n      initialLineWidth.current = drawLineWidth;\n      return;\n    }\n\n    setIsPanning(false);\n    panStart.current = null;\n    if (tool === 'crop' && cropRect)\n      applyCrop(canvasRef, overlayRef, cropRect, setCropRect, history);\n    if (tool === 'draw' && isDrawing) {\n      setIsDrawing(false);\n      history.push(canvasRef.current!.toDataURL(), 'Draw');\n    }\n  };\n\n  /** Draw overlay: crop, ruler, perspective, color hover */\n  const drawOverlay = () => {\n    if (!overlayRef.current || !canvasRef.current) return;\n    const ctx = overlayRef.current.getContext('2d')!;\n    ctx.clearRect(0, 0, overlayRef.current.width, overlayRef.current.height);\n\n    // Crop rectangle\n    if (cropRect) {\n      ctx.save();\n      ctx.strokeStyle = '#00aaff';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([6, 4]);\n      ctx.strokeRect(cropRect.x, cropRect.y, cropRect.w, cropRect.h);\n      ctx.restore();\n    }\n\n    // Ruler\n    if (rulerPoints.current) {\n      ctx.save();\n      ctx.strokeStyle = '#ffcc00';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(rulerPoints.current.x1, rulerPoints.current.y1);\n      ctx.lineTo(rulerPoints.current.x2, rulerPoints.current.y2);\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    // Perspective points\n    if (perspectivePoints.current) {\n      ctx.save();\n      ctx.fillStyle = 'rgba(0,255,0,0.8)';\n      for (let i = 0; i < 8; i += 2) {\n        const x = perspectivePoints.current[i];\n        const y = perspectivePoints.current[i + 1];\n        if (!isNaN(x) && !isNaN(y)) ctx.fillRect(x - 4, y - 4, 8, 8);\n      }\n      ctx.restore();\n    }\n\n    // Color hover\n    if (hoverColor && tool === 'color') {\n      const rect = canvasRef.current.getBoundingClientRect();\n\n      const canvasX = (hoverColor.x - rect.left) / zoom;\n      const canvasY = (hoverColor.y - rect.top) / zoom;\n      ctx.save();\n      ctx.strokeStyle = hoverColor.color;\n      ctx.lineWidth = 2 / zoom;\n      ctx.beginPath();\n      ctx.arc(canvasX, canvasY, 8 / zoom, 0, Math.PI * 2);\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    // draw\n    if (hoverColor && tool === 'draw') {\n      const rect = canvasRef.current.getBoundingClientRect();\n\n      const canvasX = (hoverColor.x - rect.left) / zoom;\n      const canvasY = (hoverColor.y - rect.top) / zoom;\n      ctx.save();\n      ctx.strokeStyle = drawColor;\n      ctx.lineWidth = 2 / zoom;\n      ctx.beginPath();\n      ctx.arc(canvasX, canvasY, drawLineWidth / 2, 0, Math.PI * 2);\n      ctx.stroke();\n      ctx.restore();\n    }\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const handleMove = (e: MouseEvent) => {\n      if (tool === 'color') {\n        const color = samplePixel(e, canvasRef, zoom);\n        setHoverColor(color ? { x: e.clientX, y: e.clientY, color } : null);\n        drawOverlay();\n      } else if (tool === 'draw') {\n        setHoverColor(drawColor ? { x: e.clientX, y: e.clientY, color: drawColor } : null);\n        drawOverlay();\n      }\n    };\n\n    const handleClick = (e: MouseEvent) => {\n      if (tool === 'color') {\n        const color = samplePixel(e, canvasRef, zoom);\n        if (color) {\n          setPickedColor(color);\n          setDrawColor(color);\n          navigator.clipboard.writeText(color).catch(() => {});\n          message.success(`Picked color ${color}`);\n        }\n      }\n    };\n\n    const handleLeave = () => {\n      if (tool === 'color') setHoverColor(null);\n    };\n\n    canvas.addEventListener('mousemove', handleMove);\n    canvas.addEventListener('click', handleClick);\n    canvas.addEventListener('mouseleave', handleLeave);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handleMove);\n      canvas.removeEventListener('click', handleClick);\n      canvas.removeEventListener('mouseleave', handleLeave);\n    };\n  }, [tool, zoom, offset]);\n\n  // keyboard shortcuts\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.ctrlKey && e.key === 'z') history.undo();\n      if (e.ctrlKey && e.shiftKey && e.key === 'Z') history.redo();\n      if (e.key === 'c') setTool('crop');\n      if (e.key === 'h') setTool('pan');\n      if (e.key === 'r') rotate(90, canvasRef, overlayRef, history.history);\n      if (e.key === 'p') setTool('color');\n      if (e.key === 'b') setTool('draw');\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [history.index, history.history]);\n\n  // Quick hand tool when holding Spaceb\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.code === 'Space') {\n        e.preventDefault(); // stop page scroll\n\n        setIsSpaceDown((prev) => {\n          if (!prev) {\n            // first press\n            setToolBefore((t) => {\n              // store previous tool safely\n              if (t === null) return tool;\n              return t;\n            });\n            setTool('pan');\n          }\n          return true;\n        });\n      } else if (e.code === 'AltLeft' && tool === 'draw') {\n        e.preventDefault();\n\n        setIsAltDown((prev) => {\n          if (!prev) {\n            // first press\n            setToolBefore((t) => {\n              // store previous tool safely\n              if (t === null) return tool;\n              return t;\n            });\n            setTool('color');\n          }\n          return true;\n        });\n      }\n    };\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (e.code === 'Space') {\n        setIsSpaceDown(false);\n\n        setToolBefore((prev) => {\n          if (prev) {\n            setTool(prev); // restore tool\n          }\n          return null; // clear buffer\n        });\n      } else if (e.code === 'AltLeft' && toolBefore === 'draw') {\n        setIsAltDown(false);\n        setToolBefore((prev) => {\n          if (prev) {\n            setTool(prev); // restore tool\n          }\n          return null; // clear buffer\n        });\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown, { passive: false });\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [tool]);\n\n  const perspectiveApply = async () => {\n    if (!canvasRef.current || !perspectivePoints.current) return;\n    const src = canvasRef.current;\n    // dest dims: bounding rect\n    const destW = src.width;\n    const destH = src.height;\n    const dest = perspectiveTransform(src, perspectivePoints.current, destW, destH);\n    canvasRef.current.width = dest.width;\n    canvasRef.current.height = dest.height;\n    overlayRef.current!.width = dest.width;\n    overlayRef.current!.height = dest.height;\n    canvasRef.current.getContext('2d')!.clearRect(0, 0, dest.width, dest.height);\n    canvasRef.current.getContext('2d')!.drawImage(dest, 0, 0);\n    history.push(canvasRef.current.toDataURL(), 'Perspective corrected');\n    setShowPerspectiveModal(false);\n  };\n\n  const currentCursor = useMemo(() => {\n    if ((tool === 'pan' || tool === 'select') && isPanning) return 'grabbing';\n    switch (tool) {\n      case 'pan':\n        return 'grab';\n      case 'crop':\n      case 'ruler':\n      case 'perspective':\n        return 'crosshair';\n      case 'color':\n        return 'copy';\n      case 'draw':\n        return 'pointer';\n      default:\n        return 'default';\n    }\n  }, [tool, isPanning]);\n\n  return (\n    <div style={{ display: 'flex', gap: 12 }}>\n      <ImageEditorToolbar\n        canvasRef={canvasRef}\n        overlayRef={overlayRef}\n        baseCanvas={baseCanvas}\n        history={history}\n        drawColor={drawColor}\n        setDrawColor={setDrawColor}\n        drawLineWidth={drawLineWidth}\n        setDrawLineWidth={setDrawLineWidth}\n        setTool={setTool}\n        brightness={brightness}\n        setBrightness={setBrightness}\n        contrast={contrast}\n        setContrast={setContrast}\n        blur={blur}\n        setBlur={setBlur}\n        gaussian={gaussian}\n        setGaussian={setGaussian}\n        sharpen={sharpen}\n        setSharpen={setSharpen}\n        bgThreshold={bgThreshold}\n        setBgThreshold={setBgThreshold}\n        bgThresholdBlack={bgThresholdBlack}\n        setBgThresholdBlack={setBgThresholdBlack}\n        setShowPerspectiveModal={setShowPerspectiveModal}\n        dpiMeasured={dpiMeasured}\n        setDpiMeasured={setDpiMeasured}\n        exportImage={exportImage}\n        onExport={onExport}\n      />\n\n      <div style={{ flex: 1 }}>\n        <div style={{ marginBottom: 8 }}>\n          <Space>\n            <Tooltip title=\"Zoom In\">\n              <Button\n                icon={<ZoomInOutlined />}\n                onClick={() => setZoom((z) => Math.min(z * 1.2, 8))}\n              />\n            </Tooltip>\n            <Tooltip title=\"Zoom Out\">\n              <Button\n                icon={<ZoomOutOutlined />}\n                onClick={() => setZoom((z) => Math.max(z / 1.2, 0.1))}\n              />\n            </Tooltip>\n            <Select value={tool} onChange={(v) => setTool(v as Tool)} style={{ width: 140 }}>\n              <Option value=\"pan\">Pan</Option>\n              <Option value=\"color\">Color Picker</Option>\n              <Option value=\"crop\">Crop</Option>\n              <Option value=\"ruler\">Ruler</Option>\n              <Option value=\"perspective\">Perspective</Option>\n              <Option value=\"draw\">Brush</Option>\n            </Select>\n          </Space>\n        </div>\n\n        <ImageCanvas\n          canvasRef={canvasRef}\n          overlayRef={overlayRef}\n          containerRef={containerRef}\n          offset={offset}\n          zoom={zoom}\n          tool={tool}\n          currentCursor={currentCursor}\n          hoverColor={hoverColor}\n          onMouseDown={handleMouseDownViewer}\n          onMouseMove={handleMouseMoveViewer}\n          onMouseUp={handleMouseUpViewer}\n        />\n      </div>\n\n      <Modal\n        title=\"Perspective correction\"\n        open={showPerspectiveModal}\n        onOk={() => perspectiveApply()}\n        onCancel={() => setShowPerspectiveModal(false)}\n        okText=\"Apply\"\n      >\n        <p>Click four points on the image (clockwise) to define the corners, then Apply.</p>\n      </Modal>\n    </div>\n  );\n};\n\nexport default ImageEditor;\n","import { useEffect, useRef, useState } from 'react';\nimport { createCanvas, drawImageToCanvasFromUrl } from '../utils/ImageEditorEngine';\nimport { message } from 'antd';\n\nexport default function useCanvas(imageUrl: string, onLoad?: (dataUrl: string) => void) {\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\n  const overlayRef = useRef<HTMLCanvasElement | null>(null);\n\n  const [baseCanvas, setBaseCanvas] = useState<HTMLCanvasElement | null>(null);\n\n  // Load image once\n  useEffect(() => {\n    (async () => {\n      try {\n        const c = await drawImageToCanvasFromUrl(imageUrl);\n        setBaseCanvas(c);\n\n        const working = createCanvas(c.width, c.height);\n        working.getContext('2d')!.drawImage(c, 0, 0);\n\n        if (canvasRef.current) {\n          canvasRef.current.width = working.width;\n          canvasRef.current.height = working.height;\n          const ctx = canvasRef.current.getContext('2d')!;\n          ctx.clearRect(0, 0, working.width, working.height);\n          ctx.drawImage(working, 0, 0);\n        }\n\n        if (onLoad) onLoad(canvasToDataUrl(working));\n      } catch (err) {\n        console.error('Failed to load image', err);\n        message.error('Failed to load image');\n      }\n    })();\n  }, [imageUrl]);\n\n  // Resize overlay when baseCanvas is ready\n  useEffect(() => {\n    syncCanvasSize();\n  }, [baseCanvas]);\n\n  /** Convert canvas â†’ dataURL */\n  const canvasToDataUrl = (c: HTMLCanvasElement) => c.toDataURL('image/png');\n\n  /** Sync canvas & overlay sizes */\n  const syncCanvasSize = () => {\n    if (!canvasRef.current || !baseCanvas) return;\n\n    canvasRef.current.width = baseCanvas.width;\n    canvasRef.current.height = baseCanvas.height;\n    overlayRef.current!.width = baseCanvas.width;\n    overlayRef.current!.height = baseCanvas.height;\n\n    const ctx = canvasRef.current.getContext('2d')!;\n    ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    ctx.drawImage(baseCanvas, 0, 0);\n  };\n\n  return { canvasRef, overlayRef, baseCanvas, syncCanvasSize };\n}\n","import { MutableRefObject, useState } from 'react';\n\ntype HistoryItem = {\n  url: string;\n  label?: string;\n};\n\nexport default function useHistory(\n  canvasRef: MutableRefObject<HTMLCanvasElement | null>,\n  overlayRef: MutableRefObject<HTMLCanvasElement | null>,\n) {\n  const [history, setHistory] = useState<HistoryItem[]>([]);\n  const [index, setIndex] = useState(-1);\n\n  const current = history[index];\n\n  //\n  /** History management */\n  const push = (url: string, label = '') => {\n    const next = history.slice(0, index + 1);\n    next.push({ url, label });\n    setHistory(next);\n    setIndex(next.length - 1);\n  };\n  const undo = () => {\n    if (index <= 0) return;\n    applyHistory(index - 1);\n  };\n  const redo = () => {\n    if (index >= history.length - 1) return;\n    applyHistory(index + 1);\n  };\n\n  const applyHistory = (idx: number) => {\n    const item = history[idx];\n    if (!item) return;\n\n    const img = new Image();\n    img.onload = () => {\n      const ctx = canvasRef.current!.getContext('2d')!;\n      canvasRef.current!.width = img.naturalWidth;\n      canvasRef.current!.height = img.naturalHeight;\n      overlayRef.current!.width = img.naturalWidth;\n      overlayRef.current!.height = img.naturalHeight;\n\n      ctx.clearRect(0, 0, canvasRef.current!.width, canvasRef.current!.height);\n      ctx.drawImage(img, 0, 0);\n      setIndex(idx);\n    };\n    img.src = item.url;\n  };\n\n  return { history, index, current, push, undo, redo };\n}\n","import DragDropWrapper from '@/components/DragDropWrapper';\nimport DragOverlay from '@/components/DragOverlay';\nimport { handleCopy } from '@/helpers';\nimport {\n  CopyOutlined,\n  DownloadOutlined,\n  InfoCircleOutlined,\n  LoadingOutlined,\n  UploadOutlined,\n} from '@ant-design/icons';\nimport {\n  Button,\n  Card,\n  InputNumber,\n  Space,\n  Spin,\n  Tabs,\n  Tag,\n  Tooltip,\n  Typography,\n  Upload,\n  message,\n} from 'antd';\nimport ImageTracer from 'imagetracerjs';\nimport React, { useEffect, useRef, useState } from 'react';\nimport ImageEditor from './components/ImageEditor';\n\nconst { Title } = Typography;\nconst { TabPane } = Tabs;\n\nconst PNGJPEG: React.FC = () => {\n  const [file, setFile] = useState<File | null>(null);\n  const [preview, setPreview] = useState<string | null>(null);\n  const [svgContent, setSvgContent] = useState<string | null>(null);\n  const [dragging, setDragging] = useState(false);\n  const [processing, setProcessing] = useState(false);\n\n  const dragCounter = useRef(0);\n\n  // Tracing options\n  const [scale, setScale] = useState(1);\n  const [ltres, setLtres] = useState(1);\n  const [qtres, setQtres] = useState(1);\n  const [pathomit, setPathomit] = useState(8);\n  const [colorsampling, setColorsampling] = useState(2);\n  const [strokewidth, setStrokewidth] = useState(1);\n\n  // --- Clipboard paste support ---\n  useEffect(() => {\n    const handlePaste = (e: ClipboardEvent) => {\n      const items = e.clipboardData?.items;\n      if (!items) return;\n\n      const imageItem = Array.from(items).find((item) => item.type.includes('image'));\n      if (imageItem) {\n        const blob = imageItem.getAsFile();\n        if (blob) {\n          handleUpload(blob);\n          message.success('Image pasted from clipboard!');\n          e.preventDefault();\n        }\n      }\n    };\n\n    window.addEventListener('paste', handlePaste);\n    return () => window.removeEventListener('paste', handlePaste);\n  }, []);\n\n  const handleUpload = (file: File) => {\n    setFile(file);\n    const reader = new FileReader();\n    reader.onload = (e) => setPreview(e.target?.result as string);\n    reader.readAsDataURL(file);\n    setDragging(false);\n    dragCounter.current = 0;\n    return false;\n  };\n\n  const handleConvert = () => {\n    if (!preview) {\n      message.error('Please upload an image first.');\n      return;\n    }\n\n    setProcessing(true); // ðŸ‘ˆ start loading animation\n    try {\n      ImageTracer.imageToSVG(\n        preview,\n        (svgString) => {\n          setSvgContent(svgString);\n          setProcessing(false); // ðŸ‘ˆ stop loading\n          message.success('Image converted to SVG successfully!');\n        },\n        { scale, ltres, qtres, pathomit, colorsampling, strokewidth },\n      );\n    } catch (err: any) {\n      console.error(err);\n      setProcessing(false); // ðŸ‘ˆ stop loading on error\n      message.error('Error converting image to SVG.');\n    }\n  };\n\n  const handleDownload = (content: string, filename: string) => {\n    const blob = new Blob([content], { type: 'image/svg+xml' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    link.click();\n  };\n\n  const handleClear = () => {\n    setFile(null);\n    setPreview(null);\n    setSvgContent(null);\n    message.info('Image and SVG cleared.');\n  };\n\n  // Generate Base64 and Data URI\n  const svgBase64 = svgContent ? btoa(unescape(encodeURIComponent(svgContent))) : '';\n  const svgDataURI = svgContent ? `data:image/svg+xml;base64,${svgBase64}` : '';\n\n  return (\n    <DragDropWrapper\n      setDragging={setDragging}\n      dragCounter={dragCounter}\n      handleUpload={handleUpload}\n    >\n      <Card\n        title={\n          <>\n            ðŸ–¼ï¸ PNG / JPEG Viewer <Tag color=\"cyan\">Beta</Tag>\n          </>\n        }\n        variant={'borderless'}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\n          {!dragging && (\n            <Upload beforeUpload={handleUpload} showUploadList={false} accept=\".png,.jpg,.jpeg\">\n              <Button icon={<UploadOutlined />}>Upload Image (PNG/JPG)</Button>\n            </Upload>\n          )}\n\n          {dragging && <DragOverlay />}\n\n          {/* Preview */}\n          {preview && (\n            <div>\n              <Title level={5}>Preview & Editor:</Title>\n              <ImageEditor\n                imageUrl={preview}\n                onExport={(blob) => {\n                  // optional: show download link or handle upload\n                  console.log('exported blob', blob);\n                }}\n              />\n            </div>\n          )}\n\n          {/* === PROCESSING OVERLAY === */}\n          {processing && (\n            <div\n              style={{\n                position: 'fixed',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%',\n                background: 'rgba(255, 255, 255, 0.7)',\n                zIndex: 10000,\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                flexDirection: 'column',\n              }}\n            >\n              <Spin\n                indicator={<LoadingOutlined style={{ fontSize: 48, color: '#1890ff' }} spin />}\n                tip=\"Converting image to SVG...\"\n                size=\"large\"\n              />\n            </div>\n          )}\n\n          {/* Tracing Options */}\n          <Card size=\"small\" title=\"Tracing Options (Adjust before converting)\">\n            <Space wrap size={'large'}>\n              <Space size={'small'}>\n                <Tooltip title=\"Scale factor for the SVG output. Higher = larger SVG.\">\n                  <label>\n                    Scale <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber\n                  min={0.1}\n                  step={0.1}\n                  value={scale}\n                  onChange={(val) => setScale(val || 1)}\n                />\n              </Space>\n              <Space size={'small'}>\n                <Tooltip title=\"Error threshold for line detection. Lower = more precise lines.\">\n                  <label>\n                    ltres <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber min={0} value={ltres} onChange={(val) => setLtres(val || 1)} />\n              </Space>\n              <Space size={'small'}>\n                <Tooltip title=\"Error threshold for curve detection. Lower = more precise curves.\">\n                  <label>\n                    qtres <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber min={0} value={qtres} onChange={(val) => setQtres(val || 1)} />\n              </Space>\n              <Space size={'small'}>\n                <Tooltip title=\"Minimum path length to keep. Higher = simpler SVG with fewer tiny paths.\">\n                  <label>\n                    Pathomit <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber min={0} value={pathomit} onChange={(val) => setPathomit(val || 0)} />\n              </Space>\n              <Space size={'small'}>\n                <Tooltip title=\"Pixel sampling interval for colors. 1 = every pixel, higher = faster but less accurate colors.\">\n                  <label>\n                    ColorSampling <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber\n                  min={1}\n                  value={colorsampling}\n                  onChange={(val) => setColorsampling(val || 1)}\n                />\n              </Space>\n              <Space size={'small'}>\n                <Tooltip title=\"Stroke width in the output SVG.\">\n                  <label>\n                    StrokeWidth <InfoCircleOutlined style={{ marginLeft: 4 }} />\n                  </label>\n                </Tooltip>\n                <InputNumber\n                  min={0}\n                  value={strokewidth}\n                  onChange={(val) => setStrokewidth(val || 1)}\n                />\n              </Space>\n            </Space>\n          </Card>\n\n          {/* Action Buttons */}\n          <Space>\n            <Button type=\"primary\" onClick={handleConvert} disabled={!file}>\n              Convert to SVG\n            </Button>\n            <Button onClick={handleClear} danger disabled={!file && !svgContent}>\n              Clear Image\n            </Button>\n          </Space>\n\n          {/* Tabs for SVG formats */}\n          {svgContent && (\n            <Tabs defaultActiveKey=\"svg\" type=\"card\" style={{ marginTop: 16 }}>\n              <TabPane tab=\"SVG\" key=\"svg\">\n                <Space style={{ marginBottom: 8 }}>\n                  <Button\n                    onClick={() => handleDownload(svgContent, 'image.svg')}\n                    icon={<DownloadOutlined />}\n                  >\n                    Download\n                  </Button>\n                  <Button\n                    onClick={() => handleCopy(svgContent, 'SVG copied!')}\n                    icon={<CopyOutlined />}\n                  >\n                    Copy\n                  </Button>\n                </Space>\n                <div\n                  style={{\n                    border: '1px solid #eee',\n                    borderRadius: 6,\n                    padding: 12,\n                    overflow: 'auto',\n                  }}\n                >\n                  <div dangerouslySetInnerHTML={{ __html: svgContent }} />\n                </div>\n              </TabPane>\n\n              <TabPane tab=\"Base64\" key=\"base64\">\n                <Space style={{ marginBottom: 8 }}>\n                  <Button\n                    onClick={() => handleCopy(svgBase64, 'Base64 copied!')}\n                    icon={<CopyOutlined />}\n                  >\n                    Copy Base64\n                  </Button>\n                  <Button\n                    onClick={() => handleDownload(svgBase64, 'image-base64.txt')}\n                    icon={<DownloadOutlined />}\n                  >\n                    Download Base64\n                  </Button>\n                </Space>\n                <pre\n                  style={{\n                    background: '#f7f7f7',\n                    padding: 12,\n                    borderRadius: 6,\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                    maxHeight: 300,\n                    overflow: 'auto',\n                  }}\n                >\n                  {svgBase64}\n                </pre>\n              </TabPane>\n\n              <TabPane tab=\"Data URI\" key=\"datauri\">\n                <Space style={{ marginBottom: 8 }}>\n                  <Button\n                    onClick={() => handleCopy(svgDataURI, 'Data URI copied!')}\n                    icon={<CopyOutlined />}\n                  >\n                    Copy Data URI\n                  </Button>\n                  <Button\n                    onClick={() => handleDownload(svgDataURI, 'image-datauri.txt')}\n                    icon={<DownloadOutlined />}\n                  >\n                    Download Data URI\n                  </Button>\n                </Space>\n                <pre\n                  style={{\n                    background: '#f7f7f7',\n                    padding: 12,\n                    borderRadius: 6,\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                    maxHeight: 300,\n                    overflow: 'auto',\n                  }}\n                >\n                  {svgDataURI}\n                </pre>\n              </TabPane>\n            </Tabs>\n          )}\n        </Space>\n      </Card>\n    </DragDropWrapper>\n  );\n};\n\nexport default PNGJPEG;\n"],"names":[],"mappings":"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"}