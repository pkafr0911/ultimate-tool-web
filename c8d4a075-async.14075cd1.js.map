{"version":3,"sources":["src/pages/TicTacToe/index.tsx"],"sourcesContent":["import { Button, Card, InputNumber, Space, Switch, Typography, message } from 'antd';\r\nimport React, { useState } from 'react';\r\nimport Confetti from 'react-confetti';\r\nimport './styles.less';\r\n\r\nconst { Title, Text } = Typography;\r\n\r\n// Define possible cell values in the board: X, O, or null\r\ntype CellValue = 'X' | 'O' | null;\r\n\r\nconst TicTacToePage: React.FC = () => {\r\n  // --- Game State ---\r\n  const [boardSize, setBoardSize] = useState<number>(3); // size of the board (e.g. 3x3 or 10x10)\r\n  const [board, setBoard] = useState<CellValue[][]>([]); // 2D array storing current board cells\r\n  const [currentPlayer, setCurrentPlayer] = useState<'X' | 'O'>('X'); // current turn: X or O\r\n  const [winner, setWinner] = useState<string | null>(null); // track winner (X, O, or Draw)\r\n  const [started, setStarted] = useState<boolean>(false); // true when game has started\r\n  const [blockBothSides, setBlockBothSides] = useState<boolean>(false); // rule for large boards\r\n  const [showConfetti, setShowConfetti] = useState<boolean>(false); // show confetti animation when someone wins\r\n\r\n  // --- Determine win length ---\r\n  // For 3x3: need 3 in a row to win\r\n  // For board â‰¥10: need 5 in a row to win\r\n  const getWinLength = () => (boardSize === 3 ? 3 : 5);\r\n\r\n  // --- Initialize / Start Game ---\r\n  const startGame = () => {\r\n    // Validate board size (must be 3 or â‰¥10)\r\n    if (boardSize !== 3 && boardSize < 10) {\r\n      message.error('Board size must be 3 or at least 10!');\r\n      return;\r\n    }\r\n\r\n    // Create an empty board filled with null\r\n    const newBoard = Array(boardSize)\r\n      .fill(null)\r\n      .map(() => Array(boardSize).fill(null));\r\n\r\n    // Reset states\r\n    setBoard(newBoard);\r\n    setWinner(null);\r\n    setCurrentPlayer('X');\r\n    setStarted(true);\r\n    setShowConfetti(false);\r\n\r\n    // Disable \"block both sides\" rule if size < 10\r\n    if (boardSize < 10) setBlockBothSides(false);\r\n  };\r\n\r\n  // --- Check if player has won ---\r\n  const checkWin = (b: CellValue[][], player: 'X' | 'O'): boolean => {\r\n    const size = b.length;\r\n    const winLength = getWinLength();\r\n\r\n    // Helper: Check one direction (vertical, horizontal, or diagonal)\r\n    const checkDirection = (r: number, c: number, dr: number, dc: number): boolean => {\r\n      let count = 0;\r\n      let beforeBlocked = false;\r\n      let afterBlocked = false;\r\n\r\n      // Check consecutive cells\r\n      for (let i = 0; i < winLength; i++) {\r\n        const nr = r + i * dr; // row step\r\n        const nc = c + i * dc; // column step\r\n        // Out of bounds or not player's mark â†’ not a win\r\n        if (nr < 0 || nc < 0 || nr >= size || nc >= size || b[nr][nc] !== player) return false;\r\n        count++;\r\n      }\r\n\r\n      // If using \"block both sides\" rule (for board â‰¥10),\r\n      // check if both ends are blocked by opponent or edges\r\n      if (blockBothSides && size >= 10) {\r\n        const beforeR = r - dr;\r\n        const beforeC = c - dc;\r\n        const afterR = r + winLength * dr;\r\n        const afterC = c + winLength * dc;\r\n\r\n        beforeBlocked =\r\n          beforeR >= 0 &&\r\n          beforeR < size &&\r\n          beforeC >= 0 &&\r\n          beforeC < size &&\r\n          b[beforeR][beforeC] !== null &&\r\n          b[beforeR][beforeC] !== player;\r\n        afterBlocked =\r\n          afterR >= 0 &&\r\n          afterR < size &&\r\n          afterC >= 0 &&\r\n          afterC < size &&\r\n          b[afterR][afterC] !== null &&\r\n          b[afterR][afterC] !== player;\r\n      }\r\n\r\n      // Return true if thereâ€™s a winning sequence\r\n      // and not blocked on both ends (if rule applies)\r\n      return count === winLength && (!blockBothSides || !(beforeBlocked && afterBlocked));\r\n    };\r\n\r\n    // Scan all cells and all directions for a winning pattern\r\n    for (let r = 0; r < size; r++) {\r\n      for (let c = 0; c < size; c++) {\r\n        if (b[r][c] !== player) continue;\r\n\r\n        if (\r\n          checkDirection(r, c, 1, 0) || // vertical\r\n          checkDirection(r, c, 0, 1) || // horizontal\r\n          checkDirection(r, c, 1, 1) || // diagonal â†˜\r\n          checkDirection(r, c, 1, -1) // diagonal â†™\r\n        ) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // --- Handle cell click ---\r\n  const handleClick = (r: number, c: number) => {\r\n    // Ignore click if game not started or already won\r\n    if (winner || !started) return;\r\n\r\n    // Prevent overwriting occupied cell\r\n    if (board[r][c]) {\r\n      message.warning('Cell already taken!');\r\n      return;\r\n    }\r\n\r\n    // Clone board and mark current cell\r\n    const newBoard = board.map((row) => [...row]);\r\n    newBoard[r][c] = currentPlayer;\r\n    setBoard(newBoard);\r\n\r\n    // Check win condition\r\n    if (checkWin(newBoard, currentPlayer)) {\r\n      setWinner(currentPlayer);\r\n      setShowConfetti(true);\r\n      message.success(`ðŸŽ‰ Player ${currentPlayer} wins!`);\r\n      return;\r\n    }\r\n\r\n    // Check draw (all cells filled)\r\n    const isDraw = newBoard.flat().every((cell) => cell);\r\n    if (isDraw) {\r\n      setWinner('Draw');\r\n      message.info(\"It's a draw!\");\r\n      return;\r\n    }\r\n\r\n    // Switch player\r\n    setCurrentPlayer(currentPlayer === 'X' ? 'O' : 'X');\r\n  };\r\n\r\n  // --- Reset entire game to setup state ---\r\n  const resetGame = () => {\r\n    setStarted(false);\r\n    setBoard([]);\r\n    setWinner(null);\r\n    setCurrentPlayer('X');\r\n  };\r\n\r\n  // --- Render UI ---\r\n  return (\r\n    <div className=\"tic-container\">\r\n      {/* Show confetti when a player wins */}\r\n      {showConfetti && winner && winner !== 'Draw' && <Confetti />}\r\n\r\n      <Card className=\"tic-card\" variant={'borderless'}>\r\n        <Title level={3}>ðŸŽ¯ Tic-Tac-Toe</Title>\r\n\r\n        {/* Game setup panel */}\r\n        {!started ? (\r\n          <Space direction=\"vertical\" size=\"large\" style={{ marginTop: 24 }}>\r\n            {/* Board size input */}\r\n            <div>\r\n              <Text strong>Board Size:</Text>\r\n              <InputNumber\r\n                min={3}\r\n                max={100}\r\n                step={1}\r\n                value={boardSize}\r\n                onChange={(val) => setBoardSize(val || 3)}\r\n                style={{ marginLeft: 10 }}\r\n              />\r\n              <Text type=\"secondary\" style={{ marginLeft: 8 }}>\r\n                (Must be 3 or â‰¥10)\r\n              </Text>\r\n            </div>\r\n\r\n            {/* Show win condition text */}\r\n            <div>\r\n              <Text strong>Win Condition:</Text>\r\n              <Text style={{ marginLeft: 10 }}>\r\n                {boardSize === 3 ? 'Reach 3 in a row' : 'Reach 5 in a row'}\r\n              </Text>\r\n            </div>\r\n\r\n            {/* Block rule toggle (only for large boards) */}\r\n            <div>\r\n              <Text strong>Block Both Sides Rule:</Text>\r\n              <Switch\r\n                checked={blockBothSides}\r\n                disabled={boardSize < 10}\r\n                onChange={setBlockBothSides}\r\n                style={{ marginLeft: 10 }}\r\n              />\r\n              <Text type=\"secondary\" style={{ marginLeft: 8 }}>\r\n                {boardSize < 10\r\n                  ? 'Only available for board â‰¥10'\r\n                  : blockBothSides\r\n                  ? 'Enabled'\r\n                  : 'Disabled'}\r\n              </Text>\r\n            </div>\r\n\r\n            {/* Start button */}\r\n            <Button type=\"primary\" size=\"large\" onClick={startGame}>\r\n              Start Game\r\n            </Button>\r\n          </Space>\r\n        ) : (\r\n          <>\r\n            {/* Board rendering */}\r\n            {/* Board rendering */}\r\n            <div\r\n              className=\"tic-board\"\r\n              style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: `repeat(${boardSize}, auto)`,\r\n                ['--board-size' as any]: boardSize, // ðŸ‘ˆ dynamic CSS var for scaling\r\n                gap: 4,\r\n                marginTop: 20,\r\n                justifyContent: 'center',\r\n              }}\r\n            >\r\n              {board.map((row, rIdx) =>\r\n                row.map((cell, cIdx) => (\r\n                  <Button\r\n                    key={`${rIdx}-${cIdx}`}\r\n                    className=\"tic-cell\"\r\n                    onClick={() => handleClick(rIdx, cIdx)}\r\n                    style={{\r\n                      color: cell === 'X' ? '#ff7875' : '#69c0ff',\r\n                    }}\r\n                  >\r\n                    {cell}\r\n                  </Button>\r\n                )),\r\n              )}\r\n            </div>\r\n\r\n            {/* Game status */}\r\n            <div style={{ marginTop: 20 }}>\r\n              {!winner ? (\r\n                <Title level={4}>Next Player: {currentPlayer}</Title>\r\n              ) : (\r\n                <Title level={4} style={{ color: winner === 'Draw' ? '#999' : '#52c41a' }}>\r\n                  {winner === 'Draw' ? 'Draw!' : `Winner: ${winner}`}\r\n                </Title>\r\n              )}\r\n            </div>\r\n\r\n            {/* Game control buttons */}\r\n            <Space style={{ marginTop: 16 }}>\r\n              <Button onClick={startGame}>Restart</Button>\r\n              <Button danger onClick={resetGame}>\r\n                New Game Setup\r\n              </Button>\r\n            </Space>\r\n          </>\r\n        )}\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicTacToePage;\r\n"],"names":[],"mappings":"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"}