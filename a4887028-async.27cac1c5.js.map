{"version":3,"sources":["node_modules/@ant-design/icons-svg/es/asn/GoogleOutlined.js","node_modules/@ant-design/icons/es/icons/GoogleOutlined.js","config/envConfig.tsx","src/pages/GoogleDrive/hooks/useGoogleAuth.ts","src/pages/GoogleDrive/utils/driveApi.ts","src/pages/GoogleDrive/hooks/useDriveApi.ts","node_modules/@ant-design/icons/es/icons/FolderOutlined.js","node_modules/@ant-design/icons-svg/es/asn/FilePdfOutlined.js","node_modules/@ant-design/icons/es/icons/FilePdfOutlined.js","src/pages/GoogleDrive/DriveList.tsx","src/pages/GoogleDrive/DriveDetail.tsx","src/pages/GoogleDrive/DrivePreview.tsx","src/pages/GoogleDrive/components/UploadControl.tsx","src/pages/GoogleDrive/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar GoogleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M881 442.4H519.7v148.5h206.4c-8.9 48-35.9 88.6-76.6 115.8-34.4 23-78.3 36.6-129.9 36.6-99.9 0-184.4-67.5-214.6-158.2-7.6-23-12-47.6-12-72.9s4.4-49.9 12-72.9c30.3-90.6 114.8-158.1 214.7-158.1 56.3 0 106.8 19.4 146.6 57.4l110-110.1c-66.5-62-153.2-100-256.6-100-149.9 0-279.6 86-342.7 211.4-26 51.8-40.8 110.4-40.8 172.4S151 632.8 177 684.6C240.1 810 369.8 896 519.7 896c103.6 0 190.4-34.4 253.8-93 72.5-66.8 114.4-165.2 114.4-282.1 0-27.2-2.4-53.3-6.9-78.5z\" } }] }, \"name\": \"google\", \"theme\": \"outlined\" };\nexport default GoogleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport GoogleOutlinedSvg from \"@ant-design/icons-svg/es/asn/GoogleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar GoogleOutlined = function GoogleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: GoogleOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(GoogleOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'GoogleOutlined';\n}\nexport default RefIcon;","const ENV = { ...process.env, ...window['env'] };\r\n\r\nconst envConfig = {\r\n  reCaptchaKey: ENV.REACT_APP_SITE_KEY || '6LdcMO4qAAAAAImNBNufpkw6wQTCeu-pfYZAKWap',\r\n  googleClientId:\r\n    ENV.REACT_APP_GOOGLE_CLIENT_ID ||\r\n    '413586944281-dcb5psdo92s8ch6ee66a4uoaf82s3gja.apps.googleusercontent.com',\r\n};\r\nexport default envConfig;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport envConfig from '../../../../config/envConfig';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    google?: any;\r\n  }\r\n}\r\n\r\nconst CLIENT_ID = envConfig.googleClientId;\r\nconst SCOPES =\r\n  'openid profile email https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/drive.metadata.readonly';\r\n\r\ninterface GoogleUser {\r\n  name: string;\r\n  email: string;\r\n  picture: string;\r\n}\r\n\r\nexport const useGoogleAuth = () => {\r\n  const [tokenClient, setTokenClient] = useState<any>(null);\r\n  const [accessToken, setAccessToken] = useState<string | null>(null);\r\n  const [user, setUser] = useState<GoogleUser | null>(null);\r\n  const [expiresAt, setExpiresAt] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = 'https://accounts.google.com/gsi/client';\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.onload = () => {\r\n      if (window.google && CLIENT_ID) {\r\n        const client = window.google.accounts.oauth2.initTokenClient({\r\n          client_id: CLIENT_ID,\r\n          scope: SCOPES,\r\n          callback: (response: any) => {\r\n            console.log('Google Auth Response:', response);\r\n            if (response.access_token) {\r\n              setAccessToken(response.access_token);\r\n              const expiresIn = Number(response.expires_in);\r\n              setExpiresAt(Date.now() + expiresIn * 1000);\r\n              fetchUserInfo(response.access_token);\r\n            } else {\r\n              console.error('No access token in response', response);\r\n            }\r\n          },\r\n        });\r\n        setTokenClient(client);\r\n      }\r\n    };\r\n    document.body.appendChild(script);\r\n    return () => {\r\n      document.body.removeChild(script);\r\n    };\r\n  }, []);\r\n\r\n  const fetchUserInfo = async (token: string) => {\r\n    try {\r\n      console.log('Fetching user info with token:', token.substring(0, 10) + '...');\r\n      const res = await fetch('https://www.googleapis.com/oauth2/v3/userinfo', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        console.log('User Info:', data);\r\n        setUser({\r\n          name: data.name,\r\n          email: data.email,\r\n          picture: data.picture,\r\n        });\r\n      } else {\r\n        console.error('Failed to fetch user info:', res.status, res.statusText);\r\n        const errorText = await res.text();\r\n        console.error('Error details:', errorText);\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to fetch user info', e);\r\n    }\r\n  };\r\n\r\n  const signIn = useCallback(() => {\r\n    if (tokenClient) {\r\n      tokenClient.requestAccessToken();\r\n    }\r\n  }, [tokenClient]);\r\n\r\n  const signOut = useCallback(() => {\r\n    if (window.google && accessToken) {\r\n      window.google.accounts.oauth2.revoke(accessToken, () => {\r\n        setAccessToken(null);\r\n        setUser(null);\r\n      });\r\n    } else {\r\n      setAccessToken(null);\r\n      setUser(null);\r\n    }\r\n  }, [accessToken]);\r\n\r\n  return {\r\n    user,\r\n    isSignedIn: !!accessToken,\r\n    accessToken,\r\n    signIn,\r\n    signOut,\r\n  };\r\n};\r\n","import { DriveFile, DriveListResponse } from '../types';\r\n\r\nconst DRIVE_API_BASE = 'https://www.googleapis.com/drive/v3';\r\nconst UPLOAD_API_BASE = 'https://www.googleapis.com/upload/drive/v3';\r\n\r\nexport const buildListQuery = (\r\n  q: string = '',\r\n  pageSize: number = 20,\r\n  pageToken: string = '',\r\n  orderBy: string = 'folder,name',\r\n) => {\r\n  const params = new URLSearchParams({\r\n    pageSize: pageSize.toString(),\r\n    fields:\r\n      'nextPageToken, files(id, name, mimeType, size, thumbnailLink, iconLink, createdTime, modifiedTime, parents, owners, capabilities, webViewLink, trashed)',\r\n    orderBy,\r\n    q: q || 'trashed = false',\r\n  });\r\n  if (pageToken) params.append('pageToken', pageToken);\r\n  return params.toString();\r\n};\r\n\r\nexport const listFiles = async (token: string, queryParams: string): Promise<DriveListResponse> => {\r\n  const response = await fetch(`${DRIVE_API_BASE}/files?${queryParams}`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  if (!response.ok) {\r\n    const errorText = await response.text();\r\n    console.error('Drive API List Error:', response.status, errorText);\r\n    throw new Error(`Drive API Error: ${response.status} ${response.statusText} - ${errorText}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\nexport const getFileMetadata = async (token: string, fileId: string): Promise<DriveFile> => {\r\n  const response = await fetch(\r\n    `${DRIVE_API_BASE}/files/${fileId}?fields=id,name,mimeType,size,createdTime,modifiedTime,parents,owners,capabilities,webViewLink,thumbnailLink,iconLink`,\r\n    { headers: { Authorization: `Bearer ${token}` } },\r\n  );\r\n  if (!response.ok) throw new Error('Failed to fetch file metadata');\r\n  return response.json();\r\n};\r\n\r\nexport const downloadToBlob = async (token: string, fileId: string): Promise<Blob> => {\r\n  const response = await fetch(`${DRIVE_API_BASE}/files/${fileId}?alt=media`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  if (!response.ok) throw new Error('Download failed');\r\n  return response.blob();\r\n};\r\n\r\nexport const startResumableUpload = async (\r\n  token: string,\r\n  file: File,\r\n  parentId?: string,\r\n): Promise<string> => {\r\n  const metadata = {\r\n    name: file.name,\r\n    mimeType: file.type,\r\n    parents: parentId ? [parentId] : [],\r\n  };\r\n\r\n  const response = await fetch(`${UPLOAD_API_BASE}/files?uploadType=resumable`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(metadata),\r\n  });\r\n\r\n  if (!response.ok) throw new Error('Failed to start upload session');\r\n  const location = response.headers.get('Location');\r\n  if (!location) throw new Error('No upload location returned');\r\n  return location;\r\n};\r\n\r\nexport const uploadChunk = async (\r\n  sessionUri: string,\r\n  chunk: Blob,\r\n  start: number,\r\n  totalSize: number,\r\n) => {\r\n  const end = start + chunk.size - 1;\r\n  const response = await fetch(sessionUri, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Range': `bytes ${start}-${end}/${totalSize}`,\r\n    },\r\n    body: chunk,\r\n  });\r\n\r\n  // 308 Resume Incomplete is normal for chunks\r\n  if (response.status !== 308 && !response.ok) {\r\n    throw new Error('Chunk upload failed');\r\n  }\r\n  return response;\r\n};\r\n","import { useCallback } from 'react';\r\nimport { message } from 'antd';\r\nimport {\r\n  listFiles,\r\n  getFileMetadata,\r\n  downloadToBlob,\r\n  startResumableUpload,\r\n  uploadChunk,\r\n  buildListQuery,\r\n} from '../utils/driveApi';\r\nimport { DriveFile, DriveListResponse } from '../types';\r\n\r\nexport const useDriveApi = (accessToken: string | null) => {\r\n  const list = useCallback(\r\n    async (folderId: string = 'root', pageToken?: string, orderBy?: string) => {\r\n      if (!accessToken) throw new Error('Not authenticated');\r\n      const q = `'${folderId}' in parents and trashed = false`;\r\n      const query = buildListQuery(q, 20, pageToken, orderBy);\r\n      return listFiles(accessToken, query);\r\n    },\r\n    [accessToken],\r\n  );\r\n\r\n  const getMetadata = useCallback(\r\n    async (fileId: string) => {\r\n      if (!accessToken) throw new Error('Not authenticated');\r\n      return getFileMetadata(accessToken, fileId);\r\n    },\r\n    [accessToken],\r\n  );\r\n\r\n  const download = useCallback(\r\n    async (fileId: string, fileName: string) => {\r\n      if (!accessToken) throw new Error('Not authenticated');\r\n      try {\r\n        const blob = await downloadToBlob(accessToken, fileId);\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = fileName;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n      } catch (e) {\r\n        message.error('Download failed');\r\n        console.error(e);\r\n      }\r\n    },\r\n    [accessToken],\r\n  );\r\n\r\n  const upload = useCallback(\r\n    async (file: File, parentId: string = 'root', onProgress?: (percent: number) => void) => {\r\n      if (!accessToken) throw new Error('Not authenticated');\r\n      try {\r\n        const sessionUri = await startResumableUpload(accessToken, file, parentId);\r\n        const CHUNK_SIZE = 256 * 1024; // 256KB chunks\r\n        let start = 0;\r\n        const total = file.size;\r\n\r\n        while (start < total) {\r\n          const chunk = file.slice(start, start + CHUNK_SIZE);\r\n          await uploadChunk(sessionUri, chunk, start, total);\r\n          start += chunk.size;\r\n          if (onProgress) onProgress(Math.round((start / total) * 100));\r\n        }\r\n        message.success('Upload complete');\r\n      } catch (e) {\r\n        message.error('Upload failed');\r\n        console.error(e);\r\n      }\r\n    },\r\n    [accessToken],\r\n  );\r\n\r\n  return {\r\n    list,\r\n    getMetadata,\r\n    download,\r\n    upload,\r\n  };\r\n};\r\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FolderOutlinedSvg from \"@ant-design/icons-svg/es/asn/FolderOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar FolderOutlined = function FolderOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: FolderOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(FolderOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'FolderOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar FilePdfOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z\" } }] }, \"name\": \"file-pdf\", \"theme\": \"outlined\" };\nexport default FilePdfOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FilePdfOutlinedSvg from \"@ant-design/icons-svg/es/asn/FilePdfOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar FilePdfOutlined = function FilePdfOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: FilePdfOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(FilePdfOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'FilePdfOutlined';\n}\nexport default RefIcon;","import React from 'react';\r\nimport { Table, Button, Space, Tooltip, Typography } from 'antd';\r\nimport {\r\n  FileOutlined,\r\n  FolderOutlined,\r\n  FileImageOutlined,\r\n  FilePdfOutlined,\r\n  EyeOutlined,\r\n  InfoCircleOutlined,\r\n  DownloadOutlined,\r\n} from '@ant-design/icons';\r\nimport { DriveFile } from './types';\r\n\r\nconst { Text } = Typography;\r\n\r\ninterface DriveListProps {\r\n  files: DriveFile[];\r\n  loading: boolean;\r\n  onFolderClick: (file: DriveFile) => void;\r\n  onPreview: (file: DriveFile) => void;\r\n  onDetail: (file: DriveFile) => void;\r\n  onLoadMore: () => void;\r\n  hasMore: boolean;\r\n}\r\n\r\nconst getIcon = (mimeType: string) => {\r\n  if (mimeType === 'application/vnd.google-apps.folder')\r\n    return <FolderOutlined style={{ color: '#faad14' }} />;\r\n  if (mimeType.includes('image')) return <FileImageOutlined style={{ color: '#52c41a' }} />;\r\n  if (mimeType.includes('pdf')) return <FilePdfOutlined style={{ color: '#f5222d' }} />;\r\n  return <FileOutlined />;\r\n};\r\n\r\nconst DriveList: React.FC<DriveListProps> = ({\r\n  files,\r\n  loading,\r\n  onFolderClick,\r\n  onPreview,\r\n  onDetail,\r\n  onLoadMore,\r\n  hasMore,\r\n}) => {\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text: string, record: DriveFile) => (\r\n        <Space\r\n          style={{ cursor: 'pointer' }}\r\n          onClick={() => {\r\n            if (record.mimeType === 'application/vnd.google-apps.folder') {\r\n              onFolderClick(record);\r\n            } else {\r\n              onPreview(record);\r\n            }\r\n          }}\r\n        >\r\n          {getIcon(record.mimeType)}\r\n          <Text>{text}</Text>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Size',\r\n      dataIndex: 'size',\r\n      key: 'size',\r\n      width: 120,\r\n      render: (size: string) => (size ? (parseInt(size) / 1024 / 1024).toFixed(2) + ' MB' : '-'),\r\n    },\r\n    {\r\n      title: 'Modified',\r\n      dataIndex: 'modifiedTime',\r\n      key: 'modifiedTime',\r\n      width: 200,\r\n      render: (time: string) => new Date(time).toLocaleString(),\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      width: 150,\r\n      render: (_: any, record: DriveFile) => (\r\n        <Space>\r\n          <Tooltip title=\"Preview\">\r\n            <Button type=\"text\" icon={<EyeOutlined />} onClick={() => onPreview(record)} />\r\n          </Tooltip>\r\n          <Tooltip title=\"Details\">\r\n            <Button type=\"text\" icon={<InfoCircleOutlined />} onClick={() => onDetail(record)} />\r\n          </Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Table\r\n      dataSource={files}\r\n      columns={columns}\r\n      rowKey=\"id\"\r\n      loading={loading}\r\n      pagination={false}\r\n      footer={() =>\r\n        hasMore ? (\r\n          <div style={{ textAlign: 'center' }}>\r\n            <Button onClick={onLoadMore} loading={loading}>\r\n              Load More\r\n            </Button>\r\n          </div>\r\n        ) : null\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default DriveList;\r\n","import React from 'react';\r\nimport { Drawer, Descriptions, Button, Space, Image, Typography } from 'antd';\r\nimport { DownloadOutlined, CopyOutlined, LinkOutlined } from '@ant-design/icons';\r\nimport { DriveFile } from './types';\r\nimport { useDriveApi } from './hooks/useDriveApi';\r\n\r\ninterface DriveDetailProps {\r\n  file: DriveFile | null;\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  accessToken: string | null;\r\n}\r\n\r\nconst DriveDetail: React.FC<DriveDetailProps> = ({ file, visible, onClose, accessToken }) => {\r\n  const { download } = useDriveApi(accessToken);\r\n\r\n  if (!file) return null;\r\n\r\n  return (\r\n    <Drawer title=\"File Details\" placement=\"right\" onClose={onClose} open={visible} width={400}>\r\n      <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\r\n        <div style={{ textAlign: 'center' }}>\r\n          {file.thumbnailLink ? (\r\n            <Image src={file.thumbnailLink} alt={file.name} style={{ maxHeight: 200 }} />\r\n          ) : (\r\n            <div\r\n              style={{\r\n                height: 100,\r\n                background: '#f5f5f5',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n              }}\r\n            >\r\n              No Preview\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <Descriptions column={1} bordered>\r\n          <Descriptions.Item label=\"Name\">{file.name}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Type\">{file.mimeType}</Descriptions.Item>\r\n          <Descriptions.Item label=\"Size\">\r\n            {file.size ? (parseInt(file.size) / 1024 / 1024).toFixed(2) + ' MB' : '-'}\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Created\">\r\n            {new Date(file.createdTime || '').toLocaleString()}\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Modified\">\r\n            {new Date(file.modifiedTime || '').toLocaleString()}\r\n          </Descriptions.Item>\r\n          <Descriptions.Item label=\"Owner\">\r\n            {file.owners?.map((o) => o.displayName).join(', ')}\r\n          </Descriptions.Item>\r\n        </Descriptions>\r\n\r\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n          <Button block icon={<DownloadOutlined />} onClick={() => download(file.id, file.name)}>\r\n            Download\r\n          </Button>\r\n          <Button block icon={<LinkOutlined />} href={file.webViewLink} target=\"_blank\">\r\n            Open in Drive\r\n          </Button>\r\n        </Space>\r\n      </Space>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default DriveDetail;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Modal, Spin, Button, Result } from 'antd';\r\nimport { DriveFile } from './types';\r\nimport { downloadToBlob } from './utils/driveApi';\r\n\r\ninterface DrivePreviewProps {\r\n  file: DriveFile | null;\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  accessToken: string | null;\r\n}\r\n\r\nconst DrivePreview: React.FC<DrivePreviewProps> = ({ file, visible, onClose, accessToken }) => {\r\n  const [contentUrl, setContentUrl] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (visible && file && accessToken) {\r\n      loadPreview();\r\n    } else {\r\n      setContentUrl(null);\r\n      setError(null);\r\n    }\r\n  }, [visible, file, accessToken]);\r\n\r\n  const loadPreview = async () => {\r\n    if (!file || !accessToken) return;\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (file.mimeType.startsWith('image/')) {\r\n        // For images, download blob and show\r\n        const blob = await downloadToBlob(accessToken, file.id);\r\n        const url = URL.createObjectURL(blob);\r\n        setContentUrl(url);\r\n      } else if (file.mimeType === 'application/pdf') {\r\n        // For PDF, download blob and show in iframe\r\n        const blob = await downloadToBlob(accessToken, file.id);\r\n        const url = URL.createObjectURL(blob);\r\n        setContentUrl(url);\r\n      } else {\r\n        // Fallback to webViewLink or not supported\r\n        setError('Preview not supported for this file type.');\r\n      }\r\n    } catch (e) {\r\n      setError('Failed to load preview.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (loading) return <Spin size=\"large\" />;\r\n    if (error)\r\n      return (\r\n        <Result\r\n          status=\"info\"\r\n          title=\"Preview Unavailable\"\r\n          subTitle={error}\r\n          extra={\r\n            <Button type=\"primary\" href={file?.webViewLink} target=\"_blank\">\r\n              Open in Google Drive\r\n            </Button>\r\n          }\r\n        />\r\n      );\r\n\r\n    if (file?.mimeType.startsWith('image/')) {\r\n      return (\r\n        <img\r\n          src={contentUrl || ''}\r\n          alt={file.name}\r\n          style={{ maxWidth: '100%', maxHeight: '80vh' }}\r\n        />\r\n      );\r\n    }\r\n    if (file?.mimeType === 'application/pdf') {\r\n      return (\r\n        <iframe src={contentUrl || ''} style={{ width: '100%', height: '80vh', border: 'none' }} />\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={file?.name}\r\n      open={visible}\r\n      onCancel={onClose}\r\n      footer={null}\r\n      width={800}\r\n      centered\r\n      destroyOnClose\r\n    >\r\n      <div\r\n        style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: 300 }}\r\n      >\r\n        {renderContent()}\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default DrivePreview;\r\n","import React, { useState } from 'react';\r\nimport { Modal, Upload, Progress, Button, Typography, message } from 'antd';\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport { useDriveApi } from '../hooks/useDriveApi';\r\n\r\nconst { Dragger } = Upload;\r\nconst { Text } = Typography;\r\n\r\ninterface UploadControlProps {\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  parentId: string;\r\n  accessToken: string | null;\r\n  onComplete: () => void;\r\n}\r\n\r\nconst UploadControl: React.FC<UploadControlProps> = ({\r\n  visible,\r\n  onClose,\r\n  parentId,\r\n  accessToken,\r\n  onComplete,\r\n}) => {\r\n  const { upload } = useDriveApi(accessToken);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [currentFile, setCurrentFile] = useState<string>('');\r\n\r\n  const handleUpload = async (file: File) => {\r\n    setUploading(true);\r\n    setCurrentFile(file.name);\r\n    setProgress(0);\r\n    try {\r\n      await upload(file, parentId, (percent) => setProgress(percent));\r\n      message.success(`${file.name} uploaded successfully`);\r\n      onComplete();\r\n    } catch (e) {\r\n      message.error(`Failed to upload ${file.name}`);\r\n    } finally {\r\n      setUploading(false);\r\n      setCurrentFile('');\r\n      setProgress(0);\r\n    }\r\n    return false; // Prevent default upload behavior\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Upload Files\"\r\n      open={visible}\r\n      onCancel={!uploading ? onClose : undefined}\r\n      footer={[\r\n        <Button key=\"close\" onClick={onClose} disabled={uploading}>\r\n          Close\r\n        </Button>,\r\n      ]}\r\n    >\r\n      <Dragger\r\n        beforeUpload={handleUpload}\r\n        showUploadList={false}\r\n        disabled={uploading}\r\n        multiple={false} // Simple sequential upload for now\r\n      >\r\n        <p className=\"ant-upload-drag-icon\">\r\n          <InboxOutlined />\r\n        </p>\r\n        <p className=\"ant-upload-text\">Click or drag file to this area to upload</p>\r\n        <p className=\"ant-upload-hint\">\r\n          Support for a single or bulk upload. Strictly prohibit from uploading company data or\r\n          other band files\r\n        </p>\r\n      </Dragger>\r\n\r\n      {uploading && (\r\n        <div style={{ marginTop: 16 }}>\r\n          <Text>Uploading {currentFile}...</Text>\r\n          <Progress percent={progress} status=\"active\" />\r\n        </div>\r\n      )}\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default UploadControl;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PageContainer } from '@ant-design/pro-components';\r\nimport { Button, Card, Space, Breadcrumb, Avatar, Dropdown, Menu, Typography } from 'antd';\r\nimport {\r\n  GoogleOutlined,\r\n  LogoutOutlined,\r\n  FolderAddOutlined,\r\n  CloudUploadOutlined,\r\n} from '@ant-design/icons';\r\nimport { useGoogleAuth } from './hooks/useGoogleAuth';\r\nimport { useDriveApi } from './hooks/useDriveApi';\r\nimport DriveList from './DriveList';\r\nimport DriveDetail from './DriveDetail';\r\nimport DrivePreview from './DrivePreview';\r\nimport UploadControl from './components/UploadControl';\r\nimport { DriveFile } from './types';\r\n\r\nconst GoogleDrivePage: React.FC = () => {\r\n  const { user, isSignedIn, accessToken, signIn, signOut } = useGoogleAuth();\r\n  const { list } = useDriveApi(accessToken);\r\n\r\n  const [currentFolderId, setCurrentFolderId] = useState<string>('root');\r\n  const [folderPath, setFolderPath] = useState<{ id: string; name: string }[]>([\r\n    { id: 'root', name: 'My Drive' },\r\n  ]);\r\n  const [files, setFiles] = useState<DriveFile[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [nextPageToken, setNextPageToken] = useState<string | undefined>(undefined);\r\n\r\n  const [selectedFile, setSelectedFile] = useState<DriveFile | null>(null);\r\n  const [previewFile, setPreviewFile] = useState<DriveFile | null>(null);\r\n  const [showUpload, setShowUpload] = useState(false);\r\n\r\n  const loadFiles = async (folderId: string, token?: string) => {\r\n    if (!isSignedIn) return;\r\n    setLoading(true);\r\n    try {\r\n      const res = await list(folderId, token);\r\n      setFiles(token ? [...files, ...res.files] : res.files);\r\n      setNextPageToken(res.nextPageToken);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSignedIn) {\r\n      loadFiles(currentFolderId);\r\n    } else {\r\n      setFiles([]);\r\n    }\r\n  }, [isSignedIn, currentFolderId]);\r\n\r\n  const handleFolderClick = (folder: DriveFile) => {\r\n    setCurrentFolderId(folder.id);\r\n    setFolderPath([...folderPath, { id: folder.id, name: folder.name }]);\r\n  };\r\n\r\n  const handleBreadcrumbClick = (index: number) => {\r\n    const newPath = folderPath.slice(0, index + 1);\r\n    setFolderPath(newPath);\r\n    setCurrentFolderId(newPath[newPath.length - 1].id);\r\n  };\r\n\r\n  const userMenu = (\r\n    <Menu\r\n      items={[{ key: 'logout', icon: <LogoutOutlined />, label: 'Sign Out', onClick: signOut }]}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <PageContainer\r\n      header={{\r\n        title: 'Google Drive Manager',\r\n        extra: [\r\n          isSignedIn ? (\r\n            <Space key=\"actions\">\r\n              <Button icon={<CloudUploadOutlined />} onClick={() => setShowUpload(true)}>\r\n                Upload\r\n              </Button>\r\n              <Dropdown overlay={userMenu}>\r\n                <Space style={{ cursor: 'pointer' }}>\r\n                  <Avatar src={user?.picture} icon={<GoogleOutlined />} />\r\n                  <Typography.Text>{user?.name}</Typography.Text>\r\n                </Space>\r\n              </Dropdown>\r\n            </Space>\r\n          ) : (\r\n            <Button key=\"login\" type=\"primary\" icon={<GoogleOutlined />} onClick={signIn}>\r\n              Sign in with Google\r\n            </Button>\r\n          ),\r\n        ],\r\n      }}\r\n    >\r\n      <Card>\r\n        {isSignedIn ? (\r\n          <>\r\n            <Breadcrumb style={{ marginBottom: 16 }}>\r\n              {folderPath.map((folder, index) => (\r\n                <Breadcrumb.Item\r\n                  key={folder.id}\r\n                  onClick={() => handleBreadcrumbClick(index)}\r\n                  href=\"#\"\r\n                >\r\n                  {folder.name}\r\n                </Breadcrumb.Item>\r\n              ))}\r\n            </Breadcrumb>\r\n\r\n            <DriveList\r\n              files={files}\r\n              loading={loading}\r\n              onFolderClick={handleFolderClick}\r\n              onPreview={(file) => setPreviewFile(file)}\r\n              onDetail={(file) => setSelectedFile(file)}\r\n              onLoadMore={() => loadFiles(currentFolderId, nextPageToken)}\r\n              hasMore={!!nextPageToken}\r\n            />\r\n          </>\r\n        ) : (\r\n          <div style={{ textAlign: 'center', padding: '50px' }}>\r\n            <GoogleOutlined style={{ fontSize: 48, color: '#1890ff', marginBottom: 16 }} />\r\n            <Typography.Title level={4}>\r\n              Please sign in to access your Google Drive\r\n            </Typography.Title>\r\n          </div>\r\n        )}\r\n      </Card>\r\n\r\n      <DriveDetail\r\n        file={selectedFile}\r\n        visible={!!selectedFile}\r\n        onClose={() => setSelectedFile(null)}\r\n        accessToken={accessToken}\r\n      />\r\n\r\n      <DrivePreview\r\n        file={previewFile}\r\n        visible={!!previewFile}\r\n        onClose={() => setPreviewFile(null)}\r\n        accessToken={accessToken}\r\n      />\r\n\r\n      <UploadControl\r\n        visible={showUpload}\r\n        onClose={() => setShowUpload(false)}\r\n        parentId={currentFolderId}\r\n        accessToken={accessToken}\r\n        onComplete={() => loadFiles(currentFolderId)}\r\n      />\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default GoogleDrivePage;\r\n"],"names":[],"mappings":"0lBACI,EAAiB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,OAAQ,EAAG,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,ycAA0c,CAAE,EAAE,AAAC,EAAG,KAAQ,SAAU,MAAS,UAAW,2BCWhpB,EAAuB,EAAM,UAAU,CANtB,SAAwB,CAAK,CAAE,CAAG,EACrD,OAAoB,EAAM,aAAa,CAAC,SAAQ,CAAE,GAAA,SAAa,EAAC,GAAA,SAAa,EAAC,CAAC,EAAG,GAAQ,CAAC,EAAG,CAC5F,IAAK,EACL,KAAM,CACR,IACF,qDCXA,IAAM,EAAM,CAAE,GAAG,cAAQ,GAAG,CAAE,GAAG,OAAO,GAAM,AAAC,ECSzC,EAAY,ADPA,CAChB,aAAc,EAAI,kBAAkB,EAAI,2CACxC,eACE,EAAI,0BAA0B,EAC9B,0EACJ,ECE4B,cAAc,CAU7B,EAAgB,KAC3B,GAAM,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAM,MAC9C,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAgB,MACxD,CAAC,EAAM,EAAQ,CAAG,GAAA,UAAQ,EAAoB,MAC9C,CAAC,EAAW,EAAa,CAAG,GAAA,UAAQ,EAAS,GAEnD,GAAA,WAAS,EAAC,KACR,IAAM,EAAS,SAAS,aAAa,CAAC,UAyBtC,OAxBA,EAAO,GAAG,CAAG,yCACb,EAAO,KAAK,CAAG,CAAA,EACf,EAAO,KAAK,CAAG,CAAA,EACf,EAAO,MAAM,CAAG,KACV,OAAO,MAAM,EAAI,GAgBnB,EAfe,OAAO,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,CAC3D,UAAW,EACX,MAvBR,yKAwBQ,SAAU,AAAC,IAET,GADA,QAAQ,GAAG,CAAC,wBAAyB,GACjC,EAAS,YAAY,CAAE,CACzB,EAAe,EAAS,YAAY,EACpC,IAAM,EAAY,OAAO,EAAS,UAAU,EAC5C,EAAa,KAAK,GAAG,GAAK,AAAY,IAAZ,GAC1B,EAAc,EAAS,YAAY,EACrC,MACE,QAAQ,KAAK,CAAC,8BAA+B,GAEjD,CACF,IAGJ,EACA,SAAS,IAAI,CAAC,WAAW,CAAC,GACnB,KACL,SAAS,IAAI,CAAC,WAAW,CAAC,GAC5B,EACF,EAAG,EAAE,EAEL,IAAM,EAAgB,MAAO,IAC3B,GAAI,CACF,QAAQ,GAAG,CAAC,iCAAkC,EAAM,SAAS,CAAC,EAAG,IAAM,OACvE,IAAM,EAAM,MAAM,MAAM,gDAAiD,CACvE,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAM,CAAC,AAAC,CAC9C,GACA,GAAI,EAAI,EAAE,CAAE,CACV,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,QAAQ,GAAG,CAAC,aAAc,GAC1B,EAAQ,CACN,KAAM,EAAK,IAAI,CACf,MAAO,EAAK,KAAK,CACjB,QAAS,EAAK,OAAO,AACvB,GACF,KAAO,CACL,QAAQ,KAAK,CAAC,6BAA8B,EAAI,MAAM,CAAE,EAAI,UAAU,EACtE,IAAM,EAAY,MAAM,EAAI,IAAI,GAChC,QAAQ,KAAK,CAAC,iBAAkB,GAClC,CACF,CAAE,MAAO,EAAG,CACV,QAAQ,KAAK,CAAC,4BAA6B,GAC7C,CACF,EAEM,EAAS,GAAA,aAAW,EAAC,KACrB,GACF,EAAY,kBAAkB,GAElC,EAAG,CAAC,EAAY,EAEV,EAAU,GAAA,aAAW,EAAC,KACtB,OAAO,MAAM,EAAI,EACnB,OAAO,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,EAAa,KAChD,EAAe,MACf,EAAQ,MACV,IAEA,EAAe,MACf,EAAQ,OAEZ,EAAG,CAAC,EAAY,EAEhB,MAAO,CACL,KAAA,EACA,WAAY,CAAC,CAAC,EACd,YAAA,EACA,OAAA,EACA,QAAA,CACF,EACF,+BCvGA,IAAM,EAAiB,sCAGV,EAAiB,CAC5B,EAAY,EAAE,CACd,EAAmB,EAAE,CACrB,EAAoB,EAAE,CACtB,EAAkB,aAAa,IAE/B,IAAM,EAAS,IAAI,gBAAgB,CACjC,SAAU,EAAS,QAAQ,GAC3B,OACE,0JACF,QAAA,EACA,EAAG,GAAK,iBACV,GAEA,OADI,GAAW,EAAO,MAAM,CAAC,YAAa,GACnC,EAAO,QAAQ,GACxB,EAEa,EAAY,MAAO,EAAe,KAC7C,IAAM,EAAW,MAAM,MAAM,CAAC,EAAE,EAAe,OAAO,EAAE,EAAY,CAAC,CAAE,CACrE,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAM,CAAC,AAAC,CAC9C,GACA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,GAErC,MADA,QAAQ,KAAK,CAAC,wBAAyB,EAAS,MAAM,CAAE,GAClD,AAAI,MAAM,CAAC,iBAAiB,EAAE,EAAS,MAAM,CAAC,CAAC,EAAE,EAAS,UAAU,CAAC,GAAG,EAAE,EAAU,CAAC,EAC7F,CACA,OAAO,EAAS,IAAI,GACtB,EAEa,EAAkB,MAAO,EAAe,KACnD,IAAM,EAAW,MAAM,MACrB,CAAC,EAAE,EAAe,OAAO,EAAE,EAAO,qHAAqH,CAAC,CACxJ,CAAE,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAM,CAAC,AAAC,CAAE,GAElD,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,iCAClC,OAAO,EAAS,IAAI,GACtB,EAEa,EAAiB,MAAO,EAAe,KAClD,IAAM,EAAW,MAAM,MAAM,CAAC,EAAE,EAAe,OAAO,EAAE,EAAO,UAAU,CAAC,CAAE,CAC1E,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAM,CAAC,AAAC,CAC9C,GACA,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,mBAClC,OAAO,EAAS,IAAI,GACtB,EAEa,EAAuB,MAClC,EACA,EACA,KAEA,IAAM,EAAW,CACf,KAAM,EAAK,IAAI,CACf,SAAU,EAAK,IAAI,CACnB,QAAS,EAAW,CAAC,EAAS,CAAG,EAAE,AACrC,EAEM,EAAW,MAAM,MAAM,wEAAiD,CAC5E,OAAQ,OACR,QAAS,CACP,cAAe,CAAC,OAAO,EAAE,EAAM,CAAC,CAChC,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,MAAM,AAAI,MAAM,kCAClC,IAAM,EAAW,EAAS,OAAO,CAAC,GAAG,CAAC,YACtC,GAAI,CAAC,EAAU,MAAM,AAAI,MAAM,+BAC/B,OAAO,EACT,EAEa,EAAc,MACzB,EACA,EACA,EACA,KAEA,IAAM,EAAM,EAAQ,EAAM,IAAI,CAAG,EAC3B,EAAW,MAAM,MAAM,EAAY,CACvC,OAAQ,MACR,QAAS,CACP,gBAAiB,CAAC,MAAM,EAAE,EAAM,CAAC,EAAE,EAAI,CAAC,EAAE,EAAU,CAAC,AACvD,EACA,KAAM,CACR,GAGA,GAAI,AAAoB,MAApB,EAAS,MAAM,EAAY,CAAC,EAAS,EAAE,CACzC,MAAM,AAAI,MAAM,uBAElB,OAAO,EACT,ECrFa,EAAc,AAAC,IAC1B,IAAM,EAAO,GAAA,aAAW,EACtB,MAAO,EAAmB,MAAM,CAAE,EAAoB,KACpD,GAAI,CAAC,EAAa,MAAM,AAAI,MAAM,qBAGlC,OAAO,EAAU,EADH,EADJ,CAAC,CAAC,EAAE,EAAS,gCAAgC,CAAC,CACxB,GAAI,EAAW,IAEjD,EACA,CAAC,EAAY,EAwDf,MAAO,CACL,KAAA,EACA,YAvDkB,GAAA,aAAW,EAC7B,MAAO,IACL,GAAI,CAAC,EAAa,MAAM,AAAI,MAAM,qBAClC,OAAO,EAAgB,EAAa,GACtC,EACA,CAAC,EAAY,EAmDb,SAhDe,GAAA,aAAW,EAC1B,MAAO,EAAgB,KACrB,GAAI,CAAC,EAAa,MAAM,AAAI,MAAM,qBAClC,GAAI,CACF,IAAM,EAAO,MAAM,EAAe,EAAa,GACzC,EAAM,OAAO,GAAG,CAAC,eAAe,CAAC,GACjC,EAAI,SAAS,aAAa,CAAC,KACjC,EAAE,IAAI,CAAG,EACT,EAAE,QAAQ,CAAG,EACb,SAAS,IAAI,CAAC,WAAW,CAAC,GAC1B,EAAE,KAAK,GACP,OAAO,GAAG,CAAC,eAAe,CAAC,GAC3B,SAAS,IAAI,CAAC,WAAW,CAAC,GAC5B,CAAE,MAAO,EAAG,CACV,SAAO,CAAC,KAAK,CAAC,mBACd,QAAQ,KAAK,CAAC,GAChB,CACF,EACA,CAAC,EAAY,EA+Bb,OA5Ba,GAAA,aAAW,EACxB,MAAO,EAAY,EAAmB,MAAM,CAAE,KAC5C,GAAI,CAAC,EAAa,MAAM,AAAI,MAAM,qBAClC,GAAI,CACF,IAAM,EAAa,MAAM,EAAqB,EAAa,EAAM,GAE7D,EAAQ,EACN,EAAQ,EAAK,IAAI,CAEvB,KAAO,EAAQ,GAAO,CACpB,IAAM,EAAQ,EAAK,KAAK,CAAC,EAAO,EALf,QAMjB,MAAM,EAAY,EAAY,EAAO,EAAO,GAC5C,GAAS,EAAM,IAAI,CACf,GAAY,EAAW,KAAK,KAAK,CAAC,AAAC,EAAQ,EAAS,MAC1D,CACA,SAAO,CAAC,OAAO,CAAC,mBAClB,CAAE,MAAO,EAAG,CACV,SAAO,CAAC,KAAK,CAAC,iBACd,QAAQ,KAAK,CAAC,GAChB,CACF,EACA,CAAC,EAAY,CAQf,EACF,6GCtEI,GAAuB,EAAM,UAAU,CANtB,SAAwB,CAAK,CAAE,CAAG,EACrD,OAAoB,EAAM,aAAa,CAAC,SAAQ,CAAE,GAAA,SAAa,EAAC,GAAA,SAAa,EAAC,CAAC,EAAG,GAAQ,CAAC,EAAG,CAC5F,IAAK,EACL,KAAM,UAAiB,AACzB,IACF,+BCVI,GAAkB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,OAAQ,EAAG,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,6iCAA8iC,CAAE,EAAE,AAAC,EAAG,KAAQ,WAAY,MAAS,UAAW,ECWvvC,GAAuB,EAAM,UAAU,CANrB,SAAyB,CAAK,CAAE,CAAG,EACvD,OAAoB,EAAM,aAAa,CAAC,SAAQ,CAAE,GAAA,SAAa,EAAC,GAAA,SAAa,EAAC,CAAC,EAAG,GAAQ,CAAC,EAAG,CAC5F,IAAK,EACL,KAAM,EACR,IACF,2DCEA,GAAM,CAAE,KAAA,EAAI,CAAE,CAAG,SAAU,CAYrB,GAAU,AAAC,GACf,AAAI,AAAa,uCAAb,EACK,UAAC,IAAe,MAAO,CAAE,MAAO,SAAU,IAC/C,EAAS,QAAQ,CAAC,SAAiB,UAAC,UAAiB,EAAC,MAAO,CAAE,MAAO,SAAU,IAChF,EAAS,QAAQ,CAAC,OAAe,UAAC,IAAgB,MAAO,CAAE,MAAO,SAAU,IACzE,UAAC,SAAY,KAGhB,GAAsC,CAAC,CAC3C,MAAA,CAAK,CACL,QAAA,CAAO,CACP,cAAA,CAAa,CACb,UAAA,CAAS,CACT,SAAA,CAAQ,CACR,WAAA,CAAU,CACV,QAAA,CAAO,CACR,IACC,IAAM,EAAU,CACd,CACE,MAAO,OACP,UAAW,OACX,IAAK,OACL,OAAQ,CAAC,EAAc,IACrB,WAAC,SAAK,EACJ,MAAO,CAAE,OAAQ,SAAU,EAC3B,QAAS,KACH,AAAoB,uCAApB,EAAO,QAAQ,CACjB,EAAc,GAEd,EAAU,GAEd,YAEC,GAAQ,EAAO,QAAQ,EACxB,UAAC,aAAM,MAGb,EACA,CACE,MAAO,OACP,UAAW,OACX,IAAK,OACL,MAAO,IACP,OAAQ,AAAC,GAAkB,EAAO,AAAC,CAAA,SAAS,GAAQ,KAAO,IAAG,EAAG,OAAO,CAAC,GAAK,MAAQ,GACxF,EACA,CACE,MAAO,WACP,UAAW,eACX,IAAK,eACL,MAAO,IACP,OAAQ,AAAC,GAAiB,IAAI,KAAK,GAAM,cAAc,EACzD,EACA,CACE,MAAO,UACP,IAAK,UACL,MAAO,IACP,OAAQ,CAAC,EAAQ,IACf,WAAC,SAAK,YACJ,UAAC,SAAO,EAAC,MAAM,mBACb,UAAC,SAAM,EAAC,KAAK,OAAO,KAAM,UAAC,UAAW,KAAK,QAAS,IAAM,EAAU,OAEtE,UAAC,SAAO,EAAC,MAAM,mBACb,UAAC,SAAM,EAAC,KAAK,OAAO,KAAM,UAAC,UAAkB,KAAK,QAAS,IAAM,EAAS,SAIlF,EACD,CAED,MACE,UAAC,SAAK,EACJ,WAAY,EACZ,QAAS,EACT,OAAO,KACP,QAAS,EACT,WAAY,CAAA,EACZ,OAAQ,IACN,EACE,UAAC,OAAI,MAAO,CAAE,UAAW,QAAS,WAChC,UAAC,SAAM,EAAC,QAAS,EAAY,QAAS,WAAS,gBAI/C,OAIZ,kJCnGA,IAAM,GAA0C,CAAC,CAAE,KAAA,CAAI,CAAE,QAAA,CAAO,CAAE,QAAA,CAAO,CAAE,YAAA,CAAW,CAAE,QAuC3E,EAtCX,GAAM,CAAE,SAAA,CAAQ,CAAE,CAAG,EAAY,UAEjC,AAAK,EAGH,UAAC,UAAM,EAAC,MAAM,eAAe,UAAU,QAAQ,QAAS,EAAS,KAAM,EAAS,MAAO,aACrF,WAAC,SAAK,EAAC,UAAU,WAAW,MAAO,CAAE,MAAO,MAAO,EAAG,KAAK,kBACzD,UAAC,OAAI,MAAO,CAAE,UAAW,QAAS,WAC/B,EAAK,aAAa,CACjB,UAAC,UAAK,EAAC,IAAK,EAAK,aAAa,CAAE,IAAK,EAAK,IAAI,CAAE,MAAO,CAAE,UAAW,GAAI,IAExE,UAAC,OACC,MAAO,CACL,OAAQ,IACR,WAAY,UACZ,QAAS,OACT,WAAY,SACZ,eAAgB,QAClB,WACD,iBAML,WAAC,UAAY,EAAC,OAAQ,EAAG,QAAQ,cAC/B,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,gBAAQ,EAAK,IAAI,GAC1C,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,gBAAQ,EAAK,QAAQ,GAC9C,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,gBACtB,EAAK,IAAI,CAAG,AAAC,CAAA,SAAS,EAAK,IAAI,EAAI,KAAO,IAAG,EAAG,OAAO,CAAC,GAAK,MAAQ,MAExE,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,mBACtB,IAAI,KAAK,EAAK,WAAW,EAAI,IAAI,cAAc,KAElD,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,oBACtB,IAAI,KAAK,EAAK,YAAY,EAAI,IAAI,cAAc,KAEnD,UAAC,UAAY,CAAC,IAAI,EAAC,MAAM,yBACtB,EAAA,EAAK,MAAM,YAAX,SAAA,EAAa,GAAG,CAAC,AAAC,GAAM,EAAE,WAAW,EAAE,IAAI,CAAC,WAIjD,WAAC,SAAK,EAAC,UAAU,WAAW,MAAO,CAAE,MAAO,MAAO,YACjD,UAAC,SAAM,EAAC,KAAK,IAAC,KAAM,UAAC,UAAgB,KAAK,QAAS,IAAM,EAAS,EAAK,EAAE,CAAE,EAAK,IAAI,WAAG,aAGvF,UAAC,SAAM,EAAC,KAAK,IAAC,KAAM,UAAC,UAAY,KAAK,KAAM,EAAK,WAAW,CAAE,OAAO,kBAAS,0BA5CpE,KAmDpB,0FCvDA,IAAM,GAA4C,CAAC,CAAE,KAAA,CAAI,CAAE,QAAA,CAAO,CAAE,QAAA,CAAO,CAAE,YAAA,CAAW,CAAE,IACxF,GAAM,CAAC,EAAY,EAAc,CAAG,GAAA,UAAQ,EAAgB,MACtD,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAO,EAAS,CAAG,GAAA,UAAQ,EAAgB,MAElD,GAAA,WAAS,EAAC,KACJ,GAAW,GAAQ,EACrB,KAEA,EAAc,MACd,EAAS,OAEb,EAAG,CAAC,EAAS,EAAM,EAAY,EAE/B,IAAM,EAAc,UAClB,GAAI,AAAC,GAAS,GACd,EAAW,CAAA,GACX,EAAS,MAET,GAAI,CACF,GAAI,EAAK,QAAQ,CAAC,UAAU,CAAC,UAAW,CAEtC,IAAM,EAAO,MAAM,EAAe,EAAa,EAAK,EAAE,EAChD,EAAM,IAAI,eAAe,CAAC,GAChC,EAAc,GAChB,MAAO,GAAI,AAAkB,oBAAlB,EAAK,QAAQ,CAAwB,CAE9C,IAAM,EAAO,MAAM,EAAe,EAAa,EAAK,EAAE,EAChD,EAAM,IAAI,eAAe,CAAC,GAChC,EAAc,GAChB,MAEE,EAAS,6CAEb,CAAE,MAAO,EAAG,CACV,EAAS,2BACX,QAAU,CACR,EAAW,CAAA,GACb,EACF,EAmCA,MACE,UAAC,UAAK,EACJ,KAAK,OAAE,SAAA,EAAM,IAAI,CACjB,KAAM,EACN,SAAU,EACV,OAAQ,KACR,MAAO,IACP,QAAQ,IACR,cAAc,aAEd,UAAC,OACC,MAAO,CAAE,QAAS,OAAQ,eAAgB,SAAU,WAAY,SAAU,UAAW,GAAI,WA3C7F,AAAI,EAAgB,UAAC,UAAI,EAAC,KAAK,UAC3B,EAEA,UAAC,UAAM,EACL,OAAO,OACP,MAAM,sBACN,SAAU,EACV,MACE,UAAC,SAAM,EAAC,KAAK,UAAU,IAAI,OAAE,SAAA,EAAM,WAAW,CAAE,OAAO,kBAAS,kCAOpE,SAAA,EAAM,QAAQ,CAAC,UAAU,CAAC,WAE1B,UAAC,OACC,IAAK,GAAc,GACnB,IAAK,EAAK,IAAI,CACd,MAAO,CAAE,SAAU,OAAQ,UAAW,MAAO,IAI/C,OAAA,SAAA,EAAM,QAAQ,IAAK,kBAEnB,UAAC,UAAO,IAAK,GAAc,GAAI,MAAO,CAAE,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,IAGnF,SAoBX,0FClGA,GAAM,CAAE,QAAA,EAAO,CAAE,CAAG,UAAM,CACpB,CAAE,KAAA,EAAI,CAAE,CAAG,SAAU,CAUrB,GAA8C,CAAC,CACnD,QAAA,CAAO,CACP,QAAA,CAAO,CACP,SAAA,CAAQ,CACR,YAAA,CAAW,CACX,WAAA,CAAU,CACX,IACC,GAAM,CAAE,OAAA,CAAM,CAAE,CAAG,EAAY,GACzB,CAAC,EAAW,EAAa,CAAG,GAAA,UAAQ,EAAC,CAAA,GACrC,CAAC,EAAU,EAAY,CAAG,GAAA,UAAQ,EAAC,GACnC,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAS,IAEjD,EAAe,MAAO,IAC1B,EAAa,CAAA,GACb,EAAe,EAAK,IAAI,EACxB,EAAY,GACZ,GAAI,CACF,MAAM,EAAO,EAAM,EAAU,AAAC,GAAY,EAAY,IACtD,SAAO,CAAC,OAAO,CAAC,CAAC,EAAE,EAAK,IAAI,CAAC,sBAAsB,CAAC,EACpD,IACF,CAAE,MAAO,EAAG,CACV,SAAO,CAAC,KAAK,CAAC,CAAC,iBAAiB,EAAE,EAAK,IAAI,CAAC,CAAC,EAC/C,QAAU,CACR,EAAa,CAAA,GACb,EAAe,IACf,EAAY,GACd,CACA,MAAO,CAAA,EACT,EAEA,MACE,WAAC,UAAK,EACJ,MAAM,eACN,KAAM,EACN,SAAU,AAAC,EAAsB,KAAA,EAAV,EACvB,OAAQ,CACN,UAAC,SAAM,EAAa,QAAS,EAAS,SAAU,WAAW,SAA/C,SAGb,WAED,WAAC,IACC,aAAc,EACd,eAAgB,CAAA,EAChB,SAAU,EACV,SAAU,CAAA,YAEV,UAAC,KAAE,UAAU,gCACX,UAAC,UAAa,OAEhB,UAAC,KAAE,UAAU,2BAAkB,8CAC/B,UAAC,KAAE,UAAU,2BAAkB,8GAMhC,GACC,WAAC,OAAI,MAAO,CAAE,UAAW,EAAG,YAC1B,WAAC,cAAK,aAAW,EAAY,SAC7B,UAAC,UAAQ,EAAC,QAAS,EAAU,OAAO,iBAK9C,EChEM,GAA4B,KAChC,GAAM,CAAE,KAAA,CAAI,CAAE,WAAA,CAAU,CAAE,YAAA,CAAW,CAAE,OAAA,CAAM,CAAE,QAAA,CAAO,CAAE,CAAG,IACrD,CAAE,KAAA,CAAI,CAAE,CAAG,EAAY,GAEvB,CAAC,EAAiB,EAAmB,CAAG,GAAA,UAAQ,EAAS,QACzD,CAAC,EAAY,EAAc,CAAG,GAAA,UAAQ,EAAiC,CAC3E,CAAE,GAAI,OAAQ,KAAM,UAAW,EAChC,EACK,CAAC,EAAO,EAAS,CAAG,GAAA,UAAQ,EAAc,EAAE,EAC5C,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,CAAC,EAAe,EAAiB,CAAG,GAAA,UAAQ,EAAqB,KAAA,GAEjE,CAAC,EAAc,EAAgB,CAAG,GAAA,UAAQ,EAAmB,MAC7D,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAmB,MAC3D,CAAC,EAAY,EAAc,CAAG,GAAA,UAAQ,EAAC,CAAA,GAEvC,EAAY,MAAO,EAAkB,KACzC,GAAK,GACL,EAAW,CAAA,GACX,GAAI,CACF,IAAM,EAAM,MAAM,EAAK,EAAU,GACjC,EAAS,EAAQ,IAAI,KAAU,EAAI,KAAK,CAAC,CAAG,EAAI,KAAK,EACrD,EAAiB,EAAI,aAAa,EACpC,CAAE,MAAO,EAAG,CACV,QAAQ,KAAK,CAAC,GAChB,QAAU,CACR,EAAW,CAAA,GACb,EACF,EAEA,GAAA,WAAS,EAAC,KACJ,EACF,EAAU,GAEV,EAAS,EAAE,EAEf,EAAG,CAAC,EAAY,EAAgB,EAOhC,IAAM,EAAwB,AAAC,IAC7B,IAAM,EAAU,EAAW,KAAK,CAAC,EAAG,EAAQ,GAC5C,EAAc,GACd,EAAmB,CAAO,CAAC,EAAQ,MAAM,CAAG,EAAE,CAAC,EAAE,EACnD,EAEM,EACJ,UAAC,SAAI,EACH,MAAO,CAAC,CAAE,IAAK,SAAU,KAAM,UAAC,SAAc,KAAK,MAAO,WAAY,QAAS,CAAQ,EAAE,GAI7F,MACE,WAAC,eAAa,EACZ,OAAQ,CACN,MAAO,uBACP,MAAO,CACL,EACE,WAAC,SAAK,YACJ,UAAC,SAAM,EAAC,KAAM,UAAC,SAAmB,KAAK,QAAS,IAAM,EAAc,CAAA,YAAO,WAG3E,UAAC,SAAQ,EAAC,QAAS,WACjB,WAAC,SAAK,EAAC,MAAO,CAAE,OAAQ,SAAU,YAChC,UAAC,SAAM,EAAC,GAAG,OAAE,SAAA,EAAM,OAAO,CAAE,KAAM,UAAC,QACnC,UAAC,SAAU,CAAC,IAAI,iBAAE,SAAA,EAAM,IAAI,UAPvB,WAYX,UAAC,SAAM,EAAa,KAAK,UAAU,KAAM,UAAC,MAAmB,QAAS,WAAQ,uBAAlE,SAIf,AACH,YAEA,UAAC,SAAI,WACF,EACC,iCACE,UAAC,SAAU,EAAC,MAAO,CAAE,aAAc,EAAG,WACnC,EAAW,GAAG,CAAC,CAAC,EAAQ,IACvB,UAAC,SAAU,CAAC,IAAI,EAEd,QAAS,IAAM,EAAsB,GACrC,KAAK,aAEJ,EAAO,IAAI,EAJP,EAAO,EAAE,KASpB,UAAC,IACC,MAAO,EACP,QAAS,EACT,cA5Dc,AAAC,IACzB,EAAmB,EAAO,EAAE,EAC5B,EAAc,IAAI,EAAY,CAAE,GAAI,EAAO,EAAE,CAAE,KAAM,EAAO,IAAI,AAAC,EAAE,EACrE,EA0DY,UAAW,AAAC,GAAS,EAAe,GACpC,SAAU,AAAC,GAAS,EAAgB,GACpC,WAAY,IAAM,EAAU,EAAiB,GAC7C,QAAS,CAAC,CAAC,OAIf,WAAC,OAAI,MAAO,CAAE,UAAW,SAAU,QAAS,MAAO,YACjD,UAAC,GAAe,MAAO,CAAE,SAAU,GAAI,MAAO,UAAW,aAAc,EAAG,IAC1E,UAAC,SAAU,CAAC,KAAK,EAAC,MAAO,WAAG,oDAOlC,UAAC,IACC,KAAM,EACN,QAAS,CAAC,CAAC,EACX,QAAS,IAAM,EAAgB,MAC/B,YAAa,IAGf,UAAC,IACC,KAAM,EACN,QAAS,CAAC,CAAC,EACX,QAAS,IAAM,EAAe,MAC9B,YAAa,IAGf,UAAC,IACC,QAAS,EACT,QAAS,IAAM,EAAc,CAAA,GAC7B,SAAU,EACV,YAAa,EACb,WAAY,IAAM,EAAU,QAIpC"}